var Sp=(rt,et)=>()=>(et||rt((et={exports:{}}).exports,et),et.exports);var Tp=Sp((exports,module)=>{(function(){const et=document.createElement("link").relList;if(et&&et.supports&&et.supports("modulepreload"))return;for(const st of document.querySelectorAll('link[rel="modulepreload"]'))nt(st);new MutationObserver(st=>{for(const ot of st)if(ot.type==="childList")for(const ct of ot.addedNodes)ct.tagName==="LINK"&&ct.rel==="modulepreload"&&nt(ct)}).observe(document,{childList:!0,subtree:!0});function tt(st){const ot={};return st.integrity&&(ot.integrity=st.integrity),st.referrerPolicy&&(ot.referrerPolicy=st.referrerPolicy),st.crossOrigin==="use-credentials"?ot.credentials="include":st.crossOrigin==="anonymous"?ot.credentials="omit":ot.credentials="same-origin",ot}function nt(st){if(st.ep)return;st.ep=!0;const ot=tt(st);fetch(st.href,ot)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(rt){return rt&&rt.__esModule&&Object.prototype.hasOwnProperty.call(rt,"default")?rt.default:rt}function getAugmentedNamespace(rt){if(rt.__esModule)return rt;var et=rt.default;if(typeof et=="function"){var tt=function nt(){return this instanceof nt?Reflect.construct(et,arguments,this.constructor):et.apply(this,arguments)};tt.prototype=et.prototype}else tt={};return Object.defineProperty(tt,"__esModule",{value:!0}),Object.keys(rt).forEach(function(nt){var st=Object.getOwnPropertyDescriptor(rt,nt);Object.defineProperty(tt,nt,st.get?st:{enumerable:!0,get:function(){return rt[nt]}})}),tt}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var rt=Symbol.for("react.element"),et=Symbol.for("react.portal"),tt=Symbol.for("react.fragment"),nt=Symbol.for("react.strict_mode"),st=Symbol.for("react.profiler"),ot=Symbol.for("react.provider"),ct=Symbol.for("react.context"),dt=Symbol.for("react.forward_ref"),ft=Symbol.for("react.suspense"),gt=Symbol.for("react.memo"),yt=Symbol.for("react.lazy"),xt=Symbol.iterator;function St(It){return It===null||typeof It!="object"?null:(It=xt&&It[xt]||It["@@iterator"],typeof It=="function"?It:null)}var wt={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bt=Object.assign,Pt={};function Rt(It,Gt,Xt){this.props=It,this.context=Gt,this.refs=Pt,this.updater=Xt||wt}Rt.prototype.isReactComponent={},Rt.prototype.setState=function(It,Gt){if(typeof It!="object"&&typeof It!="function"&&It!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,It,Gt,"setState")},Rt.prototype.forceUpdate=function(It){this.updater.enqueueForceUpdate(this,It,"forceUpdate")};function Mt(){}Mt.prototype=Rt.prototype;function kt(It,Gt,Xt){this.props=It,this.context=Gt,this.refs=Pt,this.updater=Xt||wt}var Dt=kt.prototype=new Mt;Dt.constructor=kt,bt(Dt,Rt.prototype),Dt.isPureReactComponent=!0;var zt=Array.isArray,Lt=Object.prototype.hasOwnProperty,Yt={current:null},Nt={key:!0,ref:!0,__self:!0,__source:!0};function Jt(It,Gt,Xt){var ir,cr={},gr=null,Sr=null;if(Gt!=null)for(ir in Gt.ref!==void 0&&(Sr=Gt.ref),Gt.key!==void 0&&(gr=""+Gt.key),Gt)Lt.call(Gt,ir)&&!Nt.hasOwnProperty(ir)&&(cr[ir]=Gt[ir]);var br=arguments.length-2;if(br===1)cr.children=Xt;else if(1<br){for(var Pr=Array(br),yr=0;yr<br;yr++)Pr[yr]=arguments[yr+2];cr.children=Pr}if(It&&It.defaultProps)for(ir in br=It.defaultProps,br)cr[ir]===void 0&&(cr[ir]=br[ir]);return{$$typeof:rt,type:It,key:gr,ref:Sr,props:cr,_owner:Yt.current}}function ur(It,Gt){return{$$typeof:rt,type:It.type,key:Gt,ref:It.ref,props:It.props,_owner:It._owner}}function dr(It){return typeof It=="object"&&It!==null&&It.$$typeof===rt}function Tr(It){var Gt={"=":"=0",":":"=2"};return"$"+It.replace(/[=:]/g,function(Xt){return Gt[Xt]})}var Kt=/\/+/g;function Zt(It,Gt){return typeof It=="object"&&It!==null&&It.key!=null?Tr(""+It.key):Gt.toString(36)}function lr(It,Gt,Xt,ir,cr){var gr=typeof It;(gr==="undefined"||gr==="boolean")&&(It=null);var Sr=!1;if(It===null)Sr=!0;else switch(gr){case"string":case"number":Sr=!0;break;case"object":switch(It.$$typeof){case rt:case et:Sr=!0}}if(Sr)return Sr=It,cr=cr(Sr),It=ir===""?"."+Zt(Sr,0):ir,zt(cr)?(Xt="",It!=null&&(Xt=It.replace(Kt,"$&/")+"/"),lr(cr,Gt,Xt,"",function(yr){return yr})):cr!=null&&(dr(cr)&&(cr=ur(cr,Xt+(!cr.key||Sr&&Sr.key===cr.key?"":(""+cr.key).replace(Kt,"$&/")+"/")+It)),Gt.push(cr)),1;if(Sr=0,ir=ir===""?".":ir+":",zt(It))for(var br=0;br<It.length;br++){gr=It[br];var Pr=ir+Zt(gr,br);Sr+=lr(gr,Gt,Xt,Pr,cr)}else if(Pr=St(It),typeof Pr=="function")for(It=Pr.call(It),br=0;!(gr=It.next()).done;)gr=gr.value,Pr=ir+Zt(gr,br++),Sr+=lr(gr,Gt,Xt,Pr,cr);else if(gr==="object")throw Gt=String(It),Error("Objects are not valid as a React child (found: "+(Gt==="[object Object]"?"object with keys {"+Object.keys(It).join(", ")+"}":Gt)+"). If you meant to render a collection of children, use an array instead.");return Sr}function vr(It,Gt,Xt){if(It==null)return It;var ir=[],cr=0;return lr(It,ir,"","",function(gr){return Gt.call(Xt,gr,cr++)}),ir}function Ut(It){if(It._status===-1){var Gt=It._result;Gt=Gt(),Gt.then(function(Xt){(It._status===0||It._status===-1)&&(It._status=1,It._result=Xt)},function(Xt){(It._status===0||It._status===-1)&&(It._status=2,It._result=Xt)}),It._status===-1&&(It._status=0,It._result=Gt)}if(It._status===1)return It._result.default;throw It._result}var Ht={current:null},Ct={transition:null},jt={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:Ct,ReactCurrentOwner:Yt};function Ft(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:vr,forEach:function(It,Gt,Xt){vr(It,function(){Gt.apply(this,arguments)},Xt)},count:function(It){var Gt=0;return vr(It,function(){Gt++}),Gt},toArray:function(It){return vr(It,function(Gt){return Gt})||[]},only:function(It){if(!dr(It))throw Error("React.Children.only expected to receive a single React element child.");return It}},react_production_min.Component=Rt,react_production_min.Fragment=tt,react_production_min.Profiler=st,react_production_min.PureComponent=kt,react_production_min.StrictMode=nt,react_production_min.Suspense=ft,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jt,react_production_min.act=Ft,react_production_min.cloneElement=function(It,Gt,Xt){if(It==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+It+".");var ir=bt({},It.props),cr=It.key,gr=It.ref,Sr=It._owner;if(Gt!=null){if(Gt.ref!==void 0&&(gr=Gt.ref,Sr=Yt.current),Gt.key!==void 0&&(cr=""+Gt.key),It.type&&It.type.defaultProps)var br=It.type.defaultProps;for(Pr in Gt)Lt.call(Gt,Pr)&&!Nt.hasOwnProperty(Pr)&&(ir[Pr]=Gt[Pr]===void 0&&br!==void 0?br[Pr]:Gt[Pr])}var Pr=arguments.length-2;if(Pr===1)ir.children=Xt;else if(1<Pr){br=Array(Pr);for(var yr=0;yr<Pr;yr++)br[yr]=arguments[yr+2];ir.children=br}return{$$typeof:rt,type:It.type,key:cr,ref:gr,props:ir,_owner:Sr}},react_production_min.createContext=function(It){return It={$$typeof:ct,_currentValue:It,_currentValue2:It,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},It.Provider={$$typeof:ot,_context:It},It.Consumer=It},react_production_min.createElement=Jt,react_production_min.createFactory=function(It){var Gt=Jt.bind(null,It);return Gt.type=It,Gt},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(It){return{$$typeof:dt,render:It}},react_production_min.isValidElement=dr,react_production_min.lazy=function(It){return{$$typeof:yt,_payload:{_status:-1,_result:It},_init:Ut}},react_production_min.memo=function(It,Gt){return{$$typeof:gt,type:It,compare:Gt===void 0?null:Gt}},react_production_min.startTransition=function(It){var Gt=Ct.transition;Ct.transition={};try{It()}finally{Ct.transition=Gt}},react_production_min.unstable_act=Ft,react_production_min.useCallback=function(It,Gt){return Ht.current.useCallback(It,Gt)},react_production_min.useContext=function(It){return Ht.current.useContext(It)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(It){return Ht.current.useDeferredValue(It)},react_production_min.useEffect=function(It,Gt){return Ht.current.useEffect(It,Gt)},react_production_min.useId=function(){return Ht.current.useId()},react_production_min.useImperativeHandle=function(It,Gt,Xt){return Ht.current.useImperativeHandle(It,Gt,Xt)},react_production_min.useInsertionEffect=function(It,Gt){return Ht.current.useInsertionEffect(It,Gt)},react_production_min.useLayoutEffect=function(It,Gt){return Ht.current.useLayoutEffect(It,Gt)},react_production_min.useMemo=function(It,Gt){return Ht.current.useMemo(It,Gt)},react_production_min.useReducer=function(It,Gt,Xt){return Ht.current.useReducer(It,Gt,Xt)},react_production_min.useRef=function(It){return Ht.current.useRef(It)},react_production_min.useState=function(It){return Ht.current.useState(It)},react_production_min.useSyncExternalStore=function(It,Gt,Xt){return Ht.current.useSyncExternalStore(It,Gt,Xt)},react_production_min.useTransition=function(){return Ht.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var rt=requireReact(),et=Symbol.for("react.element"),tt=Symbol.for("react.fragment"),nt=Object.prototype.hasOwnProperty,st=rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ot={key:!0,ref:!0,__self:!0,__source:!0};function ct(dt,ft,gt){var yt,xt={},St=null,wt=null;gt!==void 0&&(St=""+gt),ft.key!==void 0&&(St=""+ft.key),ft.ref!==void 0&&(wt=ft.ref);for(yt in ft)nt.call(ft,yt)&&!ot.hasOwnProperty(yt)&&(xt[yt]=ft[yt]);if(dt&&dt.defaultProps)for(yt in ft=dt.defaultProps,ft)xt[yt]===void 0&&(xt[yt]=ft[yt]);return{$$typeof:et,type:dt,key:St,ref:wt,props:xt,_owner:st.current}}return reactJsxRuntime_production_min.Fragment=tt,reactJsxRuntime_production_min.jsx=ct,reactJsxRuntime_production_min.jsxs=ct,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const g$1=getDefaultExportFromCjs(reactExports);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(rt){function et(Ct,jt){var Ft=Ct.length;Ct.push(jt);e:for(;0<Ft;){var It=Ft-1>>>1,Gt=Ct[It];if(0<st(Gt,jt))Ct[It]=jt,Ct[Ft]=Gt,Ft=It;else break e}}function tt(Ct){return Ct.length===0?null:Ct[0]}function nt(Ct){if(Ct.length===0)return null;var jt=Ct[0],Ft=Ct.pop();if(Ft!==jt){Ct[0]=Ft;e:for(var It=0,Gt=Ct.length,Xt=Gt>>>1;It<Xt;){var ir=2*(It+1)-1,cr=Ct[ir],gr=ir+1,Sr=Ct[gr];if(0>st(cr,Ft))gr<Gt&&0>st(Sr,cr)?(Ct[It]=Sr,Ct[gr]=Ft,It=gr):(Ct[It]=cr,Ct[ir]=Ft,It=ir);else if(gr<Gt&&0>st(Sr,Ft))Ct[It]=Sr,Ct[gr]=Ft,It=gr;else break e}}return jt}function st(Ct,jt){var Ft=Ct.sortIndex-jt.sortIndex;return Ft!==0?Ft:Ct.id-jt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ot=performance;rt.unstable_now=function(){return ot.now()}}else{var ct=Date,dt=ct.now();rt.unstable_now=function(){return ct.now()-dt}}var ft=[],gt=[],yt=1,xt=null,St=3,wt=!1,bt=!1,Pt=!1,Rt=typeof setTimeout=="function"?setTimeout:null,Mt=typeof clearTimeout=="function"?clearTimeout:null,kt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Dt(Ct){for(var jt=tt(gt);jt!==null;){if(jt.callback===null)nt(gt);else if(jt.startTime<=Ct)nt(gt),jt.sortIndex=jt.expirationTime,et(ft,jt);else break;jt=tt(gt)}}function zt(Ct){if(Pt=!1,Dt(Ct),!bt)if(tt(ft)!==null)bt=!0,Ut(Lt);else{var jt=tt(gt);jt!==null&&Ht(zt,jt.startTime-Ct)}}function Lt(Ct,jt){bt=!1,Pt&&(Pt=!1,Mt(Jt),Jt=-1),wt=!0;var Ft=St;try{for(Dt(jt),xt=tt(ft);xt!==null&&(!(xt.expirationTime>jt)||Ct&&!Tr());){var It=xt.callback;if(typeof It=="function"){xt.callback=null,St=xt.priorityLevel;var Gt=It(xt.expirationTime<=jt);jt=rt.unstable_now(),typeof Gt=="function"?xt.callback=Gt:xt===tt(ft)&&nt(ft),Dt(jt)}else nt(ft);xt=tt(ft)}if(xt!==null)var Xt=!0;else{var ir=tt(gt);ir!==null&&Ht(zt,ir.startTime-jt),Xt=!1}return Xt}finally{xt=null,St=Ft,wt=!1}}var Yt=!1,Nt=null,Jt=-1,ur=5,dr=-1;function Tr(){return!(rt.unstable_now()-dr<ur)}function Kt(){if(Nt!==null){var Ct=rt.unstable_now();dr=Ct;var jt=!0;try{jt=Nt(!0,Ct)}finally{jt?Zt():(Yt=!1,Nt=null)}}else Yt=!1}var Zt;if(typeof kt=="function")Zt=function(){kt(Kt)};else if(typeof MessageChannel<"u"){var lr=new MessageChannel,vr=lr.port2;lr.port1.onmessage=Kt,Zt=function(){vr.postMessage(null)}}else Zt=function(){Rt(Kt,0)};function Ut(Ct){Nt=Ct,Yt||(Yt=!0,Zt())}function Ht(Ct,jt){Jt=Rt(function(){Ct(rt.unstable_now())},jt)}rt.unstable_IdlePriority=5,rt.unstable_ImmediatePriority=1,rt.unstable_LowPriority=4,rt.unstable_NormalPriority=3,rt.unstable_Profiling=null,rt.unstable_UserBlockingPriority=2,rt.unstable_cancelCallback=function(Ct){Ct.callback=null},rt.unstable_continueExecution=function(){bt||wt||(bt=!0,Ut(Lt))},rt.unstable_forceFrameRate=function(Ct){0>Ct||125<Ct?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ur=0<Ct?Math.floor(1e3/Ct):5},rt.unstable_getCurrentPriorityLevel=function(){return St},rt.unstable_getFirstCallbackNode=function(){return tt(ft)},rt.unstable_next=function(Ct){switch(St){case 1:case 2:case 3:var jt=3;break;default:jt=St}var Ft=St;St=jt;try{return Ct()}finally{St=Ft}},rt.unstable_pauseExecution=function(){},rt.unstable_requestPaint=function(){},rt.unstable_runWithPriority=function(Ct,jt){switch(Ct){case 1:case 2:case 3:case 4:case 5:break;default:Ct=3}var Ft=St;St=Ct;try{return jt()}finally{St=Ft}},rt.unstable_scheduleCallback=function(Ct,jt,Ft){var It=rt.unstable_now();switch(typeof Ft=="object"&&Ft!==null?(Ft=Ft.delay,Ft=typeof Ft=="number"&&0<Ft?It+Ft:It):Ft=It,Ct){case 1:var Gt=-1;break;case 2:Gt=250;break;case 5:Gt=1073741823;break;case 4:Gt=1e4;break;default:Gt=5e3}return Gt=Ft+Gt,Ct={id:yt++,callback:jt,priorityLevel:Ct,startTime:Ft,expirationTime:Gt,sortIndex:-1},Ft>It?(Ct.sortIndex=Ft,et(gt,Ct),tt(ft)===null&&Ct===tt(gt)&&(Pt?(Mt(Jt),Jt=-1):Pt=!0,Ht(zt,Ft-It))):(Ct.sortIndex=Gt,et(ft,Ct),bt||wt||(bt=!0,Ut(Lt))),Ct},rt.unstable_shouldYield=Tr,rt.unstable_wrapCallback=function(Ct){var jt=St;return function(){var Ft=St;St=jt;try{return Ct.apply(this,arguments)}finally{St=Ft}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var rt=requireReact(),et=requireScheduler();function tt(it){for(var at="https://reactjs.org/docs/error-decoder.html?invariant="+it,ht=1;ht<arguments.length;ht++)at+="&args[]="+encodeURIComponent(arguments[ht]);return"Minified React error #"+it+"; visit "+at+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nt=new Set,st={};function ot(it,at){ct(it,at),ct(it+"Capture",at)}function ct(it,at){for(st[it]=at,it=0;it<at.length;it++)nt.add(at[it])}var dt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ft=Object.prototype.hasOwnProperty,gt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yt={},xt={};function St(it){return ft.call(xt,it)?!0:ft.call(yt,it)?!1:gt.test(it)?xt[it]=!0:(yt[it]=!0,!1)}function wt(it,at,ht,pt){if(ht!==null&&ht.type===0)return!1;switch(typeof at){case"function":case"symbol":return!0;case"boolean":return pt?!1:ht!==null?!ht.acceptsBooleans:(it=it.toLowerCase().slice(0,5),it!=="data-"&&it!=="aria-");default:return!1}}function bt(it,at,ht,pt){if(at===null||typeof at>"u"||wt(it,at,ht,pt))return!0;if(pt)return!1;if(ht!==null)switch(ht.type){case 3:return!at;case 4:return at===!1;case 5:return isNaN(at);case 6:return isNaN(at)||1>at}return!1}function Pt(it,at,ht,pt,_t,Tt,Ot){this.acceptsBooleans=at===2||at===3||at===4,this.attributeName=pt,this.attributeNamespace=_t,this.mustUseProperty=ht,this.propertyName=it,this.type=at,this.sanitizeURL=Tt,this.removeEmptyString=Ot}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(it){Rt[it]=new Pt(it,0,!1,it,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(it){var at=it[0];Rt[at]=new Pt(at,1,!1,it[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(it){Rt[it]=new Pt(it,2,!1,it.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(it){Rt[it]=new Pt(it,2,!1,it,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(it){Rt[it]=new Pt(it,3,!1,it.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(it){Rt[it]=new Pt(it,3,!0,it,null,!1,!1)}),["capture","download"].forEach(function(it){Rt[it]=new Pt(it,4,!1,it,null,!1,!1)}),["cols","rows","size","span"].forEach(function(it){Rt[it]=new Pt(it,6,!1,it,null,!1,!1)}),["rowSpan","start"].forEach(function(it){Rt[it]=new Pt(it,5,!1,it.toLowerCase(),null,!1,!1)});var Mt=/[\-:]([a-z])/g;function kt(it){return it[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(it){var at=it.replace(Mt,kt);Rt[at]=new Pt(at,1,!1,it,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(it){var at=it.replace(Mt,kt);Rt[at]=new Pt(at,1,!1,it,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(it){var at=it.replace(Mt,kt);Rt[at]=new Pt(at,1,!1,it,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(it){Rt[it]=new Pt(it,1,!1,it.toLowerCase(),null,!1,!1)}),Rt.xlinkHref=new Pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(it){Rt[it]=new Pt(it,1,!1,it.toLowerCase(),null,!0,!0)});function Dt(it,at,ht,pt){var _t=Rt.hasOwnProperty(at)?Rt[at]:null;(_t!==null?_t.type!==0:pt||!(2<at.length)||at[0]!=="o"&&at[0]!=="O"||at[1]!=="n"&&at[1]!=="N")&&(bt(at,ht,_t,pt)&&(ht=null),pt||_t===null?St(at)&&(ht===null?it.removeAttribute(at):it.setAttribute(at,""+ht)):_t.mustUseProperty?it[_t.propertyName]=ht===null?_t.type===3?!1:"":ht:(at=_t.attributeName,pt=_t.attributeNamespace,ht===null?it.removeAttribute(at):(_t=_t.type,ht=_t===3||_t===4&&ht===!0?"":""+ht,pt?it.setAttributeNS(pt,at,ht):it.setAttribute(at,ht))))}var zt=rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lt=Symbol.for("react.element"),Yt=Symbol.for("react.portal"),Nt=Symbol.for("react.fragment"),Jt=Symbol.for("react.strict_mode"),ur=Symbol.for("react.profiler"),dr=Symbol.for("react.provider"),Tr=Symbol.for("react.context"),Kt=Symbol.for("react.forward_ref"),Zt=Symbol.for("react.suspense"),lr=Symbol.for("react.suspense_list"),vr=Symbol.for("react.memo"),Ut=Symbol.for("react.lazy"),Ht=Symbol.for("react.offscreen"),Ct=Symbol.iterator;function jt(it){return it===null||typeof it!="object"?null:(it=Ct&&it[Ct]||it["@@iterator"],typeof it=="function"?it:null)}var Ft=Object.assign,It;function Gt(it){if(It===void 0)try{throw Error()}catch(ht){var at=ht.stack.trim().match(/\n( *(at )?)/);It=at&&at[1]||""}return`
`+It+it}var Xt=!1;function ir(it,at){if(!it||Xt)return"";Xt=!0;var ht=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(at)if(at=function(){throw Error()},Object.defineProperty(at.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(at,[])}catch(ar){var pt=ar}Reflect.construct(it,[],at)}else{try{at.call()}catch(ar){pt=ar}it.call(at.prototype)}else{try{throw Error()}catch(ar){pt=ar}it()}}catch(ar){if(ar&&pt&&typeof ar.stack=="string"){for(var _t=ar.stack.split(`
`),Tt=pt.stack.split(`
`),Ot=_t.length-1,$t=Tt.length-1;1<=Ot&&0<=$t&&_t[Ot]!==Tt[$t];)$t--;for(;1<=Ot&&0<=$t;Ot--,$t--)if(_t[Ot]!==Tt[$t]){if(Ot!==1||$t!==1)do if(Ot--,$t--,0>$t||_t[Ot]!==Tt[$t]){var Vt=`
`+_t[Ot].replace(" at new "," at ");return it.displayName&&Vt.includes("<anonymous>")&&(Vt=Vt.replace("<anonymous>",it.displayName)),Vt}while(1<=Ot&&0<=$t);break}}}finally{Xt=!1,Error.prepareStackTrace=ht}return(it=it?it.displayName||it.name:"")?Gt(it):""}function cr(it){switch(it.tag){case 5:return Gt(it.type);case 16:return Gt("Lazy");case 13:return Gt("Suspense");case 19:return Gt("SuspenseList");case 0:case 2:case 15:return it=ir(it.type,!1),it;case 11:return it=ir(it.type.render,!1),it;case 1:return it=ir(it.type,!0),it;default:return""}}function gr(it){if(it==null)return null;if(typeof it=="function")return it.displayName||it.name||null;if(typeof it=="string")return it;switch(it){case Nt:return"Fragment";case Yt:return"Portal";case ur:return"Profiler";case Jt:return"StrictMode";case Zt:return"Suspense";case lr:return"SuspenseList"}if(typeof it=="object")switch(it.$$typeof){case Tr:return(it.displayName||"Context")+".Consumer";case dr:return(it._context.displayName||"Context")+".Provider";case Kt:var at=it.render;return it=it.displayName,it||(it=at.displayName||at.name||"",it=it!==""?"ForwardRef("+it+")":"ForwardRef"),it;case vr:return at=it.displayName||null,at!==null?at:gr(it.type)||"Memo";case Ut:at=it._payload,it=it._init;try{return gr(it(at))}catch{}}return null}function Sr(it){var at=it.type;switch(it.tag){case 24:return"Cache";case 9:return(at.displayName||"Context")+".Consumer";case 10:return(at._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return it=at.render,it=it.displayName||it.name||"",at.displayName||(it!==""?"ForwardRef("+it+")":"ForwardRef");case 7:return"Fragment";case 5:return at;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gr(at);case 8:return at===Jt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof at=="function")return at.displayName||at.name||null;if(typeof at=="string")return at}return null}function br(it){switch(typeof it){case"boolean":case"number":case"string":case"undefined":return it;case"object":return it;default:return""}}function Pr(it){var at=it.type;return(it=it.nodeName)&&it.toLowerCase()==="input"&&(at==="checkbox"||at==="radio")}function yr(it){var at=Pr(it)?"checked":"value",ht=Object.getOwnPropertyDescriptor(it.constructor.prototype,at),pt=""+it[at];if(!it.hasOwnProperty(at)&&typeof ht<"u"&&typeof ht.get=="function"&&typeof ht.set=="function"){var _t=ht.get,Tt=ht.set;return Object.defineProperty(it,at,{configurable:!0,get:function(){return _t.call(this)},set:function(Ot){pt=""+Ot,Tt.call(this,Ot)}}),Object.defineProperty(it,at,{enumerable:ht.enumerable}),{getValue:function(){return pt},setValue:function(Ot){pt=""+Ot},stopTracking:function(){it._valueTracker=null,delete it[at]}}}}function Ir(it){it._valueTracker||(it._valueTracker=yr(it))}function Nr(it){if(!it)return!1;var at=it._valueTracker;if(!at)return!0;var ht=at.getValue(),pt="";return it&&(pt=Pr(it)?it.checked?"true":"false":it.value),it=pt,it!==ht?(at.setValue(it),!0):!1}function Br(it){if(it=it||(typeof document<"u"?document:void 0),typeof it>"u")return null;try{return it.activeElement||it.body}catch{return it.body}}function Qr(it,at){var ht=at.checked;return Ft({},at,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:ht??it._wrapperState.initialChecked})}function Ur(it,at){var ht=at.defaultValue==null?"":at.defaultValue,pt=at.checked!=null?at.checked:at.defaultChecked;ht=br(at.value!=null?at.value:ht),it._wrapperState={initialChecked:pt,initialValue:ht,controlled:at.type==="checkbox"||at.type==="radio"?at.checked!=null:at.value!=null}}function Or(it,at){at=at.checked,at!=null&&Dt(it,"checked",at,!1)}function ai(it,at){Or(it,at);var ht=br(at.value),pt=at.type;if(ht!=null)pt==="number"?(ht===0&&it.value===""||it.value!=ht)&&(it.value=""+ht):it.value!==""+ht&&(it.value=""+ht);else if(pt==="submit"||pt==="reset"){it.removeAttribute("value");return}at.hasOwnProperty("value")?zs(it,at.type,ht):at.hasOwnProperty("defaultValue")&&zs(it,at.type,br(at.defaultValue)),at.checked==null&&at.defaultChecked!=null&&(it.defaultChecked=!!at.defaultChecked)}function $i(it,at,ht){if(at.hasOwnProperty("value")||at.hasOwnProperty("defaultValue")){var pt=at.type;if(!(pt!=="submit"&&pt!=="reset"||at.value!==void 0&&at.value!==null))return;at=""+it._wrapperState.initialValue,ht||at===it.value||(it.value=at),it.defaultValue=at}ht=it.name,ht!==""&&(it.name=""),it.defaultChecked=!!it._wrapperState.initialChecked,ht!==""&&(it.name=ht)}function zs(it,at,ht){(at!=="number"||Br(it.ownerDocument)!==it)&&(ht==null?it.defaultValue=""+it._wrapperState.initialValue:it.defaultValue!==""+ht&&(it.defaultValue=""+ht))}var Ci=Array.isArray;function Ai(it,at,ht,pt){if(it=it.options,at){at={};for(var _t=0;_t<ht.length;_t++)at["$"+ht[_t]]=!0;for(ht=0;ht<it.length;ht++)_t=at.hasOwnProperty("$"+it[ht].value),it[ht].selected!==_t&&(it[ht].selected=_t),_t&&pt&&(it[ht].defaultSelected=!0)}else{for(ht=""+br(ht),at=null,_t=0;_t<it.length;_t++){if(it[_t].value===ht){it[_t].selected=!0,pt&&(it[_t].defaultSelected=!0);return}at!==null||it[_t].disabled||(at=it[_t])}at!==null&&(at.selected=!0)}}function ea(it,at){if(at.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Ft({},at,{value:void 0,defaultValue:void 0,children:""+it._wrapperState.initialValue})}function fa(it,at){var ht=at.value;if(ht==null){if(ht=at.children,at=at.defaultValue,ht!=null){if(at!=null)throw Error(tt(92));if(Ci(ht)){if(1<ht.length)throw Error(tt(93));ht=ht[0]}at=ht}at==null&&(at=""),ht=at}it._wrapperState={initialValue:br(ht)}}function cs(it,at){var ht=br(at.value),pt=br(at.defaultValue);ht!=null&&(ht=""+ht,ht!==it.value&&(it.value=ht),at.defaultValue==null&&it.defaultValue!==ht&&(it.defaultValue=ht)),pt!=null&&(it.defaultValue=""+pt)}function Mu(it){var at=it.textContent;at===it._wrapperState.initialValue&&at!==""&&at!==null&&(it.value=at)}function Ol(it){switch(it){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dl(it,at){return it==null||it==="http://www.w3.org/1999/xhtml"?Ol(at):it==="http://www.w3.org/2000/svg"&&at==="foreignObject"?"http://www.w3.org/1999/xhtml":it}var ta,zo=function(it){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(at,ht,pt,_t){MSApp.execUnsafeLocalFunction(function(){return it(at,ht,pt,_t)})}:it}(function(it,at){if(it.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in it)it.innerHTML=at;else{for(ta=ta||document.createElement("div"),ta.innerHTML="<svg>"+at.valueOf().toString()+"</svg>",at=ta.firstChild;it.firstChild;)it.removeChild(it.firstChild);for(;at.firstChild;)it.appendChild(at.firstChild)}});function Ua(it,at){if(at){var ht=it.firstChild;if(ht&&ht===it.lastChild&&ht.nodeType===3){ht.nodeValue=at;return}}it.textContent=at}var uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pc=["Webkit","ms","Moz","O"];Object.keys(uo).forEach(function(it){Pc.forEach(function(at){at=at+it.charAt(0).toUpperCase()+it.substring(1),uo[at]=uo[it]})});function Ho(it,at,ht){return at==null||typeof at=="boolean"||at===""?"":ht||typeof at!="number"||at===0||uo.hasOwnProperty(it)&&uo[it]?(""+at).trim():at+"px"}function co(it,at){it=it.style;for(var ht in at)if(at.hasOwnProperty(ht)){var pt=ht.indexOf("--")===0,_t=Ho(ht,at[ht],pt);ht==="float"&&(ht="cssFloat"),pt?it.setProperty(ht,_t):it[ht]=_t}}var rr=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sr(it,at){if(at){if(rr[it]&&(at.children!=null||at.dangerouslySetInnerHTML!=null))throw Error(tt(137,it));if(at.dangerouslySetInnerHTML!=null){if(at.children!=null)throw Error(tt(60));if(typeof at.dangerouslySetInnerHTML!="object"||!("__html"in at.dangerouslySetInnerHTML))throw Error(tt(61))}if(at.style!=null&&typeof at.style!="object")throw Error(tt(62))}}function Zr(it,at){if(it.indexOf("-")===-1)return typeof at.is=="string";switch(it){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hn=null;function Wn(it){return it=it.target||it.srcElement||window,it.correspondingUseElement&&(it=it.correspondingUseElement),it.nodeType===3?it.parentNode:it}var qr=null,Vi=null,Ki=null;function Ni(it){if(it=fl(it)){if(typeof qr!="function")throw Error(tt(280));var at=it.stateNode;at&&(at=pl(at),qr(it.stateNode,it.type,at))}}function Es(it){Vi?Ki?Ki.push(it):Ki=[it]:Vi=it}function ho(){if(Vi){var it=Vi,at=Ki;if(Ki=Vi=null,Ni(it),at)for(it=0;it<at.length;it++)Ni(at[it])}}function pa(it,at){return it(at)}function ki(){}var fo=!1;function jo(it,at,ht){if(fo)return it(at,ht);fo=!0;try{return pa(it,at,ht)}finally{fo=!1,(Vi!==null||Ki!==null)&&(ki(),ho())}}function Ga(it,at){var ht=it.stateNode;if(ht===null)return null;var pt=pl(ht);if(pt===null)return null;ht=pt[at];e:switch(at){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(pt=!pt.disabled)||(it=it.type,pt=!(it==="button"||it==="input"||it==="select"||it==="textarea")),it=!pt;break e;default:it=!1}if(it)return null;if(ht&&typeof ht!="function")throw Error(tt(231,at,typeof ht));return ht}var ma=!1;if(dt)try{var ga={};Object.defineProperty(ga,"passive",{get:function(){ma=!0}}),window.addEventListener("test",ga,ga),window.removeEventListener("test",ga,ga)}catch{ma=!1}function po(it,at,ht,pt,_t,Tt,Ot,$t,Vt){var ar=Array.prototype.slice.call(arguments,3);try{at.apply(ht,ar)}catch(xr){this.onError(xr)}}var Hs=!1,za=null,mo=!1,ya=null,Fl={onError:function(it){Hs=!0,za=it}};function Ou(it,at,ht,pt,_t,Tt,Ot,$t,Vt){Hs=!1,za=null,po.apply(Fl,arguments)}function Nl(it,at,ht,pt,_t,Tt,Ot,$t,Vt){if(Ou.apply(this,arguments),Hs){if(Hs){var ar=za;Hs=!1,za=null}else throw Error(tt(198));mo||(mo=!0,ya=ar)}}function ra(it){var at=it,ht=it;if(it.alternate)for(;at.return;)at=at.return;else{it=at;do at=it,at.flags&4098&&(ht=at.return),it=at.return;while(it)}return at.tag===3?ht:null}function Du(it){if(it.tag===13){var at=it.memoizedState;if(at===null&&(it=it.alternate,it!==null&&(at=it.memoizedState)),at!==null)return at.dehydrated}return null}function $o(it){if(ra(it)!==it)throw Error(tt(188))}function Ha(it){var at=it.alternate;if(!at){if(at=ra(it),at===null)throw Error(tt(188));return at!==it?null:it}for(var ht=it,pt=at;;){var _t=ht.return;if(_t===null)break;var Tt=_t.alternate;if(Tt===null){if(pt=_t.return,pt!==null){ht=pt;continue}break}if(_t.child===Tt.child){for(Tt=_t.child;Tt;){if(Tt===ht)return $o(_t),it;if(Tt===pt)return $o(_t),at;Tt=Tt.sibling}throw Error(tt(188))}if(ht.return!==pt.return)ht=_t,pt=Tt;else{for(var Ot=!1,$t=_t.child;$t;){if($t===ht){Ot=!0,ht=_t,pt=Tt;break}if($t===pt){Ot=!0,pt=_t,ht=Tt;break}$t=$t.sibling}if(!Ot){for($t=Tt.child;$t;){if($t===ht){Ot=!0,ht=Tt,pt=_t;break}if($t===pt){Ot=!0,pt=Tt,ht=_t;break}$t=$t.sibling}if(!Ot)throw Error(tt(189))}}if(ht.alternate!==pt)throw Error(tt(190))}if(ht.tag!==3)throw Error(tt(188));return ht.stateNode.current===ht?it:at}function go(it){return it=Ha(it),it!==null?Fu(it):null}function Fu(it){if(it.tag===5||it.tag===6)return it;for(it=it.child;it!==null;){var at=Fu(it);if(at!==null)return at;it=it.sibling}return null}var kl=et.unstable_scheduleCallback,Oh=et.unstable_cancelCallback,wd=et.unstable_shouldYield,bd=et.unstable_requestPaint,hi=et.unstable_now,Ll=et.unstable_getCurrentPriorityLevel,Bl=et.unstable_ImmediatePriority,Nu=et.unstable_UserBlockingPriority,ku=et.unstable_NormalPriority,Cc=et.unstable_LowPriority,yo=et.unstable_IdlePriority,js=null,An=null;function Kn(it){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(js,it,void 0,(it.current.flags&128)===128)}catch{}}var Ri=Math.clz32?Math.clz32:_o,Li=Math.log,Qi=Math.LN2;function _o(it){return it>>>=0,it===0?32:31-(Li(it)/Qi|0)|0}var _a=64,Bi=4194304;function vo(it){switch(it&-it){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return it&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return it&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return it}}function Ul(it,at){var ht=it.pendingLanes;if(ht===0)return 0;var pt=0,_t=it.suspendedLanes,Tt=it.pingedLanes,Ot=ht&268435455;if(Ot!==0){var $t=Ot&~_t;$t!==0?pt=vo($t):(Tt&=Ot,Tt!==0&&(pt=vo(Tt)))}else Ot=ht&~_t,Ot!==0?pt=vo(Ot):Tt!==0&&(pt=vo(Tt));if(pt===0)return 0;if(at!==0&&at!==pt&&!(at&_t)&&(_t=pt&-pt,Tt=at&-at,_t>=Tt||_t===16&&(Tt&4194240)!==0))return at;if(pt&4&&(pt|=ht&16),at=it.entangledLanes,at!==0)for(it=it.entanglements,at&=pt;0<at;)ht=31-Ri(at),_t=1<<ht,pt|=it[ht],at&=~_t;return pt}function Dh(it,at){switch(it){case 1:case 2:case 4:return at+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return at+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lu(it,at){for(var ht=it.suspendedLanes,pt=it.pingedLanes,_t=it.expirationTimes,Tt=it.pendingLanes;0<Tt;){var Ot=31-Ri(Tt),$t=1<<Ot,Vt=_t[Ot];Vt===-1?(!($t&ht)||$t&pt)&&(_t[Ot]=Dh($t,at)):Vt<=at&&(it.expiredLanes|=$t),Tt&=~$t}}function Bu(it){return it=it.pendingLanes&-1073741825,it!==0?it:it&1073741824?1073741824:0}function Ss(){var it=_a;return _a<<=1,!(_a&4194240)&&(_a=64),it}function Ic(it){for(var at=[],ht=0;31>ht;ht++)at.push(it);return at}function Gl(it,at,ht){it.pendingLanes|=at,at!==536870912&&(it.suspendedLanes=0,it.pingedLanes=0),it=it.eventTimes,at=31-Ri(at),it[at]=ht}function Mc(it,at){var ht=it.pendingLanes&~at;it.pendingLanes=at,it.suspendedLanes=0,it.pingedLanes=0,it.expiredLanes&=at,it.mutableReadLanes&=at,it.entangledLanes&=at,at=it.entanglements;var pt=it.eventTimes;for(it=it.expirationTimes;0<ht;){var _t=31-Ri(ht),Tt=1<<_t;at[_t]=0,pt[_t]=-1,it[_t]=-1,ht&=~Tt}}function zl(it,at){var ht=it.entangledLanes|=at;for(it=it.entanglements;ht;){var pt=31-Ri(ht),_t=1<<pt;_t&at|it[pt]&at&&(it[pt]|=at),ht&=~_t}}var Mn=0;function Hl(it){return it&=-it,1<it?4<it?it&268435455?16:536870912:4:1}var Fh,jl,Oc,Uu,Vo,$l=!1,Jr=[],va=null,na=null,xa=null,Vl=new Map,Wl=new Map,ti=[],Dc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nh(it,at){switch(it){case"focusin":case"focusout":va=null;break;case"dragenter":case"dragleave":na=null;break;case"mouseover":case"mouseout":xa=null;break;case"pointerover":case"pointerout":Vl.delete(at.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wl.delete(at.pointerId)}}function Wo(it,at,ht,pt,_t,Tt){return it===null||it.nativeEvent!==Tt?(it={blockedOn:at,domEventName:ht,eventSystemFlags:pt,nativeEvent:Tt,targetContainers:[_t]},at!==null&&(at=fl(at),at!==null&&jl(at)),it):(it.eventSystemFlags|=pt,at=it.targetContainers,_t!==null&&at.indexOf(_t)===-1&&at.push(_t),it)}function Ad(it,at,ht,pt,_t){switch(at){case"focusin":return va=Wo(va,it,at,ht,pt,_t),!0;case"dragenter":return na=Wo(na,it,at,ht,pt,_t),!0;case"mouseover":return xa=Wo(xa,it,at,ht,pt,_t),!0;case"pointerover":var Tt=_t.pointerId;return Vl.set(Tt,Wo(Vl.get(Tt)||null,it,at,ht,pt,_t)),!0;case"gotpointercapture":return Tt=_t.pointerId,Wl.set(Tt,Wo(Wl.get(Tt)||null,it,at,ht,pt,_t)),!0}return!1}function Xl(it){var at=Za(it.target);if(at!==null){var ht=ra(at);if(ht!==null){if(at=ht.tag,at===13){if(at=Du(ht),at!==null){it.blockedOn=at,Vo(it.priority,function(){Oc(ht)});return}}else if(at===3&&ht.stateNode.current.memoizedState.isDehydrated){it.blockedOn=ht.tag===3?ht.stateNode.containerInfo:null;return}}}it.blockedOn=null}function hs(it){if(it.blockedOn!==null)return!1;for(var at=it.targetContainers;0<at.length;){var ht=Zi(it.domEventName,it.eventSystemFlags,at[0],it.nativeEvent);if(ht===null){ht=it.nativeEvent;var pt=new ht.constructor(ht.type,ht);Hn=pt,ht.target.dispatchEvent(pt),Hn=null}else return at=fl(ht),at!==null&&jl(at),it.blockedOn=ht,!1;at.shift()}return!0}function Ts(it,at,ht){hs(it)&&ht.delete(at)}function Ea(){$l=!1,va!==null&&hs(va)&&(va=null),na!==null&&hs(na)&&(na=null),xa!==null&&hs(xa)&&(xa=null),Vl.forEach(Ts),Wl.forEach(Ts)}function ja(it,at){it.blockedOn===at&&(it.blockedOn=null,$l||($l=!0,et.unstable_scheduleCallback(et.unstable_NormalPriority,Ea)))}function xo(it){function at(_t){return ja(_t,it)}if(0<Jr.length){ja(Jr[0],it);for(var ht=1;ht<Jr.length;ht++){var pt=Jr[ht];pt.blockedOn===it&&(pt.blockedOn=null)}}for(va!==null&&ja(va,it),na!==null&&ja(na,it),xa!==null&&ja(xa,it),Vl.forEach(at),Wl.forEach(at),ht=0;ht<ti.length;ht++)pt=ti[ht],pt.blockedOn===it&&(pt.blockedOn=null);for(;0<ti.length&&(ht=ti[0],ht.blockedOn===null);)Xl(ht),ht.blockedOn===null&&ti.shift()}var Eo=zt.ReactCurrentBatchConfig,ds=!0;function Xo(it,at,ht,pt){var _t=Mn,Tt=Eo.transition;Eo.transition=null;try{Mn=1,Yo(it,at,ht,pt)}finally{Mn=_t,Eo.transition=Tt}}function qo(it,at,ht,pt){var _t=Mn,Tt=Eo.transition;Eo.transition=null;try{Mn=4,Yo(it,at,ht,pt)}finally{Mn=_t,Eo.transition=Tt}}function Yo(it,at,ht,pt){if(ds){var _t=Zi(it,at,ht,pt);if(_t===null)sc(it,at,pt,So,ht),Nh(it,pt);else if(Ad(_t,it,at,ht,pt))pt.stopPropagation();else if(Nh(it,pt),at&4&&-1<Dc.indexOf(it)){for(;_t!==null;){var Tt=fl(_t);if(Tt!==null&&Fh(Tt),Tt=Zi(it,at,ht,pt),Tt===null&&sc(it,at,pt,So,ht),Tt===_t)break;_t=Tt}_t!==null&&pt.stopPropagation()}else sc(it,at,pt,null,ht)}}var So=null;function Zi(it,at,ht,pt){if(So=null,it=Wn(pt),it=Za(it),it!==null)if(at=ra(it),at===null)it=null;else if(ht=at.tag,ht===13){if(it=Du(at),it!==null)return it;it=null}else if(ht===3){if(at.stateNode.current.memoizedState.isDehydrated)return at.tag===3?at.stateNode.containerInfo:null;it=null}else at!==it&&(it=null);return So=it,null}function fs(it){switch(it){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ll()){case Bl:return 1;case Nu:return 4;case ku:case Cc:return 16;case yo:return 536870912;default:return 16}default:return 16}}var Ji=null,ws=null,bs=null;function $a(){if(bs)return bs;var it,at=ws,ht=at.length,pt,_t="value"in Ji?Ji.value:Ji.textContent,Tt=_t.length;for(it=0;it<ht&&at[it]===_t[it];it++);var Ot=ht-it;for(pt=1;pt<=Ot&&at[ht-pt]===_t[Tt-pt];pt++);return bs=_t.slice(it,1<pt?1-pt:void 0)}function ql(it){var at=it.keyCode;return"charCode"in it?(it=it.charCode,it===0&&at===13&&(it=13)):it=at,it===10&&(it=13),32<=it||it===13?it:0}function Ko(){return!0}function Gu(){return!1}function ri(it){function at(ht,pt,_t,Tt,Ot){this._reactName=ht,this._targetInst=_t,this.type=pt,this.nativeEvent=Tt,this.target=Ot,this.currentTarget=null;for(var $t in it)it.hasOwnProperty($t)&&(ht=it[$t],this[$t]=ht?ht(Tt):Tt[$t]);return this.isDefaultPrevented=(Tt.defaultPrevented!=null?Tt.defaultPrevented:Tt.returnValue===!1)?Ko:Gu,this.isPropagationStopped=Gu,this}return Ft(at.prototype,{preventDefault:function(){this.defaultPrevented=!0;var ht=this.nativeEvent;ht&&(ht.preventDefault?ht.preventDefault():typeof ht.returnValue!="unknown"&&(ht.returnValue=!1),this.isDefaultPrevented=Ko)},stopPropagation:function(){var ht=this.nativeEvent;ht&&(ht.stopPropagation?ht.stopPropagation():typeof ht.cancelBubble!="unknown"&&(ht.cancelBubble=!0),this.isPropagationStopped=Ko)},persist:function(){},isPersistent:Ko}),at}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(it){return it.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qn=ri(Ii),Sa=Ft({},Ii,{view:0,detail:0}),$s=ri(Sa),zu,Hu,To,Qo=Ft({},Sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ql,button:0,buttons:0,relatedTarget:function(it){return it.relatedTarget===void 0?it.fromElement===it.srcElement?it.toElement:it.fromElement:it.relatedTarget},movementX:function(it){return"movementX"in it?it.movementX:(it!==To&&(To&&it.type==="mousemove"?(zu=it.screenX-To.screenX,Hu=it.screenY-To.screenY):Hu=zu=0,To=it),zu)},movementY:function(it){return"movementY"in it?it.movementY:Hu}}),Fc=ri(Qo),ju=Ft({},Qo,{dataTransfer:0}),kh=ri(ju),Zo=Ft({},Sa,{relatedTarget:0}),Yl=ri(Zo),Rd=Ft({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),$u=ri(Rd),Pd=Ft({},Ii,{clipboardData:function(it){return"clipboardData"in it?it.clipboardData:window.clipboardData}}),Vs=ri(Pd),Vu=Ft({},Ii,{data:0}),Kl=ri(Vu),Jo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lh(it){var at=this.nativeEvent;return at.getModifierState?at.getModifierState(it):(it=kc[it])?!!at[it]:!1}function Ql(){return Lh}var Lc=Ft({},Sa,{key:function(it){if(it.key){var at=Jo[it.key]||it.key;if(at!=="Unidentified")return at}return it.type==="keypress"?(it=ql(it),it===13?"Enter":String.fromCharCode(it)):it.type==="keydown"||it.type==="keyup"?Nc[it.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ql,charCode:function(it){return it.type==="keypress"?ql(it):0},keyCode:function(it){return it.type==="keydown"||it.type==="keyup"?it.keyCode:0},which:function(it){return it.type==="keypress"?ql(it):it.type==="keydown"||it.type==="keyup"?it.keyCode:0}}),el=ri(Lc),As=Ft({},Qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Va=ri(As),Bc=Ft({},Sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ql}),Bh=ri(Bc),ia=Ft({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wa=ri(ia),Uc=Ft({},Qo,{deltaX:function(it){return"deltaX"in it?it.deltaX:"wheelDeltaX"in it?-it.wheelDeltaX:0},deltaY:function(it){return"deltaY"in it?it.deltaY:"wheelDeltaY"in it?-it.wheelDeltaY:"wheelDelta"in it?-it.wheelDelta:0},deltaZ:0,deltaMode:0}),Uh=ri(Uc),Ta=[9,13,27,32],sa=dt&&"CompositionEvent"in window,Xa=null;dt&&"documentMode"in document&&(Xa=document.documentMode);var Gh=dt&&"TextEvent"in window&&!Xa,Zl=dt&&(!sa||Xa&&8<Xa&&11>=Xa),Gc=" ",zc=!1;function Wu(it,at){switch(it){case"keyup":return Ta.indexOf(at.keyCode)!==-1;case"keydown":return at.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jl(it){return it=it.detail,typeof it=="object"&&"data"in it?it.data:null}var wo=!1;function zh(it,at){switch(it){case"compositionend":return Jl(at);case"keypress":return at.which!==32?null:(zc=!0,Gc);case"textInput":return it=at.data,it===Gc&&zc?null:it;default:return null}}function Hh(it,at){if(wo)return it==="compositionend"||!sa&&Wu(it,at)?(it=$a(),bs=ws=Ji=null,wo=!1,it):null;switch(it){case"paste":return null;case"keypress":if(!(at.ctrlKey||at.altKey||at.metaKey)||at.ctrlKey&&at.altKey){if(at.char&&1<at.char.length)return at.char;if(at.which)return String.fromCharCode(at.which)}return null;case"compositionend":return Zl&&at.locale!=="ko"?null:at.data;default:return null}}var Hc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tl(it){var at=it&&it.nodeName&&it.nodeName.toLowerCase();return at==="input"?!!Hc[it.type]:at==="textarea"}function eu(it,at,ht,pt){Es(pt),at=ou(at,"onChange"),0<at.length&&(ht=new Qn("onChange","change",null,ht,pt),it.push({event:ht,listeners:at}))}var rl=null,nl=null;function il(it){rc(it,0)}function tu(it){var at=Po(it);if(Nr(at))return it}function ru(it,at){if(it==="change")return at}var ps=!1;if(dt){var bo;if(dt){var qa="oninput"in document;if(!qa){var Ws=document.createElement("div");Ws.setAttribute("oninput","return;"),qa=typeof Ws.oninput=="function"}bo=qa}else bo=!1;ps=bo&&(!document.documentMode||9<document.documentMode)}function Xu(){rl&&(rl.detachEvent("onpropertychange",Ao),nl=rl=null)}function Ao(it){if(it.propertyName==="value"&&tu(nl)){var at=[];eu(at,nl,it,Wn(it)),jo(il,at)}}function jh(it,at,ht){it==="focusin"?(Xu(),rl=at,nl=ht,rl.attachEvent("onpropertychange",Ao)):it==="focusout"&&Xu()}function jc(it){if(it==="selectionchange"||it==="keyup"||it==="keydown")return tu(nl)}function li(it,at){if(it==="click")return tu(at)}function qu(it,at){if(it==="input"||it==="change")return tu(at)}function $c(it,at){return it===at&&(it!==0||1/it===1/at)||it!==it&&at!==at}var ms=typeof Object.is=="function"?Object.is:$c;function Ya(it,at){if(ms(it,at))return!0;if(typeof it!="object"||it===null||typeof at!="object"||at===null)return!1;var ht=Object.keys(it),pt=Object.keys(at);if(ht.length!==pt.length)return!1;for(pt=0;pt<ht.length;pt++){var _t=ht[pt];if(!ft.call(at,_t)||!ms(it[_t],at[_t]))return!1}return!0}function Yu(it){for(;it&&it.firstChild;)it=it.firstChild;return it}function Ka(it,at){var ht=Yu(it);it=0;for(var pt;ht;){if(ht.nodeType===3){if(pt=it+ht.textContent.length,it<=at&&pt>=at)return{node:ht,offset:at-it};it=pt}e:{for(;ht;){if(ht.nextSibling){ht=ht.nextSibling;break e}ht=ht.parentNode}ht=void 0}ht=Yu(ht)}}function oi(it,at){return it&&at?it===at?!0:it&&it.nodeType===3?!1:at&&at.nodeType===3?oi(it,at.parentNode):"contains"in it?it.contains(at):it.compareDocumentPosition?!!(it.compareDocumentPosition(at)&16):!1:!1}function Ei(){for(var it=window,at=Br();at instanceof it.HTMLIFrameElement;){try{var ht=typeof at.contentWindow.location.href=="string"}catch{ht=!1}if(ht)it=at.contentWindow;else break;at=Br(it.document)}return at}function pi(it){var at=it&&it.nodeName&&it.nodeName.toLowerCase();return at&&(at==="input"&&(it.type==="text"||it.type==="search"||it.type==="tel"||it.type==="url"||it.type==="password")||at==="textarea"||it.contentEditable==="true")}function Ku(it){var at=Ei(),ht=it.focusedElem,pt=it.selectionRange;if(at!==ht&&ht&&ht.ownerDocument&&oi(ht.ownerDocument.documentElement,ht)){if(pt!==null&&pi(ht)){if(at=pt.start,it=pt.end,it===void 0&&(it=at),"selectionStart"in ht)ht.selectionStart=at,ht.selectionEnd=Math.min(it,ht.value.length);else if(it=(at=ht.ownerDocument||document)&&at.defaultView||window,it.getSelection){it=it.getSelection();var _t=ht.textContent.length,Tt=Math.min(pt.start,_t);pt=pt.end===void 0?Tt:Math.min(pt.end,_t),!it.extend&&Tt>pt&&(_t=pt,pt=Tt,Tt=_t),_t=Ka(ht,Tt);var Ot=Ka(ht,pt);_t&&Ot&&(it.rangeCount!==1||it.anchorNode!==_t.node||it.anchorOffset!==_t.offset||it.focusNode!==Ot.node||it.focusOffset!==Ot.offset)&&(at=at.createRange(),at.setStart(_t.node,_t.offset),it.removeAllRanges(),Tt>pt?(it.addRange(at),it.extend(Ot.node,Ot.offset)):(at.setEnd(Ot.node,Ot.offset),it.addRange(at)))}}for(at=[],it=ht;it=it.parentNode;)it.nodeType===1&&at.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof ht.focus=="function"&&ht.focus(),ht=0;ht<at.length;ht++)it=at[ht],it.element.scrollLeft=it.left,it.element.scrollTop=it.top}}var nu=dt&&"documentMode"in document&&11>=document.documentMode,aa=null,Vc=null,mi=null,iu=!1;function Qu(it,at,ht){var pt=ht.window===ht?ht.document:ht.nodeType===9?ht:ht.ownerDocument;iu||aa==null||aa!==Br(pt)||(pt=aa,"selectionStart"in pt&&pi(pt)?pt={start:pt.selectionStart,end:pt.selectionEnd}:(pt=(pt.ownerDocument&&pt.ownerDocument.defaultView||window).getSelection(),pt={anchorNode:pt.anchorNode,anchorOffset:pt.anchorOffset,focusNode:pt.focusNode,focusOffset:pt.focusOffset}),mi&&Ya(mi,pt)||(mi=pt,pt=ou(Vc,"onSelect"),0<pt.length&&(at=new Qn("onSelect","select",null,at,ht),it.push({event:at,listeners:pt}),at.target=aa)))}function sl(it,at){var ht={};return ht[it.toLowerCase()]=at.toLowerCase(),ht["Webkit"+it]="webkit"+at,ht["Moz"+it]="moz"+at,ht}var Wi={animationend:sl("Animation","AnimationEnd"),animationiteration:sl("Animation","AnimationIteration"),animationstart:sl("Animation","AnimationStart"),transitionend:sl("Transition","TransitionEnd")},es={},al={};dt&&(al=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function ol(it){if(es[it])return es[it];if(!Wi[it])return it;var at=Wi[it],ht;for(ht in at)if(at.hasOwnProperty(ht)&&ht in al)return es[it]=at[ht];return it}var Zu=ol("animationend"),Wc=ol("animationiteration"),Xc=ol("animationstart"),qc=ol("transitionend"),Yc=new Map,Kc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wa(it,at){Yc.set(it,at),ot(at,[it])}for(var Ju=0;Ju<Kc.length;Ju++){var ec=Kc[Ju],su=ec.toLowerCase(),$h=ec[0].toUpperCase()+ec.slice(1);wa(su,"on"+$h)}wa(Zu,"onAnimationEnd"),wa(Wc,"onAnimationIteration"),wa(Xc,"onAnimationStart"),wa("dblclick","onDoubleClick"),wa("focusin","onFocus"),wa("focusout","onBlur"),wa(qc,"onTransitionEnd"),ct("onMouseEnter",["mouseout","mouseover"]),ct("onMouseLeave",["mouseout","mouseover"]),ct("onPointerEnter",["pointerout","pointerover"]),ct("onPointerLeave",["pointerout","pointerover"]),ot("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ot("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ot("onBeforeInput",["compositionend","keypress","textInput","paste"]),ot("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ot("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ot("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qa));function Qc(it,at,ht){var pt=it.type||"unknown-event";it.currentTarget=ht,Nl(pt,at,void 0,it),it.currentTarget=null}function rc(it,at){at=(at&4)!==0;for(var ht=0;ht<it.length;ht++){var pt=it[ht],_t=pt.event;pt=pt.listeners;e:{var Tt=void 0;if(at)for(var Ot=pt.length-1;0<=Ot;Ot--){var $t=pt[Ot],Vt=$t.instance,ar=$t.currentTarget;if($t=$t.listener,Vt!==Tt&&_t.isPropagationStopped())break e;Qc(_t,$t,ar),Tt=Vt}else for(Ot=0;Ot<pt.length;Ot++){if($t=pt[Ot],Vt=$t.instance,ar=$t.currentTarget,$t=$t.listener,Vt!==Tt&&_t.isPropagationStopped())break e;Qc(_t,$t,ar),Tt=Vt}}}if(mo)throw it=ya,mo=!1,ya=null,it}function Zn(it,at){var ht=at[Ui];ht===void 0&&(ht=at[Ui]=new Set);var pt=it+"__bubble";ht.has(pt)||(ic(at,it,2,!1),ht.add(pt))}function nc(it,at,ht){var pt=0;at&&(pt|=4),ic(ht,it,pt,at)}var au="_reactListening"+Math.random().toString(36).slice(2);function ll(it){if(!it[au]){it[au]=!0,nt.forEach(function(ht){ht!=="selectionchange"&&(tc.has(ht)||nc(ht,!1,it),nc(ht,!0,it))});var at=it.nodeType===9?it:it.ownerDocument;at===null||at[au]||(at[au]=!0,nc("selectionchange",!1,at))}}function ic(it,at,ht,pt){switch(fs(at)){case 1:var _t=Xo;break;case 4:_t=qo;break;default:_t=Yo}ht=_t.bind(null,at,ht,it),_t=void 0,!ma||at!=="touchstart"&&at!=="touchmove"&&at!=="wheel"||(_t=!0),pt?_t!==void 0?it.addEventListener(at,ht,{capture:!0,passive:_t}):it.addEventListener(at,ht,!0):_t!==void 0?it.addEventListener(at,ht,{passive:_t}):it.addEventListener(at,ht,!1)}function sc(it,at,ht,pt,_t){var Tt=pt;if(!(at&1)&&!(at&2)&&pt!==null)e:for(;;){if(pt===null)return;var Ot=pt.tag;if(Ot===3||Ot===4){var $t=pt.stateNode.containerInfo;if($t===_t||$t.nodeType===8&&$t.parentNode===_t)break;if(Ot===4)for(Ot=pt.return;Ot!==null;){var Vt=Ot.tag;if((Vt===3||Vt===4)&&(Vt=Ot.stateNode.containerInfo,Vt===_t||Vt.nodeType===8&&Vt.parentNode===_t))return;Ot=Ot.return}for(;$t!==null;){if(Ot=Za($t),Ot===null)return;if(Vt=Ot.tag,Vt===5||Vt===6){pt=Tt=Ot;continue e}$t=$t.parentNode}}pt=pt.return}jo(function(){var ar=Tt,xr=Wn(ht),wr=[];e:{var _r=Yc.get(it);if(_r!==void 0){var Dr=Qn,Lr=it;switch(it){case"keypress":if(ql(ht)===0)break e;case"keydown":case"keyup":Dr=el;break;case"focusin":Lr="focus",Dr=Yl;break;case"focusout":Lr="blur",Dr=Yl;break;case"beforeblur":case"afterblur":Dr=Yl;break;case"click":if(ht.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Dr=Fc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Dr=kh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Dr=Bh;break;case Zu:case Wc:case Xc:Dr=$u;break;case qc:Dr=Wa;break;case"scroll":Dr=$s;break;case"wheel":Dr=Uh;break;case"copy":case"cut":case"paste":Dr=Vs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Dr=Va}var zr=(at&4)!==0,bi=!zr&&it==="scroll",er=zr?_r!==null?_r+"Capture":null:_r;zr=[];for(var qt=ar,nr;qt!==null;){nr=qt;var Rr=nr.stateNode;if(nr.tag===5&&Rr!==null&&(nr=Rr,er!==null&&(Rr=Ga(qt,er),Rr!=null&&zr.push(ul(qt,Rr,nr)))),bi)break;qt=qt.return}0<zr.length&&(_r=new Dr(_r,Lr,null,ht,xr),wr.push({event:_r,listeners:zr}))}}if(!(at&7)){e:{if(_r=it==="mouseover"||it==="pointerover",Dr=it==="mouseout"||it==="pointerout",_r&&ht!==Hn&&(Lr=ht.relatedTarget||ht.fromElement)&&(Za(Lr)||Lr[ui]))break e;if((Dr||_r)&&(_r=xr.window===xr?xr:(_r=xr.ownerDocument)?_r.defaultView||_r.parentWindow:window,Dr?(Lr=ht.relatedTarget||ht.toElement,Dr=ar,Lr=Lr?Za(Lr):null,Lr!==null&&(bi=ra(Lr),Lr!==bi||Lr.tag!==5&&Lr.tag!==6)&&(Lr=null)):(Dr=null,Lr=ar),Dr!==Lr)){if(zr=Fc,Rr="onMouseLeave",er="onMouseEnter",qt="mouse",(it==="pointerout"||it==="pointerover")&&(zr=Va,Rr="onPointerLeave",er="onPointerEnter",qt="pointer"),bi=Dr==null?_r:Po(Dr),nr=Lr==null?_r:Po(Lr),_r=new zr(Rr,qt+"leave",Dr,ht,xr),_r.target=bi,_r.relatedTarget=nr,Rr=null,Za(xr)===ar&&(zr=new zr(er,qt+"enter",Lr,ht,xr),zr.target=nr,zr.relatedTarget=bi,Rr=zr),bi=Rr,Dr&&Lr)t:{for(zr=Dr,er=Lr,qt=0,nr=zr;nr;nr=cl(nr))qt++;for(nr=0,Rr=er;Rr;Rr=cl(Rr))nr++;for(;0<qt-nr;)zr=cl(zr),qt--;for(;0<nr-qt;)er=cl(er),nr--;for(;qt--;){if(zr===er||er!==null&&zr===er.alternate)break t;zr=cl(zr),er=cl(er)}zr=null}else zr=null;Dr!==null&&Zc(wr,_r,Dr,zr,!1),Lr!==null&&bi!==null&&Zc(wr,bi,Lr,zr,!0)}}e:{if(_r=ar?Po(ar):window,Dr=_r.nodeName&&_r.nodeName.toLowerCase(),Dr==="select"||Dr==="input"&&_r.type==="file")var Hr=ru;else if(tl(_r))if(ps)Hr=qu;else{Hr=jc;var Vr=jh}else(Dr=_r.nodeName)&&Dr.toLowerCase()==="input"&&(_r.type==="checkbox"||_r.type==="radio")&&(Hr=li);if(Hr&&(Hr=Hr(it,ar))){eu(wr,Hr,ht,xr);break e}Vr&&Vr(it,_r,ar),it==="focusout"&&(Vr=_r._wrapperState)&&Vr.controlled&&_r.type==="number"&&zs(_r,"number",_r.value)}switch(Vr=ar?Po(ar):window,it){case"focusin":(tl(Vr)||Vr.contentEditable==="true")&&(aa=Vr,Vc=ar,mi=null);break;case"focusout":mi=Vc=aa=null;break;case"mousedown":iu=!0;break;case"contextmenu":case"mouseup":case"dragend":iu=!1,Qu(wr,ht,xr);break;case"selectionchange":if(nu)break;case"keydown":case"keyup":Qu(wr,ht,xr)}var Wr;if(sa)e:{switch(it){case"compositionstart":var Xr="onCompositionStart";break e;case"compositionend":Xr="onCompositionEnd";break e;case"compositionupdate":Xr="onCompositionUpdate";break e}Xr=void 0}else wo?Wu(it,ht)&&(Xr="onCompositionEnd"):it==="keydown"&&ht.keyCode===229&&(Xr="onCompositionStart");Xr&&(Zl&&ht.locale!=="ko"&&(wo||Xr!=="onCompositionStart"?Xr==="onCompositionEnd"&&wo&&(Wr=$a()):(Ji=xr,ws="value"in Ji?Ji.value:Ji.textContent,wo=!0)),Vr=ou(ar,Xr),0<Vr.length&&(Xr=new Kl(Xr,it,null,ht,xr),wr.push({event:Xr,listeners:Vr}),Wr?Xr.data=Wr:(Wr=Jl(ht),Wr!==null&&(Xr.data=Wr)))),(Wr=Gh?zh(it,ht):Hh(it,ht))&&(ar=ou(ar,"onBeforeInput"),0<ar.length&&(xr=new Kl("onBeforeInput","beforeinput",null,ht,xr),wr.push({event:xr,listeners:ar}),xr.data=Wr))}rc(wr,at)})}function ul(it,at,ht){return{instance:it,listener:at,currentTarget:ht}}function ou(it,at){for(var ht=at+"Capture",pt=[];it!==null;){var _t=it,Tt=_t.stateNode;_t.tag===5&&Tt!==null&&(_t=Tt,Tt=Ga(it,ht),Tt!=null&&pt.unshift(ul(it,Tt,_t)),Tt=Ga(it,at),Tt!=null&&pt.push(ul(it,Tt,_t))),it=it.return}return pt}function cl(it){if(it===null)return null;do it=it.return;while(it&&it.tag!==5);return it||null}function Zc(it,at,ht,pt,_t){for(var Tt=at._reactName,Ot=[];ht!==null&&ht!==pt;){var $t=ht,Vt=$t.alternate,ar=$t.stateNode;if(Vt!==null&&Vt===pt)break;$t.tag===5&&ar!==null&&($t=ar,_t?(Vt=Ga(ht,Tt),Vt!=null&&Ot.unshift(ul(ht,Vt,$t))):_t||(Vt=Ga(ht,Tt),Vt!=null&&Ot.push(ul(ht,Vt,$t)))),ht=ht.return}Ot.length!==0&&it.push({event:at,listeners:Ot})}var Cd=/\r\n?/g,Id=/\u0000|\uFFFD/g;function Jc(it){return(typeof it=="string"?it:""+it).replace(Cd,`
`).replace(Id,"")}function lu(it,at,ht){if(at=Jc(at),Jc(it)!==at&&ht)throw Error(tt(425))}function uu(){}var hl=null,eh=null;function th(it,at){return it==="textarea"||it==="noscript"||typeof at.children=="string"||typeof at.children=="number"||typeof at.dangerouslySetInnerHTML=="object"&&at.dangerouslySetInnerHTML!==null&&at.dangerouslySetInnerHTML.__html!=null}var rh=typeof setTimeout=="function"?setTimeout:void 0,dl=typeof clearTimeout=="function"?clearTimeout:void 0,ac=typeof Promise=="function"?Promise:void 0,nh=typeof queueMicrotask=="function"?queueMicrotask:typeof ac<"u"?function(it){return ac.resolve(null).then(it).catch(Md)}:rh;function Md(it){setTimeout(function(){throw it})}function oc(it,at){var ht=at,pt=0;do{var _t=ht.nextSibling;if(it.removeChild(ht),_t&&_t.nodeType===8)if(ht=_t.data,ht==="/$"){if(pt===0){it.removeChild(_t),xo(at);return}pt--}else ht!=="$"&&ht!=="$?"&&ht!=="$!"||pt++;ht=_t}while(ht);xo(at)}function ba(it){for(;it!=null;it=it.nextSibling){var at=it.nodeType;if(at===1||at===3)break;if(at===8){if(at=it.data,at==="$"||at==="$!"||at==="$?")break;if(at==="/$")return null}}return it}function ih(it){it=it.previousSibling;for(var at=0;it;){if(it.nodeType===8){var ht=it.data;if(ht==="$"||ht==="$!"||ht==="$?"){if(at===0)return it;at--}else ht==="/$"&&at++}it=it.previousSibling}return null}var Ro=Math.random().toString(36).slice(2),Xs="__reactFiber$"+Ro,cu="__reactProps$"+Ro,ui="__reactContainer$"+Ro,Ui="__reactEvents$"+Ro,Vh="__reactListeners$"+Ro,Wh="__reactHandles$"+Ro;function Za(it){var at=it[Xs];if(at)return at;for(var ht=it.parentNode;ht;){if(at=ht[ui]||ht[Xs]){if(ht=at.alternate,at.child!==null||ht!==null&&ht.child!==null)for(it=ih(it);it!==null;){if(ht=it[Xs])return ht;it=ih(it)}return at}it=ht,ht=it.parentNode}return null}function fl(it){return it=it[Xs]||it[ui],!it||it.tag!==5&&it.tag!==6&&it.tag!==13&&it.tag!==3?null:it}function Po(it){if(it.tag===5||it.tag===6)return it.stateNode;throw Error(tt(33))}function pl(it){return it[cu]||null}var lc=[],Ja=-1;function Aa(it){return{current:it}}function Jn(it){0>Ja||(it.current=lc[Ja],lc[Ja]=null,Ja--)}function $n(it,at){Ja++,lc[Ja]=it.current,it.current=at}var Rs={},Si=Aa(Rs),Mi=Aa(!1),Ra=Rs;function eo(it,at){var ht=it.type.contextTypes;if(!ht)return Rs;var pt=it.stateNode;if(pt&&pt.__reactInternalMemoizedUnmaskedChildContext===at)return pt.__reactInternalMemoizedMaskedChildContext;var _t={},Tt;for(Tt in ht)_t[Tt]=at[Tt];return pt&&(it=it.stateNode,it.__reactInternalMemoizedUnmaskedChildContext=at,it.__reactInternalMemoizedMaskedChildContext=_t),_t}function Xi(it){return it=it.childContextTypes,it!=null}function ml(){Jn(Mi),Jn(Si)}function hu(it,at,ht){if(Si.current!==Rs)throw Error(tt(168));$n(Si,at),$n(Mi,ht)}function sh(it,at,ht){var pt=it.stateNode;if(at=at.childContextTypes,typeof pt.getChildContext!="function")return ht;pt=pt.getChildContext();for(var _t in pt)if(!(_t in at))throw Error(tt(108,Sr(it)||"Unknown",_t));return Ft({},ht,pt)}function gl(it){return it=(it=it.stateNode)&&it.__reactInternalMemoizedMergedChildContext||Rs,Ra=Si.current,$n(Si,it),$n(Mi,Mi.current),!0}function ah(it,at,ht){var pt=it.stateNode;if(!pt)throw Error(tt(169));ht?(it=sh(it,at,Ra),pt.__reactInternalMemoizedMergedChildContext=it,Jn(Mi),Jn(Si),$n(Si,it)):Jn(Mi),$n(Mi,ht)}var Ps=null,Cs=!1,Is=!1;function oh(it){Ps===null?Ps=[it]:Ps.push(it)}function Xh(it){Cs=!0,oh(it)}function Ms(){if(!Is&&Ps!==null){Is=!0;var it=0,at=Mn;try{var ht=Ps;for(Mn=1;it<ht.length;it++){var pt=ht[it];do pt=pt(!0);while(pt!==null)}Ps=null,Cs=!1}catch(_t){throw Ps!==null&&(Ps=Ps.slice(it+1)),kl(Bl,Ms),_t}finally{Mn=at,Is=!1}}return null}var gi=[],yl=0,uc=null,Co=0,qn=[],Os=0,Mr=null,rs=1,oa="";function ro(it,at){gi[yl++]=Co,gi[yl++]=uc,uc=it,Co=at}function _l(it,at,ht){qn[Os++]=rs,qn[Os++]=oa,qn[Os++]=Mr,Mr=it;var pt=rs;it=oa;var _t=32-Ri(pt)-1;pt&=~(1<<_t),ht+=1;var Tt=32-Ri(at)+_t;if(30<Tt){var Ot=_t-_t%5;Tt=(pt&(1<<Ot)-1).toString(32),pt>>=Ot,_t-=Ot,rs=1<<32-Ri(at)+_t|ht<<_t|pt,oa=Tt+it}else rs=1<<Tt|ht<<_t|pt,oa=it}function vl(it){it.return!==null&&(ro(it,1),_l(it,1,0))}function du(it){for(;it===uc;)uc=gi[--yl],gi[yl]=null,Co=gi[--yl],gi[yl]=null;for(;it===Mr;)Mr=qn[--Os],qn[Os]=null,oa=qn[--Os],qn[Os]=null,rs=qn[--Os],qn[Os]=null}var ns=null,ss=null,ni=!1,gs=null;function cc(it,at){var ht=da(5,null,null,0);ht.elementType="DELETED",ht.stateNode=at,ht.return=it,at=it.deletions,at===null?(it.deletions=[ht],it.flags|=16):at.push(ht)}function Gi(it,at){switch(it.tag){case 5:var ht=it.type;return at=at.nodeType!==1||ht.toLowerCase()!==at.nodeName.toLowerCase()?null:at,at!==null?(it.stateNode=at,ns=it,ss=ba(at.firstChild),!0):!1;case 6:return at=it.pendingProps===""||at.nodeType!==3?null:at,at!==null?(it.stateNode=at,ns=it,ss=null,!0):!1;case 13:return at=at.nodeType!==8?null:at,at!==null?(ht=Mr!==null?{id:rs,overflow:oa}:null,it.memoizedState={dehydrated:at,treeContext:ht,retryLane:1073741824},ht=da(18,null,null,0),ht.stateNode=at,ht.return=it,it.child=ht,ns=it,ss=null,!0):!1;default:return!1}}function Ds(it){return(it.mode&1)!==0&&(it.flags&128)===0}function Fs(it){if(ni){var at=ss;if(at){var ht=at;if(!Gi(it,at)){if(Ds(it))throw Error(tt(418));at=ba(ht.nextSibling);var pt=ns;at&&Gi(it,at)?cc(pt,ht):(it.flags=it.flags&-4097|2,ni=!1,ns=it)}}else{if(Ds(it))throw Error(tt(418));it.flags=it.flags&-4097|2,ni=!1,ns=it}}}function hc(it){for(it=it.return;it!==null&&it.tag!==5&&it.tag!==3&&it.tag!==13;)it=it.return;ns=it}function fu(it){if(it!==ns)return!1;if(!ni)return hc(it),ni=!0,!1;var at;if((at=it.tag!==3)&&!(at=it.tag!==5)&&(at=it.type,at=at!=="head"&&at!=="body"&&!th(it.type,it.memoizedProps)),at&&(at=ss)){if(Ds(it))throw Ns(),Error(tt(418));for(;at;)cc(it,at),at=ba(at.nextSibling)}if(hc(it),it.tag===13){if(it=it.memoizedState,it=it!==null?it.dehydrated:null,!it)throw Error(tt(317));e:{for(it=it.nextSibling,at=0;it;){if(it.nodeType===8){var ht=it.data;if(ht==="/$"){if(at===0){ss=ba(it.nextSibling);break e}at--}else ht!=="$"&&ht!=="$!"&&ht!=="$?"||at++}it=it.nextSibling}ss=null}}else ss=ns?ba(it.stateNode.nextSibling):null;return!0}function Ns(){for(var it=ss;it;)it=ba(it.nextSibling)}function Io(){ss=ns=null,ni=!1}function ks(it){gs===null?gs=[it]:gs.push(it)}var Od=zt.ReactCurrentBatchConfig;function xl(it,at,ht){if(it=ht.ref,it!==null&&typeof it!="function"&&typeof it!="object"){if(ht._owner){if(ht=ht._owner,ht){if(ht.tag!==1)throw Error(tt(309));var pt=ht.stateNode}if(!pt)throw Error(tt(147,it));var _t=pt,Tt=""+it;return at!==null&&at.ref!==null&&typeof at.ref=="function"&&at.ref._stringRef===Tt?at.ref:(at=function(Ot){var $t=_t.refs;Ot===null?delete $t[Tt]:$t[Tt]=Ot},at._stringRef=Tt,at)}if(typeof it!="string")throw Error(tt(284));if(!ht._owner)throw Error(tt(290,it))}return it}function pu(it,at){throw it=Object.prototype.toString.call(at),Error(tt(31,it==="[object Object]"?"object with keys {"+Object.keys(at).join(", ")+"}":it))}function lh(it){var at=it._init;return at(it._payload)}function uh(it){function at(er,qt){if(it){var nr=er.deletions;nr===null?(er.deletions=[qt],er.flags|=16):nr.push(qt)}}function ht(er,qt){if(!it)return null;for(;qt!==null;)at(er,qt),qt=qt.sibling;return null}function pt(er,qt){for(er=new Map;qt!==null;)qt.key!==null?er.set(qt.key,qt):er.set(qt.index,qt),qt=qt.sibling;return er}function _t(er,qt){return er=Il(er,qt),er.index=0,er.sibling=null,er}function Tt(er,qt,nr){return er.index=nr,it?(nr=er.alternate,nr!==null?(nr=nr.index,nr<qt?(er.flags|=2,qt):nr):(er.flags|=2,qt)):(er.flags|=1048576,qt)}function Ot(er){return it&&er.alternate===null&&(er.flags|=2),er}function $t(er,qt,nr,Rr){return qt===null||qt.tag!==6?(qt=rf(nr,er.mode,Rr),qt.return=er,qt):(qt=_t(qt,nr),qt.return=er,qt)}function Vt(er,qt,nr,Rr){var Hr=nr.type;return Hr===Nt?xr(er,qt,nr.props.children,Rr,nr.key):qt!==null&&(qt.elementType===Hr||typeof Hr=="object"&&Hr!==null&&Hr.$$typeof===Ut&&lh(Hr)===qt.type)?(Rr=_t(qt,nr.props),Rr.ref=xl(er,qt,nr),Rr.return=er,Rr):(Rr=hd(nr.type,nr.key,nr.props,null,er.mode,Rr),Rr.ref=xl(er,qt,nr),Rr.return=er,Rr)}function ar(er,qt,nr,Rr){return qt===null||qt.tag!==4||qt.stateNode.containerInfo!==nr.containerInfo||qt.stateNode.implementation!==nr.implementation?(qt=nf(nr,er.mode,Rr),qt.return=er,qt):(qt=_t(qt,nr.children||[]),qt.return=er,qt)}function xr(er,qt,nr,Rr,Hr){return qt===null||qt.tag!==7?(qt=Iu(nr,er.mode,Rr,Hr),qt.return=er,qt):(qt=_t(qt,nr),qt.return=er,qt)}function wr(er,qt,nr){if(typeof qt=="string"&&qt!==""||typeof qt=="number")return qt=rf(""+qt,er.mode,nr),qt.return=er,qt;if(typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case Lt:return nr=hd(qt.type,qt.key,qt.props,null,er.mode,nr),nr.ref=xl(er,null,qt),nr.return=er,nr;case Yt:return qt=nf(qt,er.mode,nr),qt.return=er,qt;case Ut:var Rr=qt._init;return wr(er,Rr(qt._payload),nr)}if(Ci(qt)||jt(qt))return qt=Iu(qt,er.mode,nr,null),qt.return=er,qt;pu(er,qt)}return null}function _r(er,qt,nr,Rr){var Hr=qt!==null?qt.key:null;if(typeof nr=="string"&&nr!==""||typeof nr=="number")return Hr!==null?null:$t(er,qt,""+nr,Rr);if(typeof nr=="object"&&nr!==null){switch(nr.$$typeof){case Lt:return nr.key===Hr?Vt(er,qt,nr,Rr):null;case Yt:return nr.key===Hr?ar(er,qt,nr,Rr):null;case Ut:return Hr=nr._init,_r(er,qt,Hr(nr._payload),Rr)}if(Ci(nr)||jt(nr))return Hr!==null?null:xr(er,qt,nr,Rr,null);pu(er,nr)}return null}function Dr(er,qt,nr,Rr,Hr){if(typeof Rr=="string"&&Rr!==""||typeof Rr=="number")return er=er.get(nr)||null,$t(qt,er,""+Rr,Hr);if(typeof Rr=="object"&&Rr!==null){switch(Rr.$$typeof){case Lt:return er=er.get(Rr.key===null?nr:Rr.key)||null,Vt(qt,er,Rr,Hr);case Yt:return er=er.get(Rr.key===null?nr:Rr.key)||null,ar(qt,er,Rr,Hr);case Ut:var Vr=Rr._init;return Dr(er,qt,nr,Vr(Rr._payload),Hr)}if(Ci(Rr)||jt(Rr))return er=er.get(nr)||null,xr(qt,er,Rr,Hr,null);pu(qt,Rr)}return null}function Lr(er,qt,nr,Rr){for(var Hr=null,Vr=null,Wr=qt,Xr=qt=0,ji=null;Wr!==null&&Xr<nr.length;Xr++){Wr.index>Xr?(ji=Wr,Wr=null):ji=Wr.sibling;var Vn=_r(er,Wr,nr[Xr],Rr);if(Vn===null){Wr===null&&(Wr=ji);break}it&&Wr&&Vn.alternate===null&&at(er,Wr),qt=Tt(Vn,qt,Xr),Vr===null?Hr=Vn:Vr.sibling=Vn,Vr=Vn,Wr=ji}if(Xr===nr.length)return ht(er,Wr),ni&&ro(er,Xr),Hr;if(Wr===null){for(;Xr<nr.length;Xr++)Wr=wr(er,nr[Xr],Rr),Wr!==null&&(qt=Tt(Wr,qt,Xr),Vr===null?Hr=Wr:Vr.sibling=Wr,Vr=Wr);return ni&&ro(er,Xr),Hr}for(Wr=pt(er,Wr);Xr<nr.length;Xr++)ji=Dr(Wr,er,Xr,nr[Xr],Rr),ji!==null&&(it&&ji.alternate!==null&&Wr.delete(ji.key===null?Xr:ji.key),qt=Tt(ji,qt,Xr),Vr===null?Hr=ji:Vr.sibling=ji,Vr=ji);return it&&Wr.forEach(function(Ml){return at(er,Ml)}),ni&&ro(er,Xr),Hr}function zr(er,qt,nr,Rr){var Hr=jt(nr);if(typeof Hr!="function")throw Error(tt(150));if(nr=Hr.call(nr),nr==null)throw Error(tt(151));for(var Vr=Hr=null,Wr=qt,Xr=qt=0,ji=null,Vn=nr.next();Wr!==null&&!Vn.done;Xr++,Vn=nr.next()){Wr.index>Xr?(ji=Wr,Wr=null):ji=Wr.sibling;var Ml=_r(er,Wr,Vn.value,Rr);if(Ml===null){Wr===null&&(Wr=ji);break}it&&Wr&&Ml.alternate===null&&at(er,Wr),qt=Tt(Ml,qt,Xr),Vr===null?Hr=Ml:Vr.sibling=Ml,Vr=Ml,Wr=ji}if(Vn.done)return ht(er,Wr),ni&&ro(er,Xr),Hr;if(Wr===null){for(;!Vn.done;Xr++,Vn=nr.next())Vn=wr(er,Vn.value,Rr),Vn!==null&&(qt=Tt(Vn,qt,Xr),Vr===null?Hr=Vn:Vr.sibling=Vn,Vr=Vn);return ni&&ro(er,Xr),Hr}for(Wr=pt(er,Wr);!Vn.done;Xr++,Vn=nr.next())Vn=Dr(Wr,er,Xr,Vn.value,Rr),Vn!==null&&(it&&Vn.alternate!==null&&Wr.delete(Vn.key===null?Xr:Vn.key),qt=Tt(Vn,qt,Xr),Vr===null?Hr=Vn:Vr.sibling=Vn,Vr=Vn);return it&&Wr.forEach(function(Ep){return at(er,Ep)}),ni&&ro(er,Xr),Hr}function bi(er,qt,nr,Rr){if(typeof nr=="object"&&nr!==null&&nr.type===Nt&&nr.key===null&&(nr=nr.props.children),typeof nr=="object"&&nr!==null){switch(nr.$$typeof){case Lt:e:{for(var Hr=nr.key,Vr=qt;Vr!==null;){if(Vr.key===Hr){if(Hr=nr.type,Hr===Nt){if(Vr.tag===7){ht(er,Vr.sibling),qt=_t(Vr,nr.props.children),qt.return=er,er=qt;break e}}else if(Vr.elementType===Hr||typeof Hr=="object"&&Hr!==null&&Hr.$$typeof===Ut&&lh(Hr)===Vr.type){ht(er,Vr.sibling),qt=_t(Vr,nr.props),qt.ref=xl(er,Vr,nr),qt.return=er,er=qt;break e}ht(er,Vr);break}else at(er,Vr);Vr=Vr.sibling}nr.type===Nt?(qt=Iu(nr.props.children,er.mode,Rr,nr.key),qt.return=er,er=qt):(Rr=hd(nr.type,nr.key,nr.props,null,er.mode,Rr),Rr.ref=xl(er,qt,nr),Rr.return=er,er=Rr)}return Ot(er);case Yt:e:{for(Vr=nr.key;qt!==null;){if(qt.key===Vr)if(qt.tag===4&&qt.stateNode.containerInfo===nr.containerInfo&&qt.stateNode.implementation===nr.implementation){ht(er,qt.sibling),qt=_t(qt,nr.children||[]),qt.return=er,er=qt;break e}else{ht(er,qt);break}else at(er,qt);qt=qt.sibling}qt=nf(nr,er.mode,Rr),qt.return=er,er=qt}return Ot(er);case Ut:return Vr=nr._init,bi(er,qt,Vr(nr._payload),Rr)}if(Ci(nr))return Lr(er,qt,nr,Rr);if(jt(nr))return zr(er,qt,nr,Rr);pu(er,nr)}return typeof nr=="string"&&nr!==""||typeof nr=="number"?(nr=""+nr,qt!==null&&qt.tag===6?(ht(er,qt.sibling),qt=_t(qt,nr),qt.return=er,er=qt):(ht(er,qt),qt=rf(nr,er.mode,Rr),qt.return=er,er=qt),Ot(er)):ht(er,qt)}return bi}var Pa=uh(!0),mu=uh(!1),Mo=Aa(null),Oo=null,Ca=null,Do=null;function gu(){Do=Ca=Oo=null}function yu(it){var at=Mo.current;Jn(Mo),it._currentValue=at}function _u(it,at,ht){for(;it!==null;){var pt=it.alternate;if((it.childLanes&at)!==at?(it.childLanes|=at,pt!==null&&(pt.childLanes|=at)):pt!==null&&(pt.childLanes&at)!==at&&(pt.childLanes|=at),it===ht)break;it=it.return}}function Fo(it,at){Oo=it,Do=Ca=null,it=it.dependencies,it!==null&&it.firstContext!==null&&(it.lanes&at&&(Qt=!0),it.firstContext=null)}function as(it){var at=it._currentValue;if(Do!==it)if(it={context:it,memoizedValue:at,next:null},Ca===null){if(Oo===null)throw Error(tt(308));Ca=it,Oo.dependencies={lanes:0,firstContext:it}}else Ca=Ca.next=it;return at}var No=null;function El(it){No===null?No=[it]:No.push(it)}function dc(it,at,ht,pt){var _t=at.interleaved;return _t===null?(ht.next=ht,El(at)):(ht.next=_t.next,_t.next=ht),at.interleaved=ht,Xn(it,pt)}function Xn(it,at){it.lanes|=at;var ht=it.alternate;for(ht!==null&&(ht.lanes|=at),ht=it,it=it.return;it!==null;)it.childLanes|=at,ht=it.alternate,ht!==null&&(ht.childLanes|=at),ht=it,it=it.return;return ht.tag===3?ht.stateNode:null}var Yr=!1;function yi(it){it.updateQueue={baseState:it.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function di(it,at){it=it.updateQueue,at.updateQueue===it&&(at.updateQueue={baseState:it.baseState,firstBaseUpdate:it.firstBaseUpdate,lastBaseUpdate:it.lastBaseUpdate,shared:it.shared,effects:it.effects})}function ii(it,at){return{eventTime:it,lane:at,tag:0,payload:null,callback:null,next:null}}function _i(it,at,ht){var pt=it.updateQueue;if(pt===null)return null;if(pt=pt.shared,Gn&2){var _t=pt.pending;return _t===null?at.next=at:(at.next=_t.next,_t.next=at),pt.pending=at,Xn(it,ht)}return _t=pt.interleaved,_t===null?(at.next=at,El(pt)):(at.next=_t.next,_t.next=at),pt.interleaved=at,Xn(it,ht)}function Ia(it,at,ht){if(at=at.updateQueue,at!==null&&(at=at.shared,(ht&4194240)!==0)){var pt=at.lanes;pt&=it.pendingLanes,ht|=pt,at.lanes=ht,zl(it,ht)}}function vi(it,at){var ht=it.updateQueue,pt=it.alternate;if(pt!==null&&(pt=pt.updateQueue,ht===pt)){var _t=null,Tt=null;if(ht=ht.firstBaseUpdate,ht!==null){do{var Ot={eventTime:ht.eventTime,lane:ht.lane,tag:ht.tag,payload:ht.payload,callback:ht.callback,next:null};Tt===null?_t=Tt=Ot:Tt=Tt.next=Ot,ht=ht.next}while(ht!==null);Tt===null?_t=Tt=at:Tt=Tt.next=at}else _t=Tt=at;ht={baseState:pt.baseState,firstBaseUpdate:_t,lastBaseUpdate:Tt,shared:pt.shared,effects:pt.effects},it.updateQueue=ht;return}it=ht.lastBaseUpdate,it===null?ht.firstBaseUpdate=at:it.next=at,ht.lastBaseUpdate=at}function no(it,at,ht,pt){var _t=it.updateQueue;Yr=!1;var Tt=_t.firstBaseUpdate,Ot=_t.lastBaseUpdate,$t=_t.shared.pending;if($t!==null){_t.shared.pending=null;var Vt=$t,ar=Vt.next;Vt.next=null,Ot===null?Tt=ar:Ot.next=ar,Ot=Vt;var xr=it.alternate;xr!==null&&(xr=xr.updateQueue,$t=xr.lastBaseUpdate,$t!==Ot&&($t===null?xr.firstBaseUpdate=ar:$t.next=ar,xr.lastBaseUpdate=Vt))}if(Tt!==null){var wr=_t.baseState;Ot=0,xr=ar=Vt=null,$t=Tt;do{var _r=$t.lane,Dr=$t.eventTime;if((pt&_r)===_r){xr!==null&&(xr=xr.next={eventTime:Dr,lane:0,tag:$t.tag,payload:$t.payload,callback:$t.callback,next:null});e:{var Lr=it,zr=$t;switch(_r=at,Dr=ht,zr.tag){case 1:if(Lr=zr.payload,typeof Lr=="function"){wr=Lr.call(Dr,wr,_r);break e}wr=Lr;break e;case 3:Lr.flags=Lr.flags&-65537|128;case 0:if(Lr=zr.payload,_r=typeof Lr=="function"?Lr.call(Dr,wr,_r):Lr,_r==null)break e;wr=Ft({},wr,_r);break e;case 2:Yr=!0}}$t.callback!==null&&$t.lane!==0&&(it.flags|=64,_r=_t.effects,_r===null?_t.effects=[$t]:_r.push($t))}else Dr={eventTime:Dr,lane:_r,tag:$t.tag,payload:$t.payload,callback:$t.callback,next:null},xr===null?(ar=xr=Dr,Vt=wr):xr=xr.next=Dr,Ot|=_r;if($t=$t.next,$t===null){if($t=_t.shared.pending,$t===null)break;_r=$t,$t=_r.next,_r.next=null,_t.lastBaseUpdate=_r,_t.shared.pending=null}}while(!0);if(xr===null&&(Vt=wr),_t.baseState=Vt,_t.firstBaseUpdate=ar,_t.lastBaseUpdate=xr,at=_t.shared.interleaved,at!==null){_t=at;do Ot|=_t.lane,_t=_t.next;while(_t!==at)}else Tt===null&&(_t.shared.lanes=0);Au|=Ot,it.lanes=Ot,it.memoizedState=wr}}function io(it,at,ht){if(it=at.effects,at.effects=null,it!==null)for(at=0;at<it.length;at++){var pt=it[at],_t=pt.callback;if(_t!==null){if(pt.callback=null,pt=ht,typeof _t!="function")throw Error(tt(191,_t));_t.call(pt)}}}var so={},Ls=Aa(so),Ma=Aa(so),Oi=Aa(so);function Oa(it){if(it===so)throw Error(tt(174));return it}function vu(it,at){switch($n(Oi,at),$n(Ma,it),$n(Ls,so),it=at.nodeType,it){case 9:case 11:at=(at=at.documentElement)?at.namespaceURI:Dl(null,"");break;default:it=it===8?at.parentNode:at,at=it.namespaceURI||null,it=it.tagName,at=Dl(at,it)}Jn(Ls),$n(Ls,at)}function ys(){Jn(Ls),Jn(Ma),Jn(Oi)}function ko(it){Oa(Oi.current);var at=Oa(Ls.current),ht=Dl(at,it.type);at!==ht&&($n(Ma,it),$n(Ls,ht))}function fc(it){Ma.current===it&&(Jn(Ls),Jn(Ma))}var ei=Aa(0);function Sl(it){for(var at=it;at!==null;){if(at.tag===13){var ht=at.memoizedState;if(ht!==null&&(ht=ht.dehydrated,ht===null||ht.data==="$?"||ht.data==="$!"))return at}else if(at.tag===19&&at.memoizedProps.revealOrder!==void 0){if(at.flags&128)return at}else if(at.child!==null){at.child.return=at,at=at.child;continue}if(at===it)break;for(;at.sibling===null;){if(at.return===null||at.return===it)return null;at=at.return}at.sibling.return=at.return,at=at.sibling}return null}var la=[];function Tl(){for(var it=0;it<la.length;it++)la[it]._workInProgressVersionPrimary=null;la.length=0}var qs=zt.ReactCurrentDispatcher,wl=zt.ReactCurrentBatchConfig,Ys=0,si=null,ci=null,fi=null,Ti=!1,Bs=!1,zi=0,os=0;function Di(){throw Error(tt(321))}function xu(it,at){if(at===null)return!1;for(var ht=0;ht<at.length&&ht<it.length;ht++)if(!ms(it[ht],at[ht]))return!1;return!0}function Eu(it,at,ht,pt,_t,Tt){if(Ys=Tt,si=at,at.memoizedState=null,at.updateQueue=null,at.lanes=0,qs.current=it===null||it.memoizedState===null?vc:Fd,it=ht(pt,_t),Bs){Tt=0;do{if(Bs=!1,zi=0,25<=Tt)throw Error(tt(301));Tt+=1,fi=ci=null,at.updateQueue=null,qs.current=Nd,it=ht(pt,_t)}while(Bs)}if(qs.current=bu,at=ci!==null&&ci.next!==null,Ys=0,fi=ci=si=null,Ti=!1,at)throw Error(tt(300));return it}function ua(){var it=zi!==0;return zi=0,it}function Ks(){var it={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fi===null?si.memoizedState=fi=it:fi=fi.next=it,fi}function _s(){if(ci===null){var it=si.alternate;it=it!==null?it.memoizedState:null}else it=ci.next;var at=fi===null?si.memoizedState:fi.next;if(at!==null)fi=at,ci=it;else{if(it===null)throw Error(tt(310));ci=it,it={memoizedState:ci.memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},fi===null?si.memoizedState=fi=it:fi=fi.next=it}return fi}function Lo(it,at){return typeof at=="function"?at(it):at}function Da(it){var at=_s(),ht=at.queue;if(ht===null)throw Error(tt(311));ht.lastRenderedReducer=it;var pt=ci,_t=pt.baseQueue,Tt=ht.pending;if(Tt!==null){if(_t!==null){var Ot=_t.next;_t.next=Tt.next,Tt.next=Ot}pt.baseQueue=_t=Tt,ht.pending=null}if(_t!==null){Tt=_t.next,pt=pt.baseState;var $t=Ot=null,Vt=null,ar=Tt;do{var xr=ar.lane;if((Ys&xr)===xr)Vt!==null&&(Vt=Vt.next={lane:0,action:ar.action,hasEagerState:ar.hasEagerState,eagerState:ar.eagerState,next:null}),pt=ar.hasEagerState?ar.eagerState:it(pt,ar.action);else{var wr={lane:xr,action:ar.action,hasEagerState:ar.hasEagerState,eagerState:ar.eagerState,next:null};Vt===null?($t=Vt=wr,Ot=pt):Vt=Vt.next=wr,si.lanes|=xr,Au|=xr}ar=ar.next}while(ar!==null&&ar!==Tt);Vt===null?Ot=pt:Vt.next=$t,ms(pt,at.memoizedState)||(Qt=!0),at.memoizedState=pt,at.baseState=Ot,at.baseQueue=Vt,ht.lastRenderedState=pt}if(it=ht.interleaved,it!==null){_t=it;do Tt=_t.lane,si.lanes|=Tt,Au|=Tt,_t=_t.next;while(_t!==it)}else _t===null&&(ht.lanes=0);return[at.memoizedState,ht.dispatch]}function pc(it){var at=_s(),ht=at.queue;if(ht===null)throw Error(tt(311));ht.lastRenderedReducer=it;var pt=ht.dispatch,_t=ht.pending,Tt=at.memoizedState;if(_t!==null){ht.pending=null;var Ot=_t=_t.next;do Tt=it(Tt,Ot.action),Ot=Ot.next;while(Ot!==_t);ms(Tt,at.memoizedState)||(Qt=!0),at.memoizedState=Tt,at.baseQueue===null&&(at.baseState=Tt),ht.lastRenderedState=Tt}return[Tt,pt]}function ch(){}function mc(it,at){var ht=si,pt=_s(),_t=at(),Tt=!ms(pt.memoizedState,_t);if(Tt&&(pt.memoizedState=_t,Qt=!0),pt=pt.queue,mh(Yh.bind(null,ht,pt,it),[it]),pt.getSnapshot!==at||Tt||fi!==null&&fi.memoizedState.tag&1){if(ht.flags|=2048,Qs(9,qh.bind(null,ht,pt,_t,at),void 0,null),Hi===null)throw Error(tt(349));Ys&30||Su(ht,at,_t)}return _t}function Su(it,at,ht){it.flags|=16384,it={getSnapshot:at,value:ht},at=si.updateQueue,at===null?(at={lastEffect:null,stores:null},si.updateQueue=at,at.stores=[it]):(ht=at.stores,ht===null?at.stores=[it]:ht.push(it))}function qh(it,at,ht,pt){at.value=ht,at.getSnapshot=pt,hh(at)&&dh(it)}function Yh(it,at,ht){return ht(function(){hh(at)&&dh(it)})}function hh(it){var at=it.getSnapshot;it=it.value;try{var ht=at();return!ms(it,ht)}catch{return!0}}function dh(it){var at=Xn(it,1);at!==null&&La(at,it,1,-1)}function Bo(it){var at=Ks();return typeof it=="function"&&(it=it()),at.memoizedState=at.baseState=it,it={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:it},at.queue=it,it=it.dispatch=Dd.bind(null,si,it),[at.memoizedState,it]}function Qs(it,at,ht,pt){return it={tag:it,create:at,destroy:ht,deps:pt,next:null},at=si.updateQueue,at===null?(at={lastEffect:null,stores:null},si.updateQueue=at,at.lastEffect=it.next=it):(ht=at.lastEffect,ht===null?at.lastEffect=it.next=it:(pt=ht.next,ht.next=it,it.next=pt,at.lastEffect=it)),it}function fh(){return _s().memoizedState}function Yn(it,at,ht,pt){var _t=Ks();si.flags|=it,_t.memoizedState=Qs(1|at,ht,void 0,pt===void 0?null:pt)}function gc(it,at,ht,pt){var _t=_s();pt=pt===void 0?null:pt;var Tt=void 0;if(ci!==null){var Ot=ci.memoizedState;if(Tt=Ot.destroy,pt!==null&&xu(pt,Ot.deps)){_t.memoizedState=Qs(at,ht,Tt,pt);return}}si.flags|=it,_t.memoizedState=Qs(1|at,ht,Tt,pt)}function ph(it,at){return Yn(8390656,8,it,at)}function mh(it,at){return gc(2048,8,it,at)}function Kh(it,at){return gc(4,2,it,at)}function gh(it,at){return gc(4,4,it,at)}function Qh(it,at){if(typeof at=="function")return it=it(),at(it),function(){at(null)};if(at!=null)return it=it(),at.current=it,function(){at.current=null}}function vs(it,at,ht){return ht=ht!=null?ht.concat([it]):null,gc(4,4,Qh.bind(null,at,it),ht)}function Tu(){}function Fa(it,at){var ht=_s();at=at===void 0?null:at;var pt=ht.memoizedState;return pt!==null&&at!==null&&xu(at,pt[1])?pt[0]:(ht.memoizedState=[it,at],it)}function wu(it,at){var ht=_s();at=at===void 0?null:at;var pt=ht.memoizedState;return pt!==null&&at!==null&&xu(at,pt[1])?pt[0]:(it=it(),ht.memoizedState=[it,at],it)}function ao(it,at,ht){return Ys&21?(ms(ht,at)||(ht=Ss(),si.lanes|=ht,Au|=ht,it.baseState=!0),at):(it.baseState&&(it.baseState=!1,Qt=!0),it.memoizedState=ht)}function yc(it,at){var ht=Mn;Mn=ht!==0&&4>ht?ht:4,it(!0);var pt=wl.transition;wl.transition={};try{it(!1),at()}finally{Mn=ht,wl.transition=pt}}function _c(){return _s().memoizedState}function yh(it,at,ht){var pt=Pl(it);if(ht={lane:pt,action:ht,hasEagerState:!1,eagerState:null,next:null},_h(it))vh(at,ht);else if(ht=dc(it,at,ht,pt),ht!==null){var _t=xs();La(ht,it,pt,_t),xh(ht,at,pt)}}function Dd(it,at,ht){var pt=Pl(it),_t={lane:pt,action:ht,hasEagerState:!1,eagerState:null,next:null};if(_h(it))vh(at,_t);else{var Tt=it.alternate;if(it.lanes===0&&(Tt===null||Tt.lanes===0)&&(Tt=at.lastRenderedReducer,Tt!==null))try{var Ot=at.lastRenderedState,$t=Tt(Ot,ht);if(_t.hasEagerState=!0,_t.eagerState=$t,ms($t,Ot)){var Vt=at.interleaved;Vt===null?(_t.next=_t,El(at)):(_t.next=Vt.next,Vt.next=_t),at.interleaved=_t;return}}catch{}finally{}ht=dc(it,at,_t,pt),ht!==null&&(_t=xs(),La(ht,it,pt,_t),xh(ht,at,pt))}}function _h(it){var at=it.alternate;return it===si||at!==null&&at===si}function vh(it,at){Bs=Ti=!0;var ht=it.pending;ht===null?at.next=at:(at.next=ht.next,ht.next=at),it.pending=at}function xh(it,at,ht){if(ht&4194240){var pt=at.lanes;pt&=it.pendingLanes,ht|=pt,at.lanes=ht,zl(it,ht)}}var bu={readContext:as,useCallback:Di,useContext:Di,useEffect:Di,useImperativeHandle:Di,useInsertionEffect:Di,useLayoutEffect:Di,useMemo:Di,useReducer:Di,useRef:Di,useState:Di,useDebugValue:Di,useDeferredValue:Di,useTransition:Di,useMutableSource:Di,useSyncExternalStore:Di,useId:Di,unstable_isNewReconciler:!1},vc={readContext:as,useCallback:function(it,at){return Ks().memoizedState=[it,at===void 0?null:at],it},useContext:as,useEffect:ph,useImperativeHandle:function(it,at,ht){return ht=ht!=null?ht.concat([it]):null,Yn(4194308,4,Qh.bind(null,at,it),ht)},useLayoutEffect:function(it,at){return Yn(4194308,4,it,at)},useInsertionEffect:function(it,at){return Yn(4,2,it,at)},useMemo:function(it,at){var ht=Ks();return at=at===void 0?null:at,it=it(),ht.memoizedState=[it,at],it},useReducer:function(it,at,ht){var pt=Ks();return at=ht!==void 0?ht(at):at,pt.memoizedState=pt.baseState=at,it={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:it,lastRenderedState:at},pt.queue=it,it=it.dispatch=yh.bind(null,si,it),[pt.memoizedState,it]},useRef:function(it){var at=Ks();return it={current:it},at.memoizedState=it},useState:Bo,useDebugValue:Tu,useDeferredValue:function(it){return Ks().memoizedState=it},useTransition:function(){var it=Bo(!1),at=it[0];return it=yc.bind(null,it[1]),Ks().memoizedState=it,[at,it]},useMutableSource:function(){},useSyncExternalStore:function(it,at,ht){var pt=si,_t=Ks();if(ni){if(ht===void 0)throw Error(tt(407));ht=ht()}else{if(ht=at(),Hi===null)throw Error(tt(349));Ys&30||Su(pt,at,ht)}_t.memoizedState=ht;var Tt={value:ht,getSnapshot:at};return _t.queue=Tt,ph(Yh.bind(null,pt,Tt,it),[it]),pt.flags|=2048,Qs(9,qh.bind(null,pt,Tt,ht,at),void 0,null),ht},useId:function(){var it=Ks(),at=Hi.identifierPrefix;if(ni){var ht=oa,pt=rs;ht=(pt&~(1<<32-Ri(pt)-1)).toString(32)+ht,at=":"+at+"R"+ht,ht=zi++,0<ht&&(at+="H"+ht.toString(32)),at+=":"}else ht=os++,at=":"+at+"r"+ht.toString(32)+":";return it.memoizedState=at},unstable_isNewReconciler:!1},Fd={readContext:as,useCallback:Fa,useContext:as,useEffect:mh,useImperativeHandle:vs,useInsertionEffect:Kh,useLayoutEffect:gh,useMemo:wu,useReducer:Da,useRef:fh,useState:function(){return Da(Lo)},useDebugValue:Tu,useDeferredValue:function(it){var at=_s();return ao(at,ci.memoizedState,it)},useTransition:function(){var it=Da(Lo)[0],at=_s().memoizedState;return[it,at]},useMutableSource:ch,useSyncExternalStore:mc,useId:_c,unstable_isNewReconciler:!1},Nd={readContext:as,useCallback:Fa,useContext:as,useEffect:mh,useImperativeHandle:vs,useInsertionEffect:Kh,useLayoutEffect:gh,useMemo:wu,useReducer:pc,useRef:fh,useState:function(){return pc(Lo)},useDebugValue:Tu,useDeferredValue:function(it){var at=_s();return ci===null?at.memoizedState=it:ao(at,ci.memoizedState,it)},useTransition:function(){var it=pc(Lo)[0],at=_s().memoizedState;return[it,at]},useMutableSource:ch,useSyncExternalStore:mc,useId:_c,unstable_isNewReconciler:!1};function lt(it,at){if(it&&it.defaultProps){at=Ft({},at),it=it.defaultProps;for(var ht in it)at[ht]===void 0&&(at[ht]=it[ht]);return at}return at}function ut(it,at,ht,pt){at=it.memoizedState,ht=ht(pt,at),ht=ht==null?at:Ft({},at,ht),it.memoizedState=ht,it.lanes===0&&(it.updateQueue.baseState=ht)}var mt={isMounted:function(it){return(it=it._reactInternals)?ra(it)===it:!1},enqueueSetState:function(it,at,ht){it=it._reactInternals;var pt=xs(),_t=Pl(it),Tt=ii(pt,_t);Tt.payload=at,ht!=null&&(Tt.callback=ht),at=_i(it,Tt,_t),at!==null&&(La(at,it,_t,pt),Ia(at,it,_t))},enqueueReplaceState:function(it,at,ht){it=it._reactInternals;var pt=xs(),_t=Pl(it),Tt=ii(pt,_t);Tt.tag=1,Tt.payload=at,ht!=null&&(Tt.callback=ht),at=_i(it,Tt,_t),at!==null&&(La(at,it,_t,pt),Ia(at,it,_t))},enqueueForceUpdate:function(it,at){it=it._reactInternals;var ht=xs(),pt=Pl(it),_t=ii(ht,pt);_t.tag=2,at!=null&&(_t.callback=at),at=_i(it,_t,pt),at!==null&&(La(at,it,pt,ht),Ia(at,it,pt))}};function vt(it,at,ht,pt,_t,Tt,Ot){return it=it.stateNode,typeof it.shouldComponentUpdate=="function"?it.shouldComponentUpdate(pt,Tt,Ot):at.prototype&&at.prototype.isPureReactComponent?!Ya(ht,pt)||!Ya(_t,Tt):!0}function Et(it,at,ht){var pt=!1,_t=Rs,Tt=at.contextType;return typeof Tt=="object"&&Tt!==null?Tt=as(Tt):(_t=Xi(at)?Ra:Si.current,pt=at.contextTypes,Tt=(pt=pt!=null)?eo(it,_t):Rs),at=new at(ht,Tt),it.memoizedState=at.state!==null&&at.state!==void 0?at.state:null,at.updater=mt,it.stateNode=at,at._reactInternals=it,pt&&(it=it.stateNode,it.__reactInternalMemoizedUnmaskedChildContext=_t,it.__reactInternalMemoizedMaskedChildContext=Tt),at}function At(it,at,ht,pt){it=at.state,typeof at.componentWillReceiveProps=="function"&&at.componentWillReceiveProps(ht,pt),typeof at.UNSAFE_componentWillReceiveProps=="function"&&at.UNSAFE_componentWillReceiveProps(ht,pt),at.state!==it&&mt.enqueueReplaceState(at,at.state,null)}function Bt(it,at,ht,pt){var _t=it.stateNode;_t.props=ht,_t.state=it.memoizedState,_t.refs={},yi(it);var Tt=at.contextType;typeof Tt=="object"&&Tt!==null?_t.context=as(Tt):(Tt=Xi(at)?Ra:Si.current,_t.context=eo(it,Tt)),_t.state=it.memoizedState,Tt=at.getDerivedStateFromProps,typeof Tt=="function"&&(ut(it,at,Tt,ht),_t.state=it.memoizedState),typeof at.getDerivedStateFromProps=="function"||typeof _t.getSnapshotBeforeUpdate=="function"||typeof _t.UNSAFE_componentWillMount!="function"&&typeof _t.componentWillMount!="function"||(at=_t.state,typeof _t.componentWillMount=="function"&&_t.componentWillMount(),typeof _t.UNSAFE_componentWillMount=="function"&&_t.UNSAFE_componentWillMount(),at!==_t.state&&mt.enqueueReplaceState(_t,_t.state,null),no(it,ht,_t,pt),_t.state=it.memoizedState),typeof _t.componentDidMount=="function"&&(it.flags|=4194308)}function Wt(it,at){try{var ht="",pt=at;do ht+=cr(pt),pt=pt.return;while(pt);var _t=ht}catch(Tt){_t=`
Error generating stack: `+Tt.message+`
`+Tt.stack}return{value:it,source:at,stack:_t,digest:null}}function tr(it,at,ht){return{value:it,source:null,stack:ht??null,digest:at??null}}function hr(it,at){try{console.error(at.value)}catch(ht){setTimeout(function(){throw ht})}}var pr=typeof WeakMap=="function"?WeakMap:Map;function Cr(it,at,ht){ht=ii(-1,ht),ht.tag=3,ht.payload={element:null};var pt=at.value;return ht.callback=function(){sd||(sd=!0,qd=pt),hr(it,at)},ht}function fr(it,at,ht){ht=ii(-1,ht),ht.tag=3;var pt=it.type.getDerivedStateFromError;if(typeof pt=="function"){var _t=at.value;ht.payload=function(){return pt(_t)},ht.callback=function(){hr(it,at)}}var Tt=it.stateNode;return Tt!==null&&typeof Tt.componentDidCatch=="function"&&(ht.callback=function(){hr(it,at),typeof pt!="function"&&(Al===null?Al=new Set([this]):Al.add(this));var Ot=at.stack;this.componentDidCatch(at.value,{componentStack:Ot!==null?Ot:""})}),ht}function Ar(it,at,ht){var pt=it.pingCache;if(pt===null){pt=it.pingCache=new pr;var _t=new Set;pt.set(at,_t)}else _t=pt.get(at),_t===void 0&&(_t=new Set,pt.set(at,_t));_t.has(ht)||(_t.add(ht),it=hp.bind(null,it,at,ht),at.then(it,it))}function kr(it){do{var at;if((at=it.tag===13)&&(at=it.memoizedState,at=at!==null?at.dehydrated!==null:!0),at)return it;it=it.return}while(it!==null);return null}function Kr(it,at,ht,pt,_t){return it.mode&1?(it.flags|=65536,it.lanes=_t,it):(it===at?it.flags|=65536:(it.flags|=128,ht.flags|=131072,ht.flags&=-52805,ht.tag===1&&(ht.alternate===null?ht.tag=17:(at=ii(-1,1),at.tag=2,_i(ht,at,1))),ht.lanes|=1),it)}var mr=zt.ReactCurrentOwner,Qt=!1;function or(it,at,ht,pt){at.child=it===null?mu(at,null,ht,pt):Pa(at,it.child,ht,pt)}function Er(it,at,ht,pt,_t){ht=ht.render;var Tt=at.ref;return Fo(at,_t),pt=Eu(it,at,ht,pt,Tt,_t),ht=ua(),it!==null&&!Qt?(at.updateQueue=it.updateQueue,at.flags&=-2053,it.lanes&=~_t,Uo(it,at,_t)):(ni&&ht&&vl(at),at.flags|=1,or(it,at,pt,_t),at.child)}function $r(it,at,ht,pt,_t){if(it===null){var Tt=ht.type;return typeof Tt=="function"&&!tf(Tt)&&Tt.defaultProps===void 0&&ht.compare===null&&ht.defaultProps===void 0?(at.tag=15,at.type=Tt,Bn(it,at,Tt,pt,_t)):(it=hd(ht.type,null,pt,at,at.mode,_t),it.ref=at.ref,it.return=at,at.child=it)}if(Tt=it.child,!(it.lanes&_t)){var Ot=Tt.memoizedProps;if(ht=ht.compare,ht=ht!==null?ht:Ya,ht(Ot,pt)&&it.ref===at.ref)return Uo(it,at,_t)}return at.flags|=1,it=Il(Tt,pt),it.ref=at.ref,it.return=at,at.child=it}function Bn(it,at,ht,pt,_t){if(it!==null){var Tt=it.memoizedProps;if(Ya(Tt,pt)&&it.ref===at.ref)if(Qt=!1,at.pendingProps=pt=Tt,(it.lanes&_t)!==0)it.flags&131072&&(Qt=!0);else return at.lanes=it.lanes,Uo(it,at,_t)}return wi(it,at,ht,pt,_t)}function Gr(it,at,ht){var pt=at.pendingProps,_t=pt.children,Tt=it!==null?it.memoizedState:null;if(pt.mode==="hidden")if(!(at.mode&1))at.memoizedState={baseLanes:0,cachePool:null,transitions:null},$n(Ec,Zs),Zs|=ht;else{if(!(ht&1073741824))return it=Tt!==null?Tt.baseLanes|ht:ht,at.lanes=at.childLanes=1073741824,at.memoizedState={baseLanes:it,cachePool:null,transitions:null},at.updateQueue=null,$n(Ec,Zs),Zs|=it,null;at.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt=Tt!==null?Tt.baseLanes:ht,$n(Ec,Zs),Zs|=pt}else Tt!==null?(pt=Tt.baseLanes|ht,at.memoizedState=null):pt=ht,$n(Ec,Zs),Zs|=pt;return or(it,at,_t,ht),at.child}function Fn(it,at){var ht=at.ref;(it===null&&ht!==null||it!==null&&it.ref!==ht)&&(at.flags|=512,at.flags|=2097152)}function wi(it,at,ht,pt,_t){var Tt=Xi(ht)?Ra:Si.current;return Tt=eo(at,Tt),Fo(at,_t),ht=Eu(it,at,ht,pt,Tt,_t),pt=ua(),it!==null&&!Qt?(at.updateQueue=it.updateQueue,at.flags&=-2053,it.lanes&=~_t,Uo(it,at,_t)):(ni&&pt&&vl(at),at.flags|=1,or(it,at,ht,_t),at.child)}function Un(it,at,ht,pt,_t){if(Xi(ht)){var Tt=!0;gl(at)}else Tt=!1;if(Fo(at,_t),at.stateNode===null)ed(it,at),Et(at,ht,pt),Bt(at,ht,pt,_t),pt=!0;else if(it===null){var Ot=at.stateNode,$t=at.memoizedProps;Ot.props=$t;var Vt=Ot.context,ar=ht.contextType;typeof ar=="object"&&ar!==null?ar=as(ar):(ar=Xi(ht)?Ra:Si.current,ar=eo(at,ar));var xr=ht.getDerivedStateFromProps,wr=typeof xr=="function"||typeof Ot.getSnapshotBeforeUpdate=="function";wr||typeof Ot.UNSAFE_componentWillReceiveProps!="function"&&typeof Ot.componentWillReceiveProps!="function"||($t!==pt||Vt!==ar)&&At(at,Ot,pt,ar),Yr=!1;var _r=at.memoizedState;Ot.state=_r,no(at,pt,Ot,_t),Vt=at.memoizedState,$t!==pt||_r!==Vt||Mi.current||Yr?(typeof xr=="function"&&(ut(at,ht,xr,pt),Vt=at.memoizedState),($t=Yr||vt(at,ht,$t,pt,_r,Vt,ar))?(wr||typeof Ot.UNSAFE_componentWillMount!="function"&&typeof Ot.componentWillMount!="function"||(typeof Ot.componentWillMount=="function"&&Ot.componentWillMount(),typeof Ot.UNSAFE_componentWillMount=="function"&&Ot.UNSAFE_componentWillMount()),typeof Ot.componentDidMount=="function"&&(at.flags|=4194308)):(typeof Ot.componentDidMount=="function"&&(at.flags|=4194308),at.memoizedProps=pt,at.memoizedState=Vt),Ot.props=pt,Ot.state=Vt,Ot.context=ar,pt=$t):(typeof Ot.componentDidMount=="function"&&(at.flags|=4194308),pt=!1)}else{Ot=at.stateNode,di(it,at),$t=at.memoizedProps,ar=at.type===at.elementType?$t:lt(at.type,$t),Ot.props=ar,wr=at.pendingProps,_r=Ot.context,Vt=ht.contextType,typeof Vt=="object"&&Vt!==null?Vt=as(Vt):(Vt=Xi(ht)?Ra:Si.current,Vt=eo(at,Vt));var Dr=ht.getDerivedStateFromProps;(xr=typeof Dr=="function"||typeof Ot.getSnapshotBeforeUpdate=="function")||typeof Ot.UNSAFE_componentWillReceiveProps!="function"&&typeof Ot.componentWillReceiveProps!="function"||($t!==wr||_r!==Vt)&&At(at,Ot,pt,Vt),Yr=!1,_r=at.memoizedState,Ot.state=_r,no(at,pt,Ot,_t);var Lr=at.memoizedState;$t!==wr||_r!==Lr||Mi.current||Yr?(typeof Dr=="function"&&(ut(at,ht,Dr,pt),Lr=at.memoizedState),(ar=Yr||vt(at,ht,ar,pt,_r,Lr,Vt)||!1)?(xr||typeof Ot.UNSAFE_componentWillUpdate!="function"&&typeof Ot.componentWillUpdate!="function"||(typeof Ot.componentWillUpdate=="function"&&Ot.componentWillUpdate(pt,Lr,Vt),typeof Ot.UNSAFE_componentWillUpdate=="function"&&Ot.UNSAFE_componentWillUpdate(pt,Lr,Vt)),typeof Ot.componentDidUpdate=="function"&&(at.flags|=4),typeof Ot.getSnapshotBeforeUpdate=="function"&&(at.flags|=1024)):(typeof Ot.componentDidUpdate!="function"||$t===it.memoizedProps&&_r===it.memoizedState||(at.flags|=4),typeof Ot.getSnapshotBeforeUpdate!="function"||$t===it.memoizedProps&&_r===it.memoizedState||(at.flags|=1024),at.memoizedProps=pt,at.memoizedState=Lr),Ot.props=pt,Ot.state=Lr,Ot.context=Vt,pt=ar):(typeof Ot.componentDidUpdate!="function"||$t===it.memoizedProps&&_r===it.memoizedState||(at.flags|=4),typeof Ot.getSnapshotBeforeUpdate!="function"||$t===it.memoizedProps&&_r===it.memoizedState||(at.flags|=1024),pt=!1)}return ca(it,at,ht,pt,Tt,_t)}function ca(it,at,ht,pt,_t,Tt){Fn(it,at);var Ot=(at.flags&128)!==0;if(!pt&&!Ot)return _t&&ah(at,ht,!1),Uo(it,at,Tt);pt=at.stateNode,mr.current=at;var $t=Ot&&typeof ht.getDerivedStateFromError!="function"?null:pt.render();return at.flags|=1,it!==null&&Ot?(at.child=Pa(at,it.child,null,Tt),at.child=Pa(at,null,$t,Tt)):or(it,at,$t,Tt),at.memoizedState=pt.state,_t&&ah(at,ht,!0),at.child}function Zh(it){var at=it.stateNode;at.pendingContext?hu(it,at.pendingContext,at.pendingContext!==at.context):at.context&&hu(it,at.context,!1),vu(it,at.containerInfo)}function gf(it,at,ht,pt,_t){return Io(),ks(_t),at.flags|=256,or(it,at,ht,pt),at.child}var kd={dehydrated:null,treeContext:null,retryLane:0};function Ld(it){return{baseLanes:it,cachePool:null,transitions:null}}function yf(it,at,ht){var pt=at.pendingProps,_t=ei.current,Tt=!1,Ot=(at.flags&128)!==0,$t;if(($t=Ot)||($t=it!==null&&it.memoizedState===null?!1:(_t&2)!==0),$t?(Tt=!0,at.flags&=-129):(it===null||it.memoizedState!==null)&&(_t|=1),$n(ei,_t&1),it===null)return Fs(at),it=at.memoizedState,it!==null&&(it=it.dehydrated,it!==null)?(at.mode&1?it.data==="$!"?at.lanes=8:at.lanes=1073741824:at.lanes=1,null):(Ot=pt.children,it=pt.fallback,Tt?(pt=at.mode,Tt=at.child,Ot={mode:"hidden",children:Ot},!(pt&1)&&Tt!==null?(Tt.childLanes=0,Tt.pendingProps=Ot):Tt=dd(Ot,pt,0,null),it=Iu(it,pt,ht,null),Tt.return=at,it.return=at,Tt.sibling=it,at.child=Tt,at.child.memoizedState=Ld(ht),at.memoizedState=kd,it):Bd(at,Ot));if(_t=it.memoizedState,_t!==null&&($t=_t.dehydrated,$t!==null))return Jf(it,at,Ot,pt,$t,_t,ht);if(Tt){Tt=pt.fallback,Ot=at.mode,_t=it.child,$t=_t.sibling;var Vt={mode:"hidden",children:pt.children};return!(Ot&1)&&at.child!==_t?(pt=at.child,pt.childLanes=0,pt.pendingProps=Vt,at.deletions=null):(pt=Il(_t,Vt),pt.subtreeFlags=_t.subtreeFlags&14680064),$t!==null?Tt=Il($t,Tt):(Tt=Iu(Tt,Ot,ht,null),Tt.flags|=2),Tt.return=at,pt.return=at,pt.sibling=Tt,at.child=pt,pt=Tt,Tt=at.child,Ot=it.child.memoizedState,Ot=Ot===null?Ld(ht):{baseLanes:Ot.baseLanes|ht,cachePool:null,transitions:Ot.transitions},Tt.memoizedState=Ot,Tt.childLanes=it.childLanes&~ht,at.memoizedState=kd,pt}return Tt=it.child,it=Tt.sibling,pt=Il(Tt,{mode:"visible",children:pt.children}),!(at.mode&1)&&(pt.lanes=ht),pt.return=at,pt.sibling=null,it!==null&&(ht=at.deletions,ht===null?(at.deletions=[it],at.flags|=16):ht.push(it)),at.child=pt,at.memoizedState=null,pt}function Bd(it,at){return at=dd({mode:"visible",children:at},it.mode,0,null),at.return=it,it.child=at}function Jh(it,at,ht,pt){return pt!==null&&ks(pt),Pa(at,it.child,null,ht),it=Bd(at,at.pendingProps.children),it.flags|=2,at.memoizedState=null,it}function Jf(it,at,ht,pt,_t,Tt,Ot){if(ht)return at.flags&256?(at.flags&=-257,pt=tr(Error(tt(422))),Jh(it,at,Ot,pt)):at.memoizedState!==null?(at.child=it.child,at.flags|=128,null):(Tt=pt.fallback,_t=at.mode,pt=dd({mode:"visible",children:pt.children},_t,0,null),Tt=Iu(Tt,_t,Ot,null),Tt.flags|=2,pt.return=at,Tt.return=at,pt.sibling=Tt,at.child=pt,at.mode&1&&Pa(at,it.child,null,Ot),at.child.memoizedState=Ld(Ot),at.memoizedState=kd,Tt);if(!(at.mode&1))return Jh(it,at,Ot,null);if(_t.data==="$!"){if(pt=_t.nextSibling&&_t.nextSibling.dataset,pt)var $t=pt.dgst;return pt=$t,Tt=Error(tt(419)),pt=tr(Tt,pt,void 0),Jh(it,at,Ot,pt)}if($t=(Ot&it.childLanes)!==0,Qt||$t){if(pt=Hi,pt!==null){switch(Ot&-Ot){case 4:_t=2;break;case 16:_t=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_t=32;break;case 536870912:_t=268435456;break;default:_t=0}_t=_t&(pt.suspendedLanes|Ot)?0:_t,_t!==0&&_t!==Tt.retryLane&&(Tt.retryLane=_t,Xn(it,_t),La(pt,it,_t,-1))}return ef(),pt=tr(Error(tt(421))),Jh(it,at,Ot,pt)}return _t.data==="$?"?(at.flags|=128,at.child=it.child,at=dp.bind(null,it),_t._reactRetry=at,null):(it=Tt.treeContext,ss=ba(_t.nextSibling),ns=at,ni=!0,gs=null,it!==null&&(qn[Os++]=rs,qn[Os++]=oa,qn[Os++]=Mr,rs=it.id,oa=it.overflow,Mr=at),at=Bd(at,pt.children),at.flags|=4096,at)}function _f(it,at,ht){it.lanes|=at;var pt=it.alternate;pt!==null&&(pt.lanes|=at),_u(it.return,at,ht)}function Ud(it,at,ht,pt,_t){var Tt=it.memoizedState;Tt===null?it.memoizedState={isBackwards:at,rendering:null,renderingStartTime:0,last:pt,tail:ht,tailMode:_t}:(Tt.isBackwards=at,Tt.rendering=null,Tt.renderingStartTime=0,Tt.last=pt,Tt.tail=ht,Tt.tailMode=_t)}function vf(it,at,ht){var pt=at.pendingProps,_t=pt.revealOrder,Tt=pt.tail;if(or(it,at,pt.children,ht),pt=ei.current,pt&2)pt=pt&1|2,at.flags|=128;else{if(it!==null&&it.flags&128)e:for(it=at.child;it!==null;){if(it.tag===13)it.memoizedState!==null&&_f(it,ht,at);else if(it.tag===19)_f(it,ht,at);else if(it.child!==null){it.child.return=it,it=it.child;continue}if(it===at)break e;for(;it.sibling===null;){if(it.return===null||it.return===at)break e;it=it.return}it.sibling.return=it.return,it=it.sibling}pt&=1}if($n(ei,pt),!(at.mode&1))at.memoizedState=null;else switch(_t){case"forwards":for(ht=at.child,_t=null;ht!==null;)it=ht.alternate,it!==null&&Sl(it)===null&&(_t=ht),ht=ht.sibling;ht=_t,ht===null?(_t=at.child,at.child=null):(_t=ht.sibling,ht.sibling=null),Ud(at,!1,_t,ht,Tt);break;case"backwards":for(ht=null,_t=at.child,at.child=null;_t!==null;){if(it=_t.alternate,it!==null&&Sl(it)===null){at.child=_t;break}it=_t.sibling,_t.sibling=ht,ht=_t,_t=it}Ud(at,!0,ht,null,Tt);break;case"together":Ud(at,!1,null,null,void 0);break;default:at.memoizedState=null}return at.child}function ed(it,at){!(at.mode&1)&&it!==null&&(it.alternate=null,at.alternate=null,at.flags|=2)}function Uo(it,at,ht){if(it!==null&&(at.dependencies=it.dependencies),Au|=at.lanes,!(ht&at.childLanes))return null;if(it!==null&&at.child!==it.child)throw Error(tt(153));if(at.child!==null){for(it=at.child,ht=Il(it,it.pendingProps),at.child=ht,ht.return=at;it.sibling!==null;)it=it.sibling,ht=ht.sibling=Il(it,it.pendingProps),ht.return=at;ht.sibling=null}return at.child}function ep(it,at,ht){switch(at.tag){case 3:Zh(at),Io();break;case 5:ko(at);break;case 1:Xi(at.type)&&gl(at);break;case 4:vu(at,at.stateNode.containerInfo);break;case 10:var pt=at.type._context,_t=at.memoizedProps.value;$n(Mo,pt._currentValue),pt._currentValue=_t;break;case 13:if(pt=at.memoizedState,pt!==null)return pt.dehydrated!==null?($n(ei,ei.current&1),at.flags|=128,null):ht&at.child.childLanes?yf(it,at,ht):($n(ei,ei.current&1),it=Uo(it,at,ht),it!==null?it.sibling:null);$n(ei,ei.current&1);break;case 19:if(pt=(ht&at.childLanes)!==0,it.flags&128){if(pt)return vf(it,at,ht);at.flags|=128}if(_t=at.memoizedState,_t!==null&&(_t.rendering=null,_t.tail=null,_t.lastEffect=null),$n(ei,ei.current),pt)break;return null;case 22:case 23:return at.lanes=0,Gr(it,at,ht)}return Uo(it,at,ht)}var xf,Gd,Ef,Sf;xf=function(it,at){for(var ht=at.child;ht!==null;){if(ht.tag===5||ht.tag===6)it.appendChild(ht.stateNode);else if(ht.tag!==4&&ht.child!==null){ht.child.return=ht,ht=ht.child;continue}if(ht===at)break;for(;ht.sibling===null;){if(ht.return===null||ht.return===at)return;ht=ht.return}ht.sibling.return=ht.return,ht=ht.sibling}},Gd=function(){},Ef=function(it,at,ht,pt){var _t=it.memoizedProps;if(_t!==pt){it=at.stateNode,Oa(Ls.current);var Tt=null;switch(ht){case"input":_t=Qr(it,_t),pt=Qr(it,pt),Tt=[];break;case"select":_t=Ft({},_t,{value:void 0}),pt=Ft({},pt,{value:void 0}),Tt=[];break;case"textarea":_t=ea(it,_t),pt=ea(it,pt),Tt=[];break;default:typeof _t.onClick!="function"&&typeof pt.onClick=="function"&&(it.onclick=uu)}sr(ht,pt);var Ot;ht=null;for(ar in _t)if(!pt.hasOwnProperty(ar)&&_t.hasOwnProperty(ar)&&_t[ar]!=null)if(ar==="style"){var $t=_t[ar];for(Ot in $t)$t.hasOwnProperty(Ot)&&(ht||(ht={}),ht[Ot]="")}else ar!=="dangerouslySetInnerHTML"&&ar!=="children"&&ar!=="suppressContentEditableWarning"&&ar!=="suppressHydrationWarning"&&ar!=="autoFocus"&&(st.hasOwnProperty(ar)?Tt||(Tt=[]):(Tt=Tt||[]).push(ar,null));for(ar in pt){var Vt=pt[ar];if($t=_t!=null?_t[ar]:void 0,pt.hasOwnProperty(ar)&&Vt!==$t&&(Vt!=null||$t!=null))if(ar==="style")if($t){for(Ot in $t)!$t.hasOwnProperty(Ot)||Vt&&Vt.hasOwnProperty(Ot)||(ht||(ht={}),ht[Ot]="");for(Ot in Vt)Vt.hasOwnProperty(Ot)&&$t[Ot]!==Vt[Ot]&&(ht||(ht={}),ht[Ot]=Vt[Ot])}else ht||(Tt||(Tt=[]),Tt.push(ar,ht)),ht=Vt;else ar==="dangerouslySetInnerHTML"?(Vt=Vt?Vt.__html:void 0,$t=$t?$t.__html:void 0,Vt!=null&&$t!==Vt&&(Tt=Tt||[]).push(ar,Vt)):ar==="children"?typeof Vt!="string"&&typeof Vt!="number"||(Tt=Tt||[]).push(ar,""+Vt):ar!=="suppressContentEditableWarning"&&ar!=="suppressHydrationWarning"&&(st.hasOwnProperty(ar)?(Vt!=null&&ar==="onScroll"&&Zn("scroll",it),Tt||$t===Vt||(Tt=[])):(Tt=Tt||[]).push(ar,Vt))}ht&&(Tt=Tt||[]).push("style",ht);var ar=Tt;(at.updateQueue=ar)&&(at.flags|=4)}},Sf=function(it,at,ht,pt){ht!==pt&&(at.flags|=4)};function Eh(it,at){if(!ni)switch(it.tailMode){case"hidden":at=it.tail;for(var ht=null;at!==null;)at.alternate!==null&&(ht=at),at=at.sibling;ht===null?it.tail=null:ht.sibling=null;break;case"collapsed":ht=it.tail;for(var pt=null;ht!==null;)ht.alternate!==null&&(pt=ht),ht=ht.sibling;pt===null?at||it.tail===null?it.tail=null:it.tail.sibling=null:pt.sibling=null}}function ls(it){var at=it.alternate!==null&&it.alternate.child===it.child,ht=0,pt=0;if(at)for(var _t=it.child;_t!==null;)ht|=_t.lanes|_t.childLanes,pt|=_t.subtreeFlags&14680064,pt|=_t.flags&14680064,_t.return=it,_t=_t.sibling;else for(_t=it.child;_t!==null;)ht|=_t.lanes|_t.childLanes,pt|=_t.subtreeFlags,pt|=_t.flags,_t.return=it,_t=_t.sibling;return it.subtreeFlags|=pt,it.childLanes=ht,at}function tp(it,at,ht){var pt=at.pendingProps;switch(du(at),at.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ls(at),null;case 1:return Xi(at.type)&&ml(),ls(at),null;case 3:return pt=at.stateNode,ys(),Jn(Mi),Jn(Si),Tl(),pt.pendingContext&&(pt.context=pt.pendingContext,pt.pendingContext=null),(it===null||it.child===null)&&(fu(at)?at.flags|=4:it===null||it.memoizedState.isDehydrated&&!(at.flags&256)||(at.flags|=1024,gs!==null&&(Qd(gs),gs=null))),Gd(it,at),ls(at),null;case 5:fc(at);var _t=Oa(Oi.current);if(ht=at.type,it!==null&&at.stateNode!=null)Ef(it,at,ht,pt,_t),it.ref!==at.ref&&(at.flags|=512,at.flags|=2097152);else{if(!pt){if(at.stateNode===null)throw Error(tt(166));return ls(at),null}if(it=Oa(Ls.current),fu(at)){pt=at.stateNode,ht=at.type;var Tt=at.memoizedProps;switch(pt[Xs]=at,pt[cu]=Tt,it=(at.mode&1)!==0,ht){case"dialog":Zn("cancel",pt),Zn("close",pt);break;case"iframe":case"object":case"embed":Zn("load",pt);break;case"video":case"audio":for(_t=0;_t<Qa.length;_t++)Zn(Qa[_t],pt);break;case"source":Zn("error",pt);break;case"img":case"image":case"link":Zn("error",pt),Zn("load",pt);break;case"details":Zn("toggle",pt);break;case"input":Ur(pt,Tt),Zn("invalid",pt);break;case"select":pt._wrapperState={wasMultiple:!!Tt.multiple},Zn("invalid",pt);break;case"textarea":fa(pt,Tt),Zn("invalid",pt)}sr(ht,Tt),_t=null;for(var Ot in Tt)if(Tt.hasOwnProperty(Ot)){var $t=Tt[Ot];Ot==="children"?typeof $t=="string"?pt.textContent!==$t&&(Tt.suppressHydrationWarning!==!0&&lu(pt.textContent,$t,it),_t=["children",$t]):typeof $t=="number"&&pt.textContent!==""+$t&&(Tt.suppressHydrationWarning!==!0&&lu(pt.textContent,$t,it),_t=["children",""+$t]):st.hasOwnProperty(Ot)&&$t!=null&&Ot==="onScroll"&&Zn("scroll",pt)}switch(ht){case"input":Ir(pt),$i(pt,Tt,!0);break;case"textarea":Ir(pt),Mu(pt);break;case"select":case"option":break;default:typeof Tt.onClick=="function"&&(pt.onclick=uu)}pt=_t,at.updateQueue=pt,pt!==null&&(at.flags|=4)}else{Ot=_t.nodeType===9?_t:_t.ownerDocument,it==="http://www.w3.org/1999/xhtml"&&(it=Ol(ht)),it==="http://www.w3.org/1999/xhtml"?ht==="script"?(it=Ot.createElement("div"),it.innerHTML="<script><\/script>",it=it.removeChild(it.firstChild)):typeof pt.is=="string"?it=Ot.createElement(ht,{is:pt.is}):(it=Ot.createElement(ht),ht==="select"&&(Ot=it,pt.multiple?Ot.multiple=!0:pt.size&&(Ot.size=pt.size))):it=Ot.createElementNS(it,ht),it[Xs]=at,it[cu]=pt,xf(it,at,!1,!1),at.stateNode=it;e:{switch(Ot=Zr(ht,pt),ht){case"dialog":Zn("cancel",it),Zn("close",it),_t=pt;break;case"iframe":case"object":case"embed":Zn("load",it),_t=pt;break;case"video":case"audio":for(_t=0;_t<Qa.length;_t++)Zn(Qa[_t],it);_t=pt;break;case"source":Zn("error",it),_t=pt;break;case"img":case"image":case"link":Zn("error",it),Zn("load",it),_t=pt;break;case"details":Zn("toggle",it),_t=pt;break;case"input":Ur(it,pt),_t=Qr(it,pt),Zn("invalid",it);break;case"option":_t=pt;break;case"select":it._wrapperState={wasMultiple:!!pt.multiple},_t=Ft({},pt,{value:void 0}),Zn("invalid",it);break;case"textarea":fa(it,pt),_t=ea(it,pt),Zn("invalid",it);break;default:_t=pt}sr(ht,_t),$t=_t;for(Tt in $t)if($t.hasOwnProperty(Tt)){var Vt=$t[Tt];Tt==="style"?co(it,Vt):Tt==="dangerouslySetInnerHTML"?(Vt=Vt?Vt.__html:void 0,Vt!=null&&zo(it,Vt)):Tt==="children"?typeof Vt=="string"?(ht!=="textarea"||Vt!=="")&&Ua(it,Vt):typeof Vt=="number"&&Ua(it,""+Vt):Tt!=="suppressContentEditableWarning"&&Tt!=="suppressHydrationWarning"&&Tt!=="autoFocus"&&(st.hasOwnProperty(Tt)?Vt!=null&&Tt==="onScroll"&&Zn("scroll",it):Vt!=null&&Dt(it,Tt,Vt,Ot))}switch(ht){case"input":Ir(it),$i(it,pt,!1);break;case"textarea":Ir(it),Mu(it);break;case"option":pt.value!=null&&it.setAttribute("value",""+br(pt.value));break;case"select":it.multiple=!!pt.multiple,Tt=pt.value,Tt!=null?Ai(it,!!pt.multiple,Tt,!1):pt.defaultValue!=null&&Ai(it,!!pt.multiple,pt.defaultValue,!0);break;default:typeof _t.onClick=="function"&&(it.onclick=uu)}switch(ht){case"button":case"input":case"select":case"textarea":pt=!!pt.autoFocus;break e;case"img":pt=!0;break e;default:pt=!1}}pt&&(at.flags|=4)}at.ref!==null&&(at.flags|=512,at.flags|=2097152)}return ls(at),null;case 6:if(it&&at.stateNode!=null)Sf(it,at,it.memoizedProps,pt);else{if(typeof pt!="string"&&at.stateNode===null)throw Error(tt(166));if(ht=Oa(Oi.current),Oa(Ls.current),fu(at)){if(pt=at.stateNode,ht=at.memoizedProps,pt[Xs]=at,(Tt=pt.nodeValue!==ht)&&(it=ns,it!==null))switch(it.tag){case 3:lu(pt.nodeValue,ht,(it.mode&1)!==0);break;case 5:it.memoizedProps.suppressHydrationWarning!==!0&&lu(pt.nodeValue,ht,(it.mode&1)!==0)}Tt&&(at.flags|=4)}else pt=(ht.nodeType===9?ht:ht.ownerDocument).createTextNode(pt),pt[Xs]=at,at.stateNode=pt}return ls(at),null;case 13:if(Jn(ei),pt=at.memoizedState,it===null||it.memoizedState!==null&&it.memoizedState.dehydrated!==null){if(ni&&ss!==null&&at.mode&1&&!(at.flags&128))Ns(),Io(),at.flags|=98560,Tt=!1;else if(Tt=fu(at),pt!==null&&pt.dehydrated!==null){if(it===null){if(!Tt)throw Error(tt(318));if(Tt=at.memoizedState,Tt=Tt!==null?Tt.dehydrated:null,!Tt)throw Error(tt(317));Tt[Xs]=at}else Io(),!(at.flags&128)&&(at.memoizedState=null),at.flags|=4;ls(at),Tt=!1}else gs!==null&&(Qd(gs),gs=null),Tt=!0;if(!Tt)return at.flags&65536?at:null}return at.flags&128?(at.lanes=ht,at):(pt=pt!==null,pt!==(it!==null&&it.memoizedState!==null)&&pt&&(at.child.flags|=8192,at.mode&1&&(it===null||ei.current&1?Fi===0&&(Fi=3):ef())),at.updateQueue!==null&&(at.flags|=4),ls(at),null);case 4:return ys(),Gd(it,at),it===null&&ll(at.stateNode.containerInfo),ls(at),null;case 10:return yu(at.type._context),ls(at),null;case 17:return Xi(at.type)&&ml(),ls(at),null;case 19:if(Jn(ei),Tt=at.memoizedState,Tt===null)return ls(at),null;if(pt=(at.flags&128)!==0,Ot=Tt.rendering,Ot===null)if(pt)Eh(Tt,!1);else{if(Fi!==0||it!==null&&it.flags&128)for(it=at.child;it!==null;){if(Ot=Sl(it),Ot!==null){for(at.flags|=128,Eh(Tt,!1),pt=Ot.updateQueue,pt!==null&&(at.updateQueue=pt,at.flags|=4),at.subtreeFlags=0,pt=ht,ht=at.child;ht!==null;)Tt=ht,it=pt,Tt.flags&=14680066,Ot=Tt.alternate,Ot===null?(Tt.childLanes=0,Tt.lanes=it,Tt.child=null,Tt.subtreeFlags=0,Tt.memoizedProps=null,Tt.memoizedState=null,Tt.updateQueue=null,Tt.dependencies=null,Tt.stateNode=null):(Tt.childLanes=Ot.childLanes,Tt.lanes=Ot.lanes,Tt.child=Ot.child,Tt.subtreeFlags=0,Tt.deletions=null,Tt.memoizedProps=Ot.memoizedProps,Tt.memoizedState=Ot.memoizedState,Tt.updateQueue=Ot.updateQueue,Tt.type=Ot.type,it=Ot.dependencies,Tt.dependencies=it===null?null:{lanes:it.lanes,firstContext:it.firstContext}),ht=ht.sibling;return $n(ei,ei.current&1|2),at.child}it=it.sibling}Tt.tail!==null&&hi()>Sc&&(at.flags|=128,pt=!0,Eh(Tt,!1),at.lanes=4194304)}else{if(!pt)if(it=Sl(Ot),it!==null){if(at.flags|=128,pt=!0,ht=it.updateQueue,ht!==null&&(at.updateQueue=ht,at.flags|=4),Eh(Tt,!0),Tt.tail===null&&Tt.tailMode==="hidden"&&!Ot.alternate&&!ni)return ls(at),null}else 2*hi()-Tt.renderingStartTime>Sc&&ht!==1073741824&&(at.flags|=128,pt=!0,Eh(Tt,!1),at.lanes=4194304);Tt.isBackwards?(Ot.sibling=at.child,at.child=Ot):(ht=Tt.last,ht!==null?ht.sibling=Ot:at.child=Ot,Tt.last=Ot)}return Tt.tail!==null?(at=Tt.tail,Tt.rendering=at,Tt.tail=at.sibling,Tt.renderingStartTime=hi(),at.sibling=null,ht=ei.current,$n(ei,pt?ht&1|2:ht&1),at):(ls(at),null);case 22:case 23:return Jd(),pt=at.memoizedState!==null,it!==null&&it.memoizedState!==null!==pt&&(at.flags|=8192),pt&&at.mode&1?Zs&1073741824&&(ls(at),at.subtreeFlags&6&&(at.flags|=8192)):ls(at),null;case 24:return null;case 25:return null}throw Error(tt(156,at.tag))}function rp(it,at){switch(du(at),at.tag){case 1:return Xi(at.type)&&ml(),it=at.flags,it&65536?(at.flags=it&-65537|128,at):null;case 3:return ys(),Jn(Mi),Jn(Si),Tl(),it=at.flags,it&65536&&!(it&128)?(at.flags=it&-65537|128,at):null;case 5:return fc(at),null;case 13:if(Jn(ei),it=at.memoizedState,it!==null&&it.dehydrated!==null){if(at.alternate===null)throw Error(tt(340));Io()}return it=at.flags,it&65536?(at.flags=it&-65537|128,at):null;case 19:return Jn(ei),null;case 4:return ys(),null;case 10:return yu(at.type._context),null;case 22:case 23:return Jd(),null;case 24:return null;default:return null}}var td=!1,us=!1,np=typeof WeakSet=="function"?WeakSet:Set,Fr=null;function xc(it,at){var ht=it.ref;if(ht!==null)if(typeof ht=="function")try{ht(null)}catch(pt){xi(it,at,pt)}else ht.current=null}function zd(it,at,ht){try{ht()}catch(pt){xi(it,at,pt)}}var Tf=!1;function ip(it,at){if(hl=ds,it=Ei(),pi(it)){if("selectionStart"in it)var ht={start:it.selectionStart,end:it.selectionEnd};else e:{ht=(ht=it.ownerDocument)&&ht.defaultView||window;var pt=ht.getSelection&&ht.getSelection();if(pt&&pt.rangeCount!==0){ht=pt.anchorNode;var _t=pt.anchorOffset,Tt=pt.focusNode;pt=pt.focusOffset;try{ht.nodeType,Tt.nodeType}catch{ht=null;break e}var Ot=0,$t=-1,Vt=-1,ar=0,xr=0,wr=it,_r=null;t:for(;;){for(var Dr;wr!==ht||_t!==0&&wr.nodeType!==3||($t=Ot+_t),wr!==Tt||pt!==0&&wr.nodeType!==3||(Vt=Ot+pt),wr.nodeType===3&&(Ot+=wr.nodeValue.length),(Dr=wr.firstChild)!==null;)_r=wr,wr=Dr;for(;;){if(wr===it)break t;if(_r===ht&&++ar===_t&&($t=Ot),_r===Tt&&++xr===pt&&(Vt=Ot),(Dr=wr.nextSibling)!==null)break;wr=_r,_r=wr.parentNode}wr=Dr}ht=$t===-1||Vt===-1?null:{start:$t,end:Vt}}else ht=null}ht=ht||{start:0,end:0}}else ht=null;for(eh={focusedElem:it,selectionRange:ht},ds=!1,Fr=at;Fr!==null;)if(at=Fr,it=at.child,(at.subtreeFlags&1028)!==0&&it!==null)it.return=at,Fr=it;else for(;Fr!==null;){at=Fr;try{var Lr=at.alternate;if(at.flags&1024)switch(at.tag){case 0:case 11:case 15:break;case 1:if(Lr!==null){var zr=Lr.memoizedProps,bi=Lr.memoizedState,er=at.stateNode,qt=er.getSnapshotBeforeUpdate(at.elementType===at.type?zr:lt(at.type,zr),bi);er.__reactInternalSnapshotBeforeUpdate=qt}break;case 3:var nr=at.stateNode.containerInfo;nr.nodeType===1?nr.textContent="":nr.nodeType===9&&nr.documentElement&&nr.removeChild(nr.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(Rr){xi(at,at.return,Rr)}if(it=at.sibling,it!==null){it.return=at.return,Fr=it;break}Fr=at.return}return Lr=Tf,Tf=!1,Lr}function Sh(it,at,ht){var pt=at.updateQueue;if(pt=pt!==null?pt.lastEffect:null,pt!==null){var _t=pt=pt.next;do{if((_t.tag&it)===it){var Tt=_t.destroy;_t.destroy=void 0,Tt!==void 0&&zd(at,ht,Tt)}_t=_t.next}while(_t!==pt)}}function rd(it,at){if(at=at.updateQueue,at=at!==null?at.lastEffect:null,at!==null){var ht=at=at.next;do{if((ht.tag&it)===it){var pt=ht.create;ht.destroy=pt()}ht=ht.next}while(ht!==at)}}function Hd(it){var at=it.ref;if(at!==null){var ht=it.stateNode;switch(it.tag){case 5:it=ht;break;default:it=ht}typeof at=="function"?at(it):at.current=it}}function wf(it){var at=it.alternate;at!==null&&(it.alternate=null,wf(at)),it.child=null,it.deletions=null,it.sibling=null,it.tag===5&&(at=it.stateNode,at!==null&&(delete at[Xs],delete at[cu],delete at[Ui],delete at[Vh],delete at[Wh])),it.stateNode=null,it.return=null,it.dependencies=null,it.memoizedProps=null,it.memoizedState=null,it.pendingProps=null,it.stateNode=null,it.updateQueue=null}function bf(it){return it.tag===5||it.tag===3||it.tag===4}function Af(it){e:for(;;){for(;it.sibling===null;){if(it.return===null||bf(it.return))return null;it=it.return}for(it.sibling.return=it.return,it=it.sibling;it.tag!==5&&it.tag!==6&&it.tag!==18;){if(it.flags&2||it.child===null||it.tag===4)continue e;it.child.return=it,it=it.child}if(!(it.flags&2))return it.stateNode}}function jd(it,at,ht){var pt=it.tag;if(pt===5||pt===6)it=it.stateNode,at?ht.nodeType===8?ht.parentNode.insertBefore(it,at):ht.insertBefore(it,at):(ht.nodeType===8?(at=ht.parentNode,at.insertBefore(it,ht)):(at=ht,at.appendChild(it)),ht=ht._reactRootContainer,ht!=null||at.onclick!==null||(at.onclick=uu));else if(pt!==4&&(it=it.child,it!==null))for(jd(it,at,ht),it=it.sibling;it!==null;)jd(it,at,ht),it=it.sibling}function $d(it,at,ht){var pt=it.tag;if(pt===5||pt===6)it=it.stateNode,at?ht.insertBefore(it,at):ht.appendChild(it);else if(pt!==4&&(it=it.child,it!==null))for($d(it,at,ht),it=it.sibling;it!==null;)$d(it,at,ht),it=it.sibling}var qi=null,Na=!1;function bl(it,at,ht){for(ht=ht.child;ht!==null;)Rf(it,at,ht),ht=ht.sibling}function Rf(it,at,ht){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(js,ht)}catch{}switch(ht.tag){case 5:us||xc(ht,at);case 6:var pt=qi,_t=Na;qi=null,bl(it,at,ht),qi=pt,Na=_t,qi!==null&&(Na?(it=qi,ht=ht.stateNode,it.nodeType===8?it.parentNode.removeChild(ht):it.removeChild(ht)):qi.removeChild(ht.stateNode));break;case 18:qi!==null&&(Na?(it=qi,ht=ht.stateNode,it.nodeType===8?oc(it.parentNode,ht):it.nodeType===1&&oc(it,ht),xo(it)):oc(qi,ht.stateNode));break;case 4:pt=qi,_t=Na,qi=ht.stateNode.containerInfo,Na=!0,bl(it,at,ht),qi=pt,Na=_t;break;case 0:case 11:case 14:case 15:if(!us&&(pt=ht.updateQueue,pt!==null&&(pt=pt.lastEffect,pt!==null))){_t=pt=pt.next;do{var Tt=_t,Ot=Tt.destroy;Tt=Tt.tag,Ot!==void 0&&(Tt&2||Tt&4)&&zd(ht,at,Ot),_t=_t.next}while(_t!==pt)}bl(it,at,ht);break;case 1:if(!us&&(xc(ht,at),pt=ht.stateNode,typeof pt.componentWillUnmount=="function"))try{pt.props=ht.memoizedProps,pt.state=ht.memoizedState,pt.componentWillUnmount()}catch($t){xi(ht,at,$t)}bl(it,at,ht);break;case 21:bl(it,at,ht);break;case 22:ht.mode&1?(us=(pt=us)||ht.memoizedState!==null,bl(it,at,ht),us=pt):bl(it,at,ht);break;default:bl(it,at,ht)}}function Pf(it){var at=it.updateQueue;if(at!==null){it.updateQueue=null;var ht=it.stateNode;ht===null&&(ht=it.stateNode=new np),at.forEach(function(pt){var _t=fp.bind(null,it,pt);ht.has(pt)||(ht.add(pt),pt.then(_t,_t))})}}function ka(it,at){var ht=at.deletions;if(ht!==null)for(var pt=0;pt<ht.length;pt++){var _t=ht[pt];try{var Tt=it,Ot=at,$t=Ot;e:for(;$t!==null;){switch($t.tag){case 5:qi=$t.stateNode,Na=!1;break e;case 3:qi=$t.stateNode.containerInfo,Na=!0;break e;case 4:qi=$t.stateNode.containerInfo,Na=!0;break e}$t=$t.return}if(qi===null)throw Error(tt(160));Rf(Tt,Ot,_t),qi=null,Na=!1;var Vt=_t.alternate;Vt!==null&&(Vt.return=null),_t.return=null}catch(ar){xi(_t,at,ar)}}if(at.subtreeFlags&12854)for(at=at.child;at!==null;)Cf(at,it),at=at.sibling}function Cf(it,at){var ht=it.alternate,pt=it.flags;switch(it.tag){case 0:case 11:case 14:case 15:if(ka(at,it),oo(it),pt&4){try{Sh(3,it,it.return),rd(3,it)}catch(zr){xi(it,it.return,zr)}try{Sh(5,it,it.return)}catch(zr){xi(it,it.return,zr)}}break;case 1:ka(at,it),oo(it),pt&512&&ht!==null&&xc(ht,ht.return);break;case 5:if(ka(at,it),oo(it),pt&512&&ht!==null&&xc(ht,ht.return),it.flags&32){var _t=it.stateNode;try{Ua(_t,"")}catch(zr){xi(it,it.return,zr)}}if(pt&4&&(_t=it.stateNode,_t!=null)){var Tt=it.memoizedProps,Ot=ht!==null?ht.memoizedProps:Tt,$t=it.type,Vt=it.updateQueue;if(it.updateQueue=null,Vt!==null)try{$t==="input"&&Tt.type==="radio"&&Tt.name!=null&&Or(_t,Tt),Zr($t,Ot);var ar=Zr($t,Tt);for(Ot=0;Ot<Vt.length;Ot+=2){var xr=Vt[Ot],wr=Vt[Ot+1];xr==="style"?co(_t,wr):xr==="dangerouslySetInnerHTML"?zo(_t,wr):xr==="children"?Ua(_t,wr):Dt(_t,xr,wr,ar)}switch($t){case"input":ai(_t,Tt);break;case"textarea":cs(_t,Tt);break;case"select":var _r=_t._wrapperState.wasMultiple;_t._wrapperState.wasMultiple=!!Tt.multiple;var Dr=Tt.value;Dr!=null?Ai(_t,!!Tt.multiple,Dr,!1):_r!==!!Tt.multiple&&(Tt.defaultValue!=null?Ai(_t,!!Tt.multiple,Tt.defaultValue,!0):Ai(_t,!!Tt.multiple,Tt.multiple?[]:"",!1))}_t[cu]=Tt}catch(zr){xi(it,it.return,zr)}}break;case 6:if(ka(at,it),oo(it),pt&4){if(it.stateNode===null)throw Error(tt(162));_t=it.stateNode,Tt=it.memoizedProps;try{_t.nodeValue=Tt}catch(zr){xi(it,it.return,zr)}}break;case 3:if(ka(at,it),oo(it),pt&4&&ht!==null&&ht.memoizedState.isDehydrated)try{xo(at.containerInfo)}catch(zr){xi(it,it.return,zr)}break;case 4:ka(at,it),oo(it);break;case 13:ka(at,it),oo(it),_t=it.child,_t.flags&8192&&(Tt=_t.memoizedState!==null,_t.stateNode.isHidden=Tt,!Tt||_t.alternate!==null&&_t.alternate.memoizedState!==null||(Xd=hi())),pt&4&&Pf(it);break;case 22:if(xr=ht!==null&&ht.memoizedState!==null,it.mode&1?(us=(ar=us)||xr,ka(at,it),us=ar):ka(at,it),oo(it),pt&8192){if(ar=it.memoizedState!==null,(it.stateNode.isHidden=ar)&&!xr&&it.mode&1)for(Fr=it,xr=it.child;xr!==null;){for(wr=Fr=xr;Fr!==null;){switch(_r=Fr,Dr=_r.child,_r.tag){case 0:case 11:case 14:case 15:Sh(4,_r,_r.return);break;case 1:xc(_r,_r.return);var Lr=_r.stateNode;if(typeof Lr.componentWillUnmount=="function"){pt=_r,ht=_r.return;try{at=pt,Lr.props=at.memoizedProps,Lr.state=at.memoizedState,Lr.componentWillUnmount()}catch(zr){xi(pt,ht,zr)}}break;case 5:xc(_r,_r.return);break;case 22:if(_r.memoizedState!==null){Of(wr);continue}}Dr!==null?(Dr.return=_r,Fr=Dr):Of(wr)}xr=xr.sibling}e:for(xr=null,wr=it;;){if(wr.tag===5){if(xr===null){xr=wr;try{_t=wr.stateNode,ar?(Tt=_t.style,typeof Tt.setProperty=="function"?Tt.setProperty("display","none","important"):Tt.display="none"):($t=wr.stateNode,Vt=wr.memoizedProps.style,Ot=Vt!=null&&Vt.hasOwnProperty("display")?Vt.display:null,$t.style.display=Ho("display",Ot))}catch(zr){xi(it,it.return,zr)}}}else if(wr.tag===6){if(xr===null)try{wr.stateNode.nodeValue=ar?"":wr.memoizedProps}catch(zr){xi(it,it.return,zr)}}else if((wr.tag!==22&&wr.tag!==23||wr.memoizedState===null||wr===it)&&wr.child!==null){wr.child.return=wr,wr=wr.child;continue}if(wr===it)break e;for(;wr.sibling===null;){if(wr.return===null||wr.return===it)break e;xr===wr&&(xr=null),wr=wr.return}xr===wr&&(xr=null),wr.sibling.return=wr.return,wr=wr.sibling}}break;case 19:ka(at,it),oo(it),pt&4&&Pf(it);break;case 21:break;default:ka(at,it),oo(it)}}function oo(it){var at=it.flags;if(at&2){try{e:{for(var ht=it.return;ht!==null;){if(bf(ht)){var pt=ht;break e}ht=ht.return}throw Error(tt(160))}switch(pt.tag){case 5:var _t=pt.stateNode;pt.flags&32&&(Ua(_t,""),pt.flags&=-33);var Tt=Af(it);$d(it,Tt,_t);break;case 3:case 4:var Ot=pt.stateNode.containerInfo,$t=Af(it);jd(it,$t,Ot);break;default:throw Error(tt(161))}}catch(Vt){xi(it,it.return,Vt)}it.flags&=-3}at&4096&&(it.flags&=-4097)}function sp(it,at,ht){Fr=it,If(it)}function If(it,at,ht){for(var pt=(it.mode&1)!==0;Fr!==null;){var _t=Fr,Tt=_t.child;if(_t.tag===22&&pt){var Ot=_t.memoizedState!==null||td;if(!Ot){var $t=_t.alternate,Vt=$t!==null&&$t.memoizedState!==null||us;$t=td;var ar=us;if(td=Ot,(us=Vt)&&!ar)for(Fr=_t;Fr!==null;)Ot=Fr,Vt=Ot.child,Ot.tag===22&&Ot.memoizedState!==null?Df(_t):Vt!==null?(Vt.return=Ot,Fr=Vt):Df(_t);for(;Tt!==null;)Fr=Tt,If(Tt),Tt=Tt.sibling;Fr=_t,td=$t,us=ar}Mf(it)}else _t.subtreeFlags&8772&&Tt!==null?(Tt.return=_t,Fr=Tt):Mf(it)}}function Mf(it){for(;Fr!==null;){var at=Fr;if(at.flags&8772){var ht=at.alternate;try{if(at.flags&8772)switch(at.tag){case 0:case 11:case 15:us||rd(5,at);break;case 1:var pt=at.stateNode;if(at.flags&4&&!us)if(ht===null)pt.componentDidMount();else{var _t=at.elementType===at.type?ht.memoizedProps:lt(at.type,ht.memoizedProps);pt.componentDidUpdate(_t,ht.memoizedState,pt.__reactInternalSnapshotBeforeUpdate)}var Tt=at.updateQueue;Tt!==null&&io(at,Tt,pt);break;case 3:var Ot=at.updateQueue;if(Ot!==null){if(ht=null,at.child!==null)switch(at.child.tag){case 5:ht=at.child.stateNode;break;case 1:ht=at.child.stateNode}io(at,Ot,ht)}break;case 5:var $t=at.stateNode;if(ht===null&&at.flags&4){ht=$t;var Vt=at.memoizedProps;switch(at.type){case"button":case"input":case"select":case"textarea":Vt.autoFocus&&ht.focus();break;case"img":Vt.src&&(ht.src=Vt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(at.memoizedState===null){var ar=at.alternate;if(ar!==null){var xr=ar.memoizedState;if(xr!==null){var wr=xr.dehydrated;wr!==null&&xo(wr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}us||at.flags&512&&Hd(at)}catch(_r){xi(at,at.return,_r)}}if(at===it){Fr=null;break}if(ht=at.sibling,ht!==null){ht.return=at.return,Fr=ht;break}Fr=at.return}}function Of(it){for(;Fr!==null;){var at=Fr;if(at===it){Fr=null;break}var ht=at.sibling;if(ht!==null){ht.return=at.return,Fr=ht;break}Fr=at.return}}function Df(it){for(;Fr!==null;){var at=Fr;try{switch(at.tag){case 0:case 11:case 15:var ht=at.return;try{rd(4,at)}catch(Vt){xi(at,ht,Vt)}break;case 1:var pt=at.stateNode;if(typeof pt.componentDidMount=="function"){var _t=at.return;try{pt.componentDidMount()}catch(Vt){xi(at,_t,Vt)}}var Tt=at.return;try{Hd(at)}catch(Vt){xi(at,Tt,Vt)}break;case 5:var Ot=at.return;try{Hd(at)}catch(Vt){xi(at,Ot,Vt)}}}catch(Vt){xi(at,at.return,Vt)}if(at===it){Fr=null;break}var $t=at.sibling;if($t!==null){$t.return=at.return,Fr=$t;break}Fr=at.return}}var ap=Math.ceil,nd=zt.ReactCurrentDispatcher,Vd=zt.ReactCurrentOwner,ha=zt.ReactCurrentBatchConfig,Gn=0,Hi=null,Pi=null,Yi=0,Zs=0,Ec=Aa(0),Fi=0,Th=null,Au=0,id=0,Wd=0,wh=null,Us=null,Xd=0,Sc=1/0,Go=null,sd=!1,qd=null,Al=null,ad=!1,Rl=null,od=0,bh=0,Yd=null,ld=-1,ud=0;function xs(){return Gn&6?hi():ld!==-1?ld:ld=hi()}function Pl(it){return it.mode&1?Gn&2&&Yi!==0?Yi&-Yi:Od.transition!==null?(ud===0&&(ud=Ss()),ud):(it=Mn,it!==0||(it=window.event,it=it===void 0?16:fs(it.type)),it):1}function La(it,at,ht,pt){if(50<bh)throw bh=0,Yd=null,Error(tt(185));Gl(it,ht,pt),(!(Gn&2)||it!==Hi)&&(it===Hi&&(!(Gn&2)&&(id|=ht),Fi===4&&Cl(it,Yi)),Gs(it,pt),ht===1&&Gn===0&&!(at.mode&1)&&(Sc=hi()+500,Cs&&Ms()))}function Gs(it,at){var ht=it.callbackNode;Lu(it,at);var pt=Ul(it,it===Hi?Yi:0);if(pt===0)ht!==null&&Oh(ht),it.callbackNode=null,it.callbackPriority=0;else if(at=pt&-pt,it.callbackPriority!==at){if(ht!=null&&Oh(ht),at===1)it.tag===0?Xh(Nf.bind(null,it)):oh(Nf.bind(null,it)),nh(function(){!(Gn&6)&&Ms()}),ht=null;else{switch(Hl(pt)){case 1:ht=Bl;break;case 4:ht=Nu;break;case 16:ht=ku;break;case 536870912:ht=yo;break;default:ht=ku}ht=jf(ht,Ff.bind(null,it))}it.callbackPriority=at,it.callbackNode=ht}}function Ff(it,at){if(ld=-1,ud=0,Gn&6)throw Error(tt(327));var ht=it.callbackNode;if(Tc()&&it.callbackNode!==ht)return null;var pt=Ul(it,it===Hi?Yi:0);if(pt===0)return null;if(pt&30||pt&it.expiredLanes||at)at=cd(it,pt);else{at=pt;var _t=Gn;Gn|=2;var Tt=Lf();(Hi!==it||Yi!==at)&&(Go=null,Sc=hi()+500,Pu(it,at));do try{up();break}catch($t){kf(it,$t)}while(!0);gu(),nd.current=Tt,Gn=_t,Pi!==null?at=0:(Hi=null,Yi=0,at=Fi)}if(at!==0){if(at===2&&(_t=Bu(it),_t!==0&&(pt=_t,at=Kd(it,_t))),at===1)throw ht=Th,Pu(it,0),Cl(it,pt),Gs(it,hi()),ht;if(at===6)Cl(it,pt);else{if(_t=it.current.alternate,!(pt&30)&&!op(_t)&&(at=cd(it,pt),at===2&&(Tt=Bu(it),Tt!==0&&(pt=Tt,at=Kd(it,Tt))),at===1))throw ht=Th,Pu(it,0),Cl(it,pt),Gs(it,hi()),ht;switch(it.finishedWork=_t,it.finishedLanes=pt,at){case 0:case 1:throw Error(tt(345));case 2:Cu(it,Us,Go);break;case 3:if(Cl(it,pt),(pt&130023424)===pt&&(at=Xd+500-hi(),10<at)){if(Ul(it,0)!==0)break;if(_t=it.suspendedLanes,(_t&pt)!==pt){xs(),it.pingedLanes|=it.suspendedLanes&_t;break}it.timeoutHandle=rh(Cu.bind(null,it,Us,Go),at);break}Cu(it,Us,Go);break;case 4:if(Cl(it,pt),(pt&4194240)===pt)break;for(at=it.eventTimes,_t=-1;0<pt;){var Ot=31-Ri(pt);Tt=1<<Ot,Ot=at[Ot],Ot>_t&&(_t=Ot),pt&=~Tt}if(pt=_t,pt=hi()-pt,pt=(120>pt?120:480>pt?480:1080>pt?1080:1920>pt?1920:3e3>pt?3e3:4320>pt?4320:1960*ap(pt/1960))-pt,10<pt){it.timeoutHandle=rh(Cu.bind(null,it,Us,Go),pt);break}Cu(it,Us,Go);break;case 5:Cu(it,Us,Go);break;default:throw Error(tt(329))}}}return Gs(it,hi()),it.callbackNode===ht?Ff.bind(null,it):null}function Kd(it,at){var ht=wh;return it.current.memoizedState.isDehydrated&&(Pu(it,at).flags|=256),it=cd(it,at),it!==2&&(at=Us,Us=ht,at!==null&&Qd(at)),it}function Qd(it){Us===null?Us=it:Us.push.apply(Us,it)}function op(it){for(var at=it;;){if(at.flags&16384){var ht=at.updateQueue;if(ht!==null&&(ht=ht.stores,ht!==null))for(var pt=0;pt<ht.length;pt++){var _t=ht[pt],Tt=_t.getSnapshot;_t=_t.value;try{if(!ms(Tt(),_t))return!1}catch{return!1}}}if(ht=at.child,at.subtreeFlags&16384&&ht!==null)ht.return=at,at=ht;else{if(at===it)break;for(;at.sibling===null;){if(at.return===null||at.return===it)return!0;at=at.return}at.sibling.return=at.return,at=at.sibling}}return!0}function Cl(it,at){for(at&=~Wd,at&=~id,it.suspendedLanes|=at,it.pingedLanes&=~at,it=it.expirationTimes;0<at;){var ht=31-Ri(at),pt=1<<ht;it[ht]=-1,at&=~pt}}function Nf(it){if(Gn&6)throw Error(tt(327));Tc();var at=Ul(it,0);if(!(at&1))return Gs(it,hi()),null;var ht=cd(it,at);if(it.tag!==0&&ht===2){var pt=Bu(it);pt!==0&&(at=pt,ht=Kd(it,pt))}if(ht===1)throw ht=Th,Pu(it,0),Cl(it,at),Gs(it,hi()),ht;if(ht===6)throw Error(tt(345));return it.finishedWork=it.current.alternate,it.finishedLanes=at,Cu(it,Us,Go),Gs(it,hi()),null}function Zd(it,at){var ht=Gn;Gn|=1;try{return it(at)}finally{Gn=ht,Gn===0&&(Sc=hi()+500,Cs&&Ms())}}function Ru(it){Rl!==null&&Rl.tag===0&&!(Gn&6)&&Tc();var at=Gn;Gn|=1;var ht=ha.transition,pt=Mn;try{if(ha.transition=null,Mn=1,it)return it()}finally{Mn=pt,ha.transition=ht,Gn=at,!(Gn&6)&&Ms()}}function Jd(){Zs=Ec.current,Jn(Ec)}function Pu(it,at){it.finishedWork=null,it.finishedLanes=0;var ht=it.timeoutHandle;if(ht!==-1&&(it.timeoutHandle=-1,dl(ht)),Pi!==null)for(ht=Pi.return;ht!==null;){var pt=ht;switch(du(pt),pt.tag){case 1:pt=pt.type.childContextTypes,pt!=null&&ml();break;case 3:ys(),Jn(Mi),Jn(Si),Tl();break;case 5:fc(pt);break;case 4:ys();break;case 13:Jn(ei);break;case 19:Jn(ei);break;case 10:yu(pt.type._context);break;case 22:case 23:Jd()}ht=ht.return}if(Hi=it,Pi=it=Il(it.current,null),Yi=Zs=at,Fi=0,Th=null,Wd=id=Au=0,Us=wh=null,No!==null){for(at=0;at<No.length;at++)if(ht=No[at],pt=ht.interleaved,pt!==null){ht.interleaved=null;var _t=pt.next,Tt=ht.pending;if(Tt!==null){var Ot=Tt.next;Tt.next=_t,pt.next=Ot}ht.pending=pt}No=null}return it}function kf(it,at){do{var ht=Pi;try{if(gu(),qs.current=bu,Ti){for(var pt=si.memoizedState;pt!==null;){var _t=pt.queue;_t!==null&&(_t.pending=null),pt=pt.next}Ti=!1}if(Ys=0,fi=ci=si=null,Bs=!1,zi=0,Vd.current=null,ht===null||ht.return===null){Fi=1,Th=at,Pi=null;break}e:{var Tt=it,Ot=ht.return,$t=ht,Vt=at;if(at=Yi,$t.flags|=32768,Vt!==null&&typeof Vt=="object"&&typeof Vt.then=="function"){var ar=Vt,xr=$t,wr=xr.tag;if(!(xr.mode&1)&&(wr===0||wr===11||wr===15)){var _r=xr.alternate;_r?(xr.updateQueue=_r.updateQueue,xr.memoizedState=_r.memoizedState,xr.lanes=_r.lanes):(xr.updateQueue=null,xr.memoizedState=null)}var Dr=kr(Ot);if(Dr!==null){Dr.flags&=-257,Kr(Dr,Ot,$t,Tt,at),Dr.mode&1&&Ar(Tt,ar,at),at=Dr,Vt=ar;var Lr=at.updateQueue;if(Lr===null){var zr=new Set;zr.add(Vt),at.updateQueue=zr}else Lr.add(Vt);break e}else{if(!(at&1)){Ar(Tt,ar,at),ef();break e}Vt=Error(tt(426))}}else if(ni&&$t.mode&1){var bi=kr(Ot);if(bi!==null){!(bi.flags&65536)&&(bi.flags|=256),Kr(bi,Ot,$t,Tt,at),ks(Wt(Vt,$t));break e}}Tt=Vt=Wt(Vt,$t),Fi!==4&&(Fi=2),wh===null?wh=[Tt]:wh.push(Tt),Tt=Ot;do{switch(Tt.tag){case 3:Tt.flags|=65536,at&=-at,Tt.lanes|=at;var er=Cr(Tt,Vt,at);vi(Tt,er);break e;case 1:$t=Vt;var qt=Tt.type,nr=Tt.stateNode;if(!(Tt.flags&128)&&(typeof qt.getDerivedStateFromError=="function"||nr!==null&&typeof nr.componentDidCatch=="function"&&(Al===null||!Al.has(nr)))){Tt.flags|=65536,at&=-at,Tt.lanes|=at;var Rr=fr(Tt,$t,at);vi(Tt,Rr);break e}}Tt=Tt.return}while(Tt!==null)}Uf(ht)}catch(Hr){at=Hr,Pi===ht&&ht!==null&&(Pi=ht=ht.return);continue}break}while(!0)}function Lf(){var it=nd.current;return nd.current=bu,it===null?bu:it}function ef(){(Fi===0||Fi===3||Fi===2)&&(Fi=4),Hi===null||!(Au&268435455)&&!(id&268435455)||Cl(Hi,Yi)}function cd(it,at){var ht=Gn;Gn|=2;var pt=Lf();(Hi!==it||Yi!==at)&&(Go=null,Pu(it,at));do try{lp();break}catch(_t){kf(it,_t)}while(!0);if(gu(),Gn=ht,nd.current=pt,Pi!==null)throw Error(tt(261));return Hi=null,Yi=0,Fi}function lp(){for(;Pi!==null;)Bf(Pi)}function up(){for(;Pi!==null&&!wd();)Bf(Pi)}function Bf(it){var at=Hf(it.alternate,it,Zs);it.memoizedProps=it.pendingProps,at===null?Uf(it):Pi=at,Vd.current=null}function Uf(it){var at=it;do{var ht=at.alternate;if(it=at.return,at.flags&32768){if(ht=rp(ht,at),ht!==null){ht.flags&=32767,Pi=ht;return}if(it!==null)it.flags|=32768,it.subtreeFlags=0,it.deletions=null;else{Fi=6,Pi=null;return}}else if(ht=tp(ht,at,Zs),ht!==null){Pi=ht;return}if(at=at.sibling,at!==null){Pi=at;return}Pi=at=it}while(at!==null);Fi===0&&(Fi=5)}function Cu(it,at,ht){var pt=Mn,_t=ha.transition;try{ha.transition=null,Mn=1,cp(it,at,ht,pt)}finally{ha.transition=_t,Mn=pt}return null}function cp(it,at,ht,pt){do Tc();while(Rl!==null);if(Gn&6)throw Error(tt(327));ht=it.finishedWork;var _t=it.finishedLanes;if(ht===null)return null;if(it.finishedWork=null,it.finishedLanes=0,ht===it.current)throw Error(tt(177));it.callbackNode=null,it.callbackPriority=0;var Tt=ht.lanes|ht.childLanes;if(Mc(it,Tt),it===Hi&&(Pi=Hi=null,Yi=0),!(ht.subtreeFlags&2064)&&!(ht.flags&2064)||ad||(ad=!0,jf(ku,function(){return Tc(),null})),Tt=(ht.flags&15990)!==0,ht.subtreeFlags&15990||Tt){Tt=ha.transition,ha.transition=null;var Ot=Mn;Mn=1;var $t=Gn;Gn|=4,Vd.current=null,ip(it,ht),Cf(ht,it),Ku(eh),ds=!!hl,eh=hl=null,it.current=ht,sp(ht),bd(),Gn=$t,Mn=Ot,ha.transition=Tt}else it.current=ht;if(ad&&(ad=!1,Rl=it,od=_t),Tt=it.pendingLanes,Tt===0&&(Al=null),Kn(ht.stateNode),Gs(it,hi()),at!==null)for(pt=it.onRecoverableError,ht=0;ht<at.length;ht++)_t=at[ht],pt(_t.value,{componentStack:_t.stack,digest:_t.digest});if(sd)throw sd=!1,it=qd,qd=null,it;return od&1&&it.tag!==0&&Tc(),Tt=it.pendingLanes,Tt&1?it===Yd?bh++:(bh=0,Yd=it):bh=0,Ms(),null}function Tc(){if(Rl!==null){var it=Hl(od),at=ha.transition,ht=Mn;try{if(ha.transition=null,Mn=16>it?16:it,Rl===null)var pt=!1;else{if(it=Rl,Rl=null,od=0,Gn&6)throw Error(tt(331));var _t=Gn;for(Gn|=4,Fr=it.current;Fr!==null;){var Tt=Fr,Ot=Tt.child;if(Fr.flags&16){var $t=Tt.deletions;if($t!==null){for(var Vt=0;Vt<$t.length;Vt++){var ar=$t[Vt];for(Fr=ar;Fr!==null;){var xr=Fr;switch(xr.tag){case 0:case 11:case 15:Sh(8,xr,Tt)}var wr=xr.child;if(wr!==null)wr.return=xr,Fr=wr;else for(;Fr!==null;){xr=Fr;var _r=xr.sibling,Dr=xr.return;if(wf(xr),xr===ar){Fr=null;break}if(_r!==null){_r.return=Dr,Fr=_r;break}Fr=Dr}}}var Lr=Tt.alternate;if(Lr!==null){var zr=Lr.child;if(zr!==null){Lr.child=null;do{var bi=zr.sibling;zr.sibling=null,zr=bi}while(zr!==null)}}Fr=Tt}}if(Tt.subtreeFlags&2064&&Ot!==null)Ot.return=Tt,Fr=Ot;else e:for(;Fr!==null;){if(Tt=Fr,Tt.flags&2048)switch(Tt.tag){case 0:case 11:case 15:Sh(9,Tt,Tt.return)}var er=Tt.sibling;if(er!==null){er.return=Tt.return,Fr=er;break e}Fr=Tt.return}}var qt=it.current;for(Fr=qt;Fr!==null;){Ot=Fr;var nr=Ot.child;if(Ot.subtreeFlags&2064&&nr!==null)nr.return=Ot,Fr=nr;else e:for(Ot=qt;Fr!==null;){if($t=Fr,$t.flags&2048)try{switch($t.tag){case 0:case 11:case 15:rd(9,$t)}}catch(Hr){xi($t,$t.return,Hr)}if($t===Ot){Fr=null;break e}var Rr=$t.sibling;if(Rr!==null){Rr.return=$t.return,Fr=Rr;break e}Fr=$t.return}}if(Gn=_t,Ms(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(js,it)}catch{}pt=!0}return pt}finally{Mn=ht,ha.transition=at}}return!1}function Gf(it,at,ht){at=Wt(ht,at),at=Cr(it,at,1),it=_i(it,at,1),at=xs(),it!==null&&(Gl(it,1,at),Gs(it,at))}function xi(it,at,ht){if(it.tag===3)Gf(it,it,ht);else for(;at!==null;){if(at.tag===3){Gf(at,it,ht);break}else if(at.tag===1){var pt=at.stateNode;if(typeof at.type.getDerivedStateFromError=="function"||typeof pt.componentDidCatch=="function"&&(Al===null||!Al.has(pt))){it=Wt(ht,it),it=fr(at,it,1),at=_i(at,it,1),it=xs(),at!==null&&(Gl(at,1,it),Gs(at,it));break}}at=at.return}}function hp(it,at,ht){var pt=it.pingCache;pt!==null&&pt.delete(at),at=xs(),it.pingedLanes|=it.suspendedLanes&ht,Hi===it&&(Yi&ht)===ht&&(Fi===4||Fi===3&&(Yi&130023424)===Yi&&500>hi()-Xd?Pu(it,0):Wd|=ht),Gs(it,at)}function zf(it,at){at===0&&(it.mode&1?(at=Bi,Bi<<=1,!(Bi&130023424)&&(Bi=4194304)):at=1);var ht=xs();it=Xn(it,at),it!==null&&(Gl(it,at,ht),Gs(it,ht))}function dp(it){var at=it.memoizedState,ht=0;at!==null&&(ht=at.retryLane),zf(it,ht)}function fp(it,at){var ht=0;switch(it.tag){case 13:var pt=it.stateNode,_t=it.memoizedState;_t!==null&&(ht=_t.retryLane);break;case 19:pt=it.stateNode;break;default:throw Error(tt(314))}pt!==null&&pt.delete(at),zf(it,ht)}var Hf;Hf=function(it,at,ht){if(it!==null)if(it.memoizedProps!==at.pendingProps||Mi.current)Qt=!0;else{if(!(it.lanes&ht)&&!(at.flags&128))return Qt=!1,ep(it,at,ht);Qt=!!(it.flags&131072)}else Qt=!1,ni&&at.flags&1048576&&_l(at,Co,at.index);switch(at.lanes=0,at.tag){case 2:var pt=at.type;ed(it,at),it=at.pendingProps;var _t=eo(at,Si.current);Fo(at,ht),_t=Eu(null,at,pt,it,_t,ht);var Tt=ua();return at.flags|=1,typeof _t=="object"&&_t!==null&&typeof _t.render=="function"&&_t.$$typeof===void 0?(at.tag=1,at.memoizedState=null,at.updateQueue=null,Xi(pt)?(Tt=!0,gl(at)):Tt=!1,at.memoizedState=_t.state!==null&&_t.state!==void 0?_t.state:null,yi(at),_t.updater=mt,at.stateNode=_t,_t._reactInternals=at,Bt(at,pt,it,ht),at=ca(null,at,pt,!0,Tt,ht)):(at.tag=0,ni&&Tt&&vl(at),or(null,at,_t,ht),at=at.child),at;case 16:pt=at.elementType;e:{switch(ed(it,at),it=at.pendingProps,_t=pt._init,pt=_t(pt._payload),at.type=pt,_t=at.tag=mp(pt),it=lt(pt,it),_t){case 0:at=wi(null,at,pt,it,ht);break e;case 1:at=Un(null,at,pt,it,ht);break e;case 11:at=Er(null,at,pt,it,ht);break e;case 14:at=$r(null,at,pt,lt(pt.type,it),ht);break e}throw Error(tt(306,pt,""))}return at;case 0:return pt=at.type,_t=at.pendingProps,_t=at.elementType===pt?_t:lt(pt,_t),wi(it,at,pt,_t,ht);case 1:return pt=at.type,_t=at.pendingProps,_t=at.elementType===pt?_t:lt(pt,_t),Un(it,at,pt,_t,ht);case 3:e:{if(Zh(at),it===null)throw Error(tt(387));pt=at.pendingProps,Tt=at.memoizedState,_t=Tt.element,di(it,at),no(at,pt,null,ht);var Ot=at.memoizedState;if(pt=Ot.element,Tt.isDehydrated)if(Tt={element:pt,isDehydrated:!1,cache:Ot.cache,pendingSuspenseBoundaries:Ot.pendingSuspenseBoundaries,transitions:Ot.transitions},at.updateQueue.baseState=Tt,at.memoizedState=Tt,at.flags&256){_t=Wt(Error(tt(423)),at),at=gf(it,at,pt,ht,_t);break e}else if(pt!==_t){_t=Wt(Error(tt(424)),at),at=gf(it,at,pt,ht,_t);break e}else for(ss=ba(at.stateNode.containerInfo.firstChild),ns=at,ni=!0,gs=null,ht=mu(at,null,pt,ht),at.child=ht;ht;)ht.flags=ht.flags&-3|4096,ht=ht.sibling;else{if(Io(),pt===_t){at=Uo(it,at,ht);break e}or(it,at,pt,ht)}at=at.child}return at;case 5:return ko(at),it===null&&Fs(at),pt=at.type,_t=at.pendingProps,Tt=it!==null?it.memoizedProps:null,Ot=_t.children,th(pt,_t)?Ot=null:Tt!==null&&th(pt,Tt)&&(at.flags|=32),Fn(it,at),or(it,at,Ot,ht),at.child;case 6:return it===null&&Fs(at),null;case 13:return yf(it,at,ht);case 4:return vu(at,at.stateNode.containerInfo),pt=at.pendingProps,it===null?at.child=Pa(at,null,pt,ht):or(it,at,pt,ht),at.child;case 11:return pt=at.type,_t=at.pendingProps,_t=at.elementType===pt?_t:lt(pt,_t),Er(it,at,pt,_t,ht);case 7:return or(it,at,at.pendingProps,ht),at.child;case 8:return or(it,at,at.pendingProps.children,ht),at.child;case 12:return or(it,at,at.pendingProps.children,ht),at.child;case 10:e:{if(pt=at.type._context,_t=at.pendingProps,Tt=at.memoizedProps,Ot=_t.value,$n(Mo,pt._currentValue),pt._currentValue=Ot,Tt!==null)if(ms(Tt.value,Ot)){if(Tt.children===_t.children&&!Mi.current){at=Uo(it,at,ht);break e}}else for(Tt=at.child,Tt!==null&&(Tt.return=at);Tt!==null;){var $t=Tt.dependencies;if($t!==null){Ot=Tt.child;for(var Vt=$t.firstContext;Vt!==null;){if(Vt.context===pt){if(Tt.tag===1){Vt=ii(-1,ht&-ht),Vt.tag=2;var ar=Tt.updateQueue;if(ar!==null){ar=ar.shared;var xr=ar.pending;xr===null?Vt.next=Vt:(Vt.next=xr.next,xr.next=Vt),ar.pending=Vt}}Tt.lanes|=ht,Vt=Tt.alternate,Vt!==null&&(Vt.lanes|=ht),_u(Tt.return,ht,at),$t.lanes|=ht;break}Vt=Vt.next}}else if(Tt.tag===10)Ot=Tt.type===at.type?null:Tt.child;else if(Tt.tag===18){if(Ot=Tt.return,Ot===null)throw Error(tt(341));Ot.lanes|=ht,$t=Ot.alternate,$t!==null&&($t.lanes|=ht),_u(Ot,ht,at),Ot=Tt.sibling}else Ot=Tt.child;if(Ot!==null)Ot.return=Tt;else for(Ot=Tt;Ot!==null;){if(Ot===at){Ot=null;break}if(Tt=Ot.sibling,Tt!==null){Tt.return=Ot.return,Ot=Tt;break}Ot=Ot.return}Tt=Ot}or(it,at,_t.children,ht),at=at.child}return at;case 9:return _t=at.type,pt=at.pendingProps.children,Fo(at,ht),_t=as(_t),pt=pt(_t),at.flags|=1,or(it,at,pt,ht),at.child;case 14:return pt=at.type,_t=lt(pt,at.pendingProps),_t=lt(pt.type,_t),$r(it,at,pt,_t,ht);case 15:return Bn(it,at,at.type,at.pendingProps,ht);case 17:return pt=at.type,_t=at.pendingProps,_t=at.elementType===pt?_t:lt(pt,_t),ed(it,at),at.tag=1,Xi(pt)?(it=!0,gl(at)):it=!1,Fo(at,ht),Et(at,pt,_t),Bt(at,pt,_t,ht),ca(null,at,pt,!0,it,ht);case 19:return vf(it,at,ht);case 22:return Gr(it,at,ht)}throw Error(tt(156,at.tag))};function jf(it,at){return kl(it,at)}function pp(it,at,ht,pt){this.tag=it,this.key=ht,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=at,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=pt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function da(it,at,ht,pt){return new pp(it,at,ht,pt)}function tf(it){return it=it.prototype,!(!it||!it.isReactComponent)}function mp(it){if(typeof it=="function")return tf(it)?1:0;if(it!=null){if(it=it.$$typeof,it===Kt)return 11;if(it===vr)return 14}return 2}function Il(it,at){var ht=it.alternate;return ht===null?(ht=da(it.tag,at,it.key,it.mode),ht.elementType=it.elementType,ht.type=it.type,ht.stateNode=it.stateNode,ht.alternate=it,it.alternate=ht):(ht.pendingProps=at,ht.type=it.type,ht.flags=0,ht.subtreeFlags=0,ht.deletions=null),ht.flags=it.flags&14680064,ht.childLanes=it.childLanes,ht.lanes=it.lanes,ht.child=it.child,ht.memoizedProps=it.memoizedProps,ht.memoizedState=it.memoizedState,ht.updateQueue=it.updateQueue,at=it.dependencies,ht.dependencies=at===null?null:{lanes:at.lanes,firstContext:at.firstContext},ht.sibling=it.sibling,ht.index=it.index,ht.ref=it.ref,ht}function hd(it,at,ht,pt,_t,Tt){var Ot=2;if(pt=it,typeof it=="function")tf(it)&&(Ot=1);else if(typeof it=="string")Ot=5;else e:switch(it){case Nt:return Iu(ht.children,_t,Tt,at);case Jt:Ot=8,_t|=8;break;case ur:return it=da(12,ht,at,_t|2),it.elementType=ur,it.lanes=Tt,it;case Zt:return it=da(13,ht,at,_t),it.elementType=Zt,it.lanes=Tt,it;case lr:return it=da(19,ht,at,_t),it.elementType=lr,it.lanes=Tt,it;case Ht:return dd(ht,_t,Tt,at);default:if(typeof it=="object"&&it!==null)switch(it.$$typeof){case dr:Ot=10;break e;case Tr:Ot=9;break e;case Kt:Ot=11;break e;case vr:Ot=14;break e;case Ut:Ot=16,pt=null;break e}throw Error(tt(130,it==null?it:typeof it,""))}return at=da(Ot,ht,at,_t),at.elementType=it,at.type=pt,at.lanes=Tt,at}function Iu(it,at,ht,pt){return it=da(7,it,pt,at),it.lanes=ht,it}function dd(it,at,ht,pt){return it=da(22,it,pt,at),it.elementType=Ht,it.lanes=ht,it.stateNode={isHidden:!1},it}function rf(it,at,ht){return it=da(6,it,null,at),it.lanes=ht,it}function nf(it,at,ht){return at=da(4,it.children!==null?it.children:[],it.key,at),at.lanes=ht,at.stateNode={containerInfo:it.containerInfo,pendingChildren:null,implementation:it.implementation},at}function gp(it,at,ht,pt,_t){this.tag=at,this.containerInfo=it,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ic(0),this.expirationTimes=Ic(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ic(0),this.identifierPrefix=pt,this.onRecoverableError=_t,this.mutableSourceEagerHydrationData=null}function sf(it,at,ht,pt,_t,Tt,Ot,$t,Vt){return it=new gp(it,at,ht,$t,Vt),at===1?(at=1,Tt===!0&&(at|=8)):at=0,Tt=da(3,null,null,at),it.current=Tt,Tt.stateNode=it,Tt.memoizedState={element:pt,isDehydrated:ht,cache:null,transitions:null,pendingSuspenseBoundaries:null},yi(Tt),it}function yp(it,at,ht){var pt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yt,key:pt==null?null:""+pt,children:it,containerInfo:at,implementation:ht}}function $f(it){if(!it)return Rs;it=it._reactInternals;e:{if(ra(it)!==it||it.tag!==1)throw Error(tt(170));var at=it;do{switch(at.tag){case 3:at=at.stateNode.context;break e;case 1:if(Xi(at.type)){at=at.stateNode.__reactInternalMemoizedMergedChildContext;break e}}at=at.return}while(at!==null);throw Error(tt(171))}if(it.tag===1){var ht=it.type;if(Xi(ht))return sh(it,ht,at)}return at}function Vf(it,at,ht,pt,_t,Tt,Ot,$t,Vt){return it=sf(ht,pt,!0,it,_t,Tt,Ot,$t,Vt),it.context=$f(null),ht=it.current,pt=xs(),_t=Pl(ht),Tt=ii(pt,_t),Tt.callback=at??null,_i(ht,Tt,_t),it.current.lanes=_t,Gl(it,_t,pt),Gs(it,pt),it}function fd(it,at,ht,pt){var _t=at.current,Tt=xs(),Ot=Pl(_t);return ht=$f(ht),at.context===null?at.context=ht:at.pendingContext=ht,at=ii(Tt,Ot),at.payload={element:it},pt=pt===void 0?null:pt,pt!==null&&(at.callback=pt),it=_i(_t,at,Ot),it!==null&&(La(it,_t,Ot,Tt),Ia(it,_t,Ot)),Ot}function pd(it){if(it=it.current,!it.child)return null;switch(it.child.tag){case 5:return it.child.stateNode;default:return it.child.stateNode}}function Wf(it,at){if(it=it.memoizedState,it!==null&&it.dehydrated!==null){var ht=it.retryLane;it.retryLane=ht!==0&&ht<at?ht:at}}function af(it,at){Wf(it,at),(it=it.alternate)&&Wf(it,at)}var Xf=typeof reportError=="function"?reportError:function(it){console.error(it)};function of(it){this._internalRoot=it}md.prototype.render=of.prototype.render=function(it){var at=this._internalRoot;if(at===null)throw Error(tt(409));fd(it,at,null,null)},md.prototype.unmount=of.prototype.unmount=function(){var it=this._internalRoot;if(it!==null){this._internalRoot=null;var at=it.containerInfo;Ru(function(){fd(null,it,null,null)}),at[ui]=null}};function md(it){this._internalRoot=it}md.prototype.unstable_scheduleHydration=function(it){if(it){var at=Uu();it={blockedOn:null,target:it,priority:at};for(var ht=0;ht<ti.length&&at!==0&&at<ti[ht].priority;ht++);ti.splice(ht,0,it),ht===0&&Xl(it)}};function lf(it){return!(!it||it.nodeType!==1&&it.nodeType!==9&&it.nodeType!==11)}function gd(it){return!(!it||it.nodeType!==1&&it.nodeType!==9&&it.nodeType!==11&&(it.nodeType!==8||it.nodeValue!==" react-mount-point-unstable "))}function qf(){}function _p(it,at,ht,pt,_t){if(_t){if(typeof pt=="function"){var Tt=pt;pt=function(){var ar=pd(Ot);Tt.call(ar)}}var Ot=Vf(at,pt,it,0,null,!1,!1,"",qf);return it._reactRootContainer=Ot,it[ui]=Ot.current,ll(it.nodeType===8?it.parentNode:it),Ru(),Ot}for(;_t=it.lastChild;)it.removeChild(_t);if(typeof pt=="function"){var $t=pt;pt=function(){var ar=pd(Vt);$t.call(ar)}}var Vt=sf(it,0,!1,null,null,!1,!1,"",qf);return it._reactRootContainer=Vt,it[ui]=Vt.current,ll(it.nodeType===8?it.parentNode:it),Ru(function(){fd(at,Vt,ht,pt)}),Vt}function yd(it,at,ht,pt,_t){var Tt=ht._reactRootContainer;if(Tt){var Ot=Tt;if(typeof _t=="function"){var $t=_t;_t=function(){var Vt=pd(Ot);$t.call(Vt)}}fd(at,Ot,it,_t)}else Ot=_p(ht,at,it,_t,pt);return pd(Ot)}Fh=function(it){switch(it.tag){case 3:var at=it.stateNode;if(at.current.memoizedState.isDehydrated){var ht=vo(at.pendingLanes);ht!==0&&(zl(at,ht|1),Gs(at,hi()),!(Gn&6)&&(Sc=hi()+500,Ms()))}break;case 13:Ru(function(){var pt=Xn(it,1);if(pt!==null){var _t=xs();La(pt,it,1,_t)}}),af(it,1)}},jl=function(it){if(it.tag===13){var at=Xn(it,134217728);if(at!==null){var ht=xs();La(at,it,134217728,ht)}af(it,134217728)}},Oc=function(it){if(it.tag===13){var at=Pl(it),ht=Xn(it,at);if(ht!==null){var pt=xs();La(ht,it,at,pt)}af(it,at)}},Uu=function(){return Mn},Vo=function(it,at){var ht=Mn;try{return Mn=it,at()}finally{Mn=ht}},qr=function(it,at,ht){switch(at){case"input":if(ai(it,ht),at=ht.name,ht.type==="radio"&&at!=null){for(ht=it;ht.parentNode;)ht=ht.parentNode;for(ht=ht.querySelectorAll("input[name="+JSON.stringify(""+at)+'][type="radio"]'),at=0;at<ht.length;at++){var pt=ht[at];if(pt!==it&&pt.form===it.form){var _t=pl(pt);if(!_t)throw Error(tt(90));Nr(pt),ai(pt,_t)}}}break;case"textarea":cs(it,ht);break;case"select":at=ht.value,at!=null&&Ai(it,!!ht.multiple,at,!1)}},pa=Zd,ki=Ru;var vp={usingClientEntryPoint:!1,Events:[fl,Po,pl,Es,ho,Zd]},Ah={findFiberByHostInstance:Za,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xp={bundleType:Ah.bundleType,version:Ah.version,rendererPackageName:Ah.rendererPackageName,rendererConfig:Ah.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zt.ReactCurrentDispatcher,findHostInstanceByFiber:function(it){return it=go(it),it===null?null:it.stateNode},findFiberByHostInstance:Ah.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_d.isDisabled&&_d.supportsFiber)try{js=_d.inject(xp),An=_d}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vp,reactDom_production_min.createPortal=function(it,at){var ht=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lf(at))throw Error(tt(200));return yp(it,at,null,ht)},reactDom_production_min.createRoot=function(it,at){if(!lf(it))throw Error(tt(299));var ht=!1,pt="",_t=Xf;return at!=null&&(at.unstable_strictMode===!0&&(ht=!0),at.identifierPrefix!==void 0&&(pt=at.identifierPrefix),at.onRecoverableError!==void 0&&(_t=at.onRecoverableError)),at=sf(it,1,!1,null,null,ht,!1,pt,_t),it[ui]=at.current,ll(it.nodeType===8?it.parentNode:it),new of(at)},reactDom_production_min.findDOMNode=function(it){if(it==null)return null;if(it.nodeType===1)return it;var at=it._reactInternals;if(at===void 0)throw typeof it.render=="function"?Error(tt(188)):(it=Object.keys(it).join(","),Error(tt(268,it)));return it=go(at),it=it===null?null:it.stateNode,it},reactDom_production_min.flushSync=function(it){return Ru(it)},reactDom_production_min.hydrate=function(it,at,ht){if(!gd(at))throw Error(tt(200));return yd(null,it,at,!0,ht)},reactDom_production_min.hydrateRoot=function(it,at,ht){if(!lf(it))throw Error(tt(405));var pt=ht!=null&&ht.hydratedSources||null,_t=!1,Tt="",Ot=Xf;if(ht!=null&&(ht.unstable_strictMode===!0&&(_t=!0),ht.identifierPrefix!==void 0&&(Tt=ht.identifierPrefix),ht.onRecoverableError!==void 0&&(Ot=ht.onRecoverableError)),at=Vf(at,null,it,1,ht??null,_t,!1,Tt,Ot),it[ui]=at.current,ll(it),pt)for(it=0;it<pt.length;it++)ht=pt[it],_t=ht._getVersion,_t=_t(ht._source),at.mutableSourceEagerHydrationData==null?at.mutableSourceEagerHydrationData=[ht,_t]:at.mutableSourceEagerHydrationData.push(ht,_t);return new md(at)},reactDom_production_min.render=function(it,at,ht){if(!gd(at))throw Error(tt(200));return yd(null,it,at,!1,ht)},reactDom_production_min.unmountComponentAtNode=function(it){if(!gd(it))throw Error(tt(40));return it._reactRootContainer?(Ru(function(){yd(null,null,it,!1,function(){it._reactRootContainer=null,it[ui]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=Zd,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(it,at,ht,pt){if(!gd(ht))throw Error(tt(200));if(it==null||it._reactInternals===void 0)throw Error(tt(38));return yd(it,at,ht,!1,pt)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function rt(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rt)}catch(et){console.error(et)}}return rt(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var rt=requireReactDom();return client.createRoot=rt.createRoot,client.hydrateRoot=rt.hydrateRoot,client}var clientExports=requireClient(),module={exports:{}},ENV=(rt=>(rt[rt.WEBGL_LEGACY=0]="WEBGL_LEGACY",rt[rt.WEBGL=1]="WEBGL",rt[rt.WEBGL2=2]="WEBGL2",rt))(ENV||{}),RENDERER_TYPE=(rt=>(rt[rt.UNKNOWN=0]="UNKNOWN",rt[rt.WEBGL=1]="WEBGL",rt[rt.CANVAS=2]="CANVAS",rt))(RENDERER_TYPE||{}),BUFFER_BITS=(rt=>(rt[rt.COLOR=16384]="COLOR",rt[rt.DEPTH=256]="DEPTH",rt[rt.STENCIL=1024]="STENCIL",rt))(BUFFER_BITS||{}),BLEND_MODES=(rt=>(rt[rt.NORMAL=0]="NORMAL",rt[rt.ADD=1]="ADD",rt[rt.MULTIPLY=2]="MULTIPLY",rt[rt.SCREEN=3]="SCREEN",rt[rt.OVERLAY=4]="OVERLAY",rt[rt.DARKEN=5]="DARKEN",rt[rt.LIGHTEN=6]="LIGHTEN",rt[rt.COLOR_DODGE=7]="COLOR_DODGE",rt[rt.COLOR_BURN=8]="COLOR_BURN",rt[rt.HARD_LIGHT=9]="HARD_LIGHT",rt[rt.SOFT_LIGHT=10]="SOFT_LIGHT",rt[rt.DIFFERENCE=11]="DIFFERENCE",rt[rt.EXCLUSION=12]="EXCLUSION",rt[rt.HUE=13]="HUE",rt[rt.SATURATION=14]="SATURATION",rt[rt.COLOR=15]="COLOR",rt[rt.LUMINOSITY=16]="LUMINOSITY",rt[rt.NORMAL_NPM=17]="NORMAL_NPM",rt[rt.ADD_NPM=18]="ADD_NPM",rt[rt.SCREEN_NPM=19]="SCREEN_NPM",rt[rt.NONE=20]="NONE",rt[rt.SRC_OVER=0]="SRC_OVER",rt[rt.SRC_IN=21]="SRC_IN",rt[rt.SRC_OUT=22]="SRC_OUT",rt[rt.SRC_ATOP=23]="SRC_ATOP",rt[rt.DST_OVER=24]="DST_OVER",rt[rt.DST_IN=25]="DST_IN",rt[rt.DST_OUT=26]="DST_OUT",rt[rt.DST_ATOP=27]="DST_ATOP",rt[rt.ERASE=26]="ERASE",rt[rt.SUBTRACT=28]="SUBTRACT",rt[rt.XOR=29]="XOR",rt))(BLEND_MODES||{}),DRAW_MODES=(rt=>(rt[rt.POINTS=0]="POINTS",rt[rt.LINES=1]="LINES",rt[rt.LINE_LOOP=2]="LINE_LOOP",rt[rt.LINE_STRIP=3]="LINE_STRIP",rt[rt.TRIANGLES=4]="TRIANGLES",rt[rt.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",rt[rt.TRIANGLE_FAN=6]="TRIANGLE_FAN",rt))(DRAW_MODES||{}),FORMATS=(rt=>(rt[rt.RGBA=6408]="RGBA",rt[rt.RGB=6407]="RGB",rt[rt.RG=33319]="RG",rt[rt.RED=6403]="RED",rt[rt.RGBA_INTEGER=36249]="RGBA_INTEGER",rt[rt.RGB_INTEGER=36248]="RGB_INTEGER",rt[rt.RG_INTEGER=33320]="RG_INTEGER",rt[rt.RED_INTEGER=36244]="RED_INTEGER",rt[rt.ALPHA=6406]="ALPHA",rt[rt.LUMINANCE=6409]="LUMINANCE",rt[rt.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",rt[rt.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",rt[rt.DEPTH_STENCIL=34041]="DEPTH_STENCIL",rt))(FORMATS||{}),TARGETS=(rt=>(rt[rt.TEXTURE_2D=3553]="TEXTURE_2D",rt[rt.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",rt[rt.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",rt[rt.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",rt[rt.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",rt[rt.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",rt[rt.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",rt[rt.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",rt[rt.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",rt))(TARGETS||{}),TYPES=(rt=>(rt[rt.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",rt[rt.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",rt[rt.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",rt[rt.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",rt[rt.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",rt[rt.UNSIGNED_INT=5125]="UNSIGNED_INT",rt[rt.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",rt[rt.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",rt[rt.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",rt[rt.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",rt[rt.BYTE=5120]="BYTE",rt[rt.SHORT=5122]="SHORT",rt[rt.INT=5124]="INT",rt[rt.FLOAT=5126]="FLOAT",rt[rt.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",rt[rt.HALF_FLOAT=36193]="HALF_FLOAT",rt))(TYPES||{}),SAMPLER_TYPES=(rt=>(rt[rt.FLOAT=0]="FLOAT",rt[rt.INT=1]="INT",rt[rt.UINT=2]="UINT",rt))(SAMPLER_TYPES||{}),SCALE_MODES=(rt=>(rt[rt.NEAREST=0]="NEAREST",rt[rt.LINEAR=1]="LINEAR",rt))(SCALE_MODES||{}),WRAP_MODES=(rt=>(rt[rt.CLAMP=33071]="CLAMP",rt[rt.REPEAT=10497]="REPEAT",rt[rt.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",rt))(WRAP_MODES||{}),MIPMAP_MODES=(rt=>(rt[rt.OFF=0]="OFF",rt[rt.POW2=1]="POW2",rt[rt.ON=2]="ON",rt[rt.ON_MANUAL=3]="ON_MANUAL",rt))(MIPMAP_MODES||{}),ALPHA_MODES=(rt=>(rt[rt.NPM=0]="NPM",rt[rt.UNPACK=1]="UNPACK",rt[rt.PMA=2]="PMA",rt[rt.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",rt[rt.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",rt[rt.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",rt))(ALPHA_MODES||{}),CLEAR_MODES=(rt=>(rt[rt.NO=0]="NO",rt[rt.YES=1]="YES",rt[rt.AUTO=2]="AUTO",rt[rt.BLEND=0]="BLEND",rt[rt.CLEAR=1]="CLEAR",rt[rt.BLIT=2]="BLIT",rt))(CLEAR_MODES||{}),GC_MODES=(rt=>(rt[rt.AUTO=0]="AUTO",rt[rt.MANUAL=1]="MANUAL",rt))(GC_MODES||{}),PRECISION=(rt=>(rt.LOW="lowp",rt.MEDIUM="mediump",rt.HIGH="highp",rt))(PRECISION||{}),MASK_TYPES=(rt=>(rt[rt.NONE=0]="NONE",rt[rt.SCISSOR=1]="SCISSOR",rt[rt.STENCIL=2]="STENCIL",rt[rt.SPRITE=3]="SPRITE",rt[rt.COLOR=4]="COLOR",rt))(MASK_TYPES||{}),MSAA_QUALITY=(rt=>(rt[rt.NONE=0]="NONE",rt[rt.LOW=2]="LOW",rt[rt.MEDIUM=4]="MEDIUM",rt[rt.HIGH=8]="HIGH",rt))(MSAA_QUALITY||{}),BUFFER_TYPE=(rt=>(rt[rt.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",rt[rt.ARRAY_BUFFER=34962]="ARRAY_BUFFER",rt[rt.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",rt))(BUFFER_TYPE||{});const BrowserAdapter={createCanvas:(rt,et)=>{const tt=document.createElement("canvas");return tt.width=rt,tt.height=et,tt},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(rt,et)=>fetch(rt,et),parseXML:rt=>new DOMParser().parseFromString(rt,"text/xml")},settings={ADAPTER:BrowserAdapter,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(rt){return typeof rt<"u"&&rt.platform==="MacIntel"&&typeof rt.maxTouchPoints=="number"&&rt.maxTouchPoints>1&&typeof MSStream>"u"};function createMatch(rt){return function(et){return et.test(rt)}}function isMobile$1(rt){var et={userAgent:"",platform:"",maxTouchPoints:0};!rt&&typeof navigator<"u"?et={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof rt=="string"?et.userAgent=rt:rt&&rt.userAgent&&(et={userAgent:rt.userAgent,platform:rt.platform,maxTouchPoints:rt.maxTouchPoints||0});var tt=et.userAgent,nt=tt.split("[FBAN");typeof nt[1]<"u"&&(tt=nt[0]),nt=tt.split("Twitter"),typeof nt[1]<"u"&&(tt=nt[0]);var st=createMatch(tt),ot={apple:{phone:st(appleIphone)&&!st(windowsPhone),ipod:st(appleIpod),tablet:!st(appleIphone)&&(st(appleTablet)||isAppleTabletOnIos13(et))&&!st(windowsPhone),universal:st(appleUniversal),device:(st(appleIphone)||st(appleIpod)||st(appleTablet)||st(appleUniversal)||isAppleTabletOnIos13(et))&&!st(windowsPhone)},amazon:{phone:st(amazonPhone),tablet:!st(amazonPhone)&&st(amazonTablet),device:st(amazonPhone)||st(amazonTablet)},android:{phone:!st(windowsPhone)&&st(amazonPhone)||!st(windowsPhone)&&st(androidPhone),tablet:!st(windowsPhone)&&!st(amazonPhone)&&!st(androidPhone)&&(st(amazonTablet)||st(androidTablet)),device:!st(windowsPhone)&&(st(amazonPhone)||st(amazonTablet)||st(androidPhone)||st(androidTablet))||st(/\bokhttp\b/i)},windows:{phone:st(windowsPhone),tablet:st(windowsTablet),device:st(windowsPhone)||st(windowsTablet)},other:{blackberry:st(otherBlackBerry),blackberry10:st(otherBlackBerry10),opera:st(otherOpera),firefox:st(otherFirefox),chrome:st(otherChrome),device:st(otherBlackBerry)||st(otherBlackBerry10)||st(otherOpera)||st(otherFirefox)||st(otherChrome)},any:!1,phone:!1,tablet:!1};return ot.any=ot.apple.device||ot.android.device||ot.windows.device||ot.other.device,ot.phone=ot.apple.phone||ot.android.phone||ot.windows.phone,ot.tablet=ot.apple.tablet||ot.android.tablet||ot.windows.tablet,ot}const isMobileCall=isMobile$1.default??isMobile$1,isMobile=isMobileCall(globalThis.navigator);settings.RETINA_PREFIX=/@([0-9\.]+)x/;settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,function(rt){var et=Object.prototype.hasOwnProperty,tt="~";function nt(){}Object.create&&(nt.prototype=Object.create(null),new nt().__proto__||(tt=!1));function st(ft,gt,yt){this.fn=ft,this.context=gt,this.once=yt||!1}function ot(ft,gt,yt,xt,St){if(typeof yt!="function")throw new TypeError("The listener must be a function");var wt=new st(yt,xt||ft,St),bt=tt?tt+gt:gt;return ft._events[bt]?ft._events[bt].fn?ft._events[bt]=[ft._events[bt],wt]:ft._events[bt].push(wt):(ft._events[bt]=wt,ft._eventsCount++),ft}function ct(ft,gt){--ft._eventsCount===0?ft._events=new nt:delete ft._events[gt]}function dt(){this._events=new nt,this._eventsCount=0}dt.prototype.eventNames=function(){var gt=[],yt,xt;if(this._eventsCount===0)return gt;for(xt in yt=this._events)et.call(yt,xt)&&gt.push(tt?xt.slice(1):xt);return Object.getOwnPropertySymbols?gt.concat(Object.getOwnPropertySymbols(yt)):gt},dt.prototype.listeners=function(gt){var yt=tt?tt+gt:gt,xt=this._events[yt];if(!xt)return[];if(xt.fn)return[xt.fn];for(var St=0,wt=xt.length,bt=new Array(wt);St<wt;St++)bt[St]=xt[St].fn;return bt},dt.prototype.listenerCount=function(gt){var yt=tt?tt+gt:gt,xt=this._events[yt];return xt?xt.fn?1:xt.length:0},dt.prototype.emit=function(gt,yt,xt,St,wt,bt){var Pt=tt?tt+gt:gt;if(!this._events[Pt])return!1;var Rt=this._events[Pt],Mt=arguments.length,kt,Dt;if(Rt.fn){switch(Rt.once&&this.removeListener(gt,Rt.fn,void 0,!0),Mt){case 1:return Rt.fn.call(Rt.context),!0;case 2:return Rt.fn.call(Rt.context,yt),!0;case 3:return Rt.fn.call(Rt.context,yt,xt),!0;case 4:return Rt.fn.call(Rt.context,yt,xt,St),!0;case 5:return Rt.fn.call(Rt.context,yt,xt,St,wt),!0;case 6:return Rt.fn.call(Rt.context,yt,xt,St,wt,bt),!0}for(Dt=1,kt=new Array(Mt-1);Dt<Mt;Dt++)kt[Dt-1]=arguments[Dt];Rt.fn.apply(Rt.context,kt)}else{var zt=Rt.length,Lt;for(Dt=0;Dt<zt;Dt++)switch(Rt[Dt].once&&this.removeListener(gt,Rt[Dt].fn,void 0,!0),Mt){case 1:Rt[Dt].fn.call(Rt[Dt].context);break;case 2:Rt[Dt].fn.call(Rt[Dt].context,yt);break;case 3:Rt[Dt].fn.call(Rt[Dt].context,yt,xt);break;case 4:Rt[Dt].fn.call(Rt[Dt].context,yt,xt,St);break;default:if(!kt)for(Lt=1,kt=new Array(Mt-1);Lt<Mt;Lt++)kt[Lt-1]=arguments[Lt];Rt[Dt].fn.apply(Rt[Dt].context,kt)}}return!0},dt.prototype.on=function(gt,yt,xt){return ot(this,gt,yt,xt,!1)},dt.prototype.once=function(gt,yt,xt){return ot(this,gt,yt,xt,!0)},dt.prototype.removeListener=function(gt,yt,xt,St){var wt=tt?tt+gt:gt;if(!this._events[wt])return this;if(!yt)return ct(this,wt),this;var bt=this._events[wt];if(bt.fn)bt.fn===yt&&(!St||bt.once)&&(!xt||bt.context===xt)&&ct(this,wt);else{for(var Pt=0,Rt=[],Mt=bt.length;Pt<Mt;Pt++)(bt[Pt].fn!==yt||St&&!bt[Pt].once||xt&&bt[Pt].context!==xt)&&Rt.push(bt[Pt]);Rt.length?this._events[wt]=Rt.length===1?Rt[0]:Rt:ct(this,wt)}return this},dt.prototype.removeAllListeners=function(gt){var yt;return gt?(yt=tt?tt+gt:gt,this._events[yt]&&ct(this,yt)):(this._events=new nt,this._eventsCount=0),this},dt.prototype.off=dt.prototype.removeListener,dt.prototype.addListener=dt.prototype.on,dt.prefixed=tt,dt.EventEmitter=dt,rt.exports=dt}(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3();const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var earcut$1={exports:{}},hasRequiredEarcut;function requireEarcut(){if(hasRequiredEarcut)return earcut$1.exports;hasRequiredEarcut=1,earcut$1.exports=rt,earcut$1.exports.default=rt;function rt(Ut,Ht,Ct){Ct=Ct||2;var jt=Ht&&Ht.length,Ft=jt?Ht[0]*Ct:Ut.length,It=et(Ut,0,Ft,Ct,!0),Gt=[];if(!It||It.next===It.prev)return Gt;var Xt,ir,cr,gr,Sr,br,Pr;if(jt&&(It=ft(Ut,Ht,It,Ct)),Ut.length>80*Ct){Xt=cr=Ut[0],ir=gr=Ut[1];for(var yr=Ct;yr<Ft;yr+=Ct)Sr=Ut[yr],br=Ut[yr+1],Sr<Xt&&(Xt=Sr),br<ir&&(ir=br),Sr>cr&&(cr=Sr),br>gr&&(gr=br);Pr=Math.max(cr-Xt,gr-ir),Pr=Pr!==0?32767/Pr:0}return nt(It,Gt,Ct,Xt,ir,Pr,0),Gt}function et(Ut,Ht,Ct,jt,Ft){var It,Gt;if(Ft===vr(Ut,Ht,Ct,jt)>0)for(It=Ht;It<Ct;It+=jt)Gt=Kt(It,Ut[It],Ut[It+1],Gt);else for(It=Ct-jt;It>=Ht;It-=jt)Gt=Kt(It,Ut[It],Ut[It+1],Gt);return Gt&&zt(Gt,Gt.next)&&(Zt(Gt),Gt=Gt.next),Gt}function tt(Ut,Ht){if(!Ut)return Ut;Ht||(Ht=Ut);var Ct=Ut,jt;do if(jt=!1,!Ct.steiner&&(zt(Ct,Ct.next)||Dt(Ct.prev,Ct,Ct.next)===0)){if(Zt(Ct),Ct=Ht=Ct.prev,Ct===Ct.next)break;jt=!0}else Ct=Ct.next;while(jt||Ct!==Ht);return Ht}function nt(Ut,Ht,Ct,jt,Ft,It,Gt){if(Ut){!Gt&&It&&wt(Ut,jt,Ft,It);for(var Xt=Ut,ir,cr;Ut.prev!==Ut.next;){if(ir=Ut.prev,cr=Ut.next,It?ot(Ut,jt,Ft,It):st(Ut)){Ht.push(ir.i/Ct|0),Ht.push(Ut.i/Ct|0),Ht.push(cr.i/Ct|0),Zt(Ut),Ut=cr.next,Xt=cr.next;continue}if(Ut=cr,Ut===Xt){Gt?Gt===1?(Ut=ct(tt(Ut),Ht,Ct),nt(Ut,Ht,Ct,jt,Ft,It,2)):Gt===2&&dt(Ut,Ht,Ct,jt,Ft,It):nt(tt(Ut),Ht,Ct,jt,Ft,It,1);break}}}}function st(Ut){var Ht=Ut.prev,Ct=Ut,jt=Ut.next;if(Dt(Ht,Ct,jt)>=0)return!1;for(var Ft=Ht.x,It=Ct.x,Gt=jt.x,Xt=Ht.y,ir=Ct.y,cr=jt.y,gr=Ft<It?Ft<Gt?Ft:Gt:It<Gt?It:Gt,Sr=Xt<ir?Xt<cr?Xt:cr:ir<cr?ir:cr,br=Ft>It?Ft>Gt?Ft:Gt:It>Gt?It:Gt,Pr=Xt>ir?Xt>cr?Xt:cr:ir>cr?ir:cr,yr=jt.next;yr!==Ht;){if(yr.x>=gr&&yr.x<=br&&yr.y>=Sr&&yr.y<=Pr&&Mt(Ft,Xt,It,ir,Gt,cr,yr.x,yr.y)&&Dt(yr.prev,yr,yr.next)>=0)return!1;yr=yr.next}return!0}function ot(Ut,Ht,Ct,jt){var Ft=Ut.prev,It=Ut,Gt=Ut.next;if(Dt(Ft,It,Gt)>=0)return!1;for(var Xt=Ft.x,ir=It.x,cr=Gt.x,gr=Ft.y,Sr=It.y,br=Gt.y,Pr=Xt<ir?Xt<cr?Xt:cr:ir<cr?ir:cr,yr=gr<Sr?gr<br?gr:br:Sr<br?Sr:br,Ir=Xt>ir?Xt>cr?Xt:cr:ir>cr?ir:cr,Nr=gr>Sr?gr>br?gr:br:Sr>br?Sr:br,Br=Pt(Pr,yr,Ht,Ct,jt),Qr=Pt(Ir,Nr,Ht,Ct,jt),Ur=Ut.prevZ,Or=Ut.nextZ;Ur&&Ur.z>=Br&&Or&&Or.z<=Qr;){if(Ur.x>=Pr&&Ur.x<=Ir&&Ur.y>=yr&&Ur.y<=Nr&&Ur!==Ft&&Ur!==Gt&&Mt(Xt,gr,ir,Sr,cr,br,Ur.x,Ur.y)&&Dt(Ur.prev,Ur,Ur.next)>=0||(Ur=Ur.prevZ,Or.x>=Pr&&Or.x<=Ir&&Or.y>=yr&&Or.y<=Nr&&Or!==Ft&&Or!==Gt&&Mt(Xt,gr,ir,Sr,cr,br,Or.x,Or.y)&&Dt(Or.prev,Or,Or.next)>=0))return!1;Or=Or.nextZ}for(;Ur&&Ur.z>=Br;){if(Ur.x>=Pr&&Ur.x<=Ir&&Ur.y>=yr&&Ur.y<=Nr&&Ur!==Ft&&Ur!==Gt&&Mt(Xt,gr,ir,Sr,cr,br,Ur.x,Ur.y)&&Dt(Ur.prev,Ur,Ur.next)>=0)return!1;Ur=Ur.prevZ}for(;Or&&Or.z<=Qr;){if(Or.x>=Pr&&Or.x<=Ir&&Or.y>=yr&&Or.y<=Nr&&Or!==Ft&&Or!==Gt&&Mt(Xt,gr,ir,Sr,cr,br,Or.x,Or.y)&&Dt(Or.prev,Or,Or.next)>=0)return!1;Or=Or.nextZ}return!0}function ct(Ut,Ht,Ct){var jt=Ut;do{var Ft=jt.prev,It=jt.next.next;!zt(Ft,It)&&Lt(Ft,jt,jt.next,It)&&ur(Ft,It)&&ur(It,Ft)&&(Ht.push(Ft.i/Ct|0),Ht.push(jt.i/Ct|0),Ht.push(It.i/Ct|0),Zt(jt),Zt(jt.next),jt=Ut=It),jt=jt.next}while(jt!==Ut);return tt(jt)}function dt(Ut,Ht,Ct,jt,Ft,It){var Gt=Ut;do{for(var Xt=Gt.next.next;Xt!==Gt.prev;){if(Gt.i!==Xt.i&&kt(Gt,Xt)){var ir=Tr(Gt,Xt);Gt=tt(Gt,Gt.next),ir=tt(ir,ir.next),nt(Gt,Ht,Ct,jt,Ft,It,0),nt(ir,Ht,Ct,jt,Ft,It,0);return}Xt=Xt.next}Gt=Gt.next}while(Gt!==Ut)}function ft(Ut,Ht,Ct,jt){var Ft=[],It,Gt,Xt,ir,cr;for(It=0,Gt=Ht.length;It<Gt;It++)Xt=Ht[It]*jt,ir=It<Gt-1?Ht[It+1]*jt:Ut.length,cr=et(Ut,Xt,ir,jt,!1),cr===cr.next&&(cr.steiner=!0),Ft.push(Rt(cr));for(Ft.sort(gt),It=0;It<Ft.length;It++)Ct=yt(Ft[It],Ct);return Ct}function gt(Ut,Ht){return Ut.x-Ht.x}function yt(Ut,Ht){var Ct=xt(Ut,Ht);if(!Ct)return Ht;var jt=Tr(Ct,Ut);return tt(jt,jt.next),tt(Ct,Ct.next)}function xt(Ut,Ht){var Ct=Ht,jt=Ut.x,Ft=Ut.y,It=-1/0,Gt;do{if(Ft<=Ct.y&&Ft>=Ct.next.y&&Ct.next.y!==Ct.y){var Xt=Ct.x+(Ft-Ct.y)*(Ct.next.x-Ct.x)/(Ct.next.y-Ct.y);if(Xt<=jt&&Xt>It&&(It=Xt,Gt=Ct.x<Ct.next.x?Ct:Ct.next,Xt===jt))return Gt}Ct=Ct.next}while(Ct!==Ht);if(!Gt)return null;var ir=Gt,cr=Gt.x,gr=Gt.y,Sr=1/0,br;Ct=Gt;do jt>=Ct.x&&Ct.x>=cr&&jt!==Ct.x&&Mt(Ft<gr?jt:It,Ft,cr,gr,Ft<gr?It:jt,Ft,Ct.x,Ct.y)&&(br=Math.abs(Ft-Ct.y)/(jt-Ct.x),ur(Ct,Ut)&&(br<Sr||br===Sr&&(Ct.x>Gt.x||Ct.x===Gt.x&&St(Gt,Ct)))&&(Gt=Ct,Sr=br)),Ct=Ct.next;while(Ct!==ir);return Gt}function St(Ut,Ht){return Dt(Ut.prev,Ut,Ht.prev)<0&&Dt(Ht.next,Ut,Ut.next)<0}function wt(Ut,Ht,Ct,jt){var Ft=Ut;do Ft.z===0&&(Ft.z=Pt(Ft.x,Ft.y,Ht,Ct,jt)),Ft.prevZ=Ft.prev,Ft.nextZ=Ft.next,Ft=Ft.next;while(Ft!==Ut);Ft.prevZ.nextZ=null,Ft.prevZ=null,bt(Ft)}function bt(Ut){var Ht,Ct,jt,Ft,It,Gt,Xt,ir,cr=1;do{for(Ct=Ut,Ut=null,It=null,Gt=0;Ct;){for(Gt++,jt=Ct,Xt=0,Ht=0;Ht<cr&&(Xt++,jt=jt.nextZ,!!jt);Ht++);for(ir=cr;Xt>0||ir>0&&jt;)Xt!==0&&(ir===0||!jt||Ct.z<=jt.z)?(Ft=Ct,Ct=Ct.nextZ,Xt--):(Ft=jt,jt=jt.nextZ,ir--),It?It.nextZ=Ft:Ut=Ft,Ft.prevZ=It,It=Ft;Ct=jt}It.nextZ=null,cr*=2}while(Gt>1);return Ut}function Pt(Ut,Ht,Ct,jt,Ft){return Ut=(Ut-Ct)*Ft|0,Ht=(Ht-jt)*Ft|0,Ut=(Ut|Ut<<8)&16711935,Ut=(Ut|Ut<<4)&252645135,Ut=(Ut|Ut<<2)&858993459,Ut=(Ut|Ut<<1)&1431655765,Ht=(Ht|Ht<<8)&16711935,Ht=(Ht|Ht<<4)&252645135,Ht=(Ht|Ht<<2)&858993459,Ht=(Ht|Ht<<1)&1431655765,Ut|Ht<<1}function Rt(Ut){var Ht=Ut,Ct=Ut;do(Ht.x<Ct.x||Ht.x===Ct.x&&Ht.y<Ct.y)&&(Ct=Ht),Ht=Ht.next;while(Ht!==Ut);return Ct}function Mt(Ut,Ht,Ct,jt,Ft,It,Gt,Xt){return(Ft-Gt)*(Ht-Xt)>=(Ut-Gt)*(It-Xt)&&(Ut-Gt)*(jt-Xt)>=(Ct-Gt)*(Ht-Xt)&&(Ct-Gt)*(It-Xt)>=(Ft-Gt)*(jt-Xt)}function kt(Ut,Ht){return Ut.next.i!==Ht.i&&Ut.prev.i!==Ht.i&&!Jt(Ut,Ht)&&(ur(Ut,Ht)&&ur(Ht,Ut)&&dr(Ut,Ht)&&(Dt(Ut.prev,Ut,Ht.prev)||Dt(Ut,Ht.prev,Ht))||zt(Ut,Ht)&&Dt(Ut.prev,Ut,Ut.next)>0&&Dt(Ht.prev,Ht,Ht.next)>0)}function Dt(Ut,Ht,Ct){return(Ht.y-Ut.y)*(Ct.x-Ht.x)-(Ht.x-Ut.x)*(Ct.y-Ht.y)}function zt(Ut,Ht){return Ut.x===Ht.x&&Ut.y===Ht.y}function Lt(Ut,Ht,Ct,jt){var Ft=Nt(Dt(Ut,Ht,Ct)),It=Nt(Dt(Ut,Ht,jt)),Gt=Nt(Dt(Ct,jt,Ut)),Xt=Nt(Dt(Ct,jt,Ht));return!!(Ft!==It&&Gt!==Xt||Ft===0&&Yt(Ut,Ct,Ht)||It===0&&Yt(Ut,jt,Ht)||Gt===0&&Yt(Ct,Ut,jt)||Xt===0&&Yt(Ct,Ht,jt))}function Yt(Ut,Ht,Ct){return Ht.x<=Math.max(Ut.x,Ct.x)&&Ht.x>=Math.min(Ut.x,Ct.x)&&Ht.y<=Math.max(Ut.y,Ct.y)&&Ht.y>=Math.min(Ut.y,Ct.y)}function Nt(Ut){return Ut>0?1:Ut<0?-1:0}function Jt(Ut,Ht){var Ct=Ut;do{if(Ct.i!==Ut.i&&Ct.next.i!==Ut.i&&Ct.i!==Ht.i&&Ct.next.i!==Ht.i&&Lt(Ct,Ct.next,Ut,Ht))return!0;Ct=Ct.next}while(Ct!==Ut);return!1}function ur(Ut,Ht){return Dt(Ut.prev,Ut,Ut.next)<0?Dt(Ut,Ht,Ut.next)>=0&&Dt(Ut,Ut.prev,Ht)>=0:Dt(Ut,Ht,Ut.prev)<0||Dt(Ut,Ut.next,Ht)<0}function dr(Ut,Ht){var Ct=Ut,jt=!1,Ft=(Ut.x+Ht.x)/2,It=(Ut.y+Ht.y)/2;do Ct.y>It!=Ct.next.y>It&&Ct.next.y!==Ct.y&&Ft<(Ct.next.x-Ct.x)*(It-Ct.y)/(Ct.next.y-Ct.y)+Ct.x&&(jt=!jt),Ct=Ct.next;while(Ct!==Ut);return jt}function Tr(Ut,Ht){var Ct=new lr(Ut.i,Ut.x,Ut.y),jt=new lr(Ht.i,Ht.x,Ht.y),Ft=Ut.next,It=Ht.prev;return Ut.next=Ht,Ht.prev=Ut,Ct.next=Ft,Ft.prev=Ct,jt.next=Ct,Ct.prev=jt,It.next=jt,jt.prev=It,jt}function Kt(Ut,Ht,Ct,jt){var Ft=new lr(Ut,Ht,Ct);return jt?(Ft.next=jt.next,Ft.prev=jt,jt.next.prev=Ft,jt.next=Ft):(Ft.prev=Ft,Ft.next=Ft),Ft}function Zt(Ut){Ut.next.prev=Ut.prev,Ut.prev.next=Ut.next,Ut.prevZ&&(Ut.prevZ.nextZ=Ut.nextZ),Ut.nextZ&&(Ut.nextZ.prevZ=Ut.prevZ)}function lr(Ut,Ht,Ct){this.i=Ut,this.x=Ht,this.y=Ct,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}rt.deviation=function(Ut,Ht,Ct,jt){var Ft=Ht&&Ht.length,It=Ft?Ht[0]*Ct:Ut.length,Gt=Math.abs(vr(Ut,0,It,Ct));if(Ft)for(var Xt=0,ir=Ht.length;Xt<ir;Xt++){var cr=Ht[Xt]*Ct,gr=Xt<ir-1?Ht[Xt+1]*Ct:Ut.length;Gt-=Math.abs(vr(Ut,cr,gr,Ct))}var Sr=0;for(Xt=0;Xt<jt.length;Xt+=3){var br=jt[Xt]*Ct,Pr=jt[Xt+1]*Ct,yr=jt[Xt+2]*Ct;Sr+=Math.abs((Ut[br]-Ut[yr])*(Ut[Pr+1]-Ut[br+1])-(Ut[br]-Ut[Pr])*(Ut[yr+1]-Ut[br+1]))}return Gt===0&&Sr===0?0:Math.abs((Sr-Gt)/Gt)};function vr(Ut,Ht,Ct,jt){for(var Ft=0,It=Ht,Gt=Ct-jt;It<Ct;It+=jt)Ft+=(Ut[Gt]-Ut[It])*(Ut[It+1]+Ut[Gt+1]),Gt=It;return Ft}return rt.flatten=function(Ut){for(var Ht=Ut[0][0].length,Ct={vertices:[],holes:[],dimensions:Ht},jt=0,Ft=0;Ft<Ut.length;Ft++){for(var It=0;It<Ut[Ft].length;It++)for(var Gt=0;Gt<Ht;Gt++)Ct.vertices.push(Ut[Ft][It][Gt]);Ft>0&&(jt+=Ut[Ft-1].length,Ct.holes.push(jt))}return Ct},earcut$1.exports}var earcutExports=requireEarcut();const earcut=getDefaultExportFromCjs(earcutExports);var url={},punycode$1={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var punycode=punycode$1.exports,hasRequiredPunycode;function requirePunycode(){return hasRequiredPunycode||(hasRequiredPunycode=1,function(rt,et){(function(tt){var nt=et&&!et.nodeType&&et,st=!rt.nodeType&&rt,ot=typeof commonjsGlobal=="object"&&commonjsGlobal;(ot.global===ot||ot.window===ot||ot.self===ot)&&(tt=ot);var ct,dt=2147483647,ft=36,gt=1,yt=26,xt=38,St=700,wt=72,bt=128,Pt="-",Rt=/^xn--/,Mt=/[^\x20-\x7E]/,kt=/[\x2E\u3002\uFF0E\uFF61]/g,Dt={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},zt=ft-gt,Lt=Math.floor,Yt=String.fromCharCode,Nt;function Jt(Ft){throw new RangeError(Dt[Ft])}function ur(Ft,It){for(var Gt=Ft.length,Xt=[];Gt--;)Xt[Gt]=It(Ft[Gt]);return Xt}function dr(Ft,It){var Gt=Ft.split("@"),Xt="";Gt.length>1&&(Xt=Gt[0]+"@",Ft=Gt[1]),Ft=Ft.replace(kt,".");var ir=Ft.split("."),cr=ur(ir,It).join(".");return Xt+cr}function Tr(Ft){for(var It=[],Gt=0,Xt=Ft.length,ir,cr;Gt<Xt;)ir=Ft.charCodeAt(Gt++),ir>=55296&&ir<=56319&&Gt<Xt?(cr=Ft.charCodeAt(Gt++),(cr&64512)==56320?It.push(((ir&1023)<<10)+(cr&1023)+65536):(It.push(ir),Gt--)):It.push(ir);return It}function Kt(Ft){return ur(Ft,function(It){var Gt="";return It>65535&&(It-=65536,Gt+=Yt(It>>>10&1023|55296),It=56320|It&1023),Gt+=Yt(It),Gt}).join("")}function Zt(Ft){return Ft-48<10?Ft-22:Ft-65<26?Ft-65:Ft-97<26?Ft-97:ft}function lr(Ft,It){return Ft+22+75*(Ft<26)-((It!=0)<<5)}function vr(Ft,It,Gt){var Xt=0;for(Ft=Gt?Lt(Ft/St):Ft>>1,Ft+=Lt(Ft/It);Ft>zt*yt>>1;Xt+=ft)Ft=Lt(Ft/zt);return Lt(Xt+(zt+1)*Ft/(Ft+xt))}function Ut(Ft){var It=[],Gt=Ft.length,Xt,ir=0,cr=bt,gr=wt,Sr,br,Pr,yr,Ir,Nr,Br,Qr,Ur;for(Sr=Ft.lastIndexOf(Pt),Sr<0&&(Sr=0),br=0;br<Sr;++br)Ft.charCodeAt(br)>=128&&Jt("not-basic"),It.push(Ft.charCodeAt(br));for(Pr=Sr>0?Sr+1:0;Pr<Gt;){for(yr=ir,Ir=1,Nr=ft;Pr>=Gt&&Jt("invalid-input"),Br=Zt(Ft.charCodeAt(Pr++)),(Br>=ft||Br>Lt((dt-ir)/Ir))&&Jt("overflow"),ir+=Br*Ir,Qr=Nr<=gr?gt:Nr>=gr+yt?yt:Nr-gr,!(Br<Qr);Nr+=ft)Ur=ft-Qr,Ir>Lt(dt/Ur)&&Jt("overflow"),Ir*=Ur;Xt=It.length+1,gr=vr(ir-yr,Xt,yr==0),Lt(ir/Xt)>dt-cr&&Jt("overflow"),cr+=Lt(ir/Xt),ir%=Xt,It.splice(ir++,0,cr)}return Kt(It)}function Ht(Ft){var It,Gt,Xt,ir,cr,gr,Sr,br,Pr,yr,Ir,Nr=[],Br,Qr,Ur,Or;for(Ft=Tr(Ft),Br=Ft.length,It=bt,Gt=0,cr=wt,gr=0;gr<Br;++gr)Ir=Ft[gr],Ir<128&&Nr.push(Yt(Ir));for(Xt=ir=Nr.length,ir&&Nr.push(Pt);Xt<Br;){for(Sr=dt,gr=0;gr<Br;++gr)Ir=Ft[gr],Ir>=It&&Ir<Sr&&(Sr=Ir);for(Qr=Xt+1,Sr-It>Lt((dt-Gt)/Qr)&&Jt("overflow"),Gt+=(Sr-It)*Qr,It=Sr,gr=0;gr<Br;++gr)if(Ir=Ft[gr],Ir<It&&++Gt>dt&&Jt("overflow"),Ir==It){for(br=Gt,Pr=ft;yr=Pr<=cr?gt:Pr>=cr+yt?yt:Pr-cr,!(br<yr);Pr+=ft)Or=br-yr,Ur=ft-yr,Nr.push(Yt(lr(yr+Or%Ur,0))),br=Lt(Or/Ur);Nr.push(Yt(lr(br,0))),cr=vr(Gt,Qr,Xt==ir),Gt=0,++Xt}++Gt,++It}return Nr.join("")}function Ct(Ft){return dr(Ft,function(It){return Rt.test(It)?Ut(It.slice(4).toLowerCase()):It})}function jt(Ft){return dr(Ft,function(It){return Mt.test(It)?"xn--"+Ht(It):It})}if(ct={version:"1.4.1",ucs2:{decode:Tr,encode:Kt},decode:Ut,encode:Ht,toASCII:jt,toUnicode:Ct},nt&&st)if(rt.exports==nt)st.exports=ct;else for(Nt in ct)ct.hasOwnProperty(Nt)&&(nt[Nt]=ct[Nt]);else tt.punycode=ct})(punycode)}(punycode$1,punycode$1.exports)),punycode$1.exports}var type,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type=TypeError),type}const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(__viteBrowserExternal$1);var objectInspect,hasRequiredObjectInspect;function requireObjectInspect(){if(hasRequiredObjectInspect)return objectInspect;hasRequiredObjectInspect=1;var rt=typeof Map=="function"&&Map.prototype,et=Object.getOwnPropertyDescriptor&&rt?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,tt=rt&&et&&typeof et.get=="function"?et.get:null,nt=rt&&Map.prototype.forEach,st=typeof Set=="function"&&Set.prototype,ot=Object.getOwnPropertyDescriptor&&st?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,ct=st&&ot&&typeof ot.get=="function"?ot.get:null,dt=st&&Set.prototype.forEach,ft=typeof WeakMap=="function"&&WeakMap.prototype,gt=ft?WeakMap.prototype.has:null,yt=typeof WeakSet=="function"&&WeakSet.prototype,xt=yt?WeakSet.prototype.has:null,St=typeof WeakRef=="function"&&WeakRef.prototype,wt=St?WeakRef.prototype.deref:null,bt=Boolean.prototype.valueOf,Pt=Object.prototype.toString,Rt=Function.prototype.toString,Mt=String.prototype.match,kt=String.prototype.slice,Dt=String.prototype.replace,zt=String.prototype.toUpperCase,Lt=String.prototype.toLowerCase,Yt=RegExp.prototype.test,Nt=Array.prototype.concat,Jt=Array.prototype.join,ur=Array.prototype.slice,dr=Math.floor,Tr=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Kt=Object.getOwnPropertySymbols,Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,lr=typeof Symbol=="function"&&typeof Symbol.iterator=="object",vr=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===lr||!0)?Symbol.toStringTag:null,Ut=Object.prototype.propertyIsEnumerable,Ht=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(rr){return rr.__proto__}:null);function Ct(rr,sr){if(rr===1/0||rr===-1/0||rr!==rr||rr&&rr>-1e3&&rr<1e3||Yt.call(/e/,sr))return sr;var Zr=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof rr=="number"){var Hn=rr<0?-dr(-rr):dr(rr);if(Hn!==rr){var Wn=String(Hn),qr=kt.call(sr,Wn.length+1);return Dt.call(Wn,Zr,"$&_")+"."+Dt.call(Dt.call(qr,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Dt.call(sr,Zr,"$&_")}var jt=require$$0$1,Ft=jt.custom,It=Br(Ft)?Ft:null,Gt={__proto__:null,double:'"',single:"'"},Xt={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};objectInspect=function rr(sr,Zr,Hn,Wn){var qr=Zr||{};if(Or(qr,"quoteStyle")&&!Or(Gt,qr.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Or(qr,"maxStringLength")&&(typeof qr.maxStringLength=="number"?qr.maxStringLength<0&&qr.maxStringLength!==1/0:qr.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Vi=Or(qr,"customInspect")?qr.customInspect:!0;if(typeof Vi!="boolean"&&Vi!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Or(qr,"indent")&&qr.indent!==null&&qr.indent!=="	"&&!(parseInt(qr.indent,10)===qr.indent&&qr.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Or(qr,"numericSeparator")&&typeof qr.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Ki=qr.numericSeparator;if(typeof sr>"u")return"undefined";if(sr===null)return"null";if(typeof sr=="boolean")return sr?"true":"false";if(typeof sr=="string")return Ol(sr,qr);if(typeof sr=="number"){if(sr===0)return 1/0/sr>0?"0":"-0";var Ni=String(sr);return Ki?Ct(sr,Ni):Ni}if(typeof sr=="bigint"){var Es=String(sr)+"n";return Ki?Ct(sr,Es):Es}var ho=typeof qr.depth>"u"?5:qr.depth;if(typeof Hn>"u"&&(Hn=0),Hn>=ho&&ho>0&&typeof sr=="object")return gr(sr)?"[Array]":"[Object]";var pa=Pc(qr,Hn);if(typeof Wn>"u")Wn=[];else if(zs(Wn,sr)>=0)return"[Circular]";function ki(Ha,go,Fu){if(go&&(Wn=ur.call(Wn),Wn.push(go)),Fu){var kl={depth:qr.depth};return Or(qr,"quoteStyle")&&(kl.quoteStyle=qr.quoteStyle),rr(Ha,kl,Hn+1,Wn)}return rr(Ha,qr,Hn+1,Wn)}if(typeof sr=="function"&&!br(sr)){var fo=$i(sr),jo=co(sr,ki);return"[Function"+(fo?": "+fo:" (anonymous)")+"]"+(jo.length>0?" { "+Jt.call(jo,", ")+" }":"")}if(Br(sr)){var Ga=lr?Dt.call(String(sr),/^(Symbol\(.*\))_[^)]*$/,"$1"):Zt.call(sr);return typeof sr=="object"&&!lr?ta(Ga):Ga}if(Mu(sr)){for(var ma="<"+Lt.call(String(sr.nodeName)),ga=sr.attributes||[],po=0;po<ga.length;po++)ma+=" "+ga[po].name+"="+ir(cr(ga[po].value),"double",qr);return ma+=">",sr.childNodes&&sr.childNodes.length&&(ma+="..."),ma+="</"+Lt.call(String(sr.nodeName))+">",ma}if(gr(sr)){if(sr.length===0)return"[]";var Hs=co(sr,ki);return pa&&!uo(Hs)?"["+Ho(Hs,pa)+"]":"[ "+Jt.call(Hs,", ")+" ]"}if(Pr(sr)){var za=co(sr,ki);return!("cause"in Error.prototype)&&"cause"in sr&&!Ut.call(sr,"cause")?"{ ["+String(sr)+"] "+Jt.call(Nt.call("[cause]: "+ki(sr.cause),za),", ")+" }":za.length===0?"["+String(sr)+"]":"{ ["+String(sr)+"] "+Jt.call(za,", ")+" }"}if(typeof sr=="object"&&Vi){if(It&&typeof sr[It]=="function"&&jt)return jt(sr,{depth:ho-Hn});if(Vi!=="symbol"&&typeof sr.inspect=="function")return sr.inspect()}if(Ci(sr)){var mo=[];return nt&&nt.call(sr,function(Ha,go){mo.push(ki(go,sr,!0)+" => "+ki(Ha,sr))}),Ua("Map",tt.call(sr),mo,pa)}if(fa(sr)){var ya=[];return dt&&dt.call(sr,function(Ha){ya.push(ki(Ha,sr))}),Ua("Set",ct.call(sr),ya,pa)}if(Ai(sr))return zo("WeakMap");if(cs(sr))return zo("WeakSet");if(ea(sr))return zo("WeakRef");if(Ir(sr))return ta(ki(Number(sr)));if(Qr(sr))return ta(ki(Tr.call(sr)));if(Nr(sr))return ta(bt.call(sr));if(yr(sr))return ta(ki(String(sr)));if(typeof window<"u"&&sr===window)return"{ [object Window] }";if(typeof globalThis<"u"&&sr===globalThis||typeof commonjsGlobal<"u"&&sr===commonjsGlobal)return"{ [object globalThis] }";if(!Sr(sr)&&!br(sr)){var Fl=co(sr,ki),Ou=Ht?Ht(sr)===Object.prototype:sr instanceof Object||sr.constructor===Object,Nl=sr instanceof Object?"":"null prototype",ra=!Ou&&vr&&Object(sr)===sr&&vr in sr?kt.call(ai(sr),8,-1):Nl?"Object":"",Du=Ou||typeof sr.constructor!="function"?"":sr.constructor.name?sr.constructor.name+" ":"",$o=Du+(ra||Nl?"["+Jt.call(Nt.call([],ra||[],Nl||[]),": ")+"] ":"");return Fl.length===0?$o+"{}":pa?$o+"{"+Ho(Fl,pa)+"}":$o+"{ "+Jt.call(Fl,", ")+" }"}return String(sr)};function ir(rr,sr,Zr){var Hn=Zr.quoteStyle||sr,Wn=Gt[Hn];return Wn+rr+Wn}function cr(rr){return Dt.call(String(rr),/"/g,"&quot;")}function gr(rr){return ai(rr)==="[object Array]"&&(!vr||!(typeof rr=="object"&&vr in rr))}function Sr(rr){return ai(rr)==="[object Date]"&&(!vr||!(typeof rr=="object"&&vr in rr))}function br(rr){return ai(rr)==="[object RegExp]"&&(!vr||!(typeof rr=="object"&&vr in rr))}function Pr(rr){return ai(rr)==="[object Error]"&&(!vr||!(typeof rr=="object"&&vr in rr))}function yr(rr){return ai(rr)==="[object String]"&&(!vr||!(typeof rr=="object"&&vr in rr))}function Ir(rr){return ai(rr)==="[object Number]"&&(!vr||!(typeof rr=="object"&&vr in rr))}function Nr(rr){return ai(rr)==="[object Boolean]"&&(!vr||!(typeof rr=="object"&&vr in rr))}function Br(rr){if(lr)return rr&&typeof rr=="object"&&rr instanceof Symbol;if(typeof rr=="symbol")return!0;if(!rr||typeof rr!="object"||!Zt)return!1;try{return Zt.call(rr),!0}catch{}return!1}function Qr(rr){if(!rr||typeof rr!="object"||!Tr)return!1;try{return Tr.call(rr),!0}catch{}return!1}var Ur=Object.prototype.hasOwnProperty||function(rr){return rr in this};function Or(rr,sr){return Ur.call(rr,sr)}function ai(rr){return Pt.call(rr)}function $i(rr){if(rr.name)return rr.name;var sr=Mt.call(Rt.call(rr),/^function\s*([\w$]+)/);return sr?sr[1]:null}function zs(rr,sr){if(rr.indexOf)return rr.indexOf(sr);for(var Zr=0,Hn=rr.length;Zr<Hn;Zr++)if(rr[Zr]===sr)return Zr;return-1}function Ci(rr){if(!tt||!rr||typeof rr!="object")return!1;try{tt.call(rr);try{ct.call(rr)}catch{return!0}return rr instanceof Map}catch{}return!1}function Ai(rr){if(!gt||!rr||typeof rr!="object")return!1;try{gt.call(rr,gt);try{xt.call(rr,xt)}catch{return!0}return rr instanceof WeakMap}catch{}return!1}function ea(rr){if(!wt||!rr||typeof rr!="object")return!1;try{return wt.call(rr),!0}catch{}return!1}function fa(rr){if(!ct||!rr||typeof rr!="object")return!1;try{ct.call(rr);try{tt.call(rr)}catch{return!0}return rr instanceof Set}catch{}return!1}function cs(rr){if(!xt||!rr||typeof rr!="object")return!1;try{xt.call(rr,xt);try{gt.call(rr,gt)}catch{return!0}return rr instanceof WeakSet}catch{}return!1}function Mu(rr){return!rr||typeof rr!="object"?!1:typeof HTMLElement<"u"&&rr instanceof HTMLElement?!0:typeof rr.nodeName=="string"&&typeof rr.getAttribute=="function"}function Ol(rr,sr){if(rr.length>sr.maxStringLength){var Zr=rr.length-sr.maxStringLength,Hn="... "+Zr+" more character"+(Zr>1?"s":"");return Ol(kt.call(rr,0,sr.maxStringLength),sr)+Hn}var Wn=Xt[sr.quoteStyle||"single"];Wn.lastIndex=0;var qr=Dt.call(Dt.call(rr,Wn,"\\$1"),/[\x00-\x1f]/g,Dl);return ir(qr,"single",sr)}function Dl(rr){var sr=rr.charCodeAt(0),Zr={8:"b",9:"t",10:"n",12:"f",13:"r"}[sr];return Zr?"\\"+Zr:"\\x"+(sr<16?"0":"")+zt.call(sr.toString(16))}function ta(rr){return"Object("+rr+")"}function zo(rr){return rr+" { ? }"}function Ua(rr,sr,Zr,Hn){var Wn=Hn?Ho(Zr,Hn):Jt.call(Zr,", ");return rr+" ("+sr+") {"+Wn+"}"}function uo(rr){for(var sr=0;sr<rr.length;sr++)if(zs(rr[sr],`
`)>=0)return!1;return!0}function Pc(rr,sr){var Zr;if(rr.indent==="	")Zr="	";else if(typeof rr.indent=="number"&&rr.indent>0)Zr=Jt.call(Array(rr.indent+1)," ");else return null;return{base:Zr,prev:Jt.call(Array(sr+1),Zr)}}function Ho(rr,sr){if(rr.length===0)return"";var Zr=`
`+sr.prev+sr.base;return Zr+Jt.call(rr,","+Zr)+`
`+sr.prev}function co(rr,sr){var Zr=gr(rr),Hn=[];if(Zr){Hn.length=rr.length;for(var Wn=0;Wn<rr.length;Wn++)Hn[Wn]=Or(rr,Wn)?sr(rr[Wn],rr):""}var qr=typeof Kt=="function"?Kt(rr):[],Vi;if(lr){Vi={};for(var Ki=0;Ki<qr.length;Ki++)Vi["$"+qr[Ki]]=qr[Ki]}for(var Ni in rr)Or(rr,Ni)&&(Zr&&String(Number(Ni))===Ni&&Ni<rr.length||lr&&Vi["$"+Ni]instanceof Symbol||(Yt.call(/[^\w$]/,Ni)?Hn.push(sr(Ni,rr)+": "+sr(rr[Ni],rr)):Hn.push(Ni+": "+sr(rr[Ni],rr))));if(typeof Kt=="function")for(var Es=0;Es<qr.length;Es++)Ut.call(rr,qr[Es])&&Hn.push("["+sr(qr[Es])+"]: "+sr(rr[qr[Es]],rr));return Hn}return objectInspect}var sideChannelList,hasRequiredSideChannelList;function requireSideChannelList(){if(hasRequiredSideChannelList)return sideChannelList;hasRequiredSideChannelList=1;var rt=requireObjectInspect(),et=requireType(),tt=function(dt,ft,gt){for(var yt=dt,xt;(xt=yt.next)!=null;yt=xt)if(xt.key===ft)return yt.next=xt.next,gt||(xt.next=dt.next,dt.next=xt),xt},nt=function(dt,ft){if(dt){var gt=tt(dt,ft);return gt&&gt.value}},st=function(dt,ft,gt){var yt=tt(dt,ft);yt?yt.value=gt:dt.next={key:ft,next:dt.next,value:gt}},ot=function(dt,ft){return dt?!!tt(dt,ft):!1},ct=function(dt,ft){if(dt)return tt(dt,ft,!0)};return sideChannelList=function(){var ft,gt={assert:function(yt){if(!gt.has(yt))throw new et("Side channel does not contain "+rt(yt))},delete:function(yt){var xt=ft&&ft.next,St=ct(ft,yt);return St&&xt&&xt===St&&(ft=void 0),!!St},get:function(yt){return nt(ft,yt)},has:function(yt){return ot(ft,yt)},set:function(yt,xt){ft||(ft={next:void 0}),st(ft,yt,xt)}};return gt},sideChannelList}var esObjectAtoms,hasRequiredEsObjectAtoms;function requireEsObjectAtoms(){return hasRequiredEsObjectAtoms||(hasRequiredEsObjectAtoms=1,esObjectAtoms=Object),esObjectAtoms}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range=RangeError),range}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var abs,hasRequiredAbs;function requireAbs(){return hasRequiredAbs||(hasRequiredAbs=1,abs=Math.abs),abs}var floor,hasRequiredFloor;function requireFloor(){return hasRequiredFloor||(hasRequiredFloor=1,floor=Math.floor),floor}var max,hasRequiredMax;function requireMax(){return hasRequiredMax||(hasRequiredMax=1,max=Math.max),max}var min,hasRequiredMin;function requireMin(){return hasRequiredMin||(hasRequiredMin=1,min=Math.min),min}var pow,hasRequiredPow;function requirePow(){return hasRequiredPow||(hasRequiredPow=1,pow=Math.pow),pow}var round$1,hasRequiredRound;function requireRound(){return hasRequiredRound||(hasRequiredRound=1,round$1=Math.round),round$1}var _isNaN,hasRequired_isNaN;function require_isNaN(){return hasRequired_isNaN||(hasRequired_isNaN=1,_isNaN=Number.isNaN||function(et){return et!==et}),_isNaN}var sign$1,hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign$1;hasRequiredSign=1;var rt=require_isNaN();return sign$1=function(tt){return rt(tt)||tt===0?tt:tt<0?-1:1},sign$1}var gOPD,hasRequiredGOPD;function requireGOPD(){return hasRequiredGOPD||(hasRequiredGOPD=1,gOPD=Object.getOwnPropertyDescriptor),gOPD}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var rt=requireGOPD();if(rt)try{rt([],"length")}catch{rt=null}return gopd=rt,gopd}var esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var rt=Object.defineProperty||!1;if(rt)try{rt({},"a",{value:1})}catch{rt=!1}return esDefineProperty=rt,esDefineProperty}var shams,hasRequiredShams;function requireShams(){return hasRequiredShams||(hasRequiredShams=1,shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var et={},tt=Symbol("test"),nt=Object(tt);if(typeof tt=="string"||Object.prototype.toString.call(tt)!=="[object Symbol]"||Object.prototype.toString.call(nt)!=="[object Symbol]")return!1;var st=42;et[tt]=st;for(var ot in et)return!1;if(typeof Object.keys=="function"&&Object.keys(et).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(et).length!==0)return!1;var ct=Object.getOwnPropertySymbols(et);if(ct.length!==1||ct[0]!==tt||!Object.prototype.propertyIsEnumerable.call(et,tt))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var dt=Object.getOwnPropertyDescriptor(et,tt);if(dt.value!==st||dt.enumerable!==!0)return!1}return!0}),shams}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var rt=typeof Symbol<"u"&&Symbol,et=requireShams();return hasSymbols=function(){return typeof rt!="function"||typeof Symbol!="function"||typeof rt("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:et()},hasSymbols}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var rt=requireEsObjectAtoms();return Object_getPrototypeOf=rt.getPrototypeOf||null,Object_getPrototypeOf}var implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var rt="Function.prototype.bind called on incompatible ",et=Object.prototype.toString,tt=Math.max,nt="[object Function]",st=function(ft,gt){for(var yt=[],xt=0;xt<ft.length;xt+=1)yt[xt]=ft[xt];for(var St=0;St<gt.length;St+=1)yt[St+ft.length]=gt[St];return yt},ot=function(ft,gt){for(var yt=[],xt=gt,St=0;xt<ft.length;xt+=1,St+=1)yt[St]=ft[xt];return yt},ct=function(dt,ft){for(var gt="",yt=0;yt<dt.length;yt+=1)gt+=dt[yt],yt+1<dt.length&&(gt+=ft);return gt};return implementation=function(ft){var gt=this;if(typeof gt!="function"||et.apply(gt)!==nt)throw new TypeError(rt+gt);for(var yt=ot(arguments,1),xt,St=function(){if(this instanceof xt){var Mt=gt.apply(this,st(yt,arguments));return Object(Mt)===Mt?Mt:this}return gt.apply(ft,st(yt,arguments))},wt=tt(0,gt.length-yt.length),bt=[],Pt=0;Pt<wt;Pt++)bt[Pt]="$"+Pt;if(xt=Function("binder","return function ("+ct(bt,",")+"){ return binder.apply(this,arguments); }")(St),gt.prototype){var Rt=function(){};Rt.prototype=gt.prototype,xt.prototype=new Rt,Rt.prototype=null}return xt},implementation}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var rt=requireImplementation();return functionBind=Function.prototype.bind||rt,functionBind}var functionCall,hasRequiredFunctionCall;function requireFunctionCall(){return hasRequiredFunctionCall||(hasRequiredFunctionCall=1,functionCall=Function.prototype.call),functionCall}var functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply,hasRequiredReflectApply;function requireReflectApply(){return hasRequiredReflectApply||(hasRequiredReflectApply=1,reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply),reflectApply}var actualApply,hasRequiredActualApply;function requireActualApply(){if(hasRequiredActualApply)return actualApply;hasRequiredActualApply=1;var rt=requireFunctionBind(),et=requireFunctionApply(),tt=requireFunctionCall(),nt=requireReflectApply();return actualApply=nt||rt.call(tt,et),actualApply}var callBindApplyHelpers,hasRequiredCallBindApplyHelpers;function requireCallBindApplyHelpers(){if(hasRequiredCallBindApplyHelpers)return callBindApplyHelpers;hasRequiredCallBindApplyHelpers=1;var rt=requireFunctionBind(),et=requireType(),tt=requireFunctionCall(),nt=requireActualApply();return callBindApplyHelpers=function(ot){if(ot.length<1||typeof ot[0]!="function")throw new et("a function is required");return nt(rt,tt,ot)},callBindApplyHelpers}var get,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get;hasRequiredGet=1;var rt=requireCallBindApplyHelpers(),et=requireGopd(),tt;try{tt=[].__proto__===Array.prototype}catch(ct){if(!ct||typeof ct!="object"||!("code"in ct)||ct.code!=="ERR_PROTO_ACCESS")throw ct}var nt=!!tt&&et&&et(Object.prototype,"__proto__"),st=Object,ot=st.getPrototypeOf;return get=nt&&typeof nt.get=="function"?rt([nt.get]):typeof ot=="function"?function(dt){return ot(dt==null?dt:st(dt))}:!1,get}var getProto,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto;hasRequiredGetProto=1;var rt=requireReflect_getPrototypeOf(),et=requireObject_getPrototypeOf(),tt=requireGet();return getProto=rt?function(st){return rt(st)}:et?function(st){if(!st||typeof st!="object"&&typeof st!="function")throw new TypeError("getProto: not an object");return et(st)}:tt?function(st){return tt(st)}:null,getProto}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var rt=Function.prototype.call,et=Object.prototype.hasOwnProperty,tt=requireFunctionBind();return hasown=tt.call(rt,et),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var rt,et=requireEsObjectAtoms(),tt=requireEsErrors(),nt=require_eval(),st=requireRange(),ot=requireRef(),ct=requireSyntax(),dt=requireType(),ft=requireUri(),gt=requireAbs(),yt=requireFloor(),xt=requireMax(),St=requireMin(),wt=requirePow(),bt=requireRound(),Pt=requireSign(),Rt=Function,Mt=function(Pr){try{return Rt('"use strict"; return ('+Pr+").constructor;")()}catch{}},kt=requireGopd(),Dt=requireEsDefineProperty(),zt=function(){throw new dt},Lt=kt?function(){try{return arguments.callee,zt}catch{try{return kt(arguments,"callee").get}catch{return zt}}}():zt,Yt=requireHasSymbols()(),Nt=requireGetProto(),Jt=requireObject_getPrototypeOf(),ur=requireReflect_getPrototypeOf(),dr=requireFunctionApply(),Tr=requireFunctionCall(),Kt={},Zt=typeof Uint8Array>"u"||!Nt?rt:Nt(Uint8Array),lr={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?rt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?rt:ArrayBuffer,"%ArrayIteratorPrototype%":Yt&&Nt?Nt([][Symbol.iterator]()):rt,"%AsyncFromSyncIteratorPrototype%":rt,"%AsyncFunction%":Kt,"%AsyncGenerator%":Kt,"%AsyncGeneratorFunction%":Kt,"%AsyncIteratorPrototype%":Kt,"%Atomics%":typeof Atomics>"u"?rt:Atomics,"%BigInt%":typeof BigInt>"u"?rt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?rt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?rt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?rt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":tt,"%eval%":eval,"%EvalError%":nt,"%Float32Array%":typeof Float32Array>"u"?rt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?rt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?rt:FinalizationRegistry,"%Function%":Rt,"%GeneratorFunction%":Kt,"%Int8Array%":typeof Int8Array>"u"?rt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?rt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?rt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Yt&&Nt?Nt(Nt([][Symbol.iterator]())):rt,"%JSON%":typeof JSON=="object"?JSON:rt,"%Map%":typeof Map>"u"?rt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Yt||!Nt?rt:Nt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":et,"%Object.getOwnPropertyDescriptor%":kt,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?rt:Promise,"%Proxy%":typeof Proxy>"u"?rt:Proxy,"%RangeError%":st,"%ReferenceError%":ot,"%Reflect%":typeof Reflect>"u"?rt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?rt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Yt||!Nt?rt:Nt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?rt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Yt&&Nt?Nt(""[Symbol.iterator]()):rt,"%Symbol%":Yt?Symbol:rt,"%SyntaxError%":ct,"%ThrowTypeError%":Lt,"%TypedArray%":Zt,"%TypeError%":dt,"%Uint8Array%":typeof Uint8Array>"u"?rt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?rt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?rt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?rt:Uint32Array,"%URIError%":ft,"%WeakMap%":typeof WeakMap>"u"?rt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?rt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?rt:WeakSet,"%Function.prototype.call%":Tr,"%Function.prototype.apply%":dr,"%Object.defineProperty%":Dt,"%Object.getPrototypeOf%":Jt,"%Math.abs%":gt,"%Math.floor%":yt,"%Math.max%":xt,"%Math.min%":St,"%Math.pow%":wt,"%Math.round%":bt,"%Math.sign%":Pt,"%Reflect.getPrototypeOf%":ur};if(Nt)try{null.error}catch(Pr){var vr=Nt(Nt(Pr));lr["%Error.prototype%"]=vr}var Ut=function Pr(yr){var Ir;if(yr==="%AsyncFunction%")Ir=Mt("async function () {}");else if(yr==="%GeneratorFunction%")Ir=Mt("function* () {}");else if(yr==="%AsyncGeneratorFunction%")Ir=Mt("async function* () {}");else if(yr==="%AsyncGenerator%"){var Nr=Pr("%AsyncGeneratorFunction%");Nr&&(Ir=Nr.prototype)}else if(yr==="%AsyncIteratorPrototype%"){var Br=Pr("%AsyncGenerator%");Br&&Nt&&(Ir=Nt(Br.prototype))}return lr[yr]=Ir,Ir},Ht={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ct=requireFunctionBind(),jt=requireHasown(),Ft=Ct.call(Tr,Array.prototype.concat),It=Ct.call(dr,Array.prototype.splice),Gt=Ct.call(Tr,String.prototype.replace),Xt=Ct.call(Tr,String.prototype.slice),ir=Ct.call(Tr,RegExp.prototype.exec),cr=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,gr=/\\(\\)?/g,Sr=function(yr){var Ir=Xt(yr,0,1),Nr=Xt(yr,-1);if(Ir==="%"&&Nr!=="%")throw new ct("invalid intrinsic syntax, expected closing `%`");if(Nr==="%"&&Ir!=="%")throw new ct("invalid intrinsic syntax, expected opening `%`");var Br=[];return Gt(yr,cr,function(Qr,Ur,Or,ai){Br[Br.length]=Or?Gt(ai,gr,"$1"):Ur||Qr}),Br},br=function(yr,Ir){var Nr=yr,Br;if(jt(Ht,Nr)&&(Br=Ht[Nr],Nr="%"+Br[0]+"%"),jt(lr,Nr)){var Qr=lr[Nr];if(Qr===Kt&&(Qr=Ut(Nr)),typeof Qr>"u"&&!Ir)throw new dt("intrinsic "+yr+" exists, but is not available. Please file an issue!");return{alias:Br,name:Nr,value:Qr}}throw new ct("intrinsic "+yr+" does not exist!")};return getIntrinsic=function(yr,Ir){if(typeof yr!="string"||yr.length===0)throw new dt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Ir!="boolean")throw new dt('"allowMissing" argument must be a boolean');if(ir(/^%?[^%]*%?$/,yr)===null)throw new ct("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Nr=Sr(yr),Br=Nr.length>0?Nr[0]:"",Qr=br("%"+Br+"%",Ir),Ur=Qr.name,Or=Qr.value,ai=!1,$i=Qr.alias;$i&&(Br=$i[0],It(Nr,Ft([0,1],$i)));for(var zs=1,Ci=!0;zs<Nr.length;zs+=1){var Ai=Nr[zs],ea=Xt(Ai,0,1),fa=Xt(Ai,-1);if((ea==='"'||ea==="'"||ea==="`"||fa==='"'||fa==="'"||fa==="`")&&ea!==fa)throw new ct("property names with quotes must have matching quotes");if((Ai==="constructor"||!Ci)&&(ai=!0),Br+="."+Ai,Ur="%"+Br+"%",jt(lr,Ur))Or=lr[Ur];else if(Or!=null){if(!(Ai in Or)){if(!Ir)throw new dt("base intrinsic for "+yr+" exists, but the property is not available.");return}if(kt&&zs+1>=Nr.length){var cs=kt(Or,Ai);Ci=!!cs,Ci&&"get"in cs&&!("originalValue"in cs.get)?Or=cs.get:Or=Or[Ai]}else Ci=jt(Or,Ai),Or=Or[Ai];Ci&&!ai&&(lr[Ur]=Or)}}return Or},getIntrinsic}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var rt=requireGetIntrinsic(),et=requireCallBindApplyHelpers(),tt=et([rt("%String.prototype.indexOf%")]);return callBound=function(st,ot){var ct=rt(st,!!ot);return typeof ct=="function"&&tt(st,".prototype.")>-1?et([ct]):ct},callBound}var sideChannelMap,hasRequiredSideChannelMap;function requireSideChannelMap(){if(hasRequiredSideChannelMap)return sideChannelMap;hasRequiredSideChannelMap=1;var rt=requireGetIntrinsic(),et=requireCallBound(),tt=requireObjectInspect(),nt=requireType(),st=rt("%Map%",!0),ot=et("Map.prototype.get",!0),ct=et("Map.prototype.set",!0),dt=et("Map.prototype.has",!0),ft=et("Map.prototype.delete",!0),gt=et("Map.prototype.size",!0);return sideChannelMap=!!st&&function(){var xt,St={assert:function(wt){if(!St.has(wt))throw new nt("Side channel does not contain "+tt(wt))},delete:function(wt){if(xt){var bt=ft(xt,wt);return gt(xt)===0&&(xt=void 0),bt}return!1},get:function(wt){if(xt)return ot(xt,wt)},has:function(wt){return xt?dt(xt,wt):!1},set:function(wt,bt){xt||(xt=new st),ct(xt,wt,bt)}};return St},sideChannelMap}var sideChannelWeakmap,hasRequiredSideChannelWeakmap;function requireSideChannelWeakmap(){if(hasRequiredSideChannelWeakmap)return sideChannelWeakmap;hasRequiredSideChannelWeakmap=1;var rt=requireGetIntrinsic(),et=requireCallBound(),tt=requireObjectInspect(),nt=requireSideChannelMap(),st=requireType(),ot=rt("%WeakMap%",!0),ct=et("WeakMap.prototype.get",!0),dt=et("WeakMap.prototype.set",!0),ft=et("WeakMap.prototype.has",!0),gt=et("WeakMap.prototype.delete",!0);return sideChannelWeakmap=ot?function(){var xt,St,wt={assert:function(bt){if(!wt.has(bt))throw new st("Side channel does not contain "+tt(bt))},delete:function(bt){if(ot&&bt&&(typeof bt=="object"||typeof bt=="function")){if(xt)return gt(xt,bt)}else if(nt&&St)return St.delete(bt);return!1},get:function(bt){return ot&&bt&&(typeof bt=="object"||typeof bt=="function")&&xt?ct(xt,bt):St&&St.get(bt)},has:function(bt){return ot&&bt&&(typeof bt=="object"||typeof bt=="function")&&xt?ft(xt,bt):!!St&&St.has(bt)},set:function(bt,Pt){ot&&bt&&(typeof bt=="object"||typeof bt=="function")?(xt||(xt=new ot),dt(xt,bt,Pt)):nt&&(St||(St=nt()),St.set(bt,Pt))}};return wt}:nt,sideChannelWeakmap}var sideChannel,hasRequiredSideChannel;function requireSideChannel(){if(hasRequiredSideChannel)return sideChannel;hasRequiredSideChannel=1;var rt=requireType(),et=requireObjectInspect(),tt=requireSideChannelList(),nt=requireSideChannelMap(),st=requireSideChannelWeakmap(),ot=st||nt||tt;return sideChannel=function(){var dt,ft={assert:function(gt){if(!ft.has(gt))throw new rt("Side channel does not contain "+et(gt))},delete:function(gt){return!!dt&&dt.delete(gt)},get:function(gt){return dt&&dt.get(gt)},has:function(gt){return!!dt&&dt.has(gt)},set:function(gt,yt){dt||(dt=ot()),dt.set(gt,yt)}};return ft},sideChannel}var formats$1,hasRequiredFormats;function requireFormats(){if(hasRequiredFormats)return formats$1;hasRequiredFormats=1;var rt=String.prototype.replace,et=/%20/g,tt={RFC1738:"RFC1738",RFC3986:"RFC3986"};return formats$1={default:tt.RFC3986,formatters:{RFC1738:function(nt){return rt.call(nt,et,"+")},RFC3986:function(nt){return String(nt)}},RFC1738:tt.RFC1738,RFC3986:tt.RFC3986},formats$1}var utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;var rt=requireFormats(),et=Object.prototype.hasOwnProperty,tt=Array.isArray,nt=function(){for(var Rt=[],Mt=0;Mt<256;++Mt)Rt.push("%"+((Mt<16?"0":"")+Mt.toString(16)).toUpperCase());return Rt}(),st=function(Mt){for(;Mt.length>1;){var kt=Mt.pop(),Dt=kt.obj[kt.prop];if(tt(Dt)){for(var zt=[],Lt=0;Lt<Dt.length;++Lt)typeof Dt[Lt]<"u"&&zt.push(Dt[Lt]);kt.obj[kt.prop]=zt}}},ot=function(Mt,kt){for(var Dt=kt&&kt.plainObjects?{__proto__:null}:{},zt=0;zt<Mt.length;++zt)typeof Mt[zt]<"u"&&(Dt[zt]=Mt[zt]);return Dt},ct=function Rt(Mt,kt,Dt){if(!kt)return Mt;if(typeof kt!="object"&&typeof kt!="function"){if(tt(Mt))Mt.push(kt);else if(Mt&&typeof Mt=="object")(Dt&&(Dt.plainObjects||Dt.allowPrototypes)||!et.call(Object.prototype,kt))&&(Mt[kt]=!0);else return[Mt,kt];return Mt}if(!Mt||typeof Mt!="object")return[Mt].concat(kt);var zt=Mt;return tt(Mt)&&!tt(kt)&&(zt=ot(Mt,Dt)),tt(Mt)&&tt(kt)?(kt.forEach(function(Lt,Yt){if(et.call(Mt,Yt)){var Nt=Mt[Yt];Nt&&typeof Nt=="object"&&Lt&&typeof Lt=="object"?Mt[Yt]=Rt(Nt,Lt,Dt):Mt.push(Lt)}else Mt[Yt]=Lt}),Mt):Object.keys(kt).reduce(function(Lt,Yt){var Nt=kt[Yt];return et.call(Lt,Yt)?Lt[Yt]=Rt(Lt[Yt],Nt,Dt):Lt[Yt]=Nt,Lt},zt)},dt=function(Mt,kt){return Object.keys(kt).reduce(function(Dt,zt){return Dt[zt]=kt[zt],Dt},Mt)},ft=function(Rt,Mt,kt){var Dt=Rt.replace(/\+/g," ");if(kt==="iso-8859-1")return Dt.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(Dt)}catch{return Dt}},gt=1024,yt=function(Mt,kt,Dt,zt,Lt){if(Mt.length===0)return Mt;var Yt=Mt;if(typeof Mt=="symbol"?Yt=Symbol.prototype.toString.call(Mt):typeof Mt!="string"&&(Yt=String(Mt)),Dt==="iso-8859-1")return escape(Yt).replace(/%u[0-9a-f]{4}/gi,function(Zt){return"%26%23"+parseInt(Zt.slice(2),16)+"%3B"});for(var Nt="",Jt=0;Jt<Yt.length;Jt+=gt){for(var ur=Yt.length>=gt?Yt.slice(Jt,Jt+gt):Yt,dr=[],Tr=0;Tr<ur.length;++Tr){var Kt=ur.charCodeAt(Tr);if(Kt===45||Kt===46||Kt===95||Kt===126||Kt>=48&&Kt<=57||Kt>=65&&Kt<=90||Kt>=97&&Kt<=122||Lt===rt.RFC1738&&(Kt===40||Kt===41)){dr[dr.length]=ur.charAt(Tr);continue}if(Kt<128){dr[dr.length]=nt[Kt];continue}if(Kt<2048){dr[dr.length]=nt[192|Kt>>6]+nt[128|Kt&63];continue}if(Kt<55296||Kt>=57344){dr[dr.length]=nt[224|Kt>>12]+nt[128|Kt>>6&63]+nt[128|Kt&63];continue}Tr+=1,Kt=65536+((Kt&1023)<<10|ur.charCodeAt(Tr)&1023),dr[dr.length]=nt[240|Kt>>18]+nt[128|Kt>>12&63]+nt[128|Kt>>6&63]+nt[128|Kt&63]}Nt+=dr.join("")}return Nt},xt=function(Mt){for(var kt=[{obj:{o:Mt},prop:"o"}],Dt=[],zt=0;zt<kt.length;++zt)for(var Lt=kt[zt],Yt=Lt.obj[Lt.prop],Nt=Object.keys(Yt),Jt=0;Jt<Nt.length;++Jt){var ur=Nt[Jt],dr=Yt[ur];typeof dr=="object"&&dr!==null&&Dt.indexOf(dr)===-1&&(kt.push({obj:Yt,prop:ur}),Dt.push(dr))}return st(kt),Mt},St=function(Mt){return Object.prototype.toString.call(Mt)==="[object RegExp]"},wt=function(Mt){return!Mt||typeof Mt!="object"?!1:!!(Mt.constructor&&Mt.constructor.isBuffer&&Mt.constructor.isBuffer(Mt))},bt=function(Mt,kt){return[].concat(Mt,kt)},Pt=function(Mt,kt){if(tt(Mt)){for(var Dt=[],zt=0;zt<Mt.length;zt+=1)Dt.push(kt(Mt[zt]));return Dt}return kt(Mt)};return utils={arrayToObject:ot,assign:dt,combine:bt,compact:xt,decode:ft,encode:yt,isBuffer:wt,isRegExp:St,maybeMap:Pt,merge:ct},utils}var stringify_1,hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify_1;hasRequiredStringify=1;var rt=requireSideChannel(),et=requireUtils(),tt=requireFormats(),nt=Object.prototype.hasOwnProperty,st={brackets:function(Rt){return Rt+"[]"},comma:"comma",indices:function(Rt,Mt){return Rt+"["+Mt+"]"},repeat:function(Rt){return Rt}},ot=Array.isArray,ct=Array.prototype.push,dt=function(Pt,Rt){ct.apply(Pt,ot(Rt)?Rt:[Rt])},ft=Date.prototype.toISOString,gt=tt.default,yt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:et.encode,encodeValuesOnly:!1,filter:void 0,format:gt,formatter:tt.formatters[gt],indices:!1,serializeDate:function(Rt){return ft.call(Rt)},skipNulls:!1,strictNullHandling:!1},xt=function(Rt){return typeof Rt=="string"||typeof Rt=="number"||typeof Rt=="boolean"||typeof Rt=="symbol"||typeof Rt=="bigint"},St={},wt=function Pt(Rt,Mt,kt,Dt,zt,Lt,Yt,Nt,Jt,ur,dr,Tr,Kt,Zt,lr,vr,Ut,Ht){for(var Ct=Rt,jt=Ht,Ft=0,It=!1;(jt=jt.get(St))!==void 0&&!It;){var Gt=jt.get(Rt);if(Ft+=1,typeof Gt<"u"){if(Gt===Ft)throw new RangeError("Cyclic object value");It=!0}typeof jt.get(St)>"u"&&(Ft=0)}if(typeof ur=="function"?Ct=ur(Mt,Ct):Ct instanceof Date?Ct=Kt(Ct):kt==="comma"&&ot(Ct)&&(Ct=et.maybeMap(Ct,function(Ur){return Ur instanceof Date?Kt(Ur):Ur})),Ct===null){if(Lt)return Jt&&!vr?Jt(Mt,yt.encoder,Ut,"key",Zt):Mt;Ct=""}if(xt(Ct)||et.isBuffer(Ct)){if(Jt){var Xt=vr?Mt:Jt(Mt,yt.encoder,Ut,"key",Zt);return[lr(Xt)+"="+lr(Jt(Ct,yt.encoder,Ut,"value",Zt))]}return[lr(Mt)+"="+lr(String(Ct))]}var ir=[];if(typeof Ct>"u")return ir;var cr;if(kt==="comma"&&ot(Ct))vr&&Jt&&(Ct=et.maybeMap(Ct,Jt)),cr=[{value:Ct.length>0?Ct.join(",")||null:void 0}];else if(ot(ur))cr=ur;else{var gr=Object.keys(Ct);cr=dr?gr.sort(dr):gr}var Sr=Nt?String(Mt).replace(/\./g,"%2E"):String(Mt),br=Dt&&ot(Ct)&&Ct.length===1?Sr+"[]":Sr;if(zt&&ot(Ct)&&Ct.length===0)return br+"[]";for(var Pr=0;Pr<cr.length;++Pr){var yr=cr[Pr],Ir=typeof yr=="object"&&yr&&typeof yr.value<"u"?yr.value:Ct[yr];if(!(Yt&&Ir===null)){var Nr=Tr&&Nt?String(yr).replace(/\./g,"%2E"):String(yr),Br=ot(Ct)?typeof kt=="function"?kt(br,Nr):br:br+(Tr?"."+Nr:"["+Nr+"]");Ht.set(Rt,Ft);var Qr=rt();Qr.set(St,Ht),dt(ir,Pt(Ir,Br,kt,Dt,zt,Lt,Yt,Nt,kt==="comma"&&vr&&ot(Ct)?null:Jt,ur,dr,Tr,Kt,Zt,lr,vr,Ut,Qr))}}return ir},bt=function(Rt){if(!Rt)return yt;if(typeof Rt.allowEmptyArrays<"u"&&typeof Rt.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof Rt.encodeDotInKeys<"u"&&typeof Rt.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(Rt.encoder!==null&&typeof Rt.encoder<"u"&&typeof Rt.encoder!="function")throw new TypeError("Encoder has to be a function.");var Mt=Rt.charset||yt.charset;if(typeof Rt.charset<"u"&&Rt.charset!=="utf-8"&&Rt.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var kt=tt.default;if(typeof Rt.format<"u"){if(!nt.call(tt.formatters,Rt.format))throw new TypeError("Unknown format option provided.");kt=Rt.format}var Dt=tt.formatters[kt],zt=yt.filter;(typeof Rt.filter=="function"||ot(Rt.filter))&&(zt=Rt.filter);var Lt;if(Rt.arrayFormat in st?Lt=Rt.arrayFormat:"indices"in Rt?Lt=Rt.indices?"indices":"repeat":Lt=yt.arrayFormat,"commaRoundTrip"in Rt&&typeof Rt.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var Yt=typeof Rt.allowDots>"u"?Rt.encodeDotInKeys===!0?!0:yt.allowDots:!!Rt.allowDots;return{addQueryPrefix:typeof Rt.addQueryPrefix=="boolean"?Rt.addQueryPrefix:yt.addQueryPrefix,allowDots:Yt,allowEmptyArrays:typeof Rt.allowEmptyArrays=="boolean"?!!Rt.allowEmptyArrays:yt.allowEmptyArrays,arrayFormat:Lt,charset:Mt,charsetSentinel:typeof Rt.charsetSentinel=="boolean"?Rt.charsetSentinel:yt.charsetSentinel,commaRoundTrip:!!Rt.commaRoundTrip,delimiter:typeof Rt.delimiter>"u"?yt.delimiter:Rt.delimiter,encode:typeof Rt.encode=="boolean"?Rt.encode:yt.encode,encodeDotInKeys:typeof Rt.encodeDotInKeys=="boolean"?Rt.encodeDotInKeys:yt.encodeDotInKeys,encoder:typeof Rt.encoder=="function"?Rt.encoder:yt.encoder,encodeValuesOnly:typeof Rt.encodeValuesOnly=="boolean"?Rt.encodeValuesOnly:yt.encodeValuesOnly,filter:zt,format:kt,formatter:Dt,serializeDate:typeof Rt.serializeDate=="function"?Rt.serializeDate:yt.serializeDate,skipNulls:typeof Rt.skipNulls=="boolean"?Rt.skipNulls:yt.skipNulls,sort:typeof Rt.sort=="function"?Rt.sort:null,strictNullHandling:typeof Rt.strictNullHandling=="boolean"?Rt.strictNullHandling:yt.strictNullHandling}};return stringify_1=function(Pt,Rt){var Mt=Pt,kt=bt(Rt),Dt,zt;typeof kt.filter=="function"?(zt=kt.filter,Mt=zt("",Mt)):ot(kt.filter)&&(zt=kt.filter,Dt=zt);var Lt=[];if(typeof Mt!="object"||Mt===null)return"";var Yt=st[kt.arrayFormat],Nt=Yt==="comma"&&kt.commaRoundTrip;Dt||(Dt=Object.keys(Mt)),kt.sort&&Dt.sort(kt.sort);for(var Jt=rt(),ur=0;ur<Dt.length;++ur){var dr=Dt[ur],Tr=Mt[dr];kt.skipNulls&&Tr===null||dt(Lt,wt(Tr,dr,Yt,Nt,kt.allowEmptyArrays,kt.strictNullHandling,kt.skipNulls,kt.encodeDotInKeys,kt.encode?kt.encoder:null,kt.filter,kt.sort,kt.allowDots,kt.serializeDate,kt.format,kt.formatter,kt.encodeValuesOnly,kt.charset,Jt))}var Kt=Lt.join(kt.delimiter),Zt=kt.addQueryPrefix===!0?"?":"";return kt.charsetSentinel&&(kt.charset==="iso-8859-1"?Zt+="utf8=%26%2310003%3B&":Zt+="utf8=%E2%9C%93&"),Kt.length>0?Zt+Kt:""},stringify_1}var parse,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse;hasRequiredParse=1;var rt=requireUtils(),et=Object.prototype.hasOwnProperty,tt=Array.isArray,nt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:rt.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},st=function(St){return St.replace(/&#(\d+);/g,function(wt,bt){return String.fromCharCode(parseInt(bt,10))})},ot=function(St,wt){return St&&typeof St=="string"&&wt.comma&&St.indexOf(",")>-1?St.split(","):St},ct="utf8=%26%2310003%3B",dt="utf8=%E2%9C%93",ft=function(wt,bt){var Pt={__proto__:null},Rt=bt.ignoreQueryPrefix?wt.replace(/^\?/,""):wt;Rt=Rt.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var Mt=bt.parameterLimit===1/0?void 0:bt.parameterLimit,kt=Rt.split(bt.delimiter,Mt),Dt=-1,zt,Lt=bt.charset;if(bt.charsetSentinel)for(zt=0;zt<kt.length;++zt)kt[zt].indexOf("utf8=")===0&&(kt[zt]===dt?Lt="utf-8":kt[zt]===ct&&(Lt="iso-8859-1"),Dt=zt,zt=kt.length);for(zt=0;zt<kt.length;++zt)if(zt!==Dt){var Yt=kt[zt],Nt=Yt.indexOf("]="),Jt=Nt===-1?Yt.indexOf("="):Nt+1,ur,dr;Jt===-1?(ur=bt.decoder(Yt,nt.decoder,Lt,"key"),dr=bt.strictNullHandling?null:""):(ur=bt.decoder(Yt.slice(0,Jt),nt.decoder,Lt,"key"),dr=rt.maybeMap(ot(Yt.slice(Jt+1),bt),function(Kt){return bt.decoder(Kt,nt.decoder,Lt,"value")})),dr&&bt.interpretNumericEntities&&Lt==="iso-8859-1"&&(dr=st(String(dr))),Yt.indexOf("[]=")>-1&&(dr=tt(dr)?[dr]:dr);var Tr=et.call(Pt,ur);Tr&&bt.duplicates==="combine"?Pt[ur]=rt.combine(Pt[ur],dr):(!Tr||bt.duplicates==="last")&&(Pt[ur]=dr)}return Pt},gt=function(St,wt,bt,Pt){for(var Rt=Pt?wt:ot(wt,bt),Mt=St.length-1;Mt>=0;--Mt){var kt,Dt=St[Mt];if(Dt==="[]"&&bt.parseArrays)kt=bt.allowEmptyArrays&&(Rt===""||bt.strictNullHandling&&Rt===null)?[]:[].concat(Rt);else{kt=bt.plainObjects?{__proto__:null}:{};var zt=Dt.charAt(0)==="["&&Dt.charAt(Dt.length-1)==="]"?Dt.slice(1,-1):Dt,Lt=bt.decodeDotInKeys?zt.replace(/%2E/g,"."):zt,Yt=parseInt(Lt,10);!bt.parseArrays&&Lt===""?kt={0:Rt}:!isNaN(Yt)&&Dt!==Lt&&String(Yt)===Lt&&Yt>=0&&bt.parseArrays&&Yt<=bt.arrayLimit?(kt=[],kt[Yt]=Rt):Lt!=="__proto__"&&(kt[Lt]=Rt)}Rt=kt}return Rt},yt=function(wt,bt,Pt,Rt){if(wt){var Mt=Pt.allowDots?wt.replace(/\.([^.[]+)/g,"[$1]"):wt,kt=/(\[[^[\]]*])/,Dt=/(\[[^[\]]*])/g,zt=Pt.depth>0&&kt.exec(Mt),Lt=zt?Mt.slice(0,zt.index):Mt,Yt=[];if(Lt){if(!Pt.plainObjects&&et.call(Object.prototype,Lt)&&!Pt.allowPrototypes)return;Yt.push(Lt)}for(var Nt=0;Pt.depth>0&&(zt=Dt.exec(Mt))!==null&&Nt<Pt.depth;){if(Nt+=1,!Pt.plainObjects&&et.call(Object.prototype,zt[1].slice(1,-1))&&!Pt.allowPrototypes)return;Yt.push(zt[1])}if(zt){if(Pt.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+Pt.depth+" and strictDepth is true");Yt.push("["+Mt.slice(zt.index)+"]")}return gt(Yt,bt,Pt,Rt)}},xt=function(wt){if(!wt)return nt;if(typeof wt.allowEmptyArrays<"u"&&typeof wt.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof wt.decodeDotInKeys<"u"&&typeof wt.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(wt.decoder!==null&&typeof wt.decoder<"u"&&typeof wt.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof wt.charset<"u"&&wt.charset!=="utf-8"&&wt.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var bt=typeof wt.charset>"u"?nt.charset:wt.charset,Pt=typeof wt.duplicates>"u"?nt.duplicates:wt.duplicates;if(Pt!=="combine"&&Pt!=="first"&&Pt!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var Rt=typeof wt.allowDots>"u"?wt.decodeDotInKeys===!0?!0:nt.allowDots:!!wt.allowDots;return{allowDots:Rt,allowEmptyArrays:typeof wt.allowEmptyArrays=="boolean"?!!wt.allowEmptyArrays:nt.allowEmptyArrays,allowPrototypes:typeof wt.allowPrototypes=="boolean"?wt.allowPrototypes:nt.allowPrototypes,allowSparse:typeof wt.allowSparse=="boolean"?wt.allowSparse:nt.allowSparse,arrayLimit:typeof wt.arrayLimit=="number"?wt.arrayLimit:nt.arrayLimit,charset:bt,charsetSentinel:typeof wt.charsetSentinel=="boolean"?wt.charsetSentinel:nt.charsetSentinel,comma:typeof wt.comma=="boolean"?wt.comma:nt.comma,decodeDotInKeys:typeof wt.decodeDotInKeys=="boolean"?wt.decodeDotInKeys:nt.decodeDotInKeys,decoder:typeof wt.decoder=="function"?wt.decoder:nt.decoder,delimiter:typeof wt.delimiter=="string"||rt.isRegExp(wt.delimiter)?wt.delimiter:nt.delimiter,depth:typeof wt.depth=="number"||wt.depth===!1?+wt.depth:nt.depth,duplicates:Pt,ignoreQueryPrefix:wt.ignoreQueryPrefix===!0,interpretNumericEntities:typeof wt.interpretNumericEntities=="boolean"?wt.interpretNumericEntities:nt.interpretNumericEntities,parameterLimit:typeof wt.parameterLimit=="number"?wt.parameterLimit:nt.parameterLimit,parseArrays:wt.parseArrays!==!1,plainObjects:typeof wt.plainObjects=="boolean"?wt.plainObjects:nt.plainObjects,strictDepth:typeof wt.strictDepth=="boolean"?!!wt.strictDepth:nt.strictDepth,strictNullHandling:typeof wt.strictNullHandling=="boolean"?wt.strictNullHandling:nt.strictNullHandling}};return parse=function(St,wt){var bt=xt(wt);if(St===""||St===null||typeof St>"u")return bt.plainObjects?{__proto__:null}:{};for(var Pt=typeof St=="string"?ft(St,bt):St,Rt=bt.plainObjects?{__proto__:null}:{},Mt=Object.keys(Pt),kt=0;kt<Mt.length;++kt){var Dt=Mt[kt],zt=yt(Dt,Pt[Dt],bt,typeof St=="string");Rt=rt.merge(Rt,zt,bt)}return bt.allowSparse===!0?Rt:rt.compact(Rt)},parse}var lib,hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1;var rt=requireStringify(),et=requireParse(),tt=requireFormats();return lib={formats:tt,parse:et,stringify:rt},lib}var hasRequiredUrl;function requireUrl(){if(hasRequiredUrl)return url;hasRequiredUrl=1;var rt=requirePunycode();function et(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var tt=/^([a-z0-9.+-]+:)/i,nt=/:[0-9]*$/,st=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,ot=["<",">",'"',"`"," ","\r",`
`,"	"],ct=["{","}","|","\\","^","`"].concat(ot),dt=["'"].concat(ct),ft=["%","/","?",";","#"].concat(dt),gt=["/","?","#"],yt=255,xt=/^[+a-z0-9A-Z_-]{0,63}$/,St=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,wt={javascript:!0,"javascript:":!0},bt={javascript:!0,"javascript:":!0},Pt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Rt=requireLib();function Mt(Lt,Yt,Nt){if(Lt&&typeof Lt=="object"&&Lt instanceof et)return Lt;var Jt=new et;return Jt.parse(Lt,Yt,Nt),Jt}et.prototype.parse=function(Lt,Yt,Nt){if(typeof Lt!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof Lt);var Jt=Lt.indexOf("?"),ur=Jt!==-1&&Jt<Lt.indexOf("#")?"?":"#",dr=Lt.split(ur),Tr=/\\/g;dr[0]=dr[0].replace(Tr,"/"),Lt=dr.join(ur);var Kt=Lt;if(Kt=Kt.trim(),!Nt&&Lt.split("#").length===1){var Zt=st.exec(Kt);if(Zt)return this.path=Kt,this.href=Kt,this.pathname=Zt[1],Zt[2]?(this.search=Zt[2],Yt?this.query=Rt.parse(this.search.substr(1)):this.query=this.search.substr(1)):Yt&&(this.search="",this.query={}),this}var lr=tt.exec(Kt);if(lr){lr=lr[0];var vr=lr.toLowerCase();this.protocol=vr,Kt=Kt.substr(lr.length)}if(Nt||lr||Kt.match(/^\/\/[^@/]+@[^@/]+/)){var Ut=Kt.substr(0,2)==="//";Ut&&!(lr&&bt[lr])&&(Kt=Kt.substr(2),this.slashes=!0)}if(!bt[lr]&&(Ut||lr&&!Pt[lr])){for(var Ht=-1,Ct=0;Ct<gt.length;Ct++){var jt=Kt.indexOf(gt[Ct]);jt!==-1&&(Ht===-1||jt<Ht)&&(Ht=jt)}var Ft,It;Ht===-1?It=Kt.lastIndexOf("@"):It=Kt.lastIndexOf("@",Ht),It!==-1&&(Ft=Kt.slice(0,It),Kt=Kt.slice(It+1),this.auth=decodeURIComponent(Ft)),Ht=-1;for(var Ct=0;Ct<ft.length;Ct++){var jt=Kt.indexOf(ft[Ct]);jt!==-1&&(Ht===-1||jt<Ht)&&(Ht=jt)}Ht===-1&&(Ht=Kt.length),this.host=Kt.slice(0,Ht),Kt=Kt.slice(Ht),this.parseHost(),this.hostname=this.hostname||"";var Gt=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!Gt)for(var Xt=this.hostname.split(/\./),Ct=0,ir=Xt.length;Ct<ir;Ct++){var cr=Xt[Ct];if(cr&&!cr.match(xt)){for(var gr="",Sr=0,br=cr.length;Sr<br;Sr++)cr.charCodeAt(Sr)>127?gr+="x":gr+=cr[Sr];if(!gr.match(xt)){var Pr=Xt.slice(0,Ct),yr=Xt.slice(Ct+1),Ir=cr.match(St);Ir&&(Pr.push(Ir[1]),yr.unshift(Ir[2])),yr.length&&(Kt="/"+yr.join(".")+Kt),this.hostname=Pr.join(".");break}}}this.hostname.length>yt?this.hostname="":this.hostname=this.hostname.toLowerCase(),Gt||(this.hostname=rt.toASCII(this.hostname));var Nr=this.port?":"+this.port:"",Br=this.hostname||"";this.host=Br+Nr,this.href+=this.host,Gt&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),Kt[0]!=="/"&&(Kt="/"+Kt))}if(!wt[vr])for(var Ct=0,ir=dt.length;Ct<ir;Ct++){var Qr=dt[Ct];if(Kt.indexOf(Qr)!==-1){var Ur=encodeURIComponent(Qr);Ur===Qr&&(Ur=escape(Qr)),Kt=Kt.split(Qr).join(Ur)}}var Or=Kt.indexOf("#");Or!==-1&&(this.hash=Kt.substr(Or),Kt=Kt.slice(0,Or));var ai=Kt.indexOf("?");if(ai!==-1?(this.search=Kt.substr(ai),this.query=Kt.substr(ai+1),Yt&&(this.query=Rt.parse(this.query)),Kt=Kt.slice(0,ai)):Yt&&(this.search="",this.query={}),Kt&&(this.pathname=Kt),Pt[vr]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Nr=this.pathname||"",$i=this.search||"";this.path=Nr+$i}return this.href=this.format(),this};function kt(Lt){return typeof Lt=="string"&&(Lt=Mt(Lt)),Lt instanceof et?Lt.format():et.prototype.format.call(Lt)}et.prototype.format=function(){var Lt=this.auth||"";Lt&&(Lt=encodeURIComponent(Lt),Lt=Lt.replace(/%3A/i,":"),Lt+="@");var Yt=this.protocol||"",Nt=this.pathname||"",Jt=this.hash||"",ur=!1,dr="";this.host?ur=Lt+this.host:this.hostname&&(ur=Lt+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(ur+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(dr=Rt.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var Tr=this.search||dr&&"?"+dr||"";return Yt&&Yt.substr(-1)!==":"&&(Yt+=":"),this.slashes||(!Yt||Pt[Yt])&&ur!==!1?(ur="//"+(ur||""),Nt&&Nt.charAt(0)!=="/"&&(Nt="/"+Nt)):ur||(ur=""),Jt&&Jt.charAt(0)!=="#"&&(Jt="#"+Jt),Tr&&Tr.charAt(0)!=="?"&&(Tr="?"+Tr),Nt=Nt.replace(/[?#]/g,function(Kt){return encodeURIComponent(Kt)}),Tr=Tr.replace("#","%23"),Yt+ur+Nt+Tr+Jt};function Dt(Lt,Yt){return Mt(Lt,!1,!0).resolve(Yt)}et.prototype.resolve=function(Lt){return this.resolveObject(Mt(Lt,!1,!0)).format()};function zt(Lt,Yt){return Lt?Mt(Lt,!1,!0).resolveObject(Yt):Yt}return et.prototype.resolveObject=function(Lt){if(typeof Lt=="string"){var Yt=new et;Yt.parse(Lt,!1,!0),Lt=Yt}for(var Nt=new et,Jt=Object.keys(this),ur=0;ur<Jt.length;ur++){var dr=Jt[ur];Nt[dr]=this[dr]}if(Nt.hash=Lt.hash,Lt.href==="")return Nt.href=Nt.format(),Nt;if(Lt.slashes&&!Lt.protocol){for(var Tr=Object.keys(Lt),Kt=0;Kt<Tr.length;Kt++){var Zt=Tr[Kt];Zt!=="protocol"&&(Nt[Zt]=Lt[Zt])}return Pt[Nt.protocol]&&Nt.hostname&&!Nt.pathname&&(Nt.pathname="/",Nt.path=Nt.pathname),Nt.href=Nt.format(),Nt}if(Lt.protocol&&Lt.protocol!==Nt.protocol){if(!Pt[Lt.protocol]){for(var lr=Object.keys(Lt),vr=0;vr<lr.length;vr++){var Ut=lr[vr];Nt[Ut]=Lt[Ut]}return Nt.href=Nt.format(),Nt}if(Nt.protocol=Lt.protocol,!Lt.host&&!bt[Lt.protocol]){for(var ir=(Lt.pathname||"").split("/");ir.length&&!(Lt.host=ir.shift()););Lt.host||(Lt.host=""),Lt.hostname||(Lt.hostname=""),ir[0]!==""&&ir.unshift(""),ir.length<2&&ir.unshift(""),Nt.pathname=ir.join("/")}else Nt.pathname=Lt.pathname;if(Nt.search=Lt.search,Nt.query=Lt.query,Nt.host=Lt.host||"",Nt.auth=Lt.auth,Nt.hostname=Lt.hostname||Lt.host,Nt.port=Lt.port,Nt.pathname||Nt.search){var Ht=Nt.pathname||"",Ct=Nt.search||"";Nt.path=Ht+Ct}return Nt.slashes=Nt.slashes||Lt.slashes,Nt.href=Nt.format(),Nt}var jt=Nt.pathname&&Nt.pathname.charAt(0)==="/",Ft=Lt.host||Lt.pathname&&Lt.pathname.charAt(0)==="/",It=Ft||jt||Nt.host&&Lt.pathname,Gt=It,Xt=Nt.pathname&&Nt.pathname.split("/")||[],ir=Lt.pathname&&Lt.pathname.split("/")||[],cr=Nt.protocol&&!Pt[Nt.protocol];if(cr&&(Nt.hostname="",Nt.port=null,Nt.host&&(Xt[0]===""?Xt[0]=Nt.host:Xt.unshift(Nt.host)),Nt.host="",Lt.protocol&&(Lt.hostname=null,Lt.port=null,Lt.host&&(ir[0]===""?ir[0]=Lt.host:ir.unshift(Lt.host)),Lt.host=null),It=It&&(ir[0]===""||Xt[0]==="")),Ft)Nt.host=Lt.host||Lt.host===""?Lt.host:Nt.host,Nt.hostname=Lt.hostname||Lt.hostname===""?Lt.hostname:Nt.hostname,Nt.search=Lt.search,Nt.query=Lt.query,Xt=ir;else if(ir.length)Xt||(Xt=[]),Xt.pop(),Xt=Xt.concat(ir),Nt.search=Lt.search,Nt.query=Lt.query;else if(Lt.search!=null){if(cr){Nt.host=Xt.shift(),Nt.hostname=Nt.host;var gr=Nt.host&&Nt.host.indexOf("@")>0?Nt.host.split("@"):!1;gr&&(Nt.auth=gr.shift(),Nt.hostname=gr.shift(),Nt.host=Nt.hostname)}return Nt.search=Lt.search,Nt.query=Lt.query,(Nt.pathname!==null||Nt.search!==null)&&(Nt.path=(Nt.pathname?Nt.pathname:"")+(Nt.search?Nt.search:"")),Nt.href=Nt.format(),Nt}if(!Xt.length)return Nt.pathname=null,Nt.search?Nt.path="/"+Nt.search:Nt.path=null,Nt.href=Nt.format(),Nt;for(var Sr=Xt.slice(-1)[0],br=(Nt.host||Lt.host||Xt.length>1)&&(Sr==="."||Sr==="..")||Sr==="",Pr=0,yr=Xt.length;yr>=0;yr--)Sr=Xt[yr],Sr==="."?Xt.splice(yr,1):Sr===".."?(Xt.splice(yr,1),Pr++):Pr&&(Xt.splice(yr,1),Pr--);if(!It&&!Gt)for(;Pr--;Pr)Xt.unshift("..");It&&Xt[0]!==""&&(!Xt[0]||Xt[0].charAt(0)!=="/")&&Xt.unshift(""),br&&Xt.join("/").substr(-1)!=="/"&&Xt.push("");var Ir=Xt[0]===""||Xt[0]&&Xt[0].charAt(0)==="/";if(cr){Nt.hostname=Ir?"":Xt.length?Xt.shift():"",Nt.host=Nt.hostname;var gr=Nt.host&&Nt.host.indexOf("@")>0?Nt.host.split("@"):!1;gr&&(Nt.auth=gr.shift(),Nt.hostname=gr.shift(),Nt.host=Nt.hostname)}return It=It||Nt.host&&Xt.length,It&&!Ir&&Xt.unshift(""),Xt.length>0?Nt.pathname=Xt.join("/"):(Nt.pathname=null,Nt.path=null),(Nt.pathname!==null||Nt.search!==null)&&(Nt.path=(Nt.pathname?Nt.pathname:"")+(Nt.search?Nt.search:"")),Nt.auth=Lt.auth||Nt.auth,Nt.slashes=Nt.slashes||Lt.slashes,Nt.href=Nt.format(),Nt},et.prototype.parseHost=function(){var Lt=this.host,Yt=nt.exec(Lt);Yt&&(Yt=Yt[0],Yt!==":"&&(this.port=Yt.substr(1)),Lt=Lt.substr(0,Lt.length-Yt.length)),Lt&&(this.hostname=Lt)},url.parse=Mt,url.resolve=Dt,url.resolveObject=zt,url.format=kt,url.Url=et,url}requireUrl();const warnings={};function deprecation(rt,et,tt=3){if(warnings[et])return;let nt=new Error().stack;typeof nt>"u"?console.warn("PixiJS Deprecation Warning: ",`${et}
Deprecated since v${rt}`):(nt=nt.split(`
`).splice(tt).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${et}
Deprecated since v${rt}`),console.warn(nt),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${et}
Deprecated since v${rt}`),console.warn(nt))),warnings[et]=!0}function assertPath(rt){if(typeof rt!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(rt)}`)}function removeUrlParams(rt){return rt.split("?")[0].split("#")[0]}function escapeRegExp(rt){return rt.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll(rt,et,tt){return rt.replace(new RegExp(escapeRegExp(et),"g"),tt)}function normalizeStringPosix(rt,et){let tt="",nt=0,st=-1,ot=0,ct=-1;for(let dt=0;dt<=rt.length;++dt){if(dt<rt.length)ct=rt.charCodeAt(dt);else{if(ct===47)break;ct=47}if(ct===47){if(!(st===dt-1||ot===1))if(st!==dt-1&&ot===2){if(tt.length<2||nt!==2||tt.charCodeAt(tt.length-1)!==46||tt.charCodeAt(tt.length-2)!==46){if(tt.length>2){const ft=tt.lastIndexOf("/");if(ft!==tt.length-1){ft===-1?(tt="",nt=0):(tt=tt.slice(0,ft),nt=tt.length-1-tt.lastIndexOf("/")),st=dt,ot=0;continue}}else if(tt.length===2||tt.length===1){tt="",nt=0,st=dt,ot=0;continue}}}else tt.length>0?tt+=`/${rt.slice(st+1,dt)}`:tt=rt.slice(st+1,dt),nt=dt-st-1;st=dt,ot=0}else ct===46&&ot!==-1?++ot:ot=-1}return tt}const path={toPosix(rt){return replaceAll(rt,"\\","/")},isUrl(rt){return/^https?:/.test(this.toPosix(rt))},isDataUrl(rt){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(rt)},isBlobUrl(rt){return rt.startsWith("blob:")},hasProtocol(rt){return/^[^/:]+:/.test(this.toPosix(rt))},getProtocol(rt){assertPath(rt),rt=this.toPosix(rt);const et=/^file:\/\/\//.exec(rt);if(et)return et[0];const tt=/^[^/:]+:\/{0,2}/.exec(rt);return tt?tt[0]:""},toAbsolute(rt,et,tt){if(assertPath(rt),this.isDataUrl(rt)||this.isBlobUrl(rt))return rt;const nt=removeUrlParams(this.toPosix(et??settings.ADAPTER.getBaseUrl())),st=removeUrlParams(this.toPosix(tt??this.rootname(nt)));return rt=this.toPosix(rt),rt.startsWith("/")?path.join(st,rt.slice(1)):this.isAbsolute(rt)?rt:this.join(nt,rt)},normalize(rt){if(assertPath(rt),rt.length===0)return".";if(this.isDataUrl(rt)||this.isBlobUrl(rt))return rt;rt=this.toPosix(rt);let et="";const tt=rt.startsWith("/");this.hasProtocol(rt)&&(et=this.rootname(rt),rt=rt.slice(et.length));const nt=rt.endsWith("/");return rt=normalizeStringPosix(rt),rt.length>0&&nt&&(rt+="/"),tt?`/${rt}`:et+rt},isAbsolute(rt){return assertPath(rt),rt=this.toPosix(rt),this.hasProtocol(rt)?!0:rt.startsWith("/")},join(...rt){if(rt.length===0)return".";let et;for(let tt=0;tt<rt.length;++tt){const nt=rt[tt];if(assertPath(nt),nt.length>0)if(et===void 0)et=nt;else{const st=rt[tt-1]??"";this.joinExtensions.includes(this.extname(st).toLowerCase())?et+=`/../${nt}`:et+=`/${nt}`}}return et===void 0?".":this.normalize(et)},dirname(rt){if(assertPath(rt),rt.length===0)return".";rt=this.toPosix(rt);let et=rt.charCodeAt(0);const tt=et===47;let nt=-1,st=!0;const ot=this.getProtocol(rt),ct=rt;rt=rt.slice(ot.length);for(let dt=rt.length-1;dt>=1;--dt)if(et=rt.charCodeAt(dt),et===47){if(!st){nt=dt;break}}else st=!1;return nt===-1?tt?"/":this.isUrl(ct)?ot+rt:ot:tt&&nt===1?"//":ot+rt.slice(0,nt)},rootname(rt){assertPath(rt),rt=this.toPosix(rt);let et="";if(rt.startsWith("/")?et="/":et=this.getProtocol(rt),this.isUrl(rt)){const tt=rt.indexOf("/",et.length);tt!==-1?et=rt.slice(0,tt):et=rt,et.endsWith("/")||(et+="/")}return et},basename(rt,et){assertPath(rt),et&&assertPath(et),rt=removeUrlParams(this.toPosix(rt));let tt=0,nt=-1,st=!0,ot;if(et!==void 0&&et.length>0&&et.length<=rt.length){if(et.length===rt.length&&et===rt)return"";let ct=et.length-1,dt=-1;for(ot=rt.length-1;ot>=0;--ot){const ft=rt.charCodeAt(ot);if(ft===47){if(!st){tt=ot+1;break}}else dt===-1&&(st=!1,dt=ot+1),ct>=0&&(ft===et.charCodeAt(ct)?--ct===-1&&(nt=ot):(ct=-1,nt=dt))}return tt===nt?nt=dt:nt===-1&&(nt=rt.length),rt.slice(tt,nt)}for(ot=rt.length-1;ot>=0;--ot)if(rt.charCodeAt(ot)===47){if(!st){tt=ot+1;break}}else nt===-1&&(st=!1,nt=ot+1);return nt===-1?"":rt.slice(tt,nt)},extname(rt){assertPath(rt),rt=removeUrlParams(this.toPosix(rt));let et=-1,tt=0,nt=-1,st=!0,ot=0;for(let ct=rt.length-1;ct>=0;--ct){const dt=rt.charCodeAt(ct);if(dt===47){if(!st){tt=ct+1;break}continue}nt===-1&&(st=!1,nt=ct+1),dt===46?et===-1?et=ct:ot!==1&&(ot=1):et!==-1&&(ot=-1)}return et===-1||nt===-1||ot===0||ot===1&&et===nt-1&&et===tt+1?"":rt.slice(et,nt)},parse(rt){assertPath(rt);const et={root:"",dir:"",base:"",ext:"",name:""};if(rt.length===0)return et;rt=removeUrlParams(this.toPosix(rt));let tt=rt.charCodeAt(0);const nt=this.isAbsolute(rt);let st;et.root=this.rootname(rt),nt||this.hasProtocol(rt)?st=1:st=0;let ot=-1,ct=0,dt=-1,ft=!0,gt=rt.length-1,yt=0;for(;gt>=st;--gt){if(tt=rt.charCodeAt(gt),tt===47){if(!ft){ct=gt+1;break}continue}dt===-1&&(ft=!1,dt=gt+1),tt===46?ot===-1?ot=gt:yt!==1&&(yt=1):ot!==-1&&(yt=-1)}return ot===-1||dt===-1||yt===0||yt===1&&ot===dt-1&&ot===ct+1?dt!==-1&&(ct===0&&nt?et.base=et.name=rt.slice(1,dt):et.base=et.name=rt.slice(ct,dt)):(ct===0&&nt?(et.name=rt.slice(1,ot),et.base=rt.slice(1,dt)):(et.name=rt.slice(ct,ot),et.base=rt.slice(ct,dt)),et.ext=rt.slice(ot,dt)),et.dir=this.dirname(rt),et},sep:"/",delimiter:":",joinExtensions:[".html"]};let promise;async function detectVideoAlphaMode(){return promise??(promise=(async()=>{var ot;const rt=document.createElement("canvas").getContext("webgl");if(!rt)return ALPHA_MODES.UNPACK;const et=await new Promise(ct=>{const dt=document.createElement("video");dt.onloadeddata=()=>ct(dt),dt.onerror=()=>ct(null),dt.autoplay=!1,dt.crossOrigin="anonymous",dt.preload="auto",dt.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",dt.load()});if(!et)return ALPHA_MODES.UNPACK;const tt=rt.createTexture();rt.bindTexture(rt.TEXTURE_2D,tt);const nt=rt.createFramebuffer();rt.bindFramebuffer(rt.FRAMEBUFFER,nt),rt.framebufferTexture2D(rt.FRAMEBUFFER,rt.COLOR_ATTACHMENT0,rt.TEXTURE_2D,tt,0),rt.pixelStorei(rt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),rt.pixelStorei(rt.UNPACK_COLORSPACE_CONVERSION_WEBGL,rt.NONE),rt.texImage2D(rt.TEXTURE_2D,0,rt.RGBA,rt.RGBA,rt.UNSIGNED_BYTE,et);const st=new Uint8Array(4);return rt.readPixels(0,0,1,1,rt.RGBA,rt.UNSIGNED_BYTE,st),rt.deleteFramebuffer(nt),rt.deleteTexture(tt),(ot=rt.getExtension("WEBGL_lose_context"))==null||ot.loseContext(),st[0]<=st[3]?ALPHA_MODES.PMA:ALPHA_MODES.UNPACK})()),promise}let supported;function isWebGLSupported(){return typeof supported>"u"&&(supported=function(){var et;const rt={stencil:!0,failIfMajorPerformanceCaveat:settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!settings.ADAPTER.getWebGLRenderingContext())return!1;const tt=settings.ADAPTER.createCanvas();let nt=tt.getContext("webgl",rt)||tt.getContext("experimental-webgl",rt);const st=!!((et=nt==null?void 0:nt.getContextAttributes())!=null&&et.stencil);if(nt){const ot=nt.getExtension("WEBGL_lose_context");ot&&ot.loseContext()}return nt=null,st}catch{return!1}}()),supported}var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(rt){return typeof rt=="string"?rt.length>0:typeof rt=="number"},n=function(rt,et,tt){return et===void 0&&(et=0),tt===void 0&&(tt=Math.pow(10,et)),Math.round(tt*rt)/tt+0},e=function(rt,et,tt){return et===void 0&&(et=0),tt===void 0&&(tt=1),rt>tt?tt:rt>et?rt:et},u=function(rt){return(rt=isFinite(rt)?rt%360:0)>0?rt:rt+360},a=function(rt){return{r:e(rt.r,0,255),g:e(rt.g,0,255),b:e(rt.b,0,255),a:e(rt.a)}},o=function(rt){return{r:n(rt.r),g:n(rt.g),b:n(rt.b),a:n(rt.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(rt){var et=rt.toString(16);return et.length<2?"0"+et:et},h=function(rt){var et=rt.r,tt=rt.g,nt=rt.b,st=rt.a,ot=Math.max(et,tt,nt),ct=ot-Math.min(et,tt,nt),dt=ct?ot===et?(tt-nt)/ct:ot===tt?2+(nt-et)/ct:4+(et-tt)/ct:0;return{h:60*(dt<0?dt+6:dt),s:ot?ct/ot*100:0,v:ot/255*100,a:st}},b=function(rt){var et=rt.h,tt=rt.s,nt=rt.v,st=rt.a;et=et/360*6,tt/=100,nt/=100;var ot=Math.floor(et),ct=nt*(1-tt),dt=nt*(1-(et-ot)*tt),ft=nt*(1-(1-et+ot)*tt),gt=ot%6;return{r:255*[nt,dt,ct,ct,ft,nt][gt],g:255*[ft,nt,nt,dt,ct,ct][gt],b:255*[ct,ct,ft,nt,nt,dt][gt],a:st}},g=function(rt){return{h:u(rt.h),s:e(rt.s,0,100),l:e(rt.l,0,100),a:e(rt.a)}},d=function(rt){return{h:n(rt.h),s:n(rt.s),l:n(rt.l),a:n(rt.a,3)}},f=function(rt){return b((tt=(et=rt).s,{h:et.h,s:(tt*=((nt=et.l)<50?nt:100-nt)/100)>0?2*tt/(nt+tt)*100:0,v:nt+tt,a:et.a}));var et,tt,nt},c=function(rt){return{h:(et=h(rt)).h,s:(st=(200-(tt=et.s))*(nt=et.v)/100)>0&&st<200?tt*nt/100/(st<=100?st:200-st)*100:0,l:st/2,a:et.a};var et,tt,nt,st},l=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y={string:[[function(rt){var et=i.exec(rt);return et?(rt=et[1]).length<=4?{r:parseInt(rt[0]+rt[0],16),g:parseInt(rt[1]+rt[1],16),b:parseInt(rt[2]+rt[2],16),a:rt.length===4?n(parseInt(rt[3]+rt[3],16)/255,2):1}:rt.length===6||rt.length===8?{r:parseInt(rt.substr(0,2),16),g:parseInt(rt.substr(2,2),16),b:parseInt(rt.substr(4,2),16),a:rt.length===8?n(parseInt(rt.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(rt){var et=v.exec(rt)||m.exec(rt);return et?et[2]!==et[4]||et[4]!==et[6]?null:a({r:Number(et[1])/(et[2]?100/255:1),g:Number(et[3])/(et[4]?100/255:1),b:Number(et[5])/(et[6]?100/255:1),a:et[7]===void 0?1:Number(et[7])/(et[8]?100:1)}):null},"rgb"],[function(rt){var et=l.exec(rt)||p.exec(rt);if(!et)return null;var tt,nt,st=g({h:(tt=et[1],nt=et[2],nt===void 0&&(nt="deg"),Number(tt)*(r[nt]||1)),s:Number(et[3]),l:Number(et[4]),a:et[5]===void 0?1:Number(et[5])/(et[6]?100:1)});return f(st)},"hsl"]],object:[[function(rt){var et=rt.r,tt=rt.g,nt=rt.b,st=rt.a,ot=st===void 0?1:st;return t(et)&&t(tt)&&t(nt)?a({r:Number(et),g:Number(tt),b:Number(nt),a:Number(ot)}):null},"rgb"],[function(rt){var et=rt.h,tt=rt.s,nt=rt.l,st=rt.a,ot=st===void 0?1:st;if(!t(et)||!t(tt)||!t(nt))return null;var ct=g({h:Number(et),s:Number(tt),l:Number(nt),a:Number(ot)});return f(ct)},"hsl"],[function(rt){var et=rt.h,tt=rt.s,nt=rt.v,st=rt.a,ot=st===void 0?1:st;if(!t(et)||!t(tt)||!t(nt))return null;var ct=function(dt){return{h:u(dt.h),s:e(dt.s,0,100),v:e(dt.v,0,100),a:e(dt.a)}}({h:Number(et),s:Number(tt),v:Number(nt),a:Number(ot)});return b(ct)},"hsv"]]},N$1=function(rt,et){for(var tt=0;tt<et.length;tt++){var nt=et[tt][0](rt);if(nt)return[nt,et[tt][1]]}return[null,void 0]},x=function(rt){return typeof rt=="string"?N$1(rt.trim(),y.string):typeof rt=="object"&&rt!==null?N$1(rt,y.object):[null,void 0]},M$1=function(rt,et){var tt=c(rt);return{h:tt.h,s:e(tt.s+100*et,0,100),l:tt.l,a:tt.a}},H$1=function(rt){return(299*rt.r+587*rt.g+114*rt.b)/1e3/255},$$1=function(rt,et){var tt=c(rt);return{h:tt.h,s:tt.s,l:e(tt.l+100*et,0,100),a:tt.a}},j$1=function(){function rt(et){this.parsed=x(et)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return rt.prototype.isValid=function(){return this.parsed!==null},rt.prototype.brightness=function(){return n(H$1(this.rgba),2)},rt.prototype.isDark=function(){return H$1(this.rgba)<.5},rt.prototype.isLight=function(){return H$1(this.rgba)>=.5},rt.prototype.toHex=function(){return et=o(this.rgba),tt=et.r,nt=et.g,st=et.b,ct=(ot=et.a)<1?s(n(255*ot)):"","#"+s(tt)+s(nt)+s(st)+ct;var et,tt,nt,st,ot,ct},rt.prototype.toRgb=function(){return o(this.rgba)},rt.prototype.toRgbString=function(){return et=o(this.rgba),tt=et.r,nt=et.g,st=et.b,(ot=et.a)<1?"rgba("+tt+", "+nt+", "+st+", "+ot+")":"rgb("+tt+", "+nt+", "+st+")";var et,tt,nt,st,ot},rt.prototype.toHsl=function(){return d(c(this.rgba))},rt.prototype.toHslString=function(){return et=d(c(this.rgba)),tt=et.h,nt=et.s,st=et.l,(ot=et.a)<1?"hsla("+tt+", "+nt+"%, "+st+"%, "+ot+")":"hsl("+tt+", "+nt+"%, "+st+"%)";var et,tt,nt,st,ot},rt.prototype.toHsv=function(){return et=h(this.rgba),{h:n(et.h),s:n(et.s),v:n(et.v),a:n(et.a,3)};var et},rt.prototype.invert=function(){return w({r:255-(et=this.rgba).r,g:255-et.g,b:255-et.b,a:et.a});var et},rt.prototype.saturate=function(et){return et===void 0&&(et=.1),w(M$1(this.rgba,et))},rt.prototype.desaturate=function(et){return et===void 0&&(et=.1),w(M$1(this.rgba,-et))},rt.prototype.grayscale=function(){return w(M$1(this.rgba,-1))},rt.prototype.lighten=function(et){return et===void 0&&(et=.1),w($$1(this.rgba,et))},rt.prototype.darken=function(et){return et===void 0&&(et=.1),w($$1(this.rgba,-et))},rt.prototype.rotate=function(et){return et===void 0&&(et=15),this.hue(this.hue()+et)},rt.prototype.alpha=function(et){return typeof et=="number"?w({r:(tt=this.rgba).r,g:tt.g,b:tt.b,a:et}):n(this.rgba.a,3);var tt},rt.prototype.hue=function(et){var tt=c(this.rgba);return typeof et=="number"?w({h:et,s:tt.s,l:tt.l,a:tt.a}):n(tt.h)},rt.prototype.isEqual=function(et){return this.toHex()===w(et).toHex()},rt}(),w=function(rt){return rt instanceof j$1?rt:new j$1(rt)},S=[],k$1=function(rt){rt.forEach(function(et){S.indexOf(et)<0&&(et(j$1,y),S.push(et))})};function namesPlugin(rt,et){var tt={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},nt={};for(var st in tt)nt[tt[st]]=st;var ot={};rt.prototype.toName=function(ct){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var dt,ft,gt=nt[this.toHex()];if(gt)return gt;if(ct!=null&&ct.closest){var yt=this.toRgb(),xt=1/0,St="black";if(!ot.length)for(var wt in tt)ot[wt]=new rt(tt[wt]).toRgb();for(var bt in tt){var Pt=(dt=yt,ft=ot[bt],Math.pow(dt.r-ft.r,2)+Math.pow(dt.g-ft.g,2)+Math.pow(dt.b-ft.b,2));Pt<xt&&(xt=Pt,St=bt)}return St}},et.string.push([function(ct){var dt=ct.toLowerCase(),ft=dt==="transparent"?"#0000":tt[dt];return ft?new rt(ft).toRgb():null},"name"])}k$1([namesPlugin]);const _Color=class vd{constructor(et=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=et}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(et){return this.value=et,this}set value(et){if(et instanceof vd)this._value=this.cloneSource(et._value),this._int=et._int,this._components.set(et._components);else{if(et===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,et))&&(this.normalize(et),this._value=this.cloneSource(et))}}get value(){return this._value}cloneSource(et){return typeof et=="string"||typeof et=="number"||et instanceof Number||et===null?et:Array.isArray(et)||ArrayBuffer.isView(et)?et.slice(0):typeof et=="object"&&et!==null?{...et}:et}isSourceEqual(et,tt){const nt=typeof et;if(nt!==typeof tt)return!1;if(nt==="number"||nt==="string"||et instanceof Number)return et===tt;if(Array.isArray(et)&&Array.isArray(tt)||ArrayBuffer.isView(et)&&ArrayBuffer.isView(tt))return et.length!==tt.length?!1:et.every((st,ot)=>st===tt[ot]);if(et!==null&&tt!==null){const st=Object.keys(et),ot=Object.keys(tt);return st.length!==ot.length?!1:st.every(ct=>et[ct]===tt[ct])}return et===tt}toRgba(){const[et,tt,nt,st]=this._components;return{r:et,g:tt,b:nt,a:st}}toRgb(){const[et,tt,nt]=this._components;return{r:et,g:tt,b:nt}}toRgbaString(){const[et,tt,nt]=this.toUint8RgbArray();return`rgba(${et},${tt},${nt},${this.alpha})`}toUint8RgbArray(et){const[tt,nt,st]=this._components;return et=et??[],et[0]=Math.round(tt*255),et[1]=Math.round(nt*255),et[2]=Math.round(st*255),et}toRgbArray(et){et=et??[];const[tt,nt,st]=this._components;return et[0]=tt,et[1]=nt,et[2]=st,et}toNumber(){return this._int}toLittleEndianNumber(){const et=this._int;return(et>>16)+(et&65280)+((et&255)<<16)}multiply(et){const[tt,nt,st,ot]=vd.temp.setValue(et)._components;return this._components[0]*=tt,this._components[1]*=nt,this._components[2]*=st,this._components[3]*=ot,this.refreshInt(),this._value=null,this}premultiply(et,tt=!0){return tt&&(this._components[0]*=et,this._components[1]*=et,this._components[2]*=et),this._components[3]=et,this.refreshInt(),this._value=null,this}toPremultiplied(et,tt=!0){if(et===1)return(255<<24)+this._int;if(et===0)return tt?0:this._int;let nt=this._int>>16&255,st=this._int>>8&255,ot=this._int&255;return tt&&(nt=nt*et+.5|0,st=st*et+.5|0,ot=ot*et+.5|0),(et*255<<24)+(nt<<16)+(st<<8)+ot}toHex(){const et=this._int.toString(16);return`#${"000000".substring(0,6-et.length)+et}`}toHexa(){const et=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-et.length)+et}setAlpha(et){return this._components[3]=this._clamp(et),this}round(et){const[tt,nt,st]=this._components;return this._components[0]=Math.round(tt*et)/et,this._components[1]=Math.round(nt*et)/et,this._components[2]=Math.round(st*et)/et,this.refreshInt(),this._value=null,this}toArray(et){et=et??[];const[tt,nt,st,ot]=this._components;return et[0]=tt,et[1]=nt,et[2]=st,et[3]=ot,et}normalize(et){let tt,nt,st,ot;if((typeof et=="number"||et instanceof Number)&&et>=0&&et<=16777215){const ct=et;tt=(ct>>16&255)/255,nt=(ct>>8&255)/255,st=(ct&255)/255,ot=1}else if((Array.isArray(et)||et instanceof Float32Array)&&et.length>=3&&et.length<=4)et=this._clamp(et),[tt,nt,st,ot=1]=et;else if((et instanceof Uint8Array||et instanceof Uint8ClampedArray)&&et.length>=3&&et.length<=4)et=this._clamp(et,0,255),[tt,nt,st,ot=255]=et,tt/=255,nt/=255,st/=255,ot/=255;else if(typeof et=="string"||typeof et=="object"){if(typeof et=="string"){const dt=vd.HEX_PATTERN.exec(et);dt&&(et=`#${dt[2]}`)}const ct=w(et);ct.isValid()&&({r:tt,g:nt,b:st,a:ot}=ct.rgba,tt/=255,nt/=255,st/=255)}if(tt!==void 0)this._components[0]=tt,this._components[1]=nt,this._components[2]=st,this._components[3]=ot,this.refreshInt();else throw new Error(`Unable to convert color ${et}`)}refreshInt(){this._clamp(this._components);const[et,tt,nt]=this._components;this._int=(et*255<<16)+(tt*255<<8)+(nt*255|0)}_clamp(et,tt=0,nt=1){return typeof et=="number"?Math.min(Math.max(et,tt),nt):(et.forEach((st,ot)=>{et[ot]=Math.min(Math.max(st,tt),nt)}),et)}};_Color.shared=new _Color,_Color.temp=new _Color,_Color.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Color=_Color;function hex2string(rt){return deprecation("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Color.shared.setValue(rt).toHex()}function rgb2hex(rt){return deprecation("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Color.shared.setValue(rt).toNumber()}function mapPremultipliedBlendModes(){const rt=[],et=[];for(let nt=0;nt<32;nt++)rt[nt]=nt,et[nt]=nt;rt[BLEND_MODES.NORMAL_NPM]=BLEND_MODES.NORMAL,rt[BLEND_MODES.ADD_NPM]=BLEND_MODES.ADD,rt[BLEND_MODES.SCREEN_NPM]=BLEND_MODES.SCREEN,et[BLEND_MODES.NORMAL]=BLEND_MODES.NORMAL_NPM,et[BLEND_MODES.ADD]=BLEND_MODES.ADD_NPM,et[BLEND_MODES.SCREEN]=BLEND_MODES.SCREEN_NPM;const tt=[];return tt.push(et),tt.push(rt),tt}const premultiplyBlendMode=mapPremultipliedBlendModes();function correctBlendMode(rt,et){return premultiplyBlendMode[et?1:0][rt]}function createIndicesForQuads(rt,et=null){const tt=rt*6;if(et=et||new Uint16Array(tt),et.length!==tt)throw new Error(`Out buffer length is incorrect, got ${et.length} and expected ${tt}`);for(let nt=0,st=0;nt<tt;nt+=6,st+=4)et[nt+0]=st+0,et[nt+1]=st+1,et[nt+2]=st+2,et[nt+3]=st+0,et[nt+4]=st+2,et[nt+5]=st+3;return et}function getBufferType(rt){if(rt.BYTES_PER_ELEMENT===4)return rt instanceof Float32Array?"Float32Array":rt instanceof Uint32Array?"Uint32Array":"Int32Array";if(rt.BYTES_PER_ELEMENT===2){if(rt instanceof Uint16Array)return"Uint16Array"}else if(rt.BYTES_PER_ELEMENT===1&&rt instanceof Uint8Array)return"Uint8Array";return null}function nextPow2(rt){return rt+=rt===0?1:0,--rt,rt|=rt>>>1,rt|=rt>>>2,rt|=rt>>>4,rt|=rt>>>8,rt|=rt>>>16,rt+1}function isPow2(rt){return!(rt&rt-1)&&!!rt}function log2(rt){let et=(rt>65535?1:0)<<4;rt>>>=et;let tt=(rt>255?1:0)<<3;return rt>>>=tt,et|=tt,tt=(rt>15?1:0)<<2,rt>>>=tt,et|=tt,tt=(rt>3?1:0)<<1,rt>>>=tt,et|=tt,et|rt>>1}function removeItems(rt,et,tt){const nt=rt.length;let st;if(et>=nt||tt===0)return;tt=et+tt>nt?nt-et:tt;const ot=nt-tt;for(st=et;st<ot;++st)rt[st]=rt[st+tt];rt.length=ot}function sign(rt){return rt===0?0:rt<0?-1:1}let nextUid=0;function uid(){return++nextUid}const _BoundingBox=class{constructor(rt,et,tt,nt){this.left=rt,this.top=et,this.right=tt,this.bottom=nt}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};_BoundingBox.EMPTY=new _BoundingBox(0,0,0,0);let BoundingBox=_BoundingBox;const ProgramCache={},TextureCache=Object.create(null),BaseTextureCache=Object.create(null);class CanvasRenderTarget{constructor(et,tt,nt){this._canvas=settings.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=nt||settings.RESOLUTION,this.resize(et,tt)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(et,tt){this._checkDestroyed(),this._canvas.width=Math.round(et*this.resolution),this._canvas.height=Math.round(tt*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(et){this._checkDestroyed(),this._canvas.width=Math.round(et)}get height(){return this._checkDestroyed(),this._canvas.height}set height(et){this._checkDestroyed(),this._canvas.height=Math.round(et)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function checkRow(rt,et,tt){for(let nt=0,st=4*tt*et;nt<et;++nt,st+=4)if(rt[st+3]!==0)return!1;return!0}function checkColumn(rt,et,tt,nt,st){const ot=4*et;for(let ct=nt,dt=nt*ot+4*tt;ct<=st;++ct,dt+=ot)if(rt[dt+3]!==0)return!1;return!0}function getCanvasBoundingBox(rt){const{width:et,height:tt}=rt,nt=rt.getContext("2d",{willReadFrequently:!0});if(nt===null)throw new TypeError("Failed to get canvas 2D context");const st=nt.getImageData(0,0,et,tt).data;let ot=0,ct=0,dt=et-1,ft=tt-1;for(;ct<tt&&checkRow(st,et,ct);)++ct;if(ct===tt)return BoundingBox.EMPTY;for(;checkRow(st,et,ft);)--ft;for(;checkColumn(st,et,ot,ct,ft);)++ot;for(;checkColumn(st,et,dt,ct,ft);)--dt;return++dt,++ft,new BoundingBox(ot,ct,dt,ft)}function trimCanvas(rt){const et=getCanvasBoundingBox(rt),{width:tt,height:nt}=et;let st=null;if(!et.isEmpty()){const ot=rt.getContext("2d");if(ot===null)throw new TypeError("Failed to get canvas 2D context");st=ot.getImageData(et.left,et.top,tt,nt)}return{width:tt,height:nt,data:st}}function determineCrossOrigin(rt,et=globalThis.location){if(rt.startsWith("data:"))return"";et=et||globalThis.location;const tt=new URL(rt,document.baseURI);return tt.hostname!==et.hostname||tt.port!==et.port||tt.protocol!==et.protocol?"anonymous":""}function getResolutionOfUrl(rt,et=1){var nt;const tt=(nt=settings.RETINA_PREFIX)==null?void 0:nt.exec(rt);return tt?parseFloat(tt[1]):et}var ExtensionType=(rt=>(rt.Renderer="renderer",rt.Application="application",rt.RendererSystem="renderer-webgl-system",rt.RendererPlugin="renderer-webgl-plugin",rt.CanvasRendererSystem="renderer-canvas-system",rt.CanvasRendererPlugin="renderer-canvas-plugin",rt.Asset="asset",rt.LoadParser="load-parser",rt.ResolveParser="resolve-parser",rt.CacheParser="cache-parser",rt.DetectionParser="detection-parser",rt))(ExtensionType||{});const normalizeExtension=rt=>{if(typeof rt=="function"||typeof rt=="object"&&rt.extension){if(!rt.extension)throw new Error("Extension class must have an extension object");rt={...typeof rt.extension!="object"?{type:rt.extension}:rt.extension,ref:rt}}if(typeof rt=="object")rt={...rt};else throw new Error("Invalid extension type");return typeof rt.type=="string"&&(rt.type=[rt.type]),rt},normalizePriority=(rt,et)=>normalizeExtension(rt).priority??et,extensions$1={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...rt){return rt.map(normalizeExtension).forEach(et=>{et.type.forEach(tt=>{var nt,st;return(st=(nt=this._removeHandlers)[tt])==null?void 0:st.call(nt,et)})}),this},add(...rt){return rt.map(normalizeExtension).forEach(et=>{et.type.forEach(tt=>{var ot,ct;const nt=this._addHandlers,st=this._queue;nt[tt]?(ot=nt[tt])==null||ot.call(nt,et):(st[tt]=st[tt]||[],(ct=st[tt])==null||ct.push(et))})}),this},handle(rt,et,tt){var ct;const nt=this._addHandlers,st=this._removeHandlers;if(nt[rt]||st[rt])throw new Error(`Extension type ${rt} already has a handler`);nt[rt]=et,st[rt]=tt;const ot=this._queue;return ot[rt]&&((ct=ot[rt])==null||ct.forEach(dt=>et(dt)),delete ot[rt]),this},handleByMap(rt,et){return this.handle(rt,tt=>{tt.name&&(et[tt.name]=tt.ref)},tt=>{tt.name&&delete et[tt.name]})},handleByList(rt,et,tt=-1){return this.handle(rt,nt=>{et.includes(nt.ref)||(et.push(nt.ref),et.sort((st,ot)=>normalizePriority(ot,tt)-normalizePriority(st,tt)))},nt=>{const st=et.indexOf(nt.ref);st!==-1&&et.splice(st,1)})}};class ViewableBuffer{constructor(et){typeof et=="number"?this.rawBinaryData=new ArrayBuffer(et):et instanceof Uint8Array?this.rawBinaryData=et.buffer:this.rawBinaryData=et,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(et){return this[`${et}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(et){switch(et){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${et} isn't a valid view type`)}}}const fragTemplate$1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(rt){let et="";for(let tt=0;tt<rt;++tt)tt>0&&(et+=`
else `),tt<rt-1&&(et+=`if(test == ${tt}.0){}`);return et}function checkMaxIfStatementsInShader(rt,et){if(rt===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const tt=et.createShader(et.FRAGMENT_SHADER);for(;;){const nt=fragTemplate$1.replace(/%forloop%/gi,generateIfTestSrc(rt));if(et.shaderSource(tt,nt),et.compileShader(tt),!et.getShaderParameter(tt,et.COMPILE_STATUS))rt=rt/2|0;else break}return rt}const BLEND$1=0,OFFSET$1=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5;class State{constructor(){this.data=0,this.blendMode=BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<BLEND$1)}set blend(et){!!(this.data&1<<BLEND$1)!==et&&(this.data^=1<<BLEND$1)}get offsets(){return!!(this.data&1<<OFFSET$1)}set offsets(et){!!(this.data&1<<OFFSET$1)!==et&&(this.data^=1<<OFFSET$1)}get culling(){return!!(this.data&1<<CULLING$1)}set culling(et){!!(this.data&1<<CULLING$1)!==et&&(this.data^=1<<CULLING$1)}get depthTest(){return!!(this.data&1<<DEPTH_TEST$1)}set depthTest(et){!!(this.data&1<<DEPTH_TEST$1)!==et&&(this.data^=1<<DEPTH_TEST$1)}get depthMask(){return!!(this.data&1<<DEPTH_MASK$1)}set depthMask(et){!!(this.data&1<<DEPTH_MASK$1)!==et&&(this.data^=1<<DEPTH_MASK$1)}get clockwiseFrontFace(){return!!(this.data&1<<WINDING$1)}set clockwiseFrontFace(et){!!(this.data&1<<WINDING$1)!==et&&(this.data^=1<<WINDING$1)}get blendMode(){return this._blendMode}set blendMode(et){this.blend=et!==BLEND_MODES.NONE,this._blendMode=et}get polygonOffset(){return this._polygonOffset}set polygonOffset(et){this.offsets=!!et,this._polygonOffset=et}static for2d(){const et=new State;return et.depthTest=!1,et.blend=!0,et}}State.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const INSTALLED=[];function autoDetectResource(rt,et){if(!rt)return null;let tt="";if(typeof rt=="string"){const nt=/\.(\w{3,4})(?:$|\?|#)/i.exec(rt);nt&&(tt=nt[1].toLowerCase())}for(let nt=INSTALLED.length-1;nt>=0;--nt){const st=INSTALLED[nt];if(st.test&&st.test(rt,tt))return new st(rt,et)}throw new Error("Unrecognized source type to auto-detect Resource")}class Runner{constructor(et){this.items=[],this._name=et,this._aliasCount=0}emit(et,tt,nt,st,ot,ct,dt,ft){if(arguments.length>8)throw new Error("max arguments reached");const{name:gt,items:yt}=this;this._aliasCount++;for(let xt=0,St=yt.length;xt<St;xt++)yt[xt][gt](et,tt,nt,st,ot,ct,dt,ft);return yt===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(et){return et[this._name]&&(this.ensureNonAliasedItems(),this.remove(et),this.items.push(et)),this}remove(et){const tt=this.items.indexOf(et);return tt!==-1&&(this.ensureNonAliasedItems(),this.items.splice(tt,1)),this}contains(et){return this.items.includes(et)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Runner.prototype,{dispatch:{value:Runner.prototype.emit},run:{value:Runner.prototype.emit}});class Resource{constructor(et=0,tt=0){this._width=et,this._height=tt,this.destroyed=!1,this.internal=!1,this.onResize=new Runner("setRealSize"),this.onUpdate=new Runner("update"),this.onError=new Runner("onError")}bind(et){this.onResize.add(et),this.onUpdate.add(et),this.onError.add(et),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(et){this.onResize.remove(et),this.onUpdate.remove(et),this.onError.remove(et)}resize(et,tt){(et!==this._width||tt!==this._height)&&(this._width=et,this._height=tt,this.onResize.emit(et,tt))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(et,tt,nt){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(et,tt){return!1}}class BufferResource extends Resource{constructor(et,tt){const{width:nt,height:st}=tt||{};if(!nt||!st)throw new Error("BufferResource width or height invalid");super(nt,st),this.data=et,this.unpackAlignment=tt.unpackAlignment??4}upload(et,tt,nt){const st=et.gl;st.pixelStorei(st.UNPACK_ALIGNMENT,this.unpackAlignment),st.pixelStorei(st.UNPACK_PREMULTIPLY_ALPHA_WEBGL,tt.alphaMode===ALPHA_MODES.UNPACK);const ot=tt.realWidth,ct=tt.realHeight;return nt.width===ot&&nt.height===ct?st.texSubImage2D(tt.target,0,0,0,ot,ct,tt.format,nt.type,this.data):(nt.width=ot,nt.height=ct,st.texImage2D(tt.target,0,nt.internalFormat,ot,ct,0,tt.format,nt.type,this.data)),!0}dispose(){this.data=null}static test(et){return et===null||et instanceof Int8Array||et instanceof Uint8Array||et instanceof Uint8ClampedArray||et instanceof Int16Array||et instanceof Uint16Array||et instanceof Int32Array||et instanceof Uint32Array||et instanceof Float32Array}}const defaultBufferOptions={scaleMode:SCALE_MODES.NEAREST,alphaMode:ALPHA_MODES.NPM},_BaseTexture=class wc extends EventEmitter{constructor(et=null,tt=null){super(),tt=Object.assign({},wc.defaultOptions,tt);const{alphaMode:nt,mipmap:st,anisotropicLevel:ot,scaleMode:ct,width:dt,height:ft,wrapMode:gt,format:yt,type:xt,target:St,resolution:wt,resourceOptions:bt}=tt;et&&!(et instanceof Resource)&&(et=autoDetectResource(et,bt),et.internal=!0),this.resolution=wt||settings.RESOLUTION,this.width=Math.round((dt||0)*this.resolution)/this.resolution,this.height=Math.round((ft||0)*this.resolution)/this.resolution,this._mipmap=st,this.anisotropicLevel=ot,this._wrapMode=gt,this._scaleMode=ct,this.format=yt,this.type=xt,this.target=St,this.alphaMode=nt,this.uid=uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=dt>0&&ft>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(et)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(et){this._mipmap!==et&&(this._mipmap=et,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(et){this._scaleMode!==et&&(this._scaleMode=et,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(et){this._wrapMode!==et&&(this._wrapMode=et,this.dirtyStyleId++)}setStyle(et,tt){let nt;return et!==void 0&&et!==this.scaleMode&&(this.scaleMode=et,nt=!0),tt!==void 0&&tt!==this.mipmap&&(this.mipmap=tt,nt=!0),nt&&this.dirtyStyleId++,this}setSize(et,tt,nt){return nt=nt||this.resolution,this.setRealSize(et*nt,tt*nt,nt)}setRealSize(et,tt,nt){return this.resolution=nt||this.resolution,this.width=Math.round(et)/this.resolution,this.height=Math.round(tt)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)}setResolution(et){const tt=this.resolution;return tt===et?this:(this.resolution=et,this.valid&&(this.width=Math.round(this.width*tt)/et,this.height=Math.round(this.height*tt)/et,this.emit("update",this)),this._refreshPOT(),this)}setResource(et){if(this.resource===et)return this;if(this.resource)throw new Error("Resource can be set only once");return et.bind(this),this.resource=et,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(et){this.emit("error",this,et)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache[this.cacheId],delete TextureCache[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),wc.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(et,tt,nt=settings.STRICT_TEXTURE_CACHE){const st=typeof et=="string";let ot=null;if(st)ot=et;else{if(!et._pixiId){const dt=(tt==null?void 0:tt.pixiIdPrefix)||"pixiid";et._pixiId=`${dt}_${uid()}`}ot=et._pixiId}let ct=BaseTextureCache[ot];if(st&&nt&&!ct)throw new Error(`The cacheId "${ot}" does not exist in BaseTextureCache.`);return ct||(ct=new wc(et,tt),ct.cacheId=ot,wc.addToCache(ct,ot)),ct}static fromBuffer(et,tt,nt,st){et=et||new Float32Array(tt*nt*4);const ot=new BufferResource(et,{width:tt,height:nt,...st==null?void 0:st.resourceOptions});let ct,dt;return et instanceof Float32Array?(ct=FORMATS.RGBA,dt=TYPES.FLOAT):et instanceof Int32Array?(ct=FORMATS.RGBA_INTEGER,dt=TYPES.INT):et instanceof Uint32Array?(ct=FORMATS.RGBA_INTEGER,dt=TYPES.UNSIGNED_INT):et instanceof Int16Array?(ct=FORMATS.RGBA_INTEGER,dt=TYPES.SHORT):et instanceof Uint16Array?(ct=FORMATS.RGBA_INTEGER,dt=TYPES.UNSIGNED_SHORT):et instanceof Int8Array?(ct=FORMATS.RGBA,dt=TYPES.BYTE):(ct=FORMATS.RGBA,dt=TYPES.UNSIGNED_BYTE),ot.internal=!0,new wc(ot,Object.assign({},defaultBufferOptions,{type:dt,format:ct},st))}static addToCache(et,tt){tt&&(et.textureCacheIds.includes(tt)||et.textureCacheIds.push(tt),BaseTextureCache[tt]&&BaseTextureCache[tt]!==et&&console.warn(`BaseTexture added to the cache with an id [${tt}] that already had an entry`),BaseTextureCache[tt]=et)}static removeFromCache(et){if(typeof et=="string"){const tt=BaseTextureCache[et];if(tt){const nt=tt.textureCacheIds.indexOf(et);return nt>-1&&tt.textureCacheIds.splice(nt,1),delete BaseTextureCache[et],tt}}else if(et!=null&&et.textureCacheIds){for(let tt=0;tt<et.textureCacheIds.length;++tt)delete BaseTextureCache[et.textureCacheIds[tt]];return et.textureCacheIds.length=0,et}return null}};_BaseTexture.defaultOptions={mipmap:MIPMAP_MODES.POW2,anisotropicLevel:0,scaleMode:SCALE_MODES.LINEAR,wrapMode:WRAP_MODES.CLAMP,alphaMode:ALPHA_MODES.UNPACK,target:TARGETS.TEXTURE_2D,format:FORMATS.RGBA,type:TYPES.UNSIGNED_BYTE},_BaseTexture._globalBatch=0;let BaseTexture=_BaseTexture;class BatchDrawCall{constructor(){this.texArray=null,this.blend=0,this.type=DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null}}let UID$4=0;class Buffer{constructor(et,tt=!0,nt=!1){this.data=et||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=nt,this.static=tt,this.id=UID$4++,this.disposeRunner=new Runner("disposeBuffer")}update(et){et instanceof Array&&(et=new Float32Array(et)),this.data=et||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(et){this.type=et?BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE.ARRAY_BUFFER}get index(){return this.type===BUFFER_TYPE.ELEMENT_ARRAY_BUFFER}static from(et){return et instanceof Array&&(et=new Float32Array(et)),new Buffer(et)}}class Attribute{constructor(et,tt=0,nt=!1,st=TYPES.FLOAT,ot,ct,dt,ft=1){this.buffer=et,this.size=tt,this.normalized=nt,this.type=st,this.stride=ot,this.start=ct,this.instance=dt,this.divisor=ft}destroy(){this.buffer=null}static from(et,tt,nt,st,ot){return new Attribute(et,tt,nt,st,ot)}}const map$1={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(rt,et){let tt=0,nt=0;const st={};for(let ft=0;ft<rt.length;ft++)nt+=et[ft],tt+=rt[ft].length;const ot=new ArrayBuffer(tt*4);let ct=null,dt=0;for(let ft=0;ft<rt.length;ft++){const gt=et[ft],yt=rt[ft],xt=getBufferType(yt);st[xt]||(st[xt]=new map$1[xt](ot)),ct=st[xt];for(let St=0;St<yt.length;St++){const wt=(St/gt|0)*nt+dt,bt=St%gt;ct[wt+bt]=yt[St]}dt+=gt}return new Float32Array(ot)}const byteSizeMap$1={5126:4,5123:2,5121:1};let UID$3=0;const map={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Geometry{constructor(et=[],tt={}){this.buffers=et,this.indexBuffer=null,this.attributes=tt,this.glVertexArrayObjects={},this.id=UID$3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner("disposeGeometry"),this.refCount=0}addAttribute(et,tt,nt=0,st=!1,ot,ct,dt,ft=!1){if(!tt)throw new Error("You must pass a buffer when creating an attribute");tt instanceof Buffer||(tt instanceof Array&&(tt=new Float32Array(tt)),tt=new Buffer(tt));const gt=et.split("|");if(gt.length>1){for(let xt=0;xt<gt.length;xt++)this.addAttribute(gt[xt],tt,nt,st,ot);return this}let yt=this.buffers.indexOf(tt);return yt===-1&&(this.buffers.push(tt),yt=this.buffers.length-1),this.attributes[et]=new Attribute(yt,nt,st,ot,ct,dt,ft),this.instanced=this.instanced||ft,this}getAttribute(et){return this.attributes[et]}getBuffer(et){return this.buffers[this.getAttribute(et).buffer]}addIndex(et){return et instanceof Buffer||(et instanceof Array&&(et=new Uint16Array(et)),et=new Buffer(et)),et.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=et,this.buffers.includes(et)||this.buffers.push(et),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const et=[],tt=[],nt=new Buffer;let st;for(st in this.attributes){const ot=this.attributes[st],ct=this.buffers[ot.buffer];et.push(ct.data),tt.push(ot.size*byteSizeMap$1[ot.type]/4),ot.buffer=0}for(nt.data=interleaveTypedArrays(et,tt),st=0;st<this.buffers.length;st++)this.buffers[st]!==this.indexBuffer&&this.buffers[st].destroy();return this.buffers=[nt],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const et in this.attributes){const tt=this.attributes[et];return this.buffers[tt.buffer].data.length/(tt.stride/4||tt.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const et=new Geometry;for(let tt=0;tt<this.buffers.length;tt++)et.buffers[tt]=new Buffer(this.buffers[tt].data.slice(0));for(const tt in this.attributes){const nt=this.attributes[tt];et.attributes[tt]=new Attribute(nt.buffer,nt.size,nt.normalized,nt.type,nt.stride,nt.start,nt.instance)}return this.indexBuffer&&(et.indexBuffer=et.buffers[this.buffers.indexOf(this.indexBuffer)],et.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),et}static merge(et){const tt=new Geometry,nt=[],st=[],ot=[];let ct;for(let dt=0;dt<et.length;dt++){ct=et[dt];for(let ft=0;ft<ct.buffers.length;ft++)st[ft]=st[ft]||0,st[ft]+=ct.buffers[ft].data.length,ot[ft]=0}for(let dt=0;dt<ct.buffers.length;dt++)nt[dt]=new map[getBufferType(ct.buffers[dt].data)](st[dt]),tt.buffers[dt]=new Buffer(nt[dt]);for(let dt=0;dt<et.length;dt++){ct=et[dt];for(let ft=0;ft<ct.buffers.length;ft++)nt[ft].set(ct.buffers[ft].data,ot[ft]),ot[ft]+=ct.buffers[ft].data.length}if(tt.attributes=ct.attributes,ct.indexBuffer){tt.indexBuffer=tt.buffers[ct.buffers.indexOf(ct.indexBuffer)],tt.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;let dt=0,ft=0,gt=0,yt=0;for(let xt=0;xt<ct.buffers.length;xt++)if(ct.buffers[xt]!==ct.indexBuffer){yt=xt;break}for(const xt in ct.attributes){const St=ct.attributes[xt];(St.buffer|0)===yt&&(ft+=St.size*byteSizeMap$1[St.type]/4)}for(let xt=0;xt<et.length;xt++){const St=et[xt].indexBuffer.data;for(let wt=0;wt<St.length;wt++)tt.indexBuffer.data[wt+gt]+=dt;dt+=et[xt].buffers[yt].data.length/ft,gt+=St.length}}return tt}}class BatchGeometry extends Geometry{constructor(et=!1){super(),this._buffer=new Buffer(null,et,!1),this._indexBuffer=new Buffer(null,et,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aColor",this._buffer,4,!0,TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,TYPES.FLOAT).addIndex(this._indexBuffer)}}const PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180;var SHAPES=(rt=>(rt[rt.POLY=0]="POLY",rt[rt.RECT=1]="RECT",rt[rt.CIRC=2]="CIRC",rt[rt.ELIP=3]="ELIP",rt[rt.RREC=4]="RREC",rt))(SHAPES||{});class Point{constructor(et=0,tt=0){this.x=0,this.y=0,this.x=et,this.y=tt}clone(){return new Point(this.x,this.y)}copyFrom(et){return this.set(et.x,et.y),this}copyTo(et){return et.set(this.x,this.y),et}equals(et){return et.x===this.x&&et.y===this.y}set(et=0,tt=et){return this.x=et,this.y=tt,this}}Point.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const tempPoints$1=[new Point,new Point,new Point,new Point];class Rectangle{constructor(et=0,tt=0,nt=0,st=0){this.x=Number(et),this.y=Number(tt),this.width=Number(nt),this.height=Number(st),this.type=SHAPES.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Rectangle(0,0,0,0)}clone(){return new Rectangle(this.x,this.y,this.width,this.height)}copyFrom(et){return this.x=et.x,this.y=et.y,this.width=et.width,this.height=et.height,this}copyTo(et){return et.x=this.x,et.y=this.y,et.width=this.width,et.height=this.height,et}contains(et,tt){return this.width<=0||this.height<=0?!1:et>=this.x&&et<this.x+this.width&&tt>=this.y&&tt<this.y+this.height}intersects(et,tt){if(!tt){const Jt=this.x<et.x?et.x:this.x;if((this.right>et.right?et.right:this.right)<=Jt)return!1;const ur=this.y<et.y?et.y:this.y;return(this.bottom>et.bottom?et.bottom:this.bottom)>ur}const nt=this.left,st=this.right,ot=this.top,ct=this.bottom;if(st<=nt||ct<=ot)return!1;const dt=tempPoints$1[0].set(et.left,et.top),ft=tempPoints$1[1].set(et.left,et.bottom),gt=tempPoints$1[2].set(et.right,et.top),yt=tempPoints$1[3].set(et.right,et.bottom);if(gt.x<=dt.x||ft.y<=dt.y)return!1;const xt=Math.sign(tt.a*tt.d-tt.b*tt.c);if(xt===0||(tt.apply(dt,dt),tt.apply(ft,ft),tt.apply(gt,gt),tt.apply(yt,yt),Math.max(dt.x,ft.x,gt.x,yt.x)<=nt||Math.min(dt.x,ft.x,gt.x,yt.x)>=st||Math.max(dt.y,ft.y,gt.y,yt.y)<=ot||Math.min(dt.y,ft.y,gt.y,yt.y)>=ct))return!1;const St=xt*(ft.y-dt.y),wt=xt*(dt.x-ft.x),bt=St*nt+wt*ot,Pt=St*st+wt*ot,Rt=St*nt+wt*ct,Mt=St*st+wt*ct;if(Math.max(bt,Pt,Rt,Mt)<=St*dt.x+wt*dt.y||Math.min(bt,Pt,Rt,Mt)>=St*yt.x+wt*yt.y)return!1;const kt=xt*(dt.y-gt.y),Dt=xt*(gt.x-dt.x),zt=kt*nt+Dt*ot,Lt=kt*st+Dt*ot,Yt=kt*nt+Dt*ct,Nt=kt*st+Dt*ct;return!(Math.max(zt,Lt,Yt,Nt)<=kt*dt.x+Dt*dt.y||Math.min(zt,Lt,Yt,Nt)>=kt*yt.x+Dt*yt.y)}pad(et=0,tt=et){return this.x-=et,this.y-=tt,this.width+=et*2,this.height+=tt*2,this}fit(et){const tt=Math.max(this.x,et.x),nt=Math.min(this.x+this.width,et.x+et.width),st=Math.max(this.y,et.y),ot=Math.min(this.y+this.height,et.y+et.height);return this.x=tt,this.width=Math.max(nt-tt,0),this.y=st,this.height=Math.max(ot-st,0),this}ceil(et=1,tt=.001){const nt=Math.ceil((this.x+this.width-tt)*et)/et,st=Math.ceil((this.y+this.height-tt)*et)/et;return this.x=Math.floor((this.x+tt)*et)/et,this.y=Math.floor((this.y+tt)*et)/et,this.width=nt-this.x,this.height=st-this.y,this}enlarge(et){const tt=Math.min(this.x,et.x),nt=Math.max(this.x+this.width,et.x+et.width),st=Math.min(this.y,et.y),ot=Math.max(this.y+this.height,et.y+et.height);return this.x=tt,this.width=nt-tt,this.y=st,this.height=ot-st,this}}Rectangle.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Circle{constructor(et=0,tt=0,nt=0){this.x=et,this.y=tt,this.radius=nt,this.type=SHAPES.CIRC}clone(){return new Circle(this.x,this.y,this.radius)}contains(et,tt){if(this.radius<=0)return!1;const nt=this.radius*this.radius;let st=this.x-et,ot=this.y-tt;return st*=st,ot*=ot,st+ot<=nt}getBounds(){return new Rectangle(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Circle.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Ellipse{constructor(et=0,tt=0,nt=0,st=0){this.x=et,this.y=tt,this.width=nt,this.height=st,this.type=SHAPES.ELIP}clone(){return new Ellipse(this.x,this.y,this.width,this.height)}contains(et,tt){if(this.width<=0||this.height<=0)return!1;let nt=(et-this.x)/this.width,st=(tt-this.y)/this.height;return nt*=nt,st*=st,nt+st<=1}getBounds(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)}}Ellipse.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Polygon{constructor(...et){let tt=Array.isArray(et[0])?et[0]:et;if(typeof tt[0]!="number"){const nt=[];for(let st=0,ot=tt.length;st<ot;st++)nt.push(tt[st].x,tt[st].y);tt=nt}this.points=tt,this.type=SHAPES.POLY,this.closeStroke=!0}clone(){const et=this.points.slice(),tt=new Polygon(et);return tt.closeStroke=this.closeStroke,tt}contains(et,tt){let nt=!1;const st=this.points.length/2;for(let ot=0,ct=st-1;ot<st;ct=ot++){const dt=this.points[ot*2],ft=this.points[ot*2+1],gt=this.points[ct*2],yt=this.points[ct*2+1];ft>tt!=yt>tt&&et<(gt-dt)*((tt-ft)/(yt-ft))+dt&&(nt=!nt)}return nt}}Polygon.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((rt,et)=>`${rt}, ${et}`,"")}]`};class RoundedRectangle{constructor(et=0,tt=0,nt=0,st=0,ot=20){this.x=et,this.y=tt,this.width=nt,this.height=st,this.radius=ot,this.type=SHAPES.RREC}clone(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)}contains(et,tt){if(this.width<=0||this.height<=0)return!1;if(et>=this.x&&et<=this.x+this.width&&tt>=this.y&&tt<=this.y+this.height){const nt=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(tt>=this.y+nt&&tt<=this.y+this.height-nt||et>=this.x+nt&&et<=this.x+this.width-nt)return!0;let st=et-(this.x+nt),ot=tt-(this.y+nt);const ct=nt*nt;if(st*st+ot*ot<=ct||(st=et-(this.x+this.width-nt),st*st+ot*ot<=ct)||(ot=tt-(this.y+this.height-nt),st*st+ot*ot<=ct)||(st=et-(this.x+nt),st*st+ot*ot<=ct))return!0}return!1}}RoundedRectangle.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Matrix{constructor(et=1,tt=0,nt=0,st=1,ot=0,ct=0){this.array=null,this.a=et,this.b=tt,this.c=nt,this.d=st,this.tx=ot,this.ty=ct}fromArray(et){this.a=et[0],this.b=et[1],this.c=et[3],this.d=et[4],this.tx=et[2],this.ty=et[5]}set(et,tt,nt,st,ot,ct){return this.a=et,this.b=tt,this.c=nt,this.d=st,this.tx=ot,this.ty=ct,this}toArray(et,tt){this.array||(this.array=new Float32Array(9));const nt=tt||this.array;return et?(nt[0]=this.a,nt[1]=this.b,nt[2]=0,nt[3]=this.c,nt[4]=this.d,nt[5]=0,nt[6]=this.tx,nt[7]=this.ty,nt[8]=1):(nt[0]=this.a,nt[1]=this.c,nt[2]=this.tx,nt[3]=this.b,nt[4]=this.d,nt[5]=this.ty,nt[6]=0,nt[7]=0,nt[8]=1),nt}apply(et,tt){tt=tt||new Point;const nt=et.x,st=et.y;return tt.x=this.a*nt+this.c*st+this.tx,tt.y=this.b*nt+this.d*st+this.ty,tt}applyInverse(et,tt){tt=tt||new Point;const nt=1/(this.a*this.d+this.c*-this.b),st=et.x,ot=et.y;return tt.x=this.d*nt*st+-this.c*nt*ot+(this.ty*this.c-this.tx*this.d)*nt,tt.y=this.a*nt*ot+-this.b*nt*st+(-this.ty*this.a+this.tx*this.b)*nt,tt}translate(et,tt){return this.tx+=et,this.ty+=tt,this}scale(et,tt){return this.a*=et,this.d*=tt,this.c*=et,this.b*=tt,this.tx*=et,this.ty*=tt,this}rotate(et){const tt=Math.cos(et),nt=Math.sin(et),st=this.a,ot=this.c,ct=this.tx;return this.a=st*tt-this.b*nt,this.b=st*nt+this.b*tt,this.c=ot*tt-this.d*nt,this.d=ot*nt+this.d*tt,this.tx=ct*tt-this.ty*nt,this.ty=ct*nt+this.ty*tt,this}append(et){const tt=this.a,nt=this.b,st=this.c,ot=this.d;return this.a=et.a*tt+et.b*st,this.b=et.a*nt+et.b*ot,this.c=et.c*tt+et.d*st,this.d=et.c*nt+et.d*ot,this.tx=et.tx*tt+et.ty*st+this.tx,this.ty=et.tx*nt+et.ty*ot+this.ty,this}setTransform(et,tt,nt,st,ot,ct,dt,ft,gt){return this.a=Math.cos(dt+gt)*ot,this.b=Math.sin(dt+gt)*ot,this.c=-Math.sin(dt-ft)*ct,this.d=Math.cos(dt-ft)*ct,this.tx=et-(nt*this.a+st*this.c),this.ty=tt-(nt*this.b+st*this.d),this}prepend(et){const tt=this.tx;if(et.a!==1||et.b!==0||et.c!==0||et.d!==1){const nt=this.a,st=this.c;this.a=nt*et.a+this.b*et.c,this.b=nt*et.b+this.b*et.d,this.c=st*et.a+this.d*et.c,this.d=st*et.b+this.d*et.d}return this.tx=tt*et.a+this.ty*et.c+et.tx,this.ty=tt*et.b+this.ty*et.d+et.ty,this}decompose(et){const tt=this.a,nt=this.b,st=this.c,ot=this.d,ct=et.pivot,dt=-Math.atan2(-st,ot),ft=Math.atan2(nt,tt),gt=Math.abs(dt+ft);return gt<1e-5||Math.abs(PI_2-gt)<1e-5?(et.rotation=ft,et.skew.x=et.skew.y=0):(et.rotation=0,et.skew.x=dt,et.skew.y=ft),et.scale.x=Math.sqrt(tt*tt+nt*nt),et.scale.y=Math.sqrt(st*st+ot*ot),et.position.x=this.tx+(ct.x*tt+ct.y*st),et.position.y=this.ty+(ct.x*nt+ct.y*ot),et}invert(){const et=this.a,tt=this.b,nt=this.c,st=this.d,ot=this.tx,ct=et*st-tt*nt;return this.a=st/ct,this.b=-tt/ct,this.c=-nt/ct,this.d=et/ct,this.tx=(nt*this.ty-st*ot)/ct,this.ty=-(et*this.ty-tt*ot)/ct,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const et=new Matrix;return et.a=this.a,et.b=this.b,et.c=this.c,et.d=this.d,et.tx=this.tx,et.ty=this.ty,et}copyTo(et){return et.a=this.a,et.b=this.b,et.c=this.c,et.d=this.d,et.tx=this.tx,et.ty=this.ty,et}copyFrom(et){return this.a=et.a,this.b=et.b,this.c=et.c,this.d=et.d,this.tx=et.tx,this.ty=et.ty,this}static get IDENTITY(){return new Matrix}static get TEMP_MATRIX(){return new Matrix}}Matrix.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init(){for(let rt=0;rt<16;rt++){const et=[];rotationCayley.push(et);for(let tt=0;tt<16;tt++){const nt=signum(ux[rt]*ux[tt]+vx[rt]*uy[tt]),st=signum(uy[rt]*ux[tt]+vy[rt]*uy[tt]),ot=signum(ux[rt]*vx[tt]+vx[rt]*vy[tt]),ct=signum(uy[rt]*vx[tt]+vy[rt]*vy[tt]);for(let dt=0;dt<16;dt++)if(ux[dt]===nt&&uy[dt]===st&&vx[dt]===ot&&vy[dt]===ct){et.push(dt);break}}}for(let rt=0;rt<16;rt++){const et=new Matrix;et.set(ux[rt],uy[rt],vx[rt],vy[rt],0,0),rotationMatrices.push(et)}}init();const groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:rt=>ux[rt],uY:rt=>uy[rt],vX:rt=>vx[rt],vY:rt=>vy[rt],inv:rt=>rt&8?rt&15:-rt&7,add:(rt,et)=>rotationCayley[rt][et],sub:(rt,et)=>rotationCayley[rt][groupD8.inv(et)],rotate180:rt=>rt^4,isVertical:rt=>(rt&3)===2,byDirection:(rt,et)=>Math.abs(rt)*2<=Math.abs(et)?et>=0?groupD8.S:groupD8.N:Math.abs(et)*2<=Math.abs(rt)?rt>0?groupD8.E:groupD8.W:et>0?rt>0?groupD8.SE:groupD8.SW:rt>0?groupD8.NE:groupD8.NW,matrixAppendRotationInv:(rt,et,tt=0,nt=0)=>{const st=rotationMatrices[groupD8.inv(et)];st.tx=tt,st.ty=nt,rt.append(st)}};class ObservablePoint{constructor(et,tt,nt=0,st=0){this._x=nt,this._y=st,this.cb=et,this.scope=tt}clone(et=this.cb,tt=this.scope){return new ObservablePoint(et,tt,this._x,this._y)}set(et=0,tt=et){return(this._x!==et||this._y!==tt)&&(this._x=et,this._y=tt,this.cb.call(this.scope)),this}copyFrom(et){return(this._x!==et.x||this._y!==et.y)&&(this._x=et.x,this._y=et.y,this.cb.call(this.scope)),this}copyTo(et){return et.set(this._x,this._y),et}equals(et){return et.x===this._x&&et.y===this._y}get x(){return this._x}set x(et){this._x!==et&&(this._x=et,this.cb.call(this.scope))}get y(){return this._y}set y(et){this._y!==et&&(this._y=et,this.cb.call(this.scope))}}ObservablePoint.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const _Transform=class{constructor(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const rt=this.localTransform;this._localID!==this._currentLocalID&&(rt.a=this._cx*this.scale.x,rt.b=this._sx*this.scale.x,rt.c=this._cy*this.scale.y,rt.d=this._sy*this.scale.y,rt.tx=this.position.x-(this.pivot.x*rt.a+this.pivot.y*rt.c),rt.ty=this.position.y-(this.pivot.x*rt.b+this.pivot.y*rt.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(rt){const et=this.localTransform;if(this._localID!==this._currentLocalID&&(et.a=this._cx*this.scale.x,et.b=this._sx*this.scale.x,et.c=this._cy*this.scale.y,et.d=this._sy*this.scale.y,et.tx=this.position.x-(this.pivot.x*et.a+this.pivot.y*et.c),et.ty=this.position.y-(this.pivot.x*et.b+this.pivot.y*et.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==rt._worldID){const tt=rt.worldTransform,nt=this.worldTransform;nt.a=et.a*tt.a+et.b*tt.c,nt.b=et.a*tt.b+et.b*tt.d,nt.c=et.c*tt.a+et.d*tt.c,nt.d=et.c*tt.b+et.d*tt.d,nt.tx=et.tx*tt.a+et.ty*tt.c+tt.tx,nt.ty=et.tx*tt.b+et.ty*tt.d+tt.ty,this._parentID=rt._worldID,this._worldID++}}setFromMatrix(rt){rt.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(rt){this._rotation!==rt&&(this._rotation=rt,this.updateSkew())}};_Transform.IDENTITY=new _Transform;let Transform=_Transform;Transform.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var defaultFragment$2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function compileShader(rt,et,tt){const nt=rt.createShader(et);return rt.shaderSource(nt,tt),rt.compileShader(nt),nt}function booleanArray(rt){const et=new Array(rt);for(let tt=0;tt<et.length;tt++)et[tt]=!1;return et}function defaultValue(rt,et){switch(rt){case"float":return 0;case"vec2":return new Float32Array(2*et);case"vec3":return new Float32Array(3*et);case"vec4":return new Float32Array(4*et);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*et);case"ivec3":return new Int32Array(3*et);case"ivec4":return new Int32Array(4*et);case"uvec2":return new Uint32Array(2*et);case"uvec3":return new Uint32Array(3*et);case"uvec4":return new Uint32Array(4*et);case"bool":return!1;case"bvec2":return booleanArray(2*et);case"bvec3":return booleanArray(3*et);case"bvec4":return booleanArray(4*et);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const uniformParsers=[{test:rt=>rt.type==="float"&&rt.size===1&&!rt.isArray,code:rt=>`
            if(uv["${rt}"] !== ud["${rt}"].value)
            {
                ud["${rt}"].value = uv["${rt}"]
                gl.uniform1f(ud["${rt}"].location, uv["${rt}"])
            }
            `},{test:(rt,et)=>(rt.type==="sampler2D"||rt.type==="samplerCube"||rt.type==="sampler2DArray")&&rt.size===1&&!rt.isArray&&(et==null||et.castToBaseTexture!==void 0),code:rt=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${rt}"], t);

            if(ud["${rt}"].value !== t)
            {
                ud["${rt}"].value = t;
                gl.uniform1i(ud["${rt}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(rt,et)=>rt.type==="mat3"&&rt.size===1&&!rt.isArray&&et.a!==void 0,code:rt=>`
            gl.uniformMatrix3fv(ud["${rt}"].location, false, uv["${rt}"].toArray(true));
            `,codeUbo:rt=>`
                var ${rt}_matrix = uv.${rt}.toArray(true);

                data[offset] = ${rt}_matrix[0];
                data[offset+1] = ${rt}_matrix[1];
                data[offset+2] = ${rt}_matrix[2];
        
                data[offset + 4] = ${rt}_matrix[3];
                data[offset + 5] = ${rt}_matrix[4];
                data[offset + 6] = ${rt}_matrix[5];
        
                data[offset + 8] = ${rt}_matrix[6];
                data[offset + 9] = ${rt}_matrix[7];
                data[offset + 10] = ${rt}_matrix[8];
            `},{test:(rt,et)=>rt.type==="vec2"&&rt.size===1&&!rt.isArray&&et.x!==void 0,code:rt=>`
                cv = ud["${rt}"].value;
                v = uv["${rt}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${rt}"].location, v.x, v.y);
                }`,codeUbo:rt=>`
                v = uv.${rt};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:rt=>rt.type==="vec2"&&rt.size===1&&!rt.isArray,code:rt=>`
                cv = ud["${rt}"].value;
                v = uv["${rt}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${rt}"].location, v[0], v[1]);
                }
            `},{test:(rt,et)=>rt.type==="vec4"&&rt.size===1&&!rt.isArray&&et.width!==void 0,code:rt=>`
                cv = ud["${rt}"].value;
                v = uv["${rt}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${rt}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:rt=>`
                    v = uv.${rt};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(rt,et)=>rt.type==="vec4"&&rt.size===1&&!rt.isArray&&et.red!==void 0,code:rt=>`
                cv = ud["${rt}"].value;
                v = uv["${rt}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${rt}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:rt=>`
                    v = uv.${rt};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(rt,et)=>rt.type==="vec3"&&rt.size===1&&!rt.isArray&&et.red!==void 0,code:rt=>`
                cv = ud["${rt}"].value;
                v = uv["${rt}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${rt}"].location, v.red, v.green, v.blue)
                }`,codeUbo:rt=>`
                    v = uv.${rt};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:rt=>rt.type==="vec4"&&rt.size===1&&!rt.isArray,code:rt=>`
                cv = ud["${rt}"].value;
                v = uv["${rt}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${rt}"].location, v[0], v[1], v[2], v[3])
                }`}],GLSL_TO_SINGLE_SETTERS_CACHED={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},GLSL_TO_ARRAY_SETTERS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync(rt,et){var nt;const tt=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const st in rt.uniforms){const ot=et[st];if(!ot){((nt=rt.uniforms[st])==null?void 0:nt.group)===!0&&(rt.uniforms[st].ubo?tt.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${st}, '${st}');
                    `):tt.push(`
                        renderer.shader.syncUniformGroup(uv.${st}, syncData);
                    `));continue}const ct=rt.uniforms[st];let dt=!1;for(let ft=0;ft<uniformParsers.length;ft++)if(uniformParsers[ft].test(ot,ct)){tt.push(uniformParsers[ft].code(st,ct)),dt=!0;break}if(!dt){const ft=(ot.size===1&&!ot.isArray?GLSL_TO_SINGLE_SETTERS_CACHED:GLSL_TO_ARRAY_SETTERS)[ot.type].replace("location",`ud["${st}"].location`);tt.push(`
            cu = ud["${st}"];
            cv = cu.value;
            v = uv["${st}"];
            ${ft};`)}}return new Function("ud","uv","renderer","syncData",tt.join(`
`))}const unknownContext={};let context=unknownContext;function getTestContext(){if(context===unknownContext||context!=null&&context.isContextLost()){const rt=settings.ADAPTER.createCanvas();let et;settings.PREFER_ENV>=ENV.WEBGL2&&(et=rt.getContext("webgl2",{})),et||(et=rt.getContext("webgl",{})||rt.getContext("experimental-webgl",{}),et?et.getExtension("WEBGL_draw_buffers"):et=null),context=et}return context}let maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision=PRECISION.MEDIUM;const rt=getTestContext();if(rt&&rt.getShaderPrecisionFormat){const et=rt.getShaderPrecisionFormat(rt.FRAGMENT_SHADER,rt.HIGH_FLOAT);et&&(maxFragmentPrecision=et.precision?PRECISION.HIGH:PRECISION.MEDIUM)}}return maxFragmentPrecision}function logPrettyShaderError(rt,et){const tt=rt.getShaderSource(et).split(`
`).map((gt,yt)=>`${yt}: ${gt}`),nt=rt.getShaderInfoLog(et),st=nt.split(`
`),ot={},ct=st.map(gt=>parseFloat(gt.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(gt=>gt&&!ot[gt]?(ot[gt]=!0,!0):!1),dt=[""];ct.forEach(gt=>{tt[gt-1]=`%c${tt[gt-1]}%c`,dt.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const ft=tt.join(`
`);dt[0]=ft,console.error(nt),console.groupCollapsed("click to view full shader code"),console.warn(...dt),console.groupEnd()}function logProgramError(rt,et,tt,nt){rt.getProgramParameter(et,rt.LINK_STATUS)||(rt.getShaderParameter(tt,rt.COMPILE_STATUS)||logPrettyShaderError(rt,tt),rt.getShaderParameter(nt,rt.COMPILE_STATUS)||logPrettyShaderError(rt,nt),console.error("PixiJS Error: Could not initialize shader."),rt.getProgramInfoLog(et)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",rt.getProgramInfoLog(et)))}const GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(rt){return GLSL_TO_SIZE[rt]}let GL_TABLE=null;const GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(rt,et){if(!GL_TABLE){const tt=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(let nt=0;nt<tt.length;++nt){const st=tt[nt];GL_TABLE[rt[st]]=GL_TO_GLSL_TYPES[st]}}return GL_TABLE[et]}function setPrecision(rt,et,tt){if(rt.substring(0,9)!=="precision"){let nt=et;return et===PRECISION.HIGH&&tt!==PRECISION.HIGH&&(nt=PRECISION.MEDIUM),`precision ${nt} float;
${rt}`}else if(tt!==PRECISION.HIGH&&rt.substring(0,15)==="precision highp")return rt.replace("precision highp","precision mediump");return rt}let unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{unsafeEval=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}let UID$2=0;const nameCache={},_Program=class bc{constructor(et,tt,nt="pixi-shader",st={}){this.extra={},this.id=UID$2++,this.vertexSrc=et||bc.defaultVertexSrc,this.fragmentSrc=tt||bc.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=st,this.vertexSrc.substring(0,8)!=="#version"&&(nt=nt.replace(/\s+/g,"-"),nameCache[nt]?(nameCache[nt]++,nt+=`-${nameCache[nt]}`):nameCache[nt]=1,this.vertexSrc=`#define SHADER_NAME ${nt}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${nt}
${this.fragmentSrc}`,this.vertexSrc=setPrecision(this.vertexSrc,bc.defaultVertexPrecision,PRECISION.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,bc.defaultFragmentPrecision,getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return defaultVertex$3}static get defaultFragmentSrc(){return defaultFragment$2}static from(et,tt,nt){const st=et+tt;let ot=ProgramCache[st];return ot||(ProgramCache[st]=ot=new bc(et,tt,nt)),ot}};_Program.defaultVertexPrecision=PRECISION.HIGH,_Program.defaultFragmentPrecision=isMobile.apple.device?PRECISION.HIGH:PRECISION.MEDIUM;let Program=_Program,UID$1=0;class UniformGroup{constructor(et,tt,nt){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$1++,this.static=!!tt,this.ubo=!!nt,et instanceof Buffer?(this.buffer=et,this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=et,this.ubo&&(this.buffer=new Buffer(new Float32Array(1)),this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(et,tt,nt){if(!this.ubo)this.uniforms[et]=new UniformGroup(tt,nt);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(et,tt,nt){return new UniformGroup(et,tt,nt)}static uboFrom(et,tt){return new UniformGroup(et,tt??!0,!0)}}class Shader{constructor(et,tt){this.uniformBindCount=0,this.program=et,tt?tt instanceof UniformGroup?this.uniformGroup=tt:this.uniformGroup=new UniformGroup(tt):this.uniformGroup=new UniformGroup({}),this.disposeRunner=new Runner("disposeShader")}checkUniformExists(et,tt){if(tt.uniforms[et])return!0;for(const nt in tt.uniforms){const st=tt.uniforms[nt];if(st.group===!0&&this.checkUniformExists(et,st))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(et,tt,nt){const st=Program.from(et,tt);return new Shader(st,nt)}}class BatchShaderGenerator{constructor(et,tt){if(this.vertexSrc=et,this.fragTemplate=tt,this.programCache={},this.defaultGroupCache={},!tt.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!tt.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(et){if(!this.programCache[et]){const nt=new Int32Array(et);for(let ot=0;ot<et;ot++)nt[ot]=ot;this.defaultGroupCache[et]=UniformGroup.from({uSamplers:nt},!0);let st=this.fragTemplate;st=st.replace(/%count%/gi,`${et}`),st=st.replace(/%forloop%/gi,this.generateSampleSrc(et)),this.programCache[et]=new Program(this.vertexSrc,st)}const tt={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:this.defaultGroupCache[et]};return new Shader(this.programCache[et],tt)}generateSampleSrc(et){let tt="";tt+=`
`,tt+=`
`;for(let nt=0;nt<et;nt++)nt>0&&(tt+=`
else `),nt<et-1&&(tt+=`if(vTextureId < ${nt}.5)`),tt+=`
{`,tt+=`
	color = texture2D(uSamplers[${nt}], vTextureCoord);`,tt+=`
}`;return tt+=`
`,tt+=`
`,tt}}class BatchTextureArray{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let et=0;et<this.count;et++)this.elements[et]=null;this.count=0}}function canUploadSameBuffer(){return!isMobile.apple.device}function maxRecommendedTextures(rt){let et=!0;const tt=settings.ADAPTER.getNavigator();if(isMobile.tablet||isMobile.phone){if(isMobile.apple.device){const nt=tt.userAgent.match(/OS (\d+)_(\d+)?/);nt&&parseInt(nt[1],10)<11&&(et=!1)}if(isMobile.android.device){const nt=tt.userAgent.match(/Android\s([0-9.]*)/);nt&&parseInt(nt[1],10)<7&&(et=!1)}}return et?rt:4}class ObjectRenderer{constructor(et){this.renderer=et}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(et){}}var defaultFragment$1=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,defaultVertex$2=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const _BatchRenderer=class Ba extends ObjectRenderer{constructor(et){super(et),this.setShaderGenerator(),this.geometryClass=BatchGeometry,this.vertexSize=6,this.state=State.for2d(),this.size=Ba.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),et.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??maxRecommendedTextures(32),this._defaultMaxTextures}static set defaultMaxTextures(et){this._defaultMaxTextures=et}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??canUploadSameBuffer(),this._canUploadSameBuffer}static set canUploadSameBuffer(et){this._canUploadSameBuffer=et}get MAX_TEXTURES(){return deprecation("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return defaultVertex$2}static get defaultFragmentTemplate(){return defaultFragment$1}setShaderGenerator({vertex:et=Ba.defaultVertexSrc,fragment:tt=Ba.defaultFragmentTemplate}={}){this.shaderGenerator=new BatchShaderGenerator(et,tt)}contextChange(){const et=this.renderer.gl;settings.PREFER_ENV===ENV.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(et.getParameter(et.MAX_TEXTURE_IMAGE_UNITS),Ba.defaultMaxTextures),this.maxTextures=checkMaxIfStatementsInShader(this.maxTextures,et)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let tt=0;tt<this._packedGeometryPoolSize;tt++)this._packedGeometries[tt]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:et,_textureArrayPool:tt}=Ba,nt=this.size/4,st=Math.floor(nt/this.maxTextures)+1;for(;et.length<nt;)et.push(new BatchDrawCall);for(;tt.length<st;)tt.push(new BatchTextureArray);for(let ot=0;ot<this.maxTextures;ot++)this._tempBoundTextures[ot]=null}onPrerender(){this._flushId=0}render(et){et._texture.valid&&(this._vertexCount+et.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=et.vertexData.length/2,this._indexCount+=et.indices.length,this._bufferedTextures[this._bufferSize]=et._texture.baseTexture,this._bufferedElements[this._bufferSize++]=et)}buildTexturesAndDrawCalls(){const{_bufferedTextures:et,maxTextures:tt}=this,nt=Ba._textureArrayPool,st=this.renderer.batch,ot=this._tempBoundTextures,ct=this.renderer.textureGC.count;let dt=++BaseTexture._globalBatch,ft=0,gt=nt[0],yt=0;st.copyBoundTextures(ot,tt);for(let xt=0;xt<this._bufferSize;++xt){const St=et[xt];et[xt]=null,St._batchEnabled!==dt&&(gt.count>=tt&&(st.boundArray(gt,ot,dt,tt),this.buildDrawCalls(gt,yt,xt),yt=xt,gt=nt[++ft],++dt),St._batchEnabled=dt,St.touched=ct,gt.elements[gt.count++]=St)}gt.count>0&&(st.boundArray(gt,ot,dt,tt),this.buildDrawCalls(gt,yt,this._bufferSize),++ft,++dt);for(let xt=0;xt<ot.length;xt++)ot[xt]=null;BaseTexture._globalBatch=dt}buildDrawCalls(et,tt,nt){const{_bufferedElements:st,_attributeBuffer:ot,_indexBuffer:ct,vertexSize:dt}=this,ft=Ba._drawCallPool;let gt=this._dcIndex,yt=this._aIndex,xt=this._iIndex,St=ft[gt];St.start=this._iIndex,St.texArray=et;for(let wt=tt;wt<nt;++wt){const bt=st[wt],Pt=bt._texture.baseTexture,Rt=premultiplyBlendMode[Pt.alphaMode?1:0][bt.blendMode];st[wt]=null,tt<wt&&St.blend!==Rt&&(St.size=xt-St.start,tt=wt,St=ft[++gt],St.texArray=et,St.start=xt),this.packInterleavedGeometry(bt,ot,ct,yt,xt),yt+=bt.vertexData.length/2*dt,xt+=bt.indices.length,St.blend=Rt}tt<nt&&(St.size=xt-St.start,++gt),this._dcIndex=gt,this._aIndex=yt,this._iIndex=xt}bindAndClearTexArray(et){const tt=this.renderer.texture;for(let nt=0;nt<et.count;nt++)tt.bind(et.elements[nt],et.ids[nt]),et.elements[nt]=null;et.count=0}updateGeometry(){const{_packedGeometries:et,_attributeBuffer:tt,_indexBuffer:nt}=this;Ba.canUploadSameBuffer?(et[this._flushId]._buffer.update(tt.rawBinaryData),et[this._flushId]._indexBuffer.update(nt),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,et[this._flushId]=new this.geometryClass),et[this._flushId]._buffer.update(tt.rawBinaryData),et[this._flushId]._indexBuffer.update(nt),this.renderer.geometry.bind(et[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const et=this._dcIndex,{gl:tt,state:nt}=this.renderer,st=Ba._drawCallPool;let ot=null;for(let ct=0;ct<et;ct++){const{texArray:dt,type:ft,size:gt,start:yt,blend:xt}=st[ct];ot!==dt&&(ot=dt,this.bindAndClearTexArray(dt)),this.state.blendMode=xt,nt.set(this.state),tt.drawElements(ft,gt,tt.UNSIGNED_SHORT,yt*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Ba.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let et=0;et<this._packedGeometryPoolSize;et++)this._packedGeometries[et]&&this._packedGeometries[et].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(et){const tt=nextPow2(Math.ceil(et/8)),nt=log2(tt),st=tt*8;this._aBuffers.length<=nt&&(this._iBuffers.length=nt+1);let ot=this._aBuffers[st];return ot||(this._aBuffers[st]=ot=new ViewableBuffer(st*this.vertexSize*4)),ot}getIndexBuffer(et){const tt=nextPow2(Math.ceil(et/12)),nt=log2(tt),st=tt*12;this._iBuffers.length<=nt&&(this._iBuffers.length=nt+1);let ot=this._iBuffers[nt];return ot||(this._iBuffers[nt]=ot=new Uint16Array(st)),ot}packInterleavedGeometry(et,tt,nt,st,ot){const{uint32View:ct,float32View:dt}=tt,ft=st/this.vertexSize,gt=et.uvs,yt=et.indices,xt=et.vertexData,St=et._texture.baseTexture._batchLocation,wt=Math.min(et.worldAlpha,1),bt=Color.shared.setValue(et._tintRGB).toPremultiplied(wt,et._texture.baseTexture.alphaMode>0);for(let Pt=0;Pt<xt.length;Pt+=2)dt[st++]=xt[Pt],dt[st++]=xt[Pt+1],dt[st++]=gt[Pt],dt[st++]=gt[Pt+1],ct[st++]=bt,dt[st++]=St;for(let Pt=0;Pt<yt.length;Pt++)nt[ot++]=ft+yt[Pt]}};_BatchRenderer.defaultBatchSize=4096,_BatchRenderer.extension={name:"batch",type:ExtensionType.RendererPlugin},_BatchRenderer._drawCallPool=[],_BatchRenderer._textureArrayPool=[];let BatchRenderer=_BatchRenderer;extensions$1.add(BatchRenderer);var defaultFragment=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,defaultVertex$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const _Filter=class Rh extends Shader{constructor(et,tt,nt){const st=Program.from(et||Rh.defaultVertexSrc,tt||Rh.defaultFragmentSrc);super(st,nt),this.padding=0,this.resolution=Rh.defaultResolution,this.multisample=Rh.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new State}apply(et,tt,nt,st,ot){et.applyFilter(this,tt,nt,st)}get blendMode(){return this.state.blendMode}set blendMode(et){this.state.blendMode=et}get resolution(){return this._resolution}set resolution(et){this._resolution=et}static get defaultVertexSrc(){return defaultVertex$1}static get defaultFragmentSrc(){return defaultFragment}};_Filter.defaultResolution=1,_Filter.defaultMultisample=MSAA_QUALITY.NONE;let Filter=_Filter;class BackgroundSystem{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Color(0),this.alpha=1}init(et){this.clearBeforeRender=et.clearBeforeRender;const{backgroundColor:tt,background:nt,backgroundAlpha:st}=et,ot=nt??tt;ot!==void 0&&(this.color=ot),this.alpha=st}get color(){return this._backgroundColor.value}set color(et){this._backgroundColor.setValue(et)}get alpha(){return this._backgroundColor.alpha}set alpha(et){this._backgroundColor.setAlpha(et)}get backgroundColor(){return this._backgroundColor}destroy(){}}BackgroundSystem.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},BackgroundSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"background"};extensions$1.add(BackgroundSystem);class BatchSystem{constructor(et){this.renderer=et,this.emptyRenderer=new ObjectRenderer(et),this.currentRenderer=this.emptyRenderer}setObjectRenderer(et){this.currentRenderer!==et&&(this.currentRenderer.stop(),this.currentRenderer=et,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(et,tt){const{boundTextures:nt}=this.renderer.texture;for(let st=tt-1;st>=0;--st)et[st]=nt[st]||null,et[st]&&(et[st]._batchLocation=st)}boundArray(et,tt,nt,st){const{elements:ot,ids:ct,count:dt}=et;let ft=0;for(let gt=0;gt<dt;gt++){const yt=ot[gt],xt=yt._batchLocation;if(xt>=0&&xt<st&&tt[xt]===yt){ct[gt]=xt;continue}for(;ft<st;){const St=tt[ft];if(St&&St._batchEnabled===nt&&St._batchLocation===ft){ft++;continue}ct[gt]=ft,yt._batchLocation=ft,tt[ft]=yt;break}}}destroy(){this.renderer=null}}BatchSystem.extension={type:ExtensionType.RendererSystem,name:"batch"};extensions$1.add(BatchSystem);let CONTEXT_UID_COUNTER=0;class ContextSystem{constructor(et){this.renderer=et,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(et){this.gl=et,this.renderer.gl=et,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++}init(et){if(et.context)this.initFromContext(et.context);else{const tt=this.renderer.background.alpha<1,nt=et.premultipliedAlpha;this.preserveDrawingBuffer=et.preserveDrawingBuffer,this.useContextAlpha=et.useContextAlpha,this.powerPreference=et.powerPreference,this.initFromOptions({alpha:tt,premultipliedAlpha:nt,antialias:et.antialias,stencil:!0,preserveDrawingBuffer:et.preserveDrawingBuffer,powerPreference:et.powerPreference})}}initFromContext(et){this.gl=et,this.validateContext(et),this.renderer.gl=et,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,this.renderer.runners.contextChange.emit(et);const tt=this.renderer.view;tt.addEventListener!==void 0&&(tt.addEventListener("webglcontextlost",this.handleContextLost,!1),tt.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(et){const tt=this.createContext(this.renderer.view,et);this.initFromContext(tt)}createContext(et,tt){let nt;if(settings.PREFER_ENV>=ENV.WEBGL2&&(nt=et.getContext("webgl2",tt)),nt)this.webGLVersion=2;else if(this.webGLVersion=1,nt=et.getContext("webgl",tt)||et.getContext("experimental-webgl",tt),!nt)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=nt,this.getExtensions(),this.gl}getExtensions(){const{gl:et}=this,tt={loseContext:et.getExtension("WEBGL_lose_context"),anisotropicFiltering:et.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:et.getExtension("OES_texture_float_linear"),s3tc:et.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:et.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:et.getExtension("WEBGL_compressed_texture_etc"),etc1:et.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:et.getExtension("WEBGL_compressed_texture_pvrtc")||et.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:et.getExtension("WEBGL_compressed_texture_atc"),astc:et.getExtension("WEBGL_compressed_texture_astc"),bptc:et.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,tt,{drawBuffers:et.getExtension("WEBGL_draw_buffers"),depthTexture:et.getExtension("WEBGL_depth_texture"),vertexArrayObject:et.getExtension("OES_vertex_array_object")||et.getExtension("MOZ_OES_vertex_array_object")||et.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:et.getExtension("OES_element_index_uint"),floatTexture:et.getExtension("OES_texture_float"),floatTextureLinear:et.getExtension("OES_texture_float_linear"),textureHalfFloat:et.getExtension("OES_texture_half_float"),textureHalfFloatLinear:et.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,tt,{colorBufferFloat:et.getExtension("EXT_color_buffer_float")})}handleContextLost(et){et.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const et=this.renderer.view;this.renderer=null,et.removeEventListener!==void 0&&(et.removeEventListener("webglcontextlost",this.handleContextLost),et.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(et){const tt=et.getContextAttributes(),nt="WebGL2RenderingContext"in globalThis&&et instanceof globalThis.WebGL2RenderingContext;nt&&(this.webGLVersion=2),tt&&!tt.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const st=nt||!!et.getExtension("OES_element_index_uint");this.supports.uint32Indices=st,st||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}ContextSystem.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},ContextSystem.extension={type:ExtensionType.RendererSystem,name:"context"};extensions$1.add(ContextSystem);class Framebuffer{constructor(et,tt){if(this.width=Math.round(et),this.height=Math.round(tt),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner("disposeFramebuffer"),this.multisample=MSAA_QUALITY.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(et=0,tt){return this.colorTextures[et]=tt||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,mipmap:MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(et){return this.depthTexture=et||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES.OFF,format:FORMATS.DEPTH_COMPONENT,type:TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(et,tt){if(et=Math.round(et),tt=Math.round(tt),!et||!tt)throw new Error("Framebuffer width and height must not be zero");if(!(et===this.width&&tt===this.height)){this.width=et,this.height=tt,this.dirtyId++,this.dirtySize++;for(let nt=0;nt<this.colorTextures.length;nt++){const st=this.colorTextures[nt],ot=st.resolution;st.setSize(et/ot,tt/ot)}if(this.depthTexture){const nt=this.depthTexture.resolution;this.depthTexture.setSize(et/nt,tt/nt)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class BaseRenderTexture extends BaseTexture{constructor(et={}){if(typeof et=="number"){const tt=arguments[0],nt=arguments[1],st=arguments[2],ot=arguments[3];et={width:tt,height:nt,scaleMode:st,resolution:ot}}et.width=et.width??100,et.height=et.height??100,et.multisample??(et.multisample=MSAA_QUALITY.NONE),super(null,et),this.mipmap=MIPMAP_MODES.OFF,this.valid=!0,this._clear=new Color([0,0,0,0]),this.framebuffer=new Framebuffer(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=et.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(et){this._clear.setValue(et)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(et){this.framebuffer.multisample=et}resize(et,tt){this.framebuffer.resize(et*this.resolution,tt*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class BaseImageResource extends Resource{constructor(et){const tt=et,nt=tt.naturalWidth||tt.videoWidth||tt.displayWidth||tt.width,st=tt.naturalHeight||tt.videoHeight||tt.displayHeight||tt.height;super(nt,st),this.source=et,this.noSubImage=!1}static crossOrigin(et,tt,nt){nt===void 0&&!tt.startsWith("data:")?et.crossOrigin=determineCrossOrigin(tt):nt!==!1&&(et.crossOrigin=typeof nt=="string"?nt:"anonymous")}upload(et,tt,nt,st){const ot=et.gl,ct=tt.realWidth,dt=tt.realHeight;if(st=st||this.source,typeof HTMLImageElement<"u"&&st instanceof HTMLImageElement){if(!st.complete||st.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&st instanceof HTMLVideoElement&&st.readyState<=1)return!1;return ot.pixelStorei(ot.UNPACK_PREMULTIPLY_ALPHA_WEBGL,tt.alphaMode===ALPHA_MODES.UNPACK),!this.noSubImage&&tt.target===ot.TEXTURE_2D&&nt.width===ct&&nt.height===dt?ot.texSubImage2D(ot.TEXTURE_2D,0,0,0,tt.format,nt.type,st):(nt.width=ct,nt.height=dt,ot.texImage2D(tt.target,0,nt.internalFormat,tt.format,nt.type,st)),!0}update(){if(this.destroyed)return;const et=this.source,tt=et.naturalWidth||et.videoWidth||et.width,nt=et.naturalHeight||et.videoHeight||et.height;this.resize(tt,nt),super.update()}dispose(){this.source=null}}class ImageResource extends BaseImageResource{constructor(et,tt){if(tt=tt||{},typeof et=="string"){const nt=new Image;BaseImageResource.crossOrigin(nt,et,tt.crossorigin),nt.src=et,et=nt}super(et),!et.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=et.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(tt.createBitmap??settings.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof tt.alphaMode=="number"?tt.alphaMode:null,this.bitmap=null,this._load=null,tt.autoLoad!==!1&&this.load()}load(et){return this._load?this._load:(et!==void 0&&(this.createBitmap=et),this._load=new Promise((tt,nt)=>{const st=this.source;this.url=st.src;const ot=()=>{this.destroyed||(st.onload=null,st.onerror=null,this.update(),this._load=null,this.createBitmap?tt(this.process()):tt(this))};st.complete&&st.src?ot():(st.onload=ot,st.onerror=ct=>{nt(ct),this.onError.emit(ct)})}),this._load)}process(){const et=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const tt=globalThis.createImageBitmap,nt=!et.crossOrigin||et.crossOrigin==="anonymous";return this._process=fetch(et.src,{mode:nt?"cors":"no-cors"}).then(st=>st.blob()).then(st=>tt(st,0,0,et.width,et.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"})).then(st=>this.destroyed?Promise.reject():(this.bitmap=st,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(et,tt,nt){if(typeof this.alphaMode=="number"&&(tt.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(et,tt,nt);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(et,tt,nt,this.bitmap),!this.preserveBitmap){let st=!0;const ot=tt._glTextures;for(const ct in ot){const dt=ot[ct];if(dt!==nt&&dt.dirtyId!==tt.dirtyId){st=!1;break}}st&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(et){return typeof HTMLImageElement<"u"&&(typeof et=="string"||et instanceof HTMLImageElement)}}class TextureUvs{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(et,tt,nt){const st=tt.width,ot=tt.height;if(nt){const ct=et.width/2/st,dt=et.height/2/ot,ft=et.x/st+ct,gt=et.y/ot+dt;nt=groupD8.add(nt,groupD8.NW),this.x0=ft+ct*groupD8.uX(nt),this.y0=gt+dt*groupD8.uY(nt),nt=groupD8.add(nt,2),this.x1=ft+ct*groupD8.uX(nt),this.y1=gt+dt*groupD8.uY(nt),nt=groupD8.add(nt,2),this.x2=ft+ct*groupD8.uX(nt),this.y2=gt+dt*groupD8.uY(nt),nt=groupD8.add(nt,2),this.x3=ft+ct*groupD8.uX(nt),this.y3=gt+dt*groupD8.uY(nt)}else this.x0=et.x/st,this.y0=et.y/ot,this.x1=(et.x+et.width)/st,this.y1=et.y/ot,this.x2=(et.x+et.width)/st,this.y2=(et.y+et.height)/ot,this.x3=et.x/st,this.y3=(et.y+et.height)/ot;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}TextureUvs.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const DEFAULT_UVS=new TextureUvs;function removeAllHandlers(rt){rt.destroy=function(){},rt.on=function(){},rt.once=function(){},rt.emit=function(){}}class Texture extends EventEmitter{constructor(et,tt,nt,st,ot,ct,dt){if(super(),this.noFrame=!1,tt||(this.noFrame=!0,tt=new Rectangle(0,0,1,1)),et instanceof Texture&&(et=et.baseTexture),this.baseTexture=et,this._frame=tt,this.trim=st,this.valid=!1,this.destroyed=!1,this._uvs=DEFAULT_UVS,this.uvMatrix=null,this.orig=nt||tt,this._rotate=Number(ot||0),ot===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=ct?new Point(ct.x,ct.y):new Point(0,0),this.defaultBorders=dt,this._updateID=0,this.textureCacheIds=[],et.valid?this.noFrame?et.valid&&this.onBaseTextureUpdated(et):this.frame=tt:et.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&et.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(et){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=et.width,this._frame.height=et.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(et){if(this.baseTexture){if(et){const{resource:tt}=this.baseTexture;tt!=null&&tt.url&&TextureCache[tt.url]&&Texture.removeFromCache(tt.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var st;const et=this._frame.clone(),tt=this._frame===this.orig?et:this.orig.clone(),nt=new Texture(this.baseTexture,!this.noFrame&&et,tt,(st=this.trim)==null?void 0:st.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(nt._frame=et),nt}updateUvs(){this._uvs===DEFAULT_UVS&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(et,tt={},nt=settings.STRICT_TEXTURE_CACHE){const st=typeof et=="string";let ot=null;if(st)ot=et;else if(et instanceof BaseTexture){if(!et.cacheId){const dt=(tt==null?void 0:tt.pixiIdPrefix)||"pixiid";et.cacheId=`${dt}-${uid()}`,BaseTexture.addToCache(et,et.cacheId)}ot=et.cacheId}else{if(!et._pixiId){const dt=(tt==null?void 0:tt.pixiIdPrefix)||"pixiid";et._pixiId=`${dt}_${uid()}`}ot=et._pixiId}let ct=TextureCache[ot];if(st&&nt&&!ct)throw new Error(`The cacheId "${ot}" does not exist in TextureCache.`);return!ct&&!(et instanceof BaseTexture)?(tt.resolution||(tt.resolution=getResolutionOfUrl(et)),ct=new Texture(new BaseTexture(et,tt)),ct.baseTexture.cacheId=ot,BaseTexture.addToCache(ct.baseTexture,ot),Texture.addToCache(ct,ot)):!ct&&et instanceof BaseTexture&&(ct=new Texture(et),Texture.addToCache(ct,ot)),ct}static fromURL(et,tt){const nt=Object.assign({autoLoad:!1},tt==null?void 0:tt.resourceOptions),st=Texture.from(et,Object.assign({resourceOptions:nt},tt),!1),ot=st.baseTexture.resource;return st.baseTexture.valid?Promise.resolve(st):ot.load().then(()=>Promise.resolve(st))}static fromBuffer(et,tt,nt,st){return new Texture(BaseTexture.fromBuffer(et,tt,nt,st))}static fromLoader(et,tt,nt,st){const ot=new BaseTexture(et,Object.assign({scaleMode:BaseTexture.defaultOptions.scaleMode,resolution:getResolutionOfUrl(tt)},st)),{resource:ct}=ot;ct instanceof ImageResource&&(ct.url=tt);const dt=new Texture(ot);return nt||(nt=tt),BaseTexture.addToCache(dt.baseTexture,nt),Texture.addToCache(dt,nt),nt!==tt&&(BaseTexture.addToCache(dt.baseTexture,tt),Texture.addToCache(dt,tt)),dt.baseTexture.valid?Promise.resolve(dt):new Promise(ft=>{dt.baseTexture.once("loaded",()=>ft(dt))})}static addToCache(et,tt){tt&&(et.textureCacheIds.includes(tt)||et.textureCacheIds.push(tt),TextureCache[tt]&&TextureCache[tt]!==et&&console.warn(`Texture added to the cache with an id [${tt}] that already had an entry`),TextureCache[tt]=et)}static removeFromCache(et){if(typeof et=="string"){const tt=TextureCache[et];if(tt){const nt=tt.textureCacheIds.indexOf(et);return nt>-1&&tt.textureCacheIds.splice(nt,1),delete TextureCache[et],tt}}else if(et!=null&&et.textureCacheIds){for(let tt=0;tt<et.textureCacheIds.length;++tt)TextureCache[et.textureCacheIds[tt]]===et&&delete TextureCache[et.textureCacheIds[tt]];return et.textureCacheIds.length=0,et}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(et){this._frame=et,this.noFrame=!1;const{x:tt,y:nt,width:st,height:ot}=et,ct=tt+st>this.baseTexture.width,dt=nt+ot>this.baseTexture.height;if(ct||dt){const ft=ct&&dt?"and":"or",gt=`X: ${tt} + ${st} = ${tt+st} > ${this.baseTexture.width}`,yt=`Y: ${nt} + ${ot} = ${nt+ot} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${gt} ${ft} ${yt}`)}this.valid=st&&ot&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=et),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(et){this._rotate=et,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Texture._EMPTY||(Texture._EMPTY=new Texture(new BaseTexture),removeAllHandlers(Texture._EMPTY),removeAllHandlers(Texture._EMPTY.baseTexture)),Texture._EMPTY}static get WHITE(){if(!Texture._WHITE){const et=settings.ADAPTER.createCanvas(16,16),tt=et.getContext("2d");et.width=16,et.height=16,tt.fillStyle="white",tt.fillRect(0,0,16,16),Texture._WHITE=new Texture(BaseTexture.from(et)),removeAllHandlers(Texture._WHITE),removeAllHandlers(Texture._WHITE.baseTexture)}return Texture._WHITE}}class RenderTexture extends Texture{constructor(et,tt){super(et,tt),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(et){this.framebuffer.multisample=et}resize(et,tt,nt=!0){const st=this.baseTexture.resolution,ot=Math.round(et*st)/st,ct=Math.round(tt*st)/st;this.valid=ot>0&&ct>0,this._frame.width=this.orig.width=ot,this._frame.height=this.orig.height=ct,nt&&this.baseTexture.resize(ot,ct),this.updateUvs()}setResolution(et){const{baseTexture:tt}=this;tt.resolution!==et&&(tt.setResolution(et),this.resize(tt.width,tt.height,!1))}static create(et){return new RenderTexture(new BaseRenderTexture(et))}}class RenderTexturePool{constructor(et){this.texturePool={},this.textureOptions=et||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(et,tt,nt=MSAA_QUALITY.NONE){const st=new BaseRenderTexture(Object.assign({width:et,height:tt,resolution:1,multisample:nt},this.textureOptions));return new RenderTexture(st)}getOptimalTexture(et,tt,nt=1,st=MSAA_QUALITY.NONE){let ot;et=Math.max(Math.ceil(et*nt-1e-6),1),tt=Math.max(Math.ceil(tt*nt-1e-6),1),!this.enableFullScreen||et!==this._pixelsWidth||tt!==this._pixelsHeight?(et=nextPow2(et),tt=nextPow2(tt),ot=((et&65535)<<16|tt&65535)>>>0,st>1&&(ot+=st*4294967296)):ot=st>1?-st:-1,this.texturePool[ot]||(this.texturePool[ot]=[]);let ct=this.texturePool[ot].pop();return ct||(ct=this.createTexture(et,tt,st)),ct.filterPoolKey=ot,ct.setResolution(nt),ct}getFilterTexture(et,tt,nt){const st=this.getOptimalTexture(et.width,et.height,tt||et.resolution,nt||MSAA_QUALITY.NONE);return st.filterFrame=et.filterFrame,st}returnTexture(et){const tt=et.filterPoolKey;et.filterFrame=null,this.texturePool[tt].push(et)}returnFilterTexture(et){this.returnTexture(et)}clear(et){if(et=et!==!1,et)for(const tt in this.texturePool){const nt=this.texturePool[tt];if(nt)for(let st=0;st<nt.length;st++)nt[st].destroy(!0)}this.texturePool={}}setScreenSize(et){if(!(et.width===this._pixelsWidth&&et.height===this._pixelsHeight)){this.enableFullScreen=et.width>0&&et.height>0;for(const tt in this.texturePool){if(!(Number(tt)<0))continue;const nt=this.texturePool[tt];if(nt)for(let st=0;st<nt.length;st++)nt[st].destroy(!0);this.texturePool[tt]=[]}this._pixelsWidth=et.width,this._pixelsHeight=et.height}}}RenderTexturePool.SCREEN_KEY=-1;class Quad extends Geometry{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class QuadUv extends Geometry{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Buffer(this.vertices),this.uvBuffer=new Buffer(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(et,tt){let nt=0,st=0;return this.uvs[0]=nt,this.uvs[1]=st,this.uvs[2]=nt+tt.width/et.width,this.uvs[3]=st,this.uvs[4]=nt+tt.width/et.width,this.uvs[5]=st+tt.height/et.height,this.uvs[6]=nt,this.uvs[7]=st+tt.height/et.height,nt=tt.x,st=tt.y,this.vertices[0]=nt,this.vertices[1]=st,this.vertices[2]=nt+tt.width,this.vertices[3]=st,this.vertices[4]=nt+tt.width,this.vertices[5]=st+tt.height,this.vertices[6]=nt,this.vertices[7]=st+tt.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class FilterState{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY.NONE,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.bindingSourceFrame=new Rectangle,this.bindingDestinationFrame=new Rectangle,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const tempPoints=[new Point,new Point,new Point,new Point],tempMatrix$2=new Matrix;class FilterSystem{constructor(et){this.renderer=et,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new Rectangle,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(et,tt){const nt=this.renderer,st=this.defaultFilterStack,ot=this.statePool.pop()||new FilterState,ct=nt.renderTexture;let dt,ft;if(ct.current){const Rt=ct.current;dt=Rt.resolution,ft=Rt.multisample}else dt=nt.resolution,ft=nt.multisample;let gt=tt[0].resolution||dt,yt=tt[0].multisample??ft,xt=tt[0].padding,St=tt[0].autoFit,wt=tt[0].legacy??!0;for(let Rt=1;Rt<tt.length;Rt++){const Mt=tt[Rt];gt=Math.min(gt,Mt.resolution||dt),yt=Math.min(yt,Mt.multisample??ft),xt=this.useMaxPadding?Math.max(xt,Mt.padding):xt+Mt.padding,St=St&&Mt.autoFit,wt=wt||(Mt.legacy??!0)}st.length===1&&(this.defaultFilterStack[0].renderTexture=ct.current),st.push(ot),ot.resolution=gt,ot.multisample=yt,ot.legacy=wt,ot.target=et,ot.sourceFrame.copyFrom(et.filterArea||et.getBounds(!0)),ot.sourceFrame.pad(xt);const bt=this.tempRect.copyFrom(ct.sourceFrame);nt.projection.transform&&this.transformAABB(tempMatrix$2.copyFrom(nt.projection.transform).invert(),bt),St?(ot.sourceFrame.fit(bt),(ot.sourceFrame.width<=0||ot.sourceFrame.height<=0)&&(ot.sourceFrame.width=0,ot.sourceFrame.height=0)):ot.sourceFrame.intersects(bt)||(ot.sourceFrame.width=0,ot.sourceFrame.height=0),this.roundFrame(ot.sourceFrame,ct.current?ct.current.resolution:nt.resolution,ct.sourceFrame,ct.destinationFrame,nt.projection.transform),ot.renderTexture=this.getOptimalFilterTexture(ot.sourceFrame.width,ot.sourceFrame.height,gt,yt),ot.filters=tt,ot.destinationFrame.width=ot.renderTexture.width,ot.destinationFrame.height=ot.renderTexture.height;const Pt=this.tempRect;Pt.x=0,Pt.y=0,Pt.width=ot.sourceFrame.width,Pt.height=ot.sourceFrame.height,ot.renderTexture.filterFrame=ot.sourceFrame,ot.bindingSourceFrame.copyFrom(ct.sourceFrame),ot.bindingDestinationFrame.copyFrom(ct.destinationFrame),ot.transform=nt.projection.transform,nt.projection.transform=null,ct.bind(ot.renderTexture,ot.sourceFrame,Pt),nt.framebuffer.clear(0,0,0,0)}pop(){const et=this.defaultFilterStack,tt=et.pop(),nt=tt.filters;this.activeState=tt;const st=this.globalUniforms.uniforms;st.outputFrame=tt.sourceFrame,st.resolution=tt.resolution;const ot=st.inputSize,ct=st.inputPixel,dt=st.inputClamp;if(ot[0]=tt.destinationFrame.width,ot[1]=tt.destinationFrame.height,ot[2]=1/ot[0],ot[3]=1/ot[1],ct[0]=Math.round(ot[0]*tt.resolution),ct[1]=Math.round(ot[1]*tt.resolution),ct[2]=1/ct[0],ct[3]=1/ct[1],dt[0]=.5*ct[2],dt[1]=.5*ct[3],dt[2]=tt.sourceFrame.width*ot[2]-.5*ct[2],dt[3]=tt.sourceFrame.height*ot[3]-.5*ct[3],tt.legacy){const gt=st.filterArea;gt[0]=tt.destinationFrame.width,gt[1]=tt.destinationFrame.height,gt[2]=tt.sourceFrame.x,gt[3]=tt.sourceFrame.y,st.filterClamp=st.inputClamp}this.globalUniforms.update();const ft=et[et.length-1];if(this.renderer.framebuffer.blit(),nt.length===1)nt[0].apply(this,tt.renderTexture,ft.renderTexture,CLEAR_MODES.BLEND,tt),this.returnFilterTexture(tt.renderTexture);else{let gt=tt.renderTexture,yt=this.getOptimalFilterTexture(gt.width,gt.height,tt.resolution);yt.filterFrame=gt.filterFrame;let xt=0;for(xt=0;xt<nt.length-1;++xt){xt===1&&tt.multisample>1&&(yt=this.getOptimalFilterTexture(gt.width,gt.height,tt.resolution),yt.filterFrame=gt.filterFrame),nt[xt].apply(this,gt,yt,CLEAR_MODES.CLEAR,tt);const St=gt;gt=yt,yt=St}nt[xt].apply(this,gt,ft.renderTexture,CLEAR_MODES.BLEND,tt),xt>1&&tt.multisample>1&&this.returnFilterTexture(tt.renderTexture),this.returnFilterTexture(gt),this.returnFilterTexture(yt)}tt.clear(),this.statePool.push(tt)}bindAndClear(et,tt=CLEAR_MODES.CLEAR){const{renderTexture:nt,state:st}=this.renderer;if(et===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,et==null?void 0:et.filterFrame){const ct=this.tempRect;ct.x=0,ct.y=0,ct.width=et.filterFrame.width,ct.height=et.filterFrame.height,nt.bind(et,et.filterFrame,ct)}else et!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?nt.bind(et):this.renderer.renderTexture.bind(et,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const ot=st.stateId&1||this.forceClear;(tt===CLEAR_MODES.CLEAR||tt===CLEAR_MODES.BLIT&&ot)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(et,tt,nt,st){const ot=this.renderer;ot.state.set(et.state),this.bindAndClear(nt,st),et.uniforms.uSampler=tt,et.uniforms.filterGlobals=this.globalUniforms,ot.shader.bind(et),et.legacy=!!et.program.attributeData.aTextureCoord,et.legacy?(this.quadUv.map(tt._frame,tt.filterFrame),ot.geometry.bind(this.quadUv),ot.geometry.draw(DRAW_MODES.TRIANGLES)):(ot.geometry.bind(this.quad),ot.geometry.draw(DRAW_MODES.TRIANGLE_STRIP))}calculateSpriteMatrix(et,tt){const{sourceFrame:nt,destinationFrame:st}=this.activeState,{orig:ot}=tt._texture,ct=et.set(st.width,0,0,st.height,nt.x,nt.y),dt=tt.worldTransform.copyTo(Matrix.TEMP_MATRIX);return dt.invert(),ct.prepend(dt),ct.scale(1/ot.width,1/ot.height),ct.translate(tt.anchor.x,tt.anchor.y),ct}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(et,tt,nt=1,st=MSAA_QUALITY.NONE){return this.texturePool.getOptimalTexture(et,tt,nt,st)}getFilterTexture(et,tt,nt){if(typeof et=="number"){const ot=et;et=tt,tt=ot}et=et||this.activeState.renderTexture;const st=this.texturePool.getOptimalTexture(et.width,et.height,tt||et.resolution,nt||MSAA_QUALITY.NONE);return st.filterFrame=et.filterFrame,st}returnFilterTexture(et){this.texturePool.returnTexture(et)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(et,tt){const nt=tempPoints[0],st=tempPoints[1],ot=tempPoints[2],ct=tempPoints[3];nt.set(tt.left,tt.top),st.set(tt.left,tt.bottom),ot.set(tt.right,tt.top),ct.set(tt.right,tt.bottom),et.apply(nt,nt),et.apply(st,st),et.apply(ot,ot),et.apply(ct,ct);const dt=Math.min(nt.x,st.x,ot.x,ct.x),ft=Math.min(nt.y,st.y,ot.y,ct.y),gt=Math.max(nt.x,st.x,ot.x,ct.x),yt=Math.max(nt.y,st.y,ot.y,ct.y);tt.x=dt,tt.y=ft,tt.width=gt-dt,tt.height=yt-ft}roundFrame(et,tt,nt,st,ot){if(!(et.width<=0||et.height<=0||nt.width<=0||nt.height<=0)){if(ot){const{a:ct,b:dt,c:ft,d:gt}=ot;if((Math.abs(dt)>1e-4||Math.abs(ft)>1e-4)&&(Math.abs(ct)>1e-4||Math.abs(gt)>1e-4))return}ot=ot?tempMatrix$2.copyFrom(ot):tempMatrix$2.identity(),ot.translate(-nt.x,-nt.y).scale(st.width/nt.width,st.height/nt.height).translate(st.x,st.y),this.transformAABB(ot,et),et.ceil(tt),this.transformAABB(ot.invert(),et)}}}FilterSystem.extension={type:ExtensionType.RendererSystem,name:"filter"};extensions$1.add(FilterSystem);class GLFramebuffer{constructor(et){this.framebuffer=et,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const tempRectangle=new Rectangle;class FramebufferSystem{constructor(et){this.renderer=et,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const et=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let tt=this.renderer.context.extensions.drawBuffers,nt=this.renderer.context.extensions.depthTexture;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(tt=null,nt=null),tt?et.drawBuffers=st=>tt.drawBuffersWEBGL(st):(this.hasMRT=!1,et.drawBuffers=()=>{}),nt||(this.writeDepthTexture=!1)}else this.msaaSamples=et.getInternalformatParameter(et.RENDERBUFFER,et.RGBA8,et.SAMPLES)}bind(et,tt,nt=0){const{gl:st}=this;if(et){const ot=et.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(et);this.current!==et&&(this.current=et,st.bindFramebuffer(st.FRAMEBUFFER,ot.framebuffer)),ot.mipLevel!==nt&&(et.dirtyId++,et.dirtyFormat++,ot.mipLevel=nt),ot.dirtyId!==et.dirtyId&&(ot.dirtyId=et.dirtyId,ot.dirtyFormat!==et.dirtyFormat?(ot.dirtyFormat=et.dirtyFormat,ot.dirtySize=et.dirtySize,this.updateFramebuffer(et,nt)):ot.dirtySize!==et.dirtySize&&(ot.dirtySize=et.dirtySize,this.resizeFramebuffer(et)));for(let ct=0;ct<et.colorTextures.length;ct++){const dt=et.colorTextures[ct];this.renderer.texture.unbind(dt.parentTextureArray||dt)}if(et.depthTexture&&this.renderer.texture.unbind(et.depthTexture),tt){const ct=tt.width>>nt,dt=tt.height>>nt,ft=ct/tt.width;this.setViewport(tt.x*ft,tt.y*ft,ct,dt)}else{const ct=et.width>>nt,dt=et.height>>nt;this.setViewport(0,0,ct,dt)}}else this.current&&(this.current=null,st.bindFramebuffer(st.FRAMEBUFFER,null)),tt?this.setViewport(tt.x,tt.y,tt.width,tt.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(et,tt,nt,st){const ot=this.viewport;et=Math.round(et),tt=Math.round(tt),nt=Math.round(nt),st=Math.round(st),(ot.width!==nt||ot.height!==st||ot.x!==et||ot.y!==tt)&&(ot.x=et,ot.y=tt,ot.width=nt,ot.height=st,this.gl.viewport(et,tt,nt,st))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(et,tt,nt,st,ot=BUFFER_BITS.COLOR|BUFFER_BITS.DEPTH){const{gl:ct}=this;ct.clearColor(et,tt,nt,st),ct.clear(ot)}initFramebuffer(et){const{gl:tt}=this,nt=new GLFramebuffer(tt.createFramebuffer());return nt.multisample=this.detectSamples(et.multisample),et.glFramebuffers[this.CONTEXT_UID]=nt,this.managedFramebuffers.push(et),et.disposeRunner.add(this),nt}resizeFramebuffer(et){const{gl:tt}=this,nt=et.glFramebuffers[this.CONTEXT_UID];if(nt.stencil){tt.bindRenderbuffer(tt.RENDERBUFFER,nt.stencil);let ct;this.renderer.context.webGLVersion===1?ct=tt.DEPTH_STENCIL:et.depth&&et.stencil?ct=tt.DEPTH24_STENCIL8:et.depth?ct=tt.DEPTH_COMPONENT24:ct=tt.STENCIL_INDEX8,nt.msaaBuffer?tt.renderbufferStorageMultisample(tt.RENDERBUFFER,nt.multisample,ct,et.width,et.height):tt.renderbufferStorage(tt.RENDERBUFFER,ct,et.width,et.height)}const st=et.colorTextures;let ot=st.length;tt.drawBuffers||(ot=Math.min(ot,1));for(let ct=0;ct<ot;ct++){const dt=st[ct],ft=dt.parentTextureArray||dt;this.renderer.texture.bind(ft,0),ct===0&&nt.msaaBuffer&&(tt.bindRenderbuffer(tt.RENDERBUFFER,nt.msaaBuffer),tt.renderbufferStorageMultisample(tt.RENDERBUFFER,nt.multisample,ft._glTextures[this.CONTEXT_UID].internalFormat,et.width,et.height))}et.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(et.depthTexture,0)}updateFramebuffer(et,tt){const{gl:nt}=this,st=et.glFramebuffers[this.CONTEXT_UID],ot=et.colorTextures;let ct=ot.length;nt.drawBuffers||(ct=Math.min(ct,1)),st.multisample>1&&this.canMultisampleFramebuffer(et)?st.msaaBuffer=st.msaaBuffer||nt.createRenderbuffer():st.msaaBuffer&&(nt.deleteRenderbuffer(st.msaaBuffer),st.msaaBuffer=null,st.blitFramebuffer&&(st.blitFramebuffer.dispose(),st.blitFramebuffer=null));const dt=[];for(let ft=0;ft<ct;ft++){const gt=ot[ft],yt=gt.parentTextureArray||gt;this.renderer.texture.bind(yt,0),ft===0&&st.msaaBuffer?(nt.bindRenderbuffer(nt.RENDERBUFFER,st.msaaBuffer),nt.renderbufferStorageMultisample(nt.RENDERBUFFER,st.multisample,yt._glTextures[this.CONTEXT_UID].internalFormat,et.width,et.height),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0,nt.RENDERBUFFER,st.msaaBuffer)):(nt.framebufferTexture2D(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0+ft,gt.target,yt._glTextures[this.CONTEXT_UID].texture,tt),dt.push(nt.COLOR_ATTACHMENT0+ft))}if(dt.length>1&&nt.drawBuffers(dt),et.depthTexture&&this.writeDepthTexture){const ft=et.depthTexture;this.renderer.texture.bind(ft,0),nt.framebufferTexture2D(nt.FRAMEBUFFER,nt.DEPTH_ATTACHMENT,nt.TEXTURE_2D,ft._glTextures[this.CONTEXT_UID].texture,tt)}if((et.stencil||et.depth)&&!(et.depthTexture&&this.writeDepthTexture)){st.stencil=st.stencil||nt.createRenderbuffer();let ft,gt;this.renderer.context.webGLVersion===1?(ft=nt.DEPTH_STENCIL_ATTACHMENT,gt=nt.DEPTH_STENCIL):et.depth&&et.stencil?(ft=nt.DEPTH_STENCIL_ATTACHMENT,gt=nt.DEPTH24_STENCIL8):et.depth?(ft=nt.DEPTH_ATTACHMENT,gt=nt.DEPTH_COMPONENT24):(ft=nt.STENCIL_ATTACHMENT,gt=nt.STENCIL_INDEX8),nt.bindRenderbuffer(nt.RENDERBUFFER,st.stencil),st.msaaBuffer?nt.renderbufferStorageMultisample(nt.RENDERBUFFER,st.multisample,gt,et.width,et.height):nt.renderbufferStorage(nt.RENDERBUFFER,gt,et.width,et.height),nt.framebufferRenderbuffer(nt.FRAMEBUFFER,ft,nt.RENDERBUFFER,st.stencil)}else st.stencil&&(nt.deleteRenderbuffer(st.stencil),st.stencil=null)}canMultisampleFramebuffer(et){return this.renderer.context.webGLVersion!==1&&et.colorTextures.length<=1&&!et.depthTexture}detectSamples(et){const{msaaSamples:tt}=this;let nt=MSAA_QUALITY.NONE;if(et<=1||tt===null)return nt;for(let st=0;st<tt.length;st++)if(tt[st]<=et){nt=tt[st];break}return nt===1&&(nt=MSAA_QUALITY.NONE),nt}blit(et,tt,nt){const{current:st,renderer:ot,gl:ct,CONTEXT_UID:dt}=this;if(ot.context.webGLVersion!==2||!st)return;const ft=st.glFramebuffers[dt];if(!ft)return;if(!et){if(!ft.msaaBuffer)return;const yt=st.colorTextures[0];if(!yt)return;ft.blitFramebuffer||(ft.blitFramebuffer=new Framebuffer(st.width,st.height),ft.blitFramebuffer.addColorTexture(0,yt)),et=ft.blitFramebuffer,et.colorTextures[0]!==yt&&(et.colorTextures[0]=yt,et.dirtyId++,et.dirtyFormat++),(et.width!==st.width||et.height!==st.height)&&(et.width=st.width,et.height=st.height,et.dirtyId++,et.dirtySize++)}tt||(tt=tempRectangle,tt.width=st.width,tt.height=st.height),nt||(nt=tt);const gt=tt.width===nt.width&&tt.height===nt.height;this.bind(et),ct.bindFramebuffer(ct.READ_FRAMEBUFFER,ft.framebuffer),ct.blitFramebuffer(tt.left,tt.top,tt.right,tt.bottom,nt.left,nt.top,nt.right,nt.bottom,ct.COLOR_BUFFER_BIT,gt?ct.NEAREST:ct.LINEAR),ct.bindFramebuffer(ct.READ_FRAMEBUFFER,et.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(et,tt){const nt=et.glFramebuffers[this.CONTEXT_UID],st=this.gl;if(!nt)return;delete et.glFramebuffers[this.CONTEXT_UID];const ot=this.managedFramebuffers.indexOf(et);ot>=0&&this.managedFramebuffers.splice(ot,1),et.disposeRunner.remove(this),tt||(st.deleteFramebuffer(nt.framebuffer),nt.msaaBuffer&&st.deleteRenderbuffer(nt.msaaBuffer),nt.stencil&&st.deleteRenderbuffer(nt.stencil)),nt.blitFramebuffer&&this.disposeFramebuffer(nt.blitFramebuffer,tt)}disposeAll(et){const tt=this.managedFramebuffers;this.managedFramebuffers=[];for(let nt=0;nt<tt.length;nt++)this.disposeFramebuffer(tt[nt],et)}forceStencil(){const et=this.current;if(!et)return;const tt=et.glFramebuffers[this.CONTEXT_UID];if(!tt||tt.stencil&&et.stencil)return;et.stencil=!0;const nt=et.width,st=et.height,ot=this.gl,ct=tt.stencil=ot.createRenderbuffer();ot.bindRenderbuffer(ot.RENDERBUFFER,ct);let dt,ft;this.renderer.context.webGLVersion===1?(dt=ot.DEPTH_STENCIL_ATTACHMENT,ft=ot.DEPTH_STENCIL):et.depth?(dt=ot.DEPTH_STENCIL_ATTACHMENT,ft=ot.DEPTH24_STENCIL8):(dt=ot.STENCIL_ATTACHMENT,ft=ot.STENCIL_INDEX8),tt.msaaBuffer?ot.renderbufferStorageMultisample(ot.RENDERBUFFER,tt.multisample,ft,nt,st):ot.renderbufferStorage(ot.RENDERBUFFER,ft,nt,st),ot.framebufferRenderbuffer(ot.FRAMEBUFFER,dt,ot.RENDERBUFFER,ct)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle}destroy(){this.renderer=null}}FramebufferSystem.extension={type:ExtensionType.RendererSystem,name:"framebuffer"};extensions$1.add(FramebufferSystem);const byteSizeMap={5126:4,5123:2,5121:1};class GeometrySystem{constructor(et){this.renderer=et,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const et=this.gl=this.renderer.gl,tt=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,tt.webGLVersion!==2){let nt=this.renderer.context.extensions.vertexArrayObject;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(nt=null),nt?(et.createVertexArray=()=>nt.createVertexArrayOES(),et.bindVertexArray=st=>nt.bindVertexArrayOES(st),et.deleteVertexArray=st=>nt.deleteVertexArrayOES(st)):(this.hasVao=!1,et.createVertexArray=()=>null,et.bindVertexArray=()=>null,et.deleteVertexArray=()=>null)}if(tt.webGLVersion!==2){const nt=et.getExtension("ANGLE_instanced_arrays");nt?(et.vertexAttribDivisor=(st,ot)=>nt.vertexAttribDivisorANGLE(st,ot),et.drawElementsInstanced=(st,ot,ct,dt,ft)=>nt.drawElementsInstancedANGLE(st,ot,ct,dt,ft),et.drawArraysInstanced=(st,ot,ct,dt)=>nt.drawArraysInstancedANGLE(st,ot,ct,dt)):this.hasInstance=!1}this.canUseUInt32ElementIndex=tt.webGLVersion===2||!!tt.extensions.uint32ElementIndex}bind(et,tt){tt=tt||this.renderer.shader.shader;const{gl:nt}=this;let st=et.glVertexArrayObjects[this.CONTEXT_UID],ot=!1;st||(this.managedGeometries[et.id]=et,et.disposeRunner.add(this),et.glVertexArrayObjects[this.CONTEXT_UID]=st={},ot=!0);const ct=st[tt.program.id]||this.initGeometryVao(et,tt,ot);this._activeGeometry=et,this._activeVao!==ct&&(this._activeVao=ct,this.hasVao?nt.bindVertexArray(ct):this.activateVao(et,tt.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const et=this._activeGeometry,tt=this.renderer.buffer;for(let nt=0;nt<et.buffers.length;nt++){const st=et.buffers[nt];tt.update(st)}}checkCompatibility(et,tt){const nt=et.attributes,st=tt.attributeData;for(const ot in st)if(!nt[ot])throw new Error(`shader and geometry incompatible, geometry missing the "${ot}" attribute`)}getSignature(et,tt){const nt=et.attributes,st=tt.attributeData,ot=["g",et.id];for(const ct in nt)st[ct]&&ot.push(ct,st[ct].location);return ot.join("-")}initGeometryVao(et,tt,nt=!0){const st=this.gl,ot=this.CONTEXT_UID,ct=this.renderer.buffer,dt=tt.program;dt.glPrograms[ot]||this.renderer.shader.generateProgram(tt),this.checkCompatibility(et,dt);const ft=this.getSignature(et,dt),gt=et.glVertexArrayObjects[this.CONTEXT_UID];let yt=gt[ft];if(yt)return gt[dt.id]=yt,yt;const xt=et.buffers,St=et.attributes,wt={},bt={};for(const Pt in xt)wt[Pt]=0,bt[Pt]=0;for(const Pt in St)!St[Pt].size&&dt.attributeData[Pt]?St[Pt].size=dt.attributeData[Pt].size:St[Pt].size||console.warn(`PIXI Geometry attribute '${Pt}' size cannot be determined (likely the bound shader does not have the attribute)`),wt[St[Pt].buffer]+=St[Pt].size*byteSizeMap[St[Pt].type];for(const Pt in St){const Rt=St[Pt],Mt=Rt.size;Rt.stride===void 0&&(wt[Rt.buffer]===Mt*byteSizeMap[Rt.type]?Rt.stride=0:Rt.stride=wt[Rt.buffer]),Rt.start===void 0&&(Rt.start=bt[Rt.buffer],bt[Rt.buffer]+=Mt*byteSizeMap[Rt.type])}yt=st.createVertexArray(),st.bindVertexArray(yt);for(let Pt=0;Pt<xt.length;Pt++){const Rt=xt[Pt];ct.bind(Rt),nt&&Rt._glBuffers[ot].refCount++}return this.activateVao(et,dt),gt[dt.id]=yt,gt[ft]=yt,st.bindVertexArray(null),ct.unbind(BUFFER_TYPE.ARRAY_BUFFER),yt}disposeGeometry(et,tt){var dt;if(!this.managedGeometries[et.id])return;delete this.managedGeometries[et.id];const nt=et.glVertexArrayObjects[this.CONTEXT_UID],st=this.gl,ot=et.buffers,ct=(dt=this.renderer)==null?void 0:dt.buffer;if(et.disposeRunner.remove(this),!!nt){if(ct)for(let ft=0;ft<ot.length;ft++){const gt=ot[ft]._glBuffers[this.CONTEXT_UID];gt&&(gt.refCount--,gt.refCount===0&&!tt&&ct.dispose(ot[ft],tt))}if(!tt){for(const ft in nt)if(ft[0]==="g"){const gt=nt[ft];this._activeVao===gt&&this.unbind(),st.deleteVertexArray(gt)}}delete et.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(et){const tt=Object.keys(this.managedGeometries);for(let nt=0;nt<tt.length;nt++)this.disposeGeometry(this.managedGeometries[tt[nt]],et)}activateVao(et,tt){const nt=this.gl,st=this.CONTEXT_UID,ot=this.renderer.buffer,ct=et.buffers,dt=et.attributes;et.indexBuffer&&ot.bind(et.indexBuffer);let ft=null;for(const gt in dt){const yt=dt[gt],xt=ct[yt.buffer],St=xt._glBuffers[st];if(tt.attributeData[gt]){ft!==St&&(ot.bind(xt),ft=St);const wt=tt.attributeData[gt].location;if(nt.enableVertexAttribArray(wt),nt.vertexAttribPointer(wt,yt.size,yt.type||nt.FLOAT,yt.normalized,yt.stride,yt.start),yt.instance)if(this.hasInstance)nt.vertexAttribDivisor(wt,yt.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(et,tt,nt,st){const{gl:ot}=this,ct=this._activeGeometry;if(ct.indexBuffer){const dt=ct.indexBuffer.data.BYTES_PER_ELEMENT,ft=dt===2?ot.UNSIGNED_SHORT:ot.UNSIGNED_INT;dt===2||dt===4&&this.canUseUInt32ElementIndex?ct.instanced?ot.drawElementsInstanced(et,tt||ct.indexBuffer.data.length,ft,(nt||0)*dt,st||1):ot.drawElements(et,tt||ct.indexBuffer.data.length,ft,(nt||0)*dt):console.warn("unsupported index buffer type: uint32")}else ct.instanced?ot.drawArraysInstanced(et,nt,tt||ct.getSize(),st||1):ot.drawArrays(et,nt,tt||ct.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}GeometrySystem.extension={type:ExtensionType.RendererSystem,name:"geometry"};extensions$1.add(GeometrySystem);const tempMat$1=new Matrix;class TextureMatrix{constructor(et,tt){this._texture=et,this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof tt>"u"?.5:tt,this.isSimple=!1}get texture(){return this._texture}set texture(et){this._texture=et,this._textureID=-1}multiplyUvs(et,tt){tt===void 0&&(tt=et);const nt=this.mapCoord;for(let st=0;st<et.length;st+=2){const ot=et[st],ct=et[st+1];tt[st]=ot*nt.a+ct*nt.c+nt.tx,tt[st+1]=ot*nt.b+ct*nt.d+nt.ty}return tt}update(et){const tt=this._texture;if(!tt||!tt.valid||!et&&this._textureID===tt._updateID)return!1;this._textureID=tt._updateID,this._updateID++;const nt=tt._uvs;this.mapCoord.set(nt.x1-nt.x0,nt.y1-nt.y0,nt.x3-nt.x0,nt.y3-nt.y0,nt.x0,nt.y0);const st=tt.orig,ot=tt.trim;ot&&(tempMat$1.set(st.width/ot.width,0,0,st.height/ot.height,-ot.x/ot.width,-ot.y/ot.height),this.mapCoord.append(tempMat$1));const ct=tt.baseTexture,dt=this.uClampFrame,ft=this.clampMargin/ct.resolution,gt=this.clampOffset;return dt[0]=(tt._frame.x+ft+gt)/ct.width,dt[1]=(tt._frame.y+ft+gt)/ct.height,dt[2]=(tt._frame.x+tt._frame.width-ft+gt)/ct.width,dt[3]=(tt._frame.y+tt._frame.height-ft+gt)/ct.height,this.uClampOffset[0]=gt/ct.realWidth,this.uClampOffset[1]=gt/ct.realHeight,this.isSimple=tt._frame.width===ct.width&&tt._frame.height===ct.height&&tt.rotate===0,!0}}var fragment$7=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,vertex$4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class SpriteMaskFilter extends Filter{constructor(et,tt,nt){let st=null;typeof et!="string"&&tt===void 0&&nt===void 0&&(st=et,et=void 0,tt=void 0,nt=void 0),super(et||vertex$4,tt||fragment$7,nt),this.maskSprite=st,this.maskMatrix=new Matrix}get maskSprite(){return this._maskSprite}set maskSprite(et){this._maskSprite=et,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(et,tt,nt,st){const ot=this._maskSprite,ct=ot._texture;ct.valid&&(ct.uvMatrix||(ct.uvMatrix=new TextureMatrix(ct,0)),ct.uvMatrix.update(),this.uniforms.npmAlpha=ct.baseTexture.alphaMode?0:1,this.uniforms.mask=ct,this.uniforms.otherMatrix=et.calculateSpriteMatrix(this.maskMatrix,ot).prepend(ct.uvMatrix.mapCoord),this.uniforms.alpha=ot.worldAlpha,this.uniforms.maskClamp=ct.uvMatrix.uClampFrame,et.applyFilter(this,tt,nt,st))}}class MaskData{constructor(et=null){this.type=MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=et||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Filter.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(et){et?this._filters?this._filters[0]=et:this._filters=[et]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(et){et?(this._stencilCounter=et._stencilCounter,this._scissorCounter=et._scissorCounter,this._scissorRect=et._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class MaskSystem{constructor(et){this.renderer=et,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(et){this.maskStack=et,this.renderer.scissor.setMaskStack(et),this.renderer.stencil.setMaskStack(et)}push(et,tt){let nt=tt;if(!nt.isMaskData){const ot=this.maskDataPool.pop()||new MaskData;ot.pooled=!0,ot.maskObject=tt,nt=ot}const st=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(nt.copyCountersOrReset(st),nt._colorMask=st?st._colorMask:15,nt.autoDetect&&this.detect(nt),nt._target=et,nt.type!==MASK_TYPES.SPRITE&&this.maskStack.push(nt),nt.enabled)switch(nt.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.push(nt);break;case MASK_TYPES.STENCIL:this.renderer.stencil.push(nt);break;case MASK_TYPES.SPRITE:nt.copyCountersOrReset(null),this.pushSpriteMask(nt);break;case MASK_TYPES.COLOR:this.pushColorMask(nt);break}nt.type===MASK_TYPES.SPRITE&&this.maskStack.push(nt)}pop(et){const tt=this.maskStack.pop();if(!(!tt||tt._target!==et)){if(tt.enabled)switch(tt.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.pop(tt);break;case MASK_TYPES.STENCIL:this.renderer.stencil.pop(tt.maskObject);break;case MASK_TYPES.SPRITE:this.popSpriteMask(tt);break;case MASK_TYPES.COLOR:this.popColorMask(tt);break}if(tt.reset(),tt.pooled&&this.maskDataPool.push(tt),this.maskStack.length!==0){const nt=this.maskStack[this.maskStack.length-1];nt.type===MASK_TYPES.SPRITE&&nt._filters&&(nt._filters[0].maskSprite=nt.maskObject)}}}detect(et){const tt=et.maskObject;tt?tt.isSprite?et.type=MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(et)?et.type=MASK_TYPES.SCISSOR:et.type=MASK_TYPES.STENCIL:et.type=MASK_TYPES.COLOR}pushSpriteMask(et){const{maskObject:tt}=et,nt=et._target;let st=et._filters;st||(st=this.alphaMaskPool[this.alphaMaskIndex],st||(st=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter])),st[0].resolution=et.resolution,st[0].multisample=et.multisample,st[0].maskSprite=tt;const ot=nt.filterArea;nt.filterArea=tt.getBounds(!0),this.renderer.filter.push(nt,st),nt.filterArea=ot,et._filters||this.alphaMaskIndex++}popSpriteMask(et){this.renderer.filter.pop(),et._filters?et._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(et){const tt=et._colorMask,nt=et._colorMask=tt&et.colorMask;nt!==tt&&this.renderer.gl.colorMask((nt&1)!==0,(nt&2)!==0,(nt&4)!==0,(nt&8)!==0)}popColorMask(et){const tt=et._colorMask,nt=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;nt!==tt&&this.renderer.gl.colorMask((nt&1)!==0,(nt&2)!==0,(nt&4)!==0,(nt&8)!==0)}destroy(){this.renderer=null}}MaskSystem.extension={type:ExtensionType.RendererSystem,name:"mask"};extensions$1.add(MaskSystem);class AbstractMaskSystem{constructor(et){this.renderer=et,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(et){const{gl:tt}=this.renderer,nt=this.getStackLength();this.maskStack=et;const st=this.getStackLength();st!==nt&&(st===0?tt.disable(this.glConst):(tt.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const tempMatrix$1=new Matrix,rectPool=[],_ScissorSystem=class xd extends AbstractMaskSystem{constructor(et){super(et),this.glConst=settings.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const et=this.maskStack[this.maskStack.length-1];return et?et._scissorCounter:0}calcScissorRect(et){if(et._scissorRectLocal)return;const tt=et._scissorRect,{maskObject:nt}=et,{renderer:st}=this,ot=st.renderTexture,ct=nt.getBounds(!0,rectPool.pop()??new Rectangle);this.roundFrameToPixels(ct,ot.current?ot.current.resolution:st.resolution,ot.sourceFrame,ot.destinationFrame,st.projection.transform),tt&&ct.fit(tt),et._scissorRectLocal=ct}static isMatrixRotated(et){if(!et)return!1;const{a:tt,b:nt,c:st,d:ot}=et;return(Math.abs(nt)>1e-4||Math.abs(st)>1e-4)&&(Math.abs(tt)>1e-4||Math.abs(ot)>1e-4)}testScissor(et){const{maskObject:tt}=et;if(!tt.isFastRect||!tt.isFastRect()||xd.isMatrixRotated(tt.worldTransform)||xd.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(et);const nt=et._scissorRectLocal;return nt.width>0&&nt.height>0}roundFrameToPixels(et,tt,nt,st,ot){xd.isMatrixRotated(ot)||(ot=ot?tempMatrix$1.copyFrom(ot):tempMatrix$1.identity(),ot.translate(-nt.x,-nt.y).scale(st.width/nt.width,st.height/nt.height).translate(st.x,st.y),this.renderer.filter.transformAABB(ot,et),et.fit(st),et.x=Math.round(et.x*tt),et.y=Math.round(et.y*tt),et.width=Math.round(et.width*tt),et.height=Math.round(et.height*tt))}push(et){et._scissorRectLocal||this.calcScissorRect(et);const{gl:tt}=this.renderer;et._scissorRect||tt.enable(tt.SCISSOR_TEST),et._scissorCounter++,et._scissorRect=et._scissorRectLocal,this._useCurrent()}pop(et){const{gl:tt}=this.renderer;et&&rectPool.push(et._scissorRectLocal),this.getStackLength()>0?this._useCurrent():tt.disable(tt.SCISSOR_TEST)}_useCurrent(){const et=this.maskStack[this.maskStack.length-1]._scissorRect;let tt;this.renderer.renderTexture.current?tt=et.y:tt=this.renderer.height-et.height-et.y,this.renderer.gl.scissor(et.x,tt,et.width,et.height)}};_ScissorSystem.extension={type:ExtensionType.RendererSystem,name:"scissor"};let ScissorSystem=_ScissorSystem;extensions$1.add(ScissorSystem);class StencilSystem extends AbstractMaskSystem{constructor(et){super(et),this.glConst=settings.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const et=this.maskStack[this.maskStack.length-1];return et?et._stencilCounter:0}push(et){const tt=et.maskObject,{gl:nt}=this.renderer,st=et._stencilCounter;st===0&&(this.renderer.framebuffer.forceStencil(),nt.clearStencil(0),nt.clear(nt.STENCIL_BUFFER_BIT),nt.enable(nt.STENCIL_TEST)),et._stencilCounter++;const ot=et._colorMask;ot!==0&&(et._colorMask=0,nt.colorMask(!1,!1,!1,!1)),nt.stencilFunc(nt.EQUAL,st,4294967295),nt.stencilOp(nt.KEEP,nt.KEEP,nt.INCR),tt.renderable=!0,tt.render(this.renderer),this.renderer.batch.flush(),tt.renderable=!1,ot!==0&&(et._colorMask=ot,nt.colorMask((ot&1)!==0,(ot&2)!==0,(ot&4)!==0,(ot&8)!==0)),this._useCurrent()}pop(et){const tt=this.renderer.gl;if(this.getStackLength()===0)tt.disable(tt.STENCIL_TEST);else{const nt=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,st=nt?nt._colorMask:15;st!==0&&(nt._colorMask=0,tt.colorMask(!1,!1,!1,!1)),tt.stencilOp(tt.KEEP,tt.KEEP,tt.DECR),et.renderable=!0,et.render(this.renderer),this.renderer.batch.flush(),et.renderable=!1,st!==0&&(nt._colorMask=st,tt.colorMask((st&1)!==0,(st&2)!==0,(st&4)!==0,(st&8)!==0)),this._useCurrent()}}_useCurrent(){const et=this.renderer.gl;et.stencilFunc(et.EQUAL,this.getStackLength(),4294967295),et.stencilOp(et.KEEP,et.KEEP,et.KEEP)}}StencilSystem.extension={type:ExtensionType.RendererSystem,name:"stencil"};extensions$1.add(StencilSystem);class PluginSystem{constructor(et){this.renderer=et,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.extract has moved to renderer.extract"),et.extract}},prepare:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),et.prepare}},interaction:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),et.events}}})}init(){const et=this.rendererPlugins;for(const tt in et)this.plugins[tt]=new et[tt](this.renderer)}destroy(){for(const et in this.plugins)this.plugins[et].destroy(),this.plugins[et]=null}}PluginSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_plugin"};extensions$1.add(PluginSystem);class ProjectionSystem{constructor(et){this.renderer=et,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix,this.transform=null}update(et,tt,nt,st){this.destinationFrame=et||this.destinationFrame||this.defaultFrame,this.sourceFrame=tt||this.sourceFrame||et,this.calculateProjection(this.destinationFrame,this.sourceFrame,nt,st),this.transform&&this.projectionMatrix.append(this.transform);const ot=this.renderer;ot.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,ot.globalUniforms.update(),ot.shader.shader&&ot.shader.syncUniformGroup(ot.shader.shader.uniforms.globals)}calculateProjection(et,tt,nt,st){const ot=this.projectionMatrix,ct=st?-1:1;ot.identity(),ot.a=1/tt.width*2,ot.d=ct*(1/tt.height*2),ot.tx=-1-tt.x*ot.a,ot.ty=-ct-tt.y*ot.d}setTransform(et){}destroy(){this.renderer=null}}ProjectionSystem.extension={type:ExtensionType.RendererSystem,name:"projection"};extensions$1.add(ProjectionSystem);const tempTransform=new Transform,tempRect$1=new Rectangle;class GenerateTextureSystem{constructor(et){this.renderer=et,this._tempMatrix=new Matrix}generateTexture(et,tt){const{region:nt,...st}=tt||{},ot=(nt==null?void 0:nt.copyTo(tempRect$1))||et.getLocalBounds(tempRect$1,!0),ct=st.resolution||this.renderer.resolution;ot.width=Math.max(ot.width,1/ct),ot.height=Math.max(ot.height,1/ct),st.width=ot.width,st.height=ot.height,st.resolution=ct,st.multisample??(st.multisample=this.renderer.multisample);const dt=RenderTexture.create(st);this._tempMatrix.tx=-ot.x,this._tempMatrix.ty=-ot.y;const ft=et.transform;return et.transform=tempTransform,this.renderer.render(et,{renderTexture:dt,transform:this._tempMatrix,skipUpdateTransform:!!et.parent,blit:!0}),et.transform=ft,dt}destroy(){}}GenerateTextureSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"textureGenerator"};extensions$1.add(GenerateTextureSystem);const tempRect=new Rectangle,tempRect2=new Rectangle;class RenderTextureSystem{constructor(et){this.renderer=et,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.viewportFrame=new Rectangle}contextChange(){var tt;const et=(tt=this.renderer)==null?void 0:tt.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(et&&et.alpha&&et.premultipliedAlpha)}bind(et=null,tt,nt){const st=this.renderer;this.current=et;let ot,ct,dt;et?(ot=et.baseTexture,dt=ot.resolution,tt||(tempRect.width=et.frame.width,tempRect.height=et.frame.height,tt=tempRect),nt||(tempRect2.x=et.frame.x,tempRect2.y=et.frame.y,tempRect2.width=tt.width,tempRect2.height=tt.height,nt=tempRect2),ct=ot.framebuffer):(dt=st.resolution,tt||(tempRect.width=st._view.screen.width,tempRect.height=st._view.screen.height,tt=tempRect),nt||(nt=tempRect,nt.width=tt.width,nt.height=tt.height));const ft=this.viewportFrame;ft.x=nt.x*dt,ft.y=nt.y*dt,ft.width=nt.width*dt,ft.height=nt.height*dt,et||(ft.y=st.view.height-(ft.y+ft.height)),ft.ceil(),this.renderer.framebuffer.bind(ct,ft),this.renderer.projection.update(nt,tt,dt,!ct),et?this.renderer.mask.setMaskStack(ot.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(tt),this.destinationFrame.copyFrom(nt)}clear(et,tt){const nt=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,st=Color.shared.setValue(et||nt);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&st.premultiply(st.alpha);const ot=this.destinationFrame,ct=this.current?this.current.baseTexture:this.renderer._view.screen,dt=ot.width!==ct.width||ot.height!==ct.height;if(dt){let{x:ft,y:gt,width:yt,height:xt}=this.viewportFrame;ft=Math.round(ft),gt=Math.round(gt),yt=Math.round(yt),xt=Math.round(xt),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(ft,gt,yt,xt)}this.renderer.framebuffer.clear(st.red,st.green,st.blue,st.alpha,tt),dt&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}RenderTextureSystem.extension={type:ExtensionType.RendererSystem,name:"renderTexture"};extensions$1.add(RenderTextureSystem);class GLProgram{constructor(et,tt){this.program=et,this.uniformData=tt,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function getAttributeData(rt,et){const tt={},nt=et.getProgramParameter(rt,et.ACTIVE_ATTRIBUTES);for(let st=0;st<nt;st++){const ot=et.getActiveAttrib(rt,st);if(ot.name.startsWith("gl_"))continue;const ct=mapType(et,ot.type),dt={type:ct,name:ot.name,size:mapSize(ct),location:et.getAttribLocation(rt,ot.name)};tt[ot.name]=dt}return tt}function getUniformData(rt,et){const tt={},nt=et.getProgramParameter(rt,et.ACTIVE_UNIFORMS);for(let st=0;st<nt;st++){const ot=et.getActiveUniform(rt,st),ct=ot.name.replace(/\[.*?\]$/,""),dt=!!ot.name.match(/\[.*?\]$/),ft=mapType(et,ot.type);tt[ct]={name:ct,index:st,type:ft,size:ot.size,isArray:dt,value:defaultValue(ft,ot.size)}}return tt}function generateProgram(rt,et){var dt;const tt=compileShader(rt,rt.VERTEX_SHADER,et.vertexSrc),nt=compileShader(rt,rt.FRAGMENT_SHADER,et.fragmentSrc),st=rt.createProgram();rt.attachShader(st,tt),rt.attachShader(st,nt);const ot=(dt=et.extra)==null?void 0:dt.transformFeedbackVaryings;if(ot&&(typeof rt.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):rt.transformFeedbackVaryings(st,ot.names,ot.bufferMode==="separate"?rt.SEPARATE_ATTRIBS:rt.INTERLEAVED_ATTRIBS)),rt.linkProgram(st),rt.getProgramParameter(st,rt.LINK_STATUS)||logProgramError(rt,st,tt,nt),et.attributeData=getAttributeData(st,rt),et.uniformData=getUniformData(st,rt),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(et.vertexSrc)){const ft=Object.keys(et.attributeData);ft.sort((gt,yt)=>gt>yt?1:-1);for(let gt=0;gt<ft.length;gt++)et.attributeData[ft[gt]].location=gt,rt.bindAttribLocation(st,gt,ft[gt]);rt.linkProgram(st)}rt.deleteShader(tt),rt.deleteShader(nt);const ct={};for(const ft in et.uniformData){const gt=et.uniformData[ft];ct[ft]={location:rt.getUniformLocation(st,ft),value:defaultValue(gt.type,gt.size)}}return new GLProgram(st,ct)}function uboUpdate(rt,et,tt,nt,st){tt.buffer.update(st)}const UBO_TO_SINGLE_SETTERS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements(rt){const et=rt.map(ot=>({data:ot,offset:0,dataLen:0,dirty:0}));let tt=0,nt=0,st=0;for(let ot=0;ot<et.length;ot++){const ct=et[ot];if(tt=GLSL_TO_STD40_SIZE[ct.data.type],ct.data.size>1&&(tt=Math.max(tt,16)*ct.data.size),ct.dataLen=tt,nt%tt!==0&&nt<16){const dt=nt%tt%16;nt+=dt,st+=dt}nt+tt>16?(st=Math.ceil(st/16)*16,ct.offset=st,st+=tt,nt=tt):(ct.offset=st,nt+=tt,st+=tt)}return st=Math.ceil(st/16)*16,{uboElements:et,size:st}}function getUBOData(rt,et){const tt=[];for(const nt in rt)et[nt]&&tt.push(et[nt]);return tt.sort((nt,st)=>nt.index-st.index),tt}function generateUniformBufferSync(rt,et){if(!rt.autoManage)return{size:0,syncFunc:uboUpdate};const tt=getUBOData(rt.uniforms,et),{uboElements:nt,size:st}=createUBOElements(tt),ot=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let ct=0;ct<nt.length;ct++){const dt=nt[ct],ft=rt.uniforms[dt.data.name],gt=dt.data.name;let yt=!1;for(let xt=0;xt<uniformParsers.length;xt++){const St=uniformParsers[xt];if(St.codeUbo&&St.test(dt.data,ft)){ot.push(`offset = ${dt.offset/4};`,uniformParsers[xt].codeUbo(dt.data.name,ft)),yt=!0;break}}if(!yt)if(dt.data.size>1){const xt=mapSize(dt.data.type),St=Math.max(GLSL_TO_STD40_SIZE[dt.data.type]/16,1),wt=xt/St,bt=(4-wt%4)%4;ot.push(`
                cv = ud.${gt}.value;
                v = uv.${gt};
                offset = ${dt.offset/4};

                t = 0;

                for(var i=0; i < ${dt.data.size*St}; i++)
                {
                    for(var j = 0; j < ${wt}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${bt};
                }

                `)}else{const xt=UBO_TO_SINGLE_SETTERS[dt.data.type];ot.push(`
                cv = ud.${gt}.value;
                v = uv.${gt};
                offset = ${dt.offset/4};
                ${xt};
                `)}}return ot.push(`
       renderer.buffer.update(buffer);
    `),{size:st,syncFunc:new Function("ud","uv","renderer","syncData","buffer",ot.join(`
`))}}let UID=0;const defaultSyncData={textureCount:0,uboCount:0};class ShaderSystem{constructor(et){this.destroyed=!1,this.renderer=et,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID++}systemCheck(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(et){this.gl=et,this.reset()}bind(et,tt){et.disposeRunner.add(this),et.uniforms.globals=this.renderer.globalUniforms;const nt=et.program,st=nt.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(et);return this.shader=et,this.program!==nt&&(this.program=nt,this.gl.useProgram(st.program)),tt||(defaultSyncData.textureCount=0,defaultSyncData.uboCount=0,this.syncUniformGroup(et.uniformGroup,defaultSyncData)),st}setUniforms(et){const tt=this.shader.program,nt=tt.glPrograms[this.renderer.CONTEXT_UID];tt.syncUniforms(nt.uniformData,et,this.renderer)}syncUniformGroup(et,tt){const nt=this.getGlProgram();(!et.static||et.dirtyId!==nt.uniformDirtyGroups[et.id])&&(nt.uniformDirtyGroups[et.id]=et.dirtyId,this.syncUniforms(et,nt,tt))}syncUniforms(et,tt,nt){(et.syncUniforms[this.shader.program.id]||this.createSyncGroups(et))(tt.uniformData,et.uniforms,this.renderer,nt)}createSyncGroups(et){const tt=this.getSignature(et,this.shader.program.uniformData,"u");return this.cache[tt]||(this.cache[tt]=generateUniformsSync(et,this.shader.program.uniformData)),et.syncUniforms[this.shader.program.id]=this.cache[tt],et.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(et,tt){const nt=this.getGlProgram();if(!et.static||et.dirtyId!==0||!nt.uniformGroups[et.id]){et.dirtyId=0;const st=nt.uniformGroups[et.id]||this.createSyncBufferGroup(et,nt,tt);et.buffer.update(),st(nt.uniformData,et.uniforms,this.renderer,defaultSyncData,et.buffer)}this.renderer.buffer.bindBufferBase(et.buffer,nt.uniformBufferBindings[tt])}createSyncBufferGroup(et,tt,nt){const{gl:st}=this.renderer;this.renderer.buffer.bind(et.buffer);const ot=this.gl.getUniformBlockIndex(tt.program,nt);tt.uniformBufferBindings[nt]=this.shader.uniformBindCount,st.uniformBlockBinding(tt.program,ot,this.shader.uniformBindCount),this.shader.uniformBindCount++;const ct=this.getSignature(et,this.shader.program.uniformData,"ubo");let dt=this._uboCache[ct];if(dt||(dt=this._uboCache[ct]=generateUniformBufferSync(et,this.shader.program.uniformData)),et.autoManage){const ft=new Float32Array(dt.size/4);et.buffer.update(ft)}return tt.uniformGroups[et.id]=dt.syncFunc,tt.uniformGroups[et.id]}getSignature(et,tt,nt){const st=et.uniforms,ot=[`${nt}-`];for(const ct in st)ot.push(ct),tt[ct]&&ot.push(tt[ct].type);return ot.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(et){const tt=this.gl,nt=et.program,st=generateProgram(tt,nt);return nt.glPrograms[this.renderer.CONTEXT_UID]=st,st}reset(){this.program=null,this.shader=null}disposeShader(et){this.shader===et&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ShaderSystem.extension={type:ExtensionType.RendererSystem,name:"shader"};extensions$1.add(ShaderSystem);class StartupSystem{constructor(et){this.renderer=et}run(et){const{renderer:tt}=this;tt.runners.init.emit(tt.options),et.hello&&console.log(`PixiJS 7.4.2 - ${tt.rendererLogId} - https://pixijs.com`),tt.resize(tt.screen.width,tt.screen.height)}destroy(){}}StartupSystem.defaultOptions={hello:!1},StartupSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"startup"};extensions$1.add(StartupSystem);function mapWebGLBlendModesToPixi(rt,et=[]){return et[BLEND_MODES.NORMAL]=[rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.ADD]=[rt.ONE,rt.ONE],et[BLEND_MODES.MULTIPLY]=[rt.DST_COLOR,rt.ONE_MINUS_SRC_ALPHA,rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.SCREEN]=[rt.ONE,rt.ONE_MINUS_SRC_COLOR,rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.OVERLAY]=[rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.DARKEN]=[rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.LIGHTEN]=[rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.COLOR_DODGE]=[rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.COLOR_BURN]=[rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.HARD_LIGHT]=[rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.SOFT_LIGHT]=[rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.DIFFERENCE]=[rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.EXCLUSION]=[rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.HUE]=[rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.SATURATION]=[rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.COLOR]=[rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.LUMINOSITY]=[rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.NONE]=[0,0],et[BLEND_MODES.NORMAL_NPM]=[rt.SRC_ALPHA,rt.ONE_MINUS_SRC_ALPHA,rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.ADD_NPM]=[rt.SRC_ALPHA,rt.ONE,rt.ONE,rt.ONE],et[BLEND_MODES.SCREEN_NPM]=[rt.SRC_ALPHA,rt.ONE_MINUS_SRC_COLOR,rt.ONE,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.SRC_IN]=[rt.DST_ALPHA,rt.ZERO],et[BLEND_MODES.SRC_OUT]=[rt.ONE_MINUS_DST_ALPHA,rt.ZERO],et[BLEND_MODES.SRC_ATOP]=[rt.DST_ALPHA,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.DST_OVER]=[rt.ONE_MINUS_DST_ALPHA,rt.ONE],et[BLEND_MODES.DST_IN]=[rt.ZERO,rt.SRC_ALPHA],et[BLEND_MODES.DST_OUT]=[rt.ZERO,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.DST_ATOP]=[rt.ONE_MINUS_DST_ALPHA,rt.SRC_ALPHA],et[BLEND_MODES.XOR]=[rt.ONE_MINUS_DST_ALPHA,rt.ONE_MINUS_SRC_ALPHA],et[BLEND_MODES.SUBTRACT]=[rt.ONE,rt.ONE,rt.ONE,rt.ONE,rt.FUNC_REVERSE_SUBTRACT,rt.FUNC_ADD],et}const BLEND=0,OFFSET=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,_StateSystem=class uf{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[BLEND]=this.setBlend,this.map[OFFSET]=this.setOffset,this.map[CULLING]=this.setCullFace,this.map[DEPTH_TEST]=this.setDepthTest,this.map[WINDING]=this.setFrontFace,this.map[DEPTH_MASK]=this.setDepthMask,this.checks=[],this.defaultState=new State,this.defaultState.blend=!0}contextChange(et){this.gl=et,this.blendModes=mapWebGLBlendModesToPixi(et),this.set(this.defaultState),this.reset()}set(et){if(et=et||this.defaultState,this.stateId!==et.data){let tt=this.stateId^et.data,nt=0;for(;tt;)tt&1&&this.map[nt].call(this,!!(et.data&1<<nt)),tt=tt>>1,nt++;this.stateId=et.data}for(let tt=0;tt<this.checks.length;tt++)this.checks[tt](this,et)}forceState(et){et=et||this.defaultState;for(let tt=0;tt<this.map.length;tt++)this.map[tt].call(this,!!(et.data&1<<tt));for(let tt=0;tt<this.checks.length;tt++)this.checks[tt](this,et);this.stateId=et.data}setBlend(et){this.updateCheck(uf.checkBlendMode,et),this.gl[et?"enable":"disable"](this.gl.BLEND)}setOffset(et){this.updateCheck(uf.checkPolygonOffset,et),this.gl[et?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(et){this.gl[et?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(et){this.gl.depthMask(et)}setCullFace(et){this.gl[et?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(et){this.gl.frontFace(this.gl[et?"CW":"CCW"])}setBlendMode(et){if(et===this.blendMode)return;this.blendMode=et;const tt=this.blendModes[et],nt=this.gl;tt.length===2?nt.blendFunc(tt[0],tt[1]):nt.blendFuncSeparate(tt[0],tt[1],tt[2],tt[3]),tt.length===6?(this._blendEq=!0,nt.blendEquationSeparate(tt[4],tt[5])):this._blendEq&&(this._blendEq=!1,nt.blendEquationSeparate(nt.FUNC_ADD,nt.FUNC_ADD))}setPolygonOffset(et,tt){this.gl.polygonOffset(et,tt)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(et,tt){const nt=this.checks.indexOf(et);tt&&nt===-1?this.checks.push(et):!tt&&nt!==-1&&this.checks.splice(nt,1)}static checkBlendMode(et,tt){et.setBlendMode(tt.blendMode)}static checkPolygonOffset(et,tt){et.setPolygonOffset(1,tt.polygonOffset)}destroy(){this.gl=null}};_StateSystem.extension={type:ExtensionType.RendererSystem,name:"state"};let StateSystem=_StateSystem;extensions$1.add(StateSystem);class SystemManager extends EventEmitter{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(et){this.addRunners(...et.runners);const tt=(et.priority??[]).filter(st=>et.systems[st]),nt=[...tt,...Object.keys(et.systems).filter(st=>!tt.includes(st))];for(const st of nt)this.addSystem(et.systems[st],st)}addRunners(...et){et.forEach(tt=>{this.runners[tt]=new Runner(tt)})}addSystem(et,tt){const nt=new et(this);if(this[tt])throw new Error(`Whoops! The name "${tt}" is already in use`);this[tt]=nt,this._systemsHash[tt]=nt;for(const st in this.runners)this.runners[st].add(nt);return this}emitWithCustomOptions(et,tt){const nt=Object.keys(this._systemsHash);et.items.forEach(st=>{const ot=nt.find(ct=>this._systemsHash[ct]===st);st[et.name](tt[ot])})}destroy(){Object.values(this.runners).forEach(et=>{et.destroy()}),this._systemsHash={}}}const _TextureGCSystem=class Ed{constructor(et){this.renderer=et,this.count=0,this.checkCount=0,this.maxIdle=Ed.defaultMaxIdle,this.checkCountMax=Ed.defaultCheckCountMax,this.mode=Ed.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const et=this.renderer.texture,tt=et.managedTextures;let nt=!1;for(let st=0;st<tt.length;st++){const ot=tt[st];ot.resource&&this.count-ot.touched>this.maxIdle&&(et.destroyTexture(ot,!0),tt[st]=null,nt=!0)}if(nt){let st=0;for(let ot=0;ot<tt.length;ot++)tt[ot]!==null&&(tt[st++]=tt[ot]);tt.length=st}}unload(et){const tt=this.renderer.texture,nt=et._texture;nt&&!nt.framebuffer&&tt.destroyTexture(nt);for(let st=et.children.length-1;st>=0;st--)this.unload(et.children[st])}destroy(){this.renderer=null}};_TextureGCSystem.defaultMode=GC_MODES.AUTO,_TextureGCSystem.defaultMaxIdle=60*60,_TextureGCSystem.defaultCheckCountMax=60*10,_TextureGCSystem.extension={type:ExtensionType.RendererSystem,name:"textureGC"};let TextureGCSystem=_TextureGCSystem;extensions$1.add(TextureGCSystem);class GLTexture{constructor(et){this.texture=et,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES.UNSIGNED_BYTE,this.internalFormat=FORMATS.RGBA,this.samplerType=0}}function mapInternalFormatToSamplerType(rt){let et;return"WebGL2RenderingContext"in globalThis&&rt instanceof globalThis.WebGL2RenderingContext?et={[rt.RGB]:SAMPLER_TYPES.FLOAT,[rt.RGBA]:SAMPLER_TYPES.FLOAT,[rt.ALPHA]:SAMPLER_TYPES.FLOAT,[rt.LUMINANCE]:SAMPLER_TYPES.FLOAT,[rt.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[rt.R8]:SAMPLER_TYPES.FLOAT,[rt.R8_SNORM]:SAMPLER_TYPES.FLOAT,[rt.RG8]:SAMPLER_TYPES.FLOAT,[rt.RG8_SNORM]:SAMPLER_TYPES.FLOAT,[rt.RGB8]:SAMPLER_TYPES.FLOAT,[rt.RGB8_SNORM]:SAMPLER_TYPES.FLOAT,[rt.RGB565]:SAMPLER_TYPES.FLOAT,[rt.RGBA4]:SAMPLER_TYPES.FLOAT,[rt.RGB5_A1]:SAMPLER_TYPES.FLOAT,[rt.RGBA8]:SAMPLER_TYPES.FLOAT,[rt.RGBA8_SNORM]:SAMPLER_TYPES.FLOAT,[rt.RGB10_A2]:SAMPLER_TYPES.FLOAT,[rt.RGB10_A2UI]:SAMPLER_TYPES.FLOAT,[rt.SRGB8]:SAMPLER_TYPES.FLOAT,[rt.SRGB8_ALPHA8]:SAMPLER_TYPES.FLOAT,[rt.R16F]:SAMPLER_TYPES.FLOAT,[rt.RG16F]:SAMPLER_TYPES.FLOAT,[rt.RGB16F]:SAMPLER_TYPES.FLOAT,[rt.RGBA16F]:SAMPLER_TYPES.FLOAT,[rt.R32F]:SAMPLER_TYPES.FLOAT,[rt.RG32F]:SAMPLER_TYPES.FLOAT,[rt.RGB32F]:SAMPLER_TYPES.FLOAT,[rt.RGBA32F]:SAMPLER_TYPES.FLOAT,[rt.R11F_G11F_B10F]:SAMPLER_TYPES.FLOAT,[rt.RGB9_E5]:SAMPLER_TYPES.FLOAT,[rt.R8I]:SAMPLER_TYPES.INT,[rt.R8UI]:SAMPLER_TYPES.UINT,[rt.R16I]:SAMPLER_TYPES.INT,[rt.R16UI]:SAMPLER_TYPES.UINT,[rt.R32I]:SAMPLER_TYPES.INT,[rt.R32UI]:SAMPLER_TYPES.UINT,[rt.RG8I]:SAMPLER_TYPES.INT,[rt.RG8UI]:SAMPLER_TYPES.UINT,[rt.RG16I]:SAMPLER_TYPES.INT,[rt.RG16UI]:SAMPLER_TYPES.UINT,[rt.RG32I]:SAMPLER_TYPES.INT,[rt.RG32UI]:SAMPLER_TYPES.UINT,[rt.RGB8I]:SAMPLER_TYPES.INT,[rt.RGB8UI]:SAMPLER_TYPES.UINT,[rt.RGB16I]:SAMPLER_TYPES.INT,[rt.RGB16UI]:SAMPLER_TYPES.UINT,[rt.RGB32I]:SAMPLER_TYPES.INT,[rt.RGB32UI]:SAMPLER_TYPES.UINT,[rt.RGBA8I]:SAMPLER_TYPES.INT,[rt.RGBA8UI]:SAMPLER_TYPES.UINT,[rt.RGBA16I]:SAMPLER_TYPES.INT,[rt.RGBA16UI]:SAMPLER_TYPES.UINT,[rt.RGBA32I]:SAMPLER_TYPES.INT,[rt.RGBA32UI]:SAMPLER_TYPES.UINT,[rt.DEPTH_COMPONENT16]:SAMPLER_TYPES.FLOAT,[rt.DEPTH_COMPONENT24]:SAMPLER_TYPES.FLOAT,[rt.DEPTH_COMPONENT32F]:SAMPLER_TYPES.FLOAT,[rt.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT,[rt.DEPTH24_STENCIL8]:SAMPLER_TYPES.FLOAT,[rt.DEPTH32F_STENCIL8]:SAMPLER_TYPES.FLOAT}:et={[rt.RGB]:SAMPLER_TYPES.FLOAT,[rt.RGBA]:SAMPLER_TYPES.FLOAT,[rt.ALPHA]:SAMPLER_TYPES.FLOAT,[rt.LUMINANCE]:SAMPLER_TYPES.FLOAT,[rt.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[rt.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT},et}function mapTypeAndFormatToInternalFormat(rt){let et;return"WebGL2RenderingContext"in globalThis&&rt instanceof globalThis.WebGL2RenderingContext?et={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:rt.RGBA8,[FORMATS.RGB]:rt.RGB8,[FORMATS.RG]:rt.RG8,[FORMATS.RED]:rt.R8,[FORMATS.RGBA_INTEGER]:rt.RGBA8UI,[FORMATS.RGB_INTEGER]:rt.RGB8UI,[FORMATS.RG_INTEGER]:rt.RG8UI,[FORMATS.RED_INTEGER]:rt.R8UI,[FORMATS.ALPHA]:rt.ALPHA,[FORMATS.LUMINANCE]:rt.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:rt.LUMINANCE_ALPHA},[TYPES.BYTE]:{[FORMATS.RGBA]:rt.RGBA8_SNORM,[FORMATS.RGB]:rt.RGB8_SNORM,[FORMATS.RG]:rt.RG8_SNORM,[FORMATS.RED]:rt.R8_SNORM,[FORMATS.RGBA_INTEGER]:rt.RGBA8I,[FORMATS.RGB_INTEGER]:rt.RGB8I,[FORMATS.RG_INTEGER]:rt.RG8I,[FORMATS.RED_INTEGER]:rt.R8I},[TYPES.UNSIGNED_SHORT]:{[FORMATS.RGBA_INTEGER]:rt.RGBA16UI,[FORMATS.RGB_INTEGER]:rt.RGB16UI,[FORMATS.RG_INTEGER]:rt.RG16UI,[FORMATS.RED_INTEGER]:rt.R16UI,[FORMATS.DEPTH_COMPONENT]:rt.DEPTH_COMPONENT16},[TYPES.SHORT]:{[FORMATS.RGBA_INTEGER]:rt.RGBA16I,[FORMATS.RGB_INTEGER]:rt.RGB16I,[FORMATS.RG_INTEGER]:rt.RG16I,[FORMATS.RED_INTEGER]:rt.R16I},[TYPES.UNSIGNED_INT]:{[FORMATS.RGBA_INTEGER]:rt.RGBA32UI,[FORMATS.RGB_INTEGER]:rt.RGB32UI,[FORMATS.RG_INTEGER]:rt.RG32UI,[FORMATS.RED_INTEGER]:rt.R32UI,[FORMATS.DEPTH_COMPONENT]:rt.DEPTH_COMPONENT24},[TYPES.INT]:{[FORMATS.RGBA_INTEGER]:rt.RGBA32I,[FORMATS.RGB_INTEGER]:rt.RGB32I,[FORMATS.RG_INTEGER]:rt.RG32I,[FORMATS.RED_INTEGER]:rt.R32I},[TYPES.FLOAT]:{[FORMATS.RGBA]:rt.RGBA32F,[FORMATS.RGB]:rt.RGB32F,[FORMATS.RG]:rt.RG32F,[FORMATS.RED]:rt.R32F,[FORMATS.DEPTH_COMPONENT]:rt.DEPTH_COMPONENT32F},[TYPES.HALF_FLOAT]:{[FORMATS.RGBA]:rt.RGBA16F,[FORMATS.RGB]:rt.RGB16F,[FORMATS.RG]:rt.RG16F,[FORMATS.RED]:rt.R16F},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:rt.RGB565},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:rt.RGBA4},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:rt.RGB5_A1},[TYPES.UNSIGNED_INT_2_10_10_10_REV]:{[FORMATS.RGBA]:rt.RGB10_A2,[FORMATS.RGBA_INTEGER]:rt.RGB10_A2UI},[TYPES.UNSIGNED_INT_10F_11F_11F_REV]:{[FORMATS.RGB]:rt.R11F_G11F_B10F},[TYPES.UNSIGNED_INT_5_9_9_9_REV]:{[FORMATS.RGB]:rt.RGB9_E5},[TYPES.UNSIGNED_INT_24_8]:{[FORMATS.DEPTH_STENCIL]:rt.DEPTH24_STENCIL8},[TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[FORMATS.DEPTH_STENCIL]:rt.DEPTH32F_STENCIL8}}:et={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:rt.RGBA,[FORMATS.RGB]:rt.RGB,[FORMATS.ALPHA]:rt.ALPHA,[FORMATS.LUMINANCE]:rt.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:rt.LUMINANCE_ALPHA},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:rt.RGB},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:rt.RGBA},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:rt.RGBA}},et}class TextureSystem{constructor(et){this.renderer=et,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture,this.hasIntegerTextures=!1}contextChange(){const et=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat(et),this.samplerTypes=mapInternalFormatToSamplerType(et);const tt=et.getParameter(et.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=tt;for(let st=0;st<tt;st++)this.boundTextures[st]=null;this.emptyTextures={};const nt=new GLTexture(et.createTexture());et.bindTexture(et.TEXTURE_2D,nt.texture),et.texImage2D(et.TEXTURE_2D,0,et.RGBA,1,1,0,et.RGBA,et.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[et.TEXTURE_2D]=nt,this.emptyTextures[et.TEXTURE_CUBE_MAP]=new GLTexture(et.createTexture()),et.bindTexture(et.TEXTURE_CUBE_MAP,this.emptyTextures[et.TEXTURE_CUBE_MAP].texture);for(let st=0;st<6;st++)et.texImage2D(et.TEXTURE_CUBE_MAP_POSITIVE_X+st,0,et.RGBA,1,1,0,et.RGBA,et.UNSIGNED_BYTE,null);et.texParameteri(et.TEXTURE_CUBE_MAP,et.TEXTURE_MAG_FILTER,et.LINEAR),et.texParameteri(et.TEXTURE_CUBE_MAP,et.TEXTURE_MIN_FILTER,et.LINEAR);for(let st=0;st<this.boundTextures.length;st++)this.bind(null,st)}bind(et,tt=0){const{gl:nt}=this;if(et=et==null?void 0:et.castToBaseTexture(),(et==null?void 0:et.valid)&&!et.parentTextureArray){et.touched=this.renderer.textureGC.count;const st=et._glTextures[this.CONTEXT_UID]||this.initTexture(et);this.boundTextures[tt]!==et&&(this.currentLocation!==tt&&(this.currentLocation=tt,nt.activeTexture(nt.TEXTURE0+tt)),nt.bindTexture(et.target,st.texture)),st.dirtyId!==et.dirtyId?(this.currentLocation!==tt&&(this.currentLocation=tt,nt.activeTexture(nt.TEXTURE0+tt)),this.updateTexture(et)):st.dirtyStyleId!==et.dirtyStyleId&&this.updateTextureStyle(et),this.boundTextures[tt]=et}else this.currentLocation!==tt&&(this.currentLocation=tt,nt.activeTexture(nt.TEXTURE0+tt)),nt.bindTexture(nt.TEXTURE_2D,this.emptyTextures[nt.TEXTURE_2D].texture),this.boundTextures[tt]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let et=0;et<this.boundTextures.length;et++)this.boundTextures[et]=this.unknownTexture}unbind(et){const{gl:tt,boundTextures:nt}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let st=0;st<nt.length;st++)nt[st]===this.unknownTexture&&this.bind(null,st)}for(let st=0;st<nt.length;st++)nt[st]===et&&(this.currentLocation!==st&&(tt.activeTexture(tt.TEXTURE0+st),this.currentLocation=st),tt.bindTexture(et.target,this.emptyTextures[et.target].texture),nt[st]=null)}ensureSamplerType(et){const{boundTextures:tt,hasIntegerTextures:nt,CONTEXT_UID:st}=this;if(nt)for(let ot=et-1;ot>=0;--ot){const ct=tt[ot];ct&&ct._glTextures[st].samplerType!==SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(ct)}}initTexture(et){const tt=new GLTexture(this.gl.createTexture());return tt.dirtyId=-1,et._glTextures[this.CONTEXT_UID]=tt,this.managedTextures.push(et),et.on("dispose",this.destroyTexture,this),tt}initTextureType(et,tt){var nt;tt.internalFormat=((nt=this.internalFormats[et.type])==null?void 0:nt[et.format])??et.format,tt.samplerType=this.samplerTypes[tt.internalFormat]??SAMPLER_TYPES.FLOAT,this.webGLVersion===2&&et.type===TYPES.HALF_FLOAT?tt.type=this.gl.HALF_FLOAT:tt.type=et.type}updateTexture(et){var st;const tt=et._glTextures[this.CONTEXT_UID];if(!tt)return;const nt=this.renderer;if(this.initTextureType(et,tt),(st=et.resource)==null?void 0:st.upload(nt,et,tt))tt.samplerType!==SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{const ot=et.realWidth,ct=et.realHeight,dt=nt.gl;(tt.width!==ot||tt.height!==ct||tt.dirtyId<0)&&(tt.width=ot,tt.height=ct,dt.texImage2D(et.target,0,tt.internalFormat,ot,ct,0,et.format,tt.type,null))}et.dirtyStyleId!==tt.dirtyStyleId&&this.updateTextureStyle(et),tt.dirtyId=et.dirtyId}destroyTexture(et,tt){const{gl:nt}=this;if(et=et.castToBaseTexture(),et._glTextures[this.CONTEXT_UID]&&(this.unbind(et),nt.deleteTexture(et._glTextures[this.CONTEXT_UID].texture),et.off("dispose",this.destroyTexture,this),delete et._glTextures[this.CONTEXT_UID],!tt)){const st=this.managedTextures.indexOf(et);st!==-1&&removeItems(this.managedTextures,st,1)}}updateTextureStyle(et){var nt;const tt=et._glTextures[this.CONTEXT_UID];tt&&((et.mipmap===MIPMAP_MODES.POW2||this.webGLVersion!==2)&&!et.isPowerOfTwo?tt.mipmap=!1:tt.mipmap=et.mipmap>=1,this.webGLVersion!==2&&!et.isPowerOfTwo?tt.wrapMode=WRAP_MODES.CLAMP:tt.wrapMode=et.wrapMode,(nt=et.resource)!=null&&nt.style(this.renderer,et,tt)||this.setStyle(et,tt),tt.dirtyStyleId=et.dirtyStyleId)}setStyle(et,tt){const nt=this.gl;if(tt.mipmap&&et.mipmap!==MIPMAP_MODES.ON_MANUAL&&nt.generateMipmap(et.target),nt.texParameteri(et.target,nt.TEXTURE_WRAP_S,tt.wrapMode),nt.texParameteri(et.target,nt.TEXTURE_WRAP_T,tt.wrapMode),tt.mipmap){nt.texParameteri(et.target,nt.TEXTURE_MIN_FILTER,et.scaleMode===SCALE_MODES.LINEAR?nt.LINEAR_MIPMAP_LINEAR:nt.NEAREST_MIPMAP_NEAREST);const st=this.renderer.context.extensions.anisotropicFiltering;if(st&&et.anisotropicLevel>0&&et.scaleMode===SCALE_MODES.LINEAR){const ot=Math.min(et.anisotropicLevel,nt.getParameter(st.MAX_TEXTURE_MAX_ANISOTROPY_EXT));nt.texParameterf(et.target,st.TEXTURE_MAX_ANISOTROPY_EXT,ot)}}else nt.texParameteri(et.target,nt.TEXTURE_MIN_FILTER,et.scaleMode===SCALE_MODES.LINEAR?nt.LINEAR:nt.NEAREST);nt.texParameteri(et.target,nt.TEXTURE_MAG_FILTER,et.scaleMode===SCALE_MODES.LINEAR?nt.LINEAR:nt.NEAREST)}destroy(){this.renderer=null}}TextureSystem.extension={type:ExtensionType.RendererSystem,name:"texture"};extensions$1.add(TextureSystem);class TransformFeedbackSystem{constructor(et){this.renderer=et}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(et){const{gl:tt,CONTEXT_UID:nt}=this,st=et._glTransformFeedbacks[nt]||this.createGLTransformFeedback(et);tt.bindTransformFeedback(tt.TRANSFORM_FEEDBACK,st)}unbind(){const{gl:et}=this;et.bindTransformFeedback(et.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(et,tt){const{gl:nt,renderer:st}=this;tt&&st.shader.bind(tt),nt.beginTransformFeedback(et)}endTransformFeedback(){const{gl:et}=this;et.endTransformFeedback()}createGLTransformFeedback(et){const{gl:tt,renderer:nt,CONTEXT_UID:st}=this,ot=tt.createTransformFeedback();et._glTransformFeedbacks[st]=ot,tt.bindTransformFeedback(tt.TRANSFORM_FEEDBACK,ot);for(let ct=0;ct<et.buffers.length;ct++){const dt=et.buffers[ct];dt&&(nt.buffer.update(dt),dt._glBuffers[st].refCount++,tt.bindBufferBase(tt.TRANSFORM_FEEDBACK_BUFFER,ct,dt._glBuffers[st].buffer||null))}return tt.bindTransformFeedback(tt.TRANSFORM_FEEDBACK,null),et.disposeRunner.add(this),ot}disposeTransformFeedback(et,tt){const nt=et._glTransformFeedbacks[this.CONTEXT_UID],st=this.gl;et.disposeRunner.remove(this);const ot=this.renderer.buffer;if(ot)for(let ct=0;ct<et.buffers.length;ct++){const dt=et.buffers[ct];if(!dt)continue;const ft=dt._glBuffers[this.CONTEXT_UID];ft&&(ft.refCount--,ft.refCount===0&&!tt&&ot.dispose(dt,tt))}nt&&(tt||st.deleteTransformFeedback(nt),delete et._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}TransformFeedbackSystem.extension={type:ExtensionType.RendererSystem,name:"transformFeedback"};extensions$1.add(TransformFeedbackSystem);class ViewSystem{constructor(et){this.renderer=et}init(et){this.screen=new Rectangle(0,0,et.width,et.height),this.element=et.view||settings.ADAPTER.createCanvas(),this.resolution=et.resolution||settings.RESOLUTION,this.autoDensity=!!et.autoDensity}resizeView(et,tt){this.element.width=Math.round(et*this.resolution),this.element.height=Math.round(tt*this.resolution);const nt=this.element.width/this.resolution,st=this.element.height/this.resolution;this.screen.width=nt,this.screen.height=st,this.autoDensity&&(this.element.style.width=`${nt}px`,this.element.style.height=`${st}px`),this.renderer.emit("resize",nt,st),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(et){var tt;et&&((tt=this.element.parentNode)==null||tt.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}ViewSystem.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},ViewSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_view"};extensions$1.add(ViewSystem);settings.PREFER_ENV=ENV.WEBGL2;settings.STRICT_TEXTURE_CACHE=!1;settings.RENDER_OPTIONS={...ContextSystem.defaultOptions,...BackgroundSystem.defaultOptions,...ViewSystem.defaultOptions,...StartupSystem.defaultOptions};Object.defineProperties(settings,{WRAP_MODE:{get(){return BaseTexture.defaultOptions.wrapMode},set(rt){deprecation("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),BaseTexture.defaultOptions.wrapMode=rt}},SCALE_MODE:{get(){return BaseTexture.defaultOptions.scaleMode},set(rt){deprecation("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),BaseTexture.defaultOptions.scaleMode=rt}},MIPMAP_TEXTURES:{get(){return BaseTexture.defaultOptions.mipmap},set(rt){deprecation("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),BaseTexture.defaultOptions.mipmap=rt}},ANISOTROPIC_LEVEL:{get(){return BaseTexture.defaultOptions.anisotropicLevel},set(rt){deprecation("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),BaseTexture.defaultOptions.anisotropicLevel=rt}},FILTER_RESOLUTION:{get(){return deprecation("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Filter.defaultResolution},set(rt){Filter.defaultResolution=rt}},FILTER_MULTISAMPLE:{get(){return deprecation("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Filter.defaultMultisample},set(rt){Filter.defaultMultisample=rt}},SPRITE_MAX_TEXTURES:{get(){return BatchRenderer.defaultMaxTextures},set(rt){deprecation("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),BatchRenderer.defaultMaxTextures=rt}},SPRITE_BATCH_SIZE:{get(){return BatchRenderer.defaultBatchSize},set(rt){deprecation("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),BatchRenderer.defaultBatchSize=rt}},CAN_UPLOAD_SAME_BUFFER:{get(){return BatchRenderer.canUploadSameBuffer},set(rt){deprecation("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),BatchRenderer.canUploadSameBuffer=rt}},GC_MODE:{get(){return TextureGCSystem.defaultMode},set(rt){deprecation("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),TextureGCSystem.defaultMode=rt}},GC_MAX_IDLE:{get(){return TextureGCSystem.defaultMaxIdle},set(rt){deprecation("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),TextureGCSystem.defaultMaxIdle=rt}},GC_MAX_CHECK_COUNT:{get(){return TextureGCSystem.defaultCheckCountMax},set(rt){deprecation("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),TextureGCSystem.defaultCheckCountMax=rt}},PRECISION_VERTEX:{get(){return Program.defaultVertexPrecision},set(rt){deprecation("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Program.defaultVertexPrecision=rt}},PRECISION_FRAGMENT:{get(){return Program.defaultFragmentPrecision},set(rt){deprecation("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Program.defaultFragmentPrecision=rt}}});var UPDATE_PRIORITY=(rt=>(rt[rt.INTERACTION=50]="INTERACTION",rt[rt.HIGH=25]="HIGH",rt[rt.NORMAL=0]="NORMAL",rt[rt.LOW=-25]="LOW",rt[rt.UTILITY=-50]="UTILITY",rt))(UPDATE_PRIORITY||{});class TickerListener{constructor(et,tt=null,nt=0,st=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=et,this.context=tt,this.priority=nt,this.once=st}match(et,tt=null){return this.fn===et&&this.context===tt}emit(et){this.fn&&(this.context?this.fn.call(this.context,et):this.fn(et));const tt=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),tt}connect(et){this.previous=et,et.next&&(et.next.previous=this),this.next=et.next,et.next=this}destroy(et=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const tt=this.next;return this.next=et?null:tt,this.previous=null,tt}}const _Ticker=class Js{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/Js.targetFPMS,this.elapsedMS=1/Js.targetFPMS,this._tick=et=>{this._requestId=null,this.started&&(this.update(et),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(et,tt,nt=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(et,tt,nt))}addOnce(et,tt,nt=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(et,tt,nt,!0))}_addListener(et){let tt=this._head.next,nt=this._head;if(!tt)et.connect(nt);else{for(;tt;){if(et.priority>tt.priority){et.connect(nt);break}nt=tt,tt=tt.next}et.previous||et.connect(nt)}return this._startIfPossible(),this}remove(et,tt){let nt=this._head.next;for(;nt;)nt.match(et,tt)?nt=nt.destroy():nt=nt.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let et=0,tt=this._head;for(;tt=tt.next;)et++;return et}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let et=this._head.next;for(;et;)et=et.destroy(!0);this._head.destroy(),this._head=null}}update(et=performance.now()){let tt;if(et>this.lastTime){if(tt=this.elapsedMS=et-this.lastTime,tt>this._maxElapsedMS&&(tt=this._maxElapsedMS),tt*=this.speed,this._minElapsedMS){const ot=et-this._lastFrame|0;if(ot<this._minElapsedMS)return;this._lastFrame=et-ot%this._minElapsedMS}this.deltaMS=tt,this.deltaTime=this.deltaMS*Js.targetFPMS;const nt=this._head;let st=nt.next;for(;st;)st=st.emit(this.deltaTime);nt.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=et}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(et){const tt=Math.min(this.maxFPS,et),nt=Math.min(Math.max(0,tt)/1e3,Js.targetFPMS);this._maxElapsedMS=1/nt}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(et){if(et===0)this._minElapsedMS=0;else{const tt=Math.max(this.minFPS,et);this._minElapsedMS=1/(tt/1e3)}}static get shared(){if(!Js._shared){const et=Js._shared=new Js;et.autoStart=!0,et._protected=!0}return Js._shared}static get system(){if(!Js._system){const et=Js._system=new Js;et.autoStart=!0,et._protected=!0}return Js._system}};_Ticker.targetFPMS=.06;let Ticker=_Ticker;Object.defineProperties(settings,{TARGET_FPMS:{get(){return Ticker.targetFPMS},set(rt){deprecation("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Ticker.targetFPMS=rt}}});class TickerPlugin{static init(et){et=Object.assign({autoStart:!0,sharedTicker:!1},et),Object.defineProperty(this,"ticker",{set(tt){this._ticker&&this._ticker.remove(this.render,this),this._ticker=tt,tt&&tt.add(this.render,this,UPDATE_PRIORITY.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=et.sharedTicker?Ticker.shared:new Ticker,et.autoStart&&this.start()}static destroy(){if(this._ticker){const et=this._ticker;this.ticker=null,et.destroy()}}}TickerPlugin.extension=ExtensionType.Application;extensions$1.add(TickerPlugin);const renderers=[];extensions$1.handleByList(ExtensionType.Renderer,renderers);function autoDetectRenderer(rt){for(const et of renderers)if(et.test(rt))return new et(rt);throw new Error("Unable to auto-detect a suitable renderer.")}var $defaultVertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$defaultFilterVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const defaultVertex=$defaultVertex,defaultFilterVertex=$defaultFilterVertex;class MultisampleSystem{constructor(et){this.renderer=et}contextChange(et){let tt;if(this.renderer.context.webGLVersion===1){const nt=et.getParameter(et.FRAMEBUFFER_BINDING);et.bindFramebuffer(et.FRAMEBUFFER,null),tt=et.getParameter(et.SAMPLES),et.bindFramebuffer(et.FRAMEBUFFER,nt)}else{const nt=et.getParameter(et.DRAW_FRAMEBUFFER_BINDING);et.bindFramebuffer(et.DRAW_FRAMEBUFFER,null),tt=et.getParameter(et.SAMPLES),et.bindFramebuffer(et.DRAW_FRAMEBUFFER,nt)}tt>=MSAA_QUALITY.HIGH?this.multisample=MSAA_QUALITY.HIGH:tt>=MSAA_QUALITY.MEDIUM?this.multisample=MSAA_QUALITY.MEDIUM:tt>=MSAA_QUALITY.LOW?this.multisample=MSAA_QUALITY.LOW:this.multisample=MSAA_QUALITY.NONE}destroy(){}}MultisampleSystem.extension={type:ExtensionType.RendererSystem,name:"_multisample"};extensions$1.add(MultisampleSystem);class GLBuffer{constructor(et){this.buffer=et||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class BufferSystem{constructor(et){this.renderer=et,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(et){const{gl:tt,CONTEXT_UID:nt}=this,st=et._glBuffers[nt]||this.createGLBuffer(et);tt.bindBuffer(et.type,st.buffer)}unbind(et){const{gl:tt}=this;tt.bindBuffer(et,null)}bindBufferBase(et,tt){const{gl:nt,CONTEXT_UID:st}=this;if(this.boundBufferBases[tt]!==et){const ot=et._glBuffers[st]||this.createGLBuffer(et);this.boundBufferBases[tt]=et,nt.bindBufferBase(nt.UNIFORM_BUFFER,tt,ot.buffer)}}bindBufferRange(et,tt,nt){const{gl:st,CONTEXT_UID:ot}=this;nt=nt||0;const ct=et._glBuffers[ot]||this.createGLBuffer(et);st.bindBufferRange(st.UNIFORM_BUFFER,tt||0,ct.buffer,nt*256,256)}update(et){const{gl:tt,CONTEXT_UID:nt}=this,st=et._glBuffers[nt]||this.createGLBuffer(et);if(et._updateID!==st.updateID)if(st.updateID=et._updateID,tt.bindBuffer(et.type,st.buffer),st.byteLength>=et.data.byteLength)tt.bufferSubData(et.type,0,et.data);else{const ot=et.static?tt.STATIC_DRAW:tt.DYNAMIC_DRAW;st.byteLength=et.data.byteLength,tt.bufferData(et.type,et.data,ot)}}dispose(et,tt){if(!this.managedBuffers[et.id])return;delete this.managedBuffers[et.id];const nt=et._glBuffers[this.CONTEXT_UID],st=this.gl;et.disposeRunner.remove(this),nt&&(tt||st.deleteBuffer(nt.buffer),delete et._glBuffers[this.CONTEXT_UID])}disposeAll(et){const tt=Object.keys(this.managedBuffers);for(let nt=0;nt<tt.length;nt++)this.dispose(this.managedBuffers[tt[nt]],et)}createGLBuffer(et){const{CONTEXT_UID:tt,gl:nt}=this;return et._glBuffers[tt]=new GLBuffer(nt.createBuffer()),this.managedBuffers[et.id]=et,et.disposeRunner.add(this),et._glBuffers[tt]}}BufferSystem.extension={type:ExtensionType.RendererSystem,name:"buffer"};extensions$1.add(BufferSystem);class ObjectRendererSystem{constructor(et){this.renderer=et}render(et,tt){const nt=this.renderer;let st,ot,ct,dt;if(tt&&(st=tt.renderTexture,ot=tt.clear,ct=tt.transform,dt=tt.skipUpdateTransform),this.renderingToScreen=!st,nt.runners.prerender.emit(),nt.emit("prerender"),nt.projection.transform=ct,!nt.context.isLost){if(st||(this.lastObjectRendered=et),!dt){const ft=et.enableTempParent();et.updateTransform(),et.disableTempParent(ft)}nt.renderTexture.bind(st),nt.batch.currentRenderer.start(),(ot??nt.background.clearBeforeRender)&&nt.renderTexture.clear(),et.render(nt),nt.batch.currentRenderer.flush(),st&&(tt.blit&&nt.framebuffer.blit(),st.baseTexture.update()),nt.runners.postrender.emit(),nt.projection.transform=null,nt.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ObjectRendererSystem.extension={type:ExtensionType.RendererSystem,name:"objectRenderer"};extensions$1.add(ObjectRendererSystem);const _Renderer=class cf extends SystemManager{constructor(et){super(),this.type=RENDERER_TYPE.WEBGL,et=Object.assign({},settings.RENDER_OPTIONS,et),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new UniformGroup({projectionMatrix:new Matrix},!0);const tt={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:cf.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(tt),"useContextAlpha"in et&&(deprecation("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),et.premultipliedAlpha=et.useContextAlpha&&et.useContextAlpha!=="notMultiplied",et.backgroundAlpha=et.useContextAlpha===!1?1:et.backgroundAlpha),this._plugin.rendererPlugins=cf.__plugins,this.options=et,this.startup.run(this.options)}static test(et){return et!=null&&et.forceCanvas?!1:isWebGLSupported()}render(et,tt){this.objectRenderer.render(et,tt)}resize(et,tt){this._view.resizeView(et,tt)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(et=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:et}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(et){this._view.resolution=et,this.runners.resolutionChange.emit(et)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return deprecation("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return deprecation("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return deprecation("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(et){deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=et}get backgroundAlpha(){return deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(et){deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=et}get powerPreference(){return deprecation("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(et,tt){return this.textureGenerator.generateTexture(et,tt)}};_Renderer.extension={type:ExtensionType.Renderer,priority:1},_Renderer.__plugins={},_Renderer.__systems={};let Renderer=_Renderer;extensions$1.handleByMap(ExtensionType.RendererPlugin,Renderer.__plugins);extensions$1.handleByMap(ExtensionType.RendererSystem,Renderer.__systems);extensions$1.add(Renderer);class AbstractMultiResource extends Resource{constructor(et,tt){const{width:nt,height:st}=tt||{};super(nt,st),this.items=[],this.itemDirtyIds=[];for(let ot=0;ot<et;ot++){const ct=new BaseTexture;this.items.push(ct),this.itemDirtyIds.push(-2)}this.length=et,this._load=null,this.baseTexture=null}initFromArray(et,tt){for(let nt=0;nt<this.length;nt++)et[nt]&&(et[nt].castToBaseTexture?this.addBaseTextureAt(et[nt].castToBaseTexture(),nt):et[nt]instanceof Resource?this.addResourceAt(et[nt],nt):this.addResourceAt(autoDetectResource(et[nt],tt),nt))}dispose(){for(let et=0,tt=this.length;et<tt;et++)this.items[et].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(et,tt){if(!this.items[tt])throw new Error(`Index ${tt} is out of bounds`);return et.valid&&!this.valid&&this.resize(et.width,et.height),this.items[tt].setResource(et),this}bind(et){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(et);for(let tt=0;tt<this.length;tt++)this.items[tt].parentTextureArray=et,this.items[tt].on("update",et.update,et)}unbind(et){super.unbind(et);for(let tt=0;tt<this.length;tt++)this.items[tt].parentTextureArray=null,this.items[tt].off("update",et.update,et)}load(){if(this._load)return this._load;const et=this.items.map(tt=>tt.resource).filter(tt=>tt).map(tt=>tt.load());return this._load=Promise.all(et).then(()=>{const{realWidth:tt,realHeight:nt}=this.items[0];return this.resize(tt,nt),this.update(),Promise.resolve(this)}),this._load}}class ArrayResource extends AbstractMultiResource{constructor(et,tt){const{width:nt,height:st}=tt||{};let ot,ct;Array.isArray(et)?(ot=et,ct=et.length):ct=et,super(ct,{width:nt,height:st}),ot&&this.initFromArray(ot,tt)}addBaseTextureAt(et,tt){if(et.resource)this.addResourceAt(et.resource,tt);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(et){super.bind(et),et.target=TARGETS.TEXTURE_2D_ARRAY}upload(et,tt,nt){const{length:st,itemDirtyIds:ot,items:ct}=this,{gl:dt}=et;nt.dirtyId<0&&dt.texImage3D(dt.TEXTURE_2D_ARRAY,0,nt.internalFormat,this._width,this._height,st,0,tt.format,nt.type,null);for(let ft=0;ft<st;ft++){const gt=ct[ft];ot[ft]<gt.dirtyId&&(ot[ft]=gt.dirtyId,gt.valid&&dt.texSubImage3D(dt.TEXTURE_2D_ARRAY,0,0,0,ft,gt.resource.width,gt.resource.height,1,tt.format,nt.type,gt.resource.source))}return!0}}class CanvasResource extends BaseImageResource{constructor(et){super(et)}static test(et){const{OffscreenCanvas:tt}=globalThis;return tt&&et instanceof tt?!0:globalThis.HTMLCanvasElement&&et instanceof HTMLCanvasElement}}const _CubeResource=class Ph extends AbstractMultiResource{constructor(et,tt){const{width:nt,height:st,autoLoad:ot,linkBaseTexture:ct}=tt||{};if(et&&et.length!==Ph.SIDES)throw new Error(`Invalid length. Got ${et.length}, expected 6`);super(6,{width:nt,height:st});for(let dt=0;dt<Ph.SIDES;dt++)this.items[dt].target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+dt;this.linkBaseTexture=ct!==!1,et&&this.initFromArray(et,tt),ot!==!1&&this.load()}bind(et){super.bind(et),et.target=TARGETS.TEXTURE_CUBE_MAP}addBaseTextureAt(et,tt,nt){if(nt===void 0&&(nt=this.linkBaseTexture),!this.items[tt])throw new Error(`Index ${tt} is out of bounds`);if(!this.linkBaseTexture||et.parentTextureArray||Object.keys(et._glTextures).length>0)if(et.resource)this.addResourceAt(et.resource,tt);else throw new Error("CubeResource does not support copying of renderTexture.");else et.target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+tt,et.parentTextureArray=this.baseTexture,this.items[tt]=et;return et.valid&&!this.valid&&this.resize(et.realWidth,et.realHeight),this.items[tt]=et,this}upload(et,tt,nt){const st=this.itemDirtyIds;for(let ot=0;ot<Ph.SIDES;ot++){const ct=this.items[ot];(st[ot]<ct.dirtyId||nt.dirtyId<tt.dirtyId)&&(ct.valid&&ct.resource?(ct.resource.upload(et,ct,nt),st[ot]=ct.dirtyId):st[ot]<-1&&(et.gl.texImage2D(ct.target,0,nt.internalFormat,tt.realWidth,tt.realHeight,0,tt.format,nt.type,null),st[ot]=-1))}return!0}static test(et){return Array.isArray(et)&&et.length===Ph.SIDES}};_CubeResource.SIDES=6;let CubeResource=_CubeResource;class ImageBitmapResource extends BaseImageResource{constructor(et,tt){tt=tt||{};let nt,st,ot;typeof et=="string"?(nt=ImageBitmapResource.EMPTY,st=et,ot=!0):(nt=et,st=null,ot=!1),super(nt),this.url=st,this.crossOrigin=tt.crossOrigin??!0,this.alphaMode=typeof tt.alphaMode=="number"?tt.alphaMode:null,this.ownsImageBitmap=tt.ownsImageBitmap??ot,this._load=null,tt.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(et,tt)=>{if(this.url===null){et(this);return}try{const nt=await settings.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const st=await nt.blob();if(this.destroyed)return;const ot=await createImageBitmap(st,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"});if(this.destroyed){ot.close();return}this.source=ot,this.update(),et(this)}catch(nt){if(this.destroyed)return;tt(nt),this.onError.emit(nt)}}),this._load)}upload(et,tt,nt){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(tt.alphaMode=this.alphaMode),super.upload(et,tt,nt)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(et){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof et=="string"||et instanceof ImageBitmap)}static get EMPTY(){return ImageBitmapResource._EMPTY=ImageBitmapResource._EMPTY??settings.ADAPTER.createCanvas(0,0),ImageBitmapResource._EMPTY}}const _SVGResource=class Sd extends BaseImageResource{constructor(et,tt){tt=tt||{},super(settings.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=et,this.scale=tt.scale||1,this._overrideWidth=tt.width,this._overrideHeight=tt.height,this._resolve=null,this._crossorigin=tt.crossorigin,this._load=null,tt.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(et=>{if(this._resolve=()=>{this.update(),et(this)},Sd.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const et=new Image;BaseImageResource.crossOrigin(et,this.svg,this._crossorigin),et.src=this.svg,et.onerror=tt=>{this._resolve&&(et.onerror=null,this.onError.emit(tt))},et.onload=()=>{if(!this._resolve)return;const tt=et.width,nt=et.height;if(!tt||!nt)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let st=tt*this.scale,ot=nt*this.scale;(this._overrideWidth||this._overrideHeight)&&(st=this._overrideWidth||this._overrideHeight/nt*tt,ot=this._overrideHeight||this._overrideWidth/tt*nt),st=Math.round(st),ot=Math.round(ot);const ct=this.source;ct.width=st,ct.height=ot,ct._pixiId=`canvas_${uid()}`,ct.getContext("2d").drawImage(et,0,0,tt,nt,0,0,st,ot),this._resolve(),this._resolve=null}}static getSize(et){const tt=Sd.SVG_SIZE.exec(et),nt={};return tt&&(nt[tt[1]]=Math.round(parseFloat(tt[3])),nt[tt[5]]=Math.round(parseFloat(tt[7]))),nt}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(et,tt){return tt==="svg"||typeof et=="string"&&et.startsWith("data:image/svg+xml")||typeof et=="string"&&Sd.SVG_XML.test(et)}};_SVGResource.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,_SVGResource.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let SVGResource=_SVGResource;class VideoFrameResource extends BaseImageResource{constructor(et){super(et)}static test(et){return!!globalThis.VideoFrame&&et instanceof globalThis.VideoFrame}}const _VideoResource=class hf extends BaseImageResource{constructor(et,tt){if(tt=tt||{},!(et instanceof HTMLVideoElement)){const nt=document.createElement("video");tt.autoLoad!==!1&&nt.setAttribute("preload","auto"),tt.playsinline!==!1&&(nt.setAttribute("webkit-playsinline",""),nt.setAttribute("playsinline","")),tt.muted===!0&&(nt.setAttribute("muted",""),nt.muted=!0),tt.loop===!0&&nt.setAttribute("loop",""),tt.autoPlay!==!1&&nt.setAttribute("autoplay",""),typeof et=="string"&&(et=[et]);const st=et[0].src||et[0];BaseImageResource.crossOrigin(nt,st,tt.crossorigin);for(let ot=0;ot<et.length;++ot){const ct=document.createElement("source");let{src:dt,mime:ft}=et[ot];if(dt=dt||et[ot],dt.startsWith("data:"))ft=dt.slice(5,dt.indexOf(";"));else if(!dt.startsWith("blob:")){const gt=dt.split("?").shift().toLowerCase(),yt=gt.slice(gt.lastIndexOf(".")+1);ft=ft||hf.MIME_TYPES[yt]||`video/${yt}`}ct.src=dt,ft&&(ct.type=ft),nt.appendChild(ct)}et=nt}super(et),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=tt.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=tt.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),tt.autoLoad!==!1&&this.load()}update(et=0){if(!this.destroyed){if(this._updateFPS){const tt=Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-tt)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const et=this.source;return(et.readyState===et.HAVE_ENOUGH_DATA||et.readyState===et.HAVE_FUTURE_DATA)&&et.width&&et.height&&(et.complete=!0),et.addEventListener("play",this._onPlayStart),et.addEventListener("pause",this._onPlayStop),et.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(et.addEventListener("canplay",this._onCanPlay),et.addEventListener("canplaythrough",this._onCanPlay),et.addEventListener("error",this._onError,!0)),this._load=new Promise((tt,nt)=>{this.valid?tt(this):(this._resolve=tt,this._reject=nt,et.load())}),this._load}_onError(et){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(et),this._reject&&(this._reject(et),this._reject=null,this._resolve=null)}_isSourcePlaying(){const et=this.source;return!et.paused&&!et.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const et=this.source;et.removeEventListener("canplay",this._onCanPlay),et.removeEventListener("canplaythrough",this._onCanPlay);const tt=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!tt&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&et.play()}dispose(){this._configureAutoUpdate();const et=this.source;et&&(et.removeEventListener("play",this._onPlayStart),et.removeEventListener("pause",this._onPlayStop),et.removeEventListener("seeked",this._onSeeked),et.removeEventListener("canplay",this._onCanPlay),et.removeEventListener("canplaythrough",this._onCanPlay),et.removeEventListener("error",this._onError,!0),et.pause(),et.src="",et.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(et){et!==this._autoUpdate&&(this._autoUpdate=et,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(et){et!==this._updateFPS&&(this._updateFPS=et,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(et,tt){return globalThis.HTMLVideoElement&&et instanceof HTMLVideoElement||hf.TYPES.includes(tt)}};_VideoResource.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],_VideoResource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let VideoResource=_VideoResource;INSTALLED.push(ImageBitmapResource,ImageResource,CanvasResource,VideoResource,VideoFrameResource,SVGResource,BufferResource,CubeResource,ArrayResource);class Bounds{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(et){return this.minX>this.maxX||this.minY>this.maxY?Rectangle.EMPTY:(et=et||new Rectangle(0,0,1,1),et.x=this.minX,et.y=this.minY,et.width=this.maxX-this.minX,et.height=this.maxY-this.minY,et)}addPoint(et){this.minX=Math.min(this.minX,et.x),this.maxX=Math.max(this.maxX,et.x),this.minY=Math.min(this.minY,et.y),this.maxY=Math.max(this.maxY,et.y)}addPointMatrix(et,tt){const{a:nt,b:st,c:ot,d:ct,tx:dt,ty:ft}=et,gt=nt*tt.x+ot*tt.y+dt,yt=st*tt.x+ct*tt.y+ft;this.minX=Math.min(this.minX,gt),this.maxX=Math.max(this.maxX,gt),this.minY=Math.min(this.minY,yt),this.maxY=Math.max(this.maxY,yt)}addQuad(et){let tt=this.minX,nt=this.minY,st=this.maxX,ot=this.maxY,ct=et[0],dt=et[1];tt=ct<tt?ct:tt,nt=dt<nt?dt:nt,st=ct>st?ct:st,ot=dt>ot?dt:ot,ct=et[2],dt=et[3],tt=ct<tt?ct:tt,nt=dt<nt?dt:nt,st=ct>st?ct:st,ot=dt>ot?dt:ot,ct=et[4],dt=et[5],tt=ct<tt?ct:tt,nt=dt<nt?dt:nt,st=ct>st?ct:st,ot=dt>ot?dt:ot,ct=et[6],dt=et[7],tt=ct<tt?ct:tt,nt=dt<nt?dt:nt,st=ct>st?ct:st,ot=dt>ot?dt:ot,this.minX=tt,this.minY=nt,this.maxX=st,this.maxY=ot}addFrame(et,tt,nt,st,ot){this.addFrameMatrix(et.worldTransform,tt,nt,st,ot)}addFrameMatrix(et,tt,nt,st,ot){const ct=et.a,dt=et.b,ft=et.c,gt=et.d,yt=et.tx,xt=et.ty;let St=this.minX,wt=this.minY,bt=this.maxX,Pt=this.maxY,Rt=ct*tt+ft*nt+yt,Mt=dt*tt+gt*nt+xt;St=Rt<St?Rt:St,wt=Mt<wt?Mt:wt,bt=Rt>bt?Rt:bt,Pt=Mt>Pt?Mt:Pt,Rt=ct*st+ft*nt+yt,Mt=dt*st+gt*nt+xt,St=Rt<St?Rt:St,wt=Mt<wt?Mt:wt,bt=Rt>bt?Rt:bt,Pt=Mt>Pt?Mt:Pt,Rt=ct*tt+ft*ot+yt,Mt=dt*tt+gt*ot+xt,St=Rt<St?Rt:St,wt=Mt<wt?Mt:wt,bt=Rt>bt?Rt:bt,Pt=Mt>Pt?Mt:Pt,Rt=ct*st+ft*ot+yt,Mt=dt*st+gt*ot+xt,St=Rt<St?Rt:St,wt=Mt<wt?Mt:wt,bt=Rt>bt?Rt:bt,Pt=Mt>Pt?Mt:Pt,this.minX=St,this.minY=wt,this.maxX=bt,this.maxY=Pt}addVertexData(et,tt,nt){let st=this.minX,ot=this.minY,ct=this.maxX,dt=this.maxY;for(let ft=tt;ft<nt;ft+=2){const gt=et[ft],yt=et[ft+1];st=gt<st?gt:st,ot=yt<ot?yt:ot,ct=gt>ct?gt:ct,dt=yt>dt?yt:dt}this.minX=st,this.minY=ot,this.maxX=ct,this.maxY=dt}addVertices(et,tt,nt,st){this.addVerticesMatrix(et.worldTransform,tt,nt,st)}addVerticesMatrix(et,tt,nt,st,ot=0,ct=ot){const dt=et.a,ft=et.b,gt=et.c,yt=et.d,xt=et.tx,St=et.ty;let wt=this.minX,bt=this.minY,Pt=this.maxX,Rt=this.maxY;for(let Mt=nt;Mt<st;Mt+=2){const kt=tt[Mt],Dt=tt[Mt+1],zt=dt*kt+gt*Dt+xt,Lt=yt*Dt+ft*kt+St;wt=Math.min(wt,zt-ot),Pt=Math.max(Pt,zt+ot),bt=Math.min(bt,Lt-ct),Rt=Math.max(Rt,Lt+ct)}this.minX=wt,this.minY=bt,this.maxX=Pt,this.maxY=Rt}addBounds(et){const tt=this.minX,nt=this.minY,st=this.maxX,ot=this.maxY;this.minX=et.minX<tt?et.minX:tt,this.minY=et.minY<nt?et.minY:nt,this.maxX=et.maxX>st?et.maxX:st,this.maxY=et.maxY>ot?et.maxY:ot}addBoundsMask(et,tt){const nt=et.minX>tt.minX?et.minX:tt.minX,st=et.minY>tt.minY?et.minY:tt.minY,ot=et.maxX<tt.maxX?et.maxX:tt.maxX,ct=et.maxY<tt.maxY?et.maxY:tt.maxY;if(nt<=ot&&st<=ct){const dt=this.minX,ft=this.minY,gt=this.maxX,yt=this.maxY;this.minX=nt<dt?nt:dt,this.minY=st<ft?st:ft,this.maxX=ot>gt?ot:gt,this.maxY=ct>yt?ct:yt}}addBoundsMatrix(et,tt){this.addFrameMatrix(tt,et.minX,et.minY,et.maxX,et.maxY)}addBoundsArea(et,tt){const nt=et.minX>tt.x?et.minX:tt.x,st=et.minY>tt.y?et.minY:tt.y,ot=et.maxX<tt.x+tt.width?et.maxX:tt.x+tt.width,ct=et.maxY<tt.y+tt.height?et.maxY:tt.y+tt.height;if(nt<=ot&&st<=ct){const dt=this.minX,ft=this.minY,gt=this.maxX,yt=this.maxY;this.minX=nt<dt?nt:dt,this.minY=st<ft?st:ft,this.maxX=ot>gt?ot:gt,this.maxY=ct>yt?ct:yt}}pad(et=0,tt=et){this.isEmpty()||(this.minX-=et,this.maxX+=et,this.minY-=tt,this.maxY+=tt)}addFramePad(et,tt,nt,st,ot,ct){et-=ot,tt-=ct,nt+=ot,st+=ct,this.minX=this.minX<et?this.minX:et,this.maxX=this.maxX>nt?this.maxX:nt,this.minY=this.minY<tt?this.minY:tt,this.maxY=this.maxY>st?this.maxY:st}}class DisplayObject extends EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Transform,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Bounds,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(et){const tt=Object.keys(et);for(let nt=0;nt<tt.length;++nt){const st=tt[nt];Object.defineProperty(DisplayObject.prototype,st,Object.getOwnPropertyDescriptor(et,st))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(et,tt){return et||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),tt||(this._boundsRect||(this._boundsRect=new Rectangle),tt=this._boundsRect),this._bounds.getRectangle(tt)}getLocalBounds(et){et||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),et=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds);const tt=this.transform,nt=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(nt==null?void 0:nt.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const st=this._bounds,ot=this._boundsID;this._bounds=this._localBounds;const ct=this.getBounds(!1,et);return this.parent=nt,this.transform=tt,this._bounds=st,this._bounds.updateID+=this._boundsID-ot,ct}toGlobal(et,tt,nt=!1){return nt||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(et,tt)}toLocal(et,tt,nt,st){return tt&&(et=tt.toGlobal(et,nt,st)),st||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(et,nt)}setParent(et){if(!et||!et.addChild)throw new Error("setParent: Argument must be a Container");return et.addChild(this),et}removeFromParent(){var et;(et=this.parent)==null||et.removeChild(this)}setTransform(et=0,tt=0,nt=1,st=1,ot=0,ct=0,dt=0,ft=0,gt=0){return this.position.x=et,this.position.y=tt,this.scale.x=nt||1,this.scale.y=st||1,this.rotation=ot,this.skew.x=ct,this.skew.y=dt,this.pivot.x=ft,this.pivot.y=gt,this}destroy(et){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent}enableTempParent(){const et=this.parent;return this.parent=this._tempDisplayObjectParent,et}disableTempParent(et){this.parent=et}get x(){return this.position.x}set x(et){this.transform.position.x=et}get y(){return this.position.y}set y(et){this.transform.position.y=et}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(et){this.transform.position.copyFrom(et)}get scale(){return this.transform.scale}set scale(et){this.transform.scale.copyFrom(et)}get pivot(){return this.transform.pivot}set pivot(et){this.transform.pivot.copyFrom(et)}get skew(){return this.transform.skew}set skew(et){this.transform.skew.copyFrom(et)}get rotation(){return this.transform.rotation}set rotation(et){this.transform.rotation=et}get angle(){return this.transform.rotation*RAD_TO_DEG}set angle(et){this.transform.rotation=et*DEG_TO_RAD}get zIndex(){return this._zIndex}set zIndex(et){this._zIndex!==et&&(this._zIndex=et,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let et=this;do{if(!et.visible)return!1;et=et.parent}while(et);return!0}get mask(){return this._mask}set mask(et){if(this._mask!==et){if(this._mask){const tt=this._mask.isMaskData?this._mask.maskObject:this._mask;tt&&(tt._maskRefCount--,tt._maskRefCount===0&&(tt.renderable=!0,tt.isMask=!1))}if(this._mask=et,this._mask){const tt=this._mask.isMaskData?this._mask.maskObject:this._mask;tt&&(tt._maskRefCount===0&&(tt.renderable=!1,tt.isMask=!0),tt._maskRefCount++)}}}}class TemporaryDisplayObject extends DisplayObject{constructor(){super(...arguments),this.sortDirty=null}}DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;const tempMatrix=new Matrix;function sortChildren(rt,et){return rt.zIndex===et.zIndex?rt._lastSortedIndex-et._lastSortedIndex:rt.zIndex-et.zIndex}const _Container=class df extends DisplayObject{constructor(){super(),this.children=[],this.sortableChildren=df.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(et){}addChild(...et){if(et.length>1)for(let tt=0;tt<et.length;tt++)this.addChild(et[tt]);else{const tt=et[0];tt.parent&&tt.parent.removeChild(tt),tt.parent=this,this.sortDirty=!0,tt.transform._parentID=-1,this.children.push(tt),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",tt,this,this.children.length-1),tt.emit("added",this)}return et[0]}addChildAt(et,tt){if(tt<0||tt>this.children.length)throw new Error(`${et}addChildAt: The index ${tt} supplied is out of bounds ${this.children.length}`);return et.parent&&et.parent.removeChild(et),et.parent=this,this.sortDirty=!0,et.transform._parentID=-1,this.children.splice(tt,0,et),this._boundsID++,this.onChildrenChange(tt),et.emit("added",this),this.emit("childAdded",et,this,tt),et}swapChildren(et,tt){if(et===tt)return;const nt=this.getChildIndex(et),st=this.getChildIndex(tt);this.children[nt]=tt,this.children[st]=et,this.onChildrenChange(nt<st?nt:st)}getChildIndex(et){const tt=this.children.indexOf(et);if(tt===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return tt}setChildIndex(et,tt){if(tt<0||tt>=this.children.length)throw new Error(`The index ${tt} supplied is out of bounds ${this.children.length}`);const nt=this.getChildIndex(et);removeItems(this.children,nt,1),this.children.splice(tt,0,et),this.onChildrenChange(tt)}getChildAt(et){if(et<0||et>=this.children.length)throw new Error(`getChildAt: Index (${et}) does not exist.`);return this.children[et]}removeChild(...et){if(et.length>1)for(let tt=0;tt<et.length;tt++)this.removeChild(et[tt]);else{const tt=et[0],nt=this.children.indexOf(tt);if(nt===-1)return null;tt.parent=null,tt.transform._parentID=-1,removeItems(this.children,nt,1),this._boundsID++,this.onChildrenChange(nt),tt.emit("removed",this),this.emit("childRemoved",tt,this,nt)}return et[0]}removeChildAt(et){const tt=this.getChildAt(et);return tt.parent=null,tt.transform._parentID=-1,removeItems(this.children,et,1),this._boundsID++,this.onChildrenChange(et),tt.emit("removed",this),this.emit("childRemoved",tt,this,et),tt}removeChildren(et=0,tt=this.children.length){const nt=et,st=tt,ot=st-nt;let ct;if(ot>0&&ot<=st){ct=this.children.splice(nt,ot);for(let dt=0;dt<ct.length;++dt)ct[dt].parent=null,ct[dt].transform&&(ct[dt].transform._parentID=-1);this._boundsID++,this.onChildrenChange(et);for(let dt=0;dt<ct.length;++dt)ct[dt].emit("removed",this),this.emit("childRemoved",ct[dt],this,dt);return ct}else if(ot===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let et=!1;for(let tt=0,nt=this.children.length;tt<nt;++tt){const st=this.children[tt];st._lastSortedIndex=tt,!et&&st.zIndex!==0&&(et=!0)}et&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let et=0,tt=this.children.length;et<tt;++et){const nt=this.children[et];nt.visible&&nt.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let et=0;et<this.children.length;et++){const tt=this.children[et];if(!(!tt.visible||!tt.renderable))if(tt.calculateBounds(),tt._mask){const nt=tt._mask.isMaskData?tt._mask.maskObject:tt._mask;nt?(nt.calculateBounds(),this._bounds.addBoundsMask(tt._bounds,nt._bounds)):this._bounds.addBounds(tt._bounds)}else tt.filterArea?this._bounds.addBoundsArea(tt._bounds,tt.filterArea):this._bounds.addBounds(tt._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(et,tt=!1){const nt=super.getLocalBounds(et);if(!tt)for(let st=0,ot=this.children.length;st<ot;++st){const ct=this.children[st];ct.visible&&ct.updateTransform()}return nt}_calculateBounds(){}_renderWithCulling(et){const tt=et.renderTexture.sourceFrame;if(!(tt.width>0&&tt.height>0))return;let nt,st;this.cullArea?(nt=this.cullArea,st=this.worldTransform):this._render!==df.prototype._render&&(nt=this.getBounds(!0));const ot=et.projection.transform;if(ot&&(st?(st=tempMatrix.copyFrom(st),st.prepend(ot)):st=ot),nt&&tt.intersects(nt,st))this._render(et);else if(this.cullArea)return;for(let ct=0,dt=this.children.length;ct<dt;++ct){const ft=this.children[ct],gt=ft.cullable;ft.cullable=gt||!this.cullArea,ft.render(et),ft.cullable=gt}}render(et){var tt;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(tt=this.filters)!=null&&tt.length)this.renderAdvanced(et);else if(this.cullable)this._renderWithCulling(et);else{this._render(et);for(let nt=0,st=this.children.length;nt<st;++nt)this.children[nt].render(et)}}renderAdvanced(et){var ot,ct,dt;const tt=this.filters,nt=this._mask;if(tt){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let ft=0;ft<tt.length;ft++)tt[ft].enabled&&this._enabledFilters.push(tt[ft])}const st=tt&&((ot=this._enabledFilters)==null?void 0:ot.length)||nt&&(!nt.isMaskData||nt.enabled&&(nt.autoDetect||nt.type!==MASK_TYPES.NONE));if(st&&et.batch.flush(),tt&&((ct=this._enabledFilters)!=null&&ct.length)&&et.filter.push(this,this._enabledFilters),nt&&et.mask.push(this,this._mask),this.cullable)this._renderWithCulling(et);else{this._render(et);for(let ft=0,gt=this.children.length;ft<gt;++ft)this.children[ft].render(et)}st&&et.batch.flush(),nt&&et.mask.pop(this),tt&&((dt=this._enabledFilters)!=null&&dt.length)&&et.filter.pop()}_render(et){}destroy(et){super.destroy(),this.sortDirty=!1;const tt=typeof et=="boolean"?et:et==null?void 0:et.children,nt=this.removeChildren(0,this.children.length);if(tt)for(let st=0;st<nt.length;++st)nt[st].destroy(et)}get width(){return this.scale.x*this.getLocalBounds().width}set width(et){const tt=this.getLocalBounds().width;tt!==0?this.scale.x=et/tt:this.scale.x=1,this._width=et}get height(){return this.scale.y*this.getLocalBounds().height}set height(et){const tt=this.getLocalBounds().height;tt!==0?this.scale.y=et/tt:this.scale.y=1,this._height=et}};_Container.defaultSortableChildren=!1;let Container=_Container;Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;Object.defineProperties(settings,{SORTABLE_CHILDREN:{get(){return Container.defaultSortableChildren},set(rt){deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Container.defaultSortableChildren=rt}}});var TEXT_GRADIENT=(rt=>(rt[rt.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",rt[rt.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",rt))(TEXT_GRADIENT||{});const tempPoint$2=new Point,indices=new Uint16Array([0,1,2,0,2,3]);class Sprite extends Container{constructor(et){super(),this._anchor=new ObservablePoint(this._onAnchorUpdate,this,et?et.defaultAnchor.x:0,et?et.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Color(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=BLEND_MODES.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=et||Texture.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=indices,this.pluginName="batch",this.isSprite=!0,this._roundPixels=settings.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const et=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===et._updateID)return;this._textureID!==et._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=et._updateID;const tt=this.transform.worldTransform,nt=tt.a,st=tt.b,ot=tt.c,ct=tt.d,dt=tt.tx,ft=tt.ty,gt=this.vertexData,yt=et.trim,xt=et.orig,St=this._anchor;let wt=0,bt=0,Pt=0,Rt=0;if(yt?(bt=yt.x-St._x*xt.width,wt=bt+yt.width,Rt=yt.y-St._y*xt.height,Pt=Rt+yt.height):(bt=-St._x*xt.width,wt=bt+xt.width,Rt=-St._y*xt.height,Pt=Rt+xt.height),gt[0]=nt*bt+ot*Rt+dt,gt[1]=ct*Rt+st*bt+ft,gt[2]=nt*wt+ot*Rt+dt,gt[3]=ct*Rt+st*wt+ft,gt[4]=nt*wt+ot*Pt+dt,gt[5]=ct*Pt+st*wt+ft,gt[6]=nt*bt+ot*Pt+dt,gt[7]=ct*Pt+st*bt+ft,this._roundPixels){const Mt=settings.RESOLUTION;for(let kt=0;kt<gt.length;++kt)gt[kt]=Math.round(gt[kt]*Mt)/Mt}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const et=this._texture,tt=this.vertexTrimmedData,nt=et.orig,st=this._anchor,ot=this.transform.worldTransform,ct=ot.a,dt=ot.b,ft=ot.c,gt=ot.d,yt=ot.tx,xt=ot.ty,St=-st._x*nt.width,wt=St+nt.width,bt=-st._y*nt.height,Pt=bt+nt.height;if(tt[0]=ct*St+ft*bt+yt,tt[1]=gt*bt+dt*St+xt,tt[2]=ct*wt+ft*bt+yt,tt[3]=gt*bt+dt*wt+xt,tt[4]=ct*wt+ft*Pt+yt,tt[5]=gt*Pt+dt*wt+xt,tt[6]=ct*St+ft*Pt+yt,tt[7]=gt*Pt+dt*St+xt,this._roundPixels){const Rt=settings.RESOLUTION;for(let Mt=0;Mt<tt.length;++Mt)tt[Mt]=Math.round(tt[Mt]*Rt)/Rt}}_render(et){this.calculateVertices(),et.batch.setObjectRenderer(et.plugins[this.pluginName]),et.plugins[this.pluginName].render(this)}_calculateBounds(){const et=this._texture.trim,tt=this._texture.orig;!et||et.width===tt.width&&et.height===tt.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(et){return this.children.length===0?(this._localBounds||(this._localBounds=new Bounds),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),et||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),et=this._localBoundsRect),this._localBounds.getRectangle(et)):super.getLocalBounds.call(this,et)}containsPoint(et){this.worldTransform.applyInverse(et,tempPoint$2);const tt=this._texture.orig.width,nt=this._texture.orig.height,st=-tt*this.anchor.x;let ot=0;return tempPoint$2.x>=st&&tempPoint$2.x<st+tt&&(ot=-nt*this.anchor.y,tempPoint$2.y>=ot&&tempPoint$2.y<ot+nt)}destroy(et){if(super.destroy(et),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof et=="boolean"?et:et==null?void 0:et.texture){const tt=typeof et=="boolean"?et:et==null?void 0:et.baseTexture;this._texture.destroy(!!tt)}this._texture=null}static from(et,tt){const nt=et instanceof Texture?et:Texture.from(et,tt);return new Sprite(nt)}set roundPixels(et){this._roundPixels!==et&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=et}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(et){const tt=sign(this.scale.x)||1;this.scale.x=tt*et/this._texture.orig.width,this._width=et}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(et){const tt=sign(this.scale.y)||1;this.scale.y=tt*et/this._texture.orig.height,this._height=et}get anchor(){return this._anchor}set anchor(et){this._anchor.copyFrom(et)}get tint(){return this._tintColor.value}set tint(et){this._tintColor.setValue(et),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(et){this._texture!==et&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=et||Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,et&&(et.baseTexture.valid?this._onTextureUpdate():et.once("update",this._onTextureUpdate,this)))}}const contextSettings={willReadFrequently:!0},_TextMetrics=class jr{static get experimentalLetterSpacingSupported(){let et=jr._experimentalLetterSpacingSupported;if(et!==void 0){const tt=settings.ADAPTER.getCanvasRenderingContext2D().prototype;et=jr._experimentalLetterSpacingSupported="letterSpacing"in tt||"textLetterSpacing"in tt}return et}constructor(et,tt,nt,st,ot,ct,dt,ft,gt){this.text=et,this.style=tt,this.width=nt,this.height=st,this.lines=ot,this.lineWidths=ct,this.lineHeight=dt,this.maxLineWidth=ft,this.fontProperties=gt}static measureText(et,tt,nt,st=jr._canvas){nt=nt??tt.wordWrap;const ot=tt.toFontString(),ct=jr.measureFont(ot);ct.fontSize===0&&(ct.fontSize=tt.fontSize,ct.ascent=tt.fontSize);const dt=st.getContext("2d",contextSettings);dt.font=ot;const ft=(nt?jr.wordWrap(et,tt,st):et).split(/(?:\r\n|\r|\n)/),gt=new Array(ft.length);let yt=0;for(let bt=0;bt<ft.length;bt++){const Pt=jr._measureText(ft[bt],tt.letterSpacing,dt);gt[bt]=Pt,yt=Math.max(yt,Pt)}let xt=yt+tt.strokeThickness;tt.dropShadow&&(xt+=tt.dropShadowDistance);const St=tt.lineHeight||ct.fontSize+tt.strokeThickness;let wt=Math.max(St,ct.fontSize+tt.strokeThickness*2)+tt.leading+(ft.length-1)*(St+tt.leading);return tt.dropShadow&&(wt+=tt.dropShadowDistance),new jr(et,tt,xt,wt,ft,gt,St+tt.leading,yt,ct)}static _measureText(et,tt,nt){let st=!1;jr.experimentalLetterSpacingSupported&&(jr.experimentalLetterSpacing?(nt.letterSpacing=`${tt}px`,nt.textLetterSpacing=`${tt}px`,st=!0):(nt.letterSpacing="0px",nt.textLetterSpacing="0px"));let ot=nt.measureText(et).width;return ot>0&&(st?ot-=tt:ot+=(jr.graphemeSegmenter(et).length-1)*tt),ot}static wordWrap(et,tt,nt=jr._canvas){const st=nt.getContext("2d",contextSettings);let ot=0,ct="",dt="";const ft=Object.create(null),{letterSpacing:gt,whiteSpace:yt}=tt,xt=jr.collapseSpaces(yt),St=jr.collapseNewlines(yt);let wt=!xt;const bt=tt.wordWrapWidth+gt,Pt=jr.tokenize(et);for(let Rt=0;Rt<Pt.length;Rt++){let Mt=Pt[Rt];if(jr.isNewline(Mt)){if(!St){dt+=jr.addLine(ct),wt=!xt,ct="",ot=0;continue}Mt=" "}if(xt){const Dt=jr.isBreakingSpace(Mt),zt=jr.isBreakingSpace(ct[ct.length-1]);if(Dt&&zt)continue}const kt=jr.getFromCache(Mt,gt,ft,st);if(kt>bt)if(ct!==""&&(dt+=jr.addLine(ct),ct="",ot=0),jr.canBreakWords(Mt,tt.breakWords)){const Dt=jr.wordWrapSplit(Mt);for(let zt=0;zt<Dt.length;zt++){let Lt=Dt[zt],Yt=Lt,Nt=1;for(;Dt[zt+Nt];){const ur=Dt[zt+Nt];if(!jr.canBreakChars(Yt,ur,Mt,zt,tt.breakWords))Lt+=ur;else break;Yt=ur,Nt++}zt+=Nt-1;const Jt=jr.getFromCache(Lt,gt,ft,st);Jt+ot>bt&&(dt+=jr.addLine(ct),wt=!1,ct="",ot=0),ct+=Lt,ot+=Jt}}else{ct.length>0&&(dt+=jr.addLine(ct),ct="",ot=0);const Dt=Rt===Pt.length-1;dt+=jr.addLine(Mt,!Dt),wt=!1,ct="",ot=0}else kt+ot>bt&&(wt=!1,dt+=jr.addLine(ct),ct="",ot=0),(ct.length>0||!jr.isBreakingSpace(Mt)||wt)&&(ct+=Mt,ot+=kt)}return dt+=jr.addLine(ct,!1),dt}static addLine(et,tt=!0){return et=jr.trimRight(et),et=tt?`${et}
`:et,et}static getFromCache(et,tt,nt,st){let ot=nt[et];return typeof ot!="number"&&(ot=jr._measureText(et,tt,st)+tt,nt[et]=ot),ot}static collapseSpaces(et){return et==="normal"||et==="pre-line"}static collapseNewlines(et){return et==="normal"}static trimRight(et){if(typeof et!="string")return"";for(let tt=et.length-1;tt>=0;tt--){const nt=et[tt];if(!jr.isBreakingSpace(nt))break;et=et.slice(0,-1)}return et}static isNewline(et){return typeof et!="string"?!1:jr._newlines.includes(et.charCodeAt(0))}static isBreakingSpace(et,tt){return typeof et!="string"?!1:jr._breakingSpaces.includes(et.charCodeAt(0))}static tokenize(et){const tt=[];let nt="";if(typeof et!="string")return tt;for(let st=0;st<et.length;st++){const ot=et[st],ct=et[st+1];if(jr.isBreakingSpace(ot,ct)||jr.isNewline(ot)){nt!==""&&(tt.push(nt),nt=""),tt.push(ot);continue}nt+=ot}return nt!==""&&tt.push(nt),tt}static canBreakWords(et,tt){return tt}static canBreakChars(et,tt,nt,st,ot){return!0}static wordWrapSplit(et){return jr.graphemeSegmenter(et)}static measureFont(et){if(jr._fonts[et])return jr._fonts[et];const tt={ascent:0,descent:0,fontSize:0},nt=jr._canvas,st=jr._context;st.font=et;const ot=jr.METRICS_STRING+jr.BASELINE_SYMBOL,ct=Math.ceil(st.measureText(ot).width);let dt=Math.ceil(st.measureText(jr.BASELINE_SYMBOL).width);const ft=Math.ceil(jr.HEIGHT_MULTIPLIER*dt);if(dt=dt*jr.BASELINE_MULTIPLIER|0,ct===0||ft===0)return jr._fonts[et]=tt,tt;nt.width=ct,nt.height=ft,st.fillStyle="#f00",st.fillRect(0,0,ct,ft),st.font=et,st.textBaseline="alphabetic",st.fillStyle="#000",st.fillText(ot,0,dt);const gt=st.getImageData(0,0,ct,ft).data,yt=gt.length,xt=ct*4;let St=0,wt=0,bt=!1;for(St=0;St<dt;++St){for(let Pt=0;Pt<xt;Pt+=4)if(gt[wt+Pt]!==255){bt=!0;break}if(!bt)wt+=xt;else break}for(tt.ascent=dt-St,wt=yt-xt,bt=!1,St=ft;St>dt;--St){for(let Pt=0;Pt<xt;Pt+=4)if(gt[wt+Pt]!==255){bt=!0;break}if(!bt)wt-=xt;else break}return tt.descent=St-dt,tt.fontSize=tt.ascent+tt.descent,jr._fonts[et]=tt,tt}static clearMetrics(et=""){et?delete jr._fonts[et]:jr._fonts={}}static get _canvas(){var et;if(!jr.__canvas){let tt;try{const nt=new OffscreenCanvas(0,0);if((et=nt.getContext("2d",contextSettings))!=null&&et.measureText)return jr.__canvas=nt,nt;tt=settings.ADAPTER.createCanvas()}catch{tt=settings.ADAPTER.createCanvas()}tt.width=tt.height=10,jr.__canvas=tt}return jr.__canvas}static get _context(){return jr.__context||(jr.__context=jr._canvas.getContext("2d",contextSettings)),jr.__context}};_TextMetrics.METRICS_STRING="|ÉqÅ",_TextMetrics.BASELINE_SYMBOL="M",_TextMetrics.BASELINE_MULTIPLIER=1.4,_TextMetrics.HEIGHT_MULTIPLIER=2,_TextMetrics.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const rt=new Intl.Segmenter;return et=>[...rt.segment(et)].map(tt=>tt.segment)}return rt=>[...rt]})(),_TextMetrics.experimentalLetterSpacing=!1,_TextMetrics._fonts={},_TextMetrics._newlines=[10,13],_TextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let TextMetrics=_TextMetrics;const genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],_TextStyle=class Ch{constructor(et){this.styleID=0,this.reset(),deepCopyProperties(this,et,et)}clone(){const et={};return deepCopyProperties(et,this,Ch.defaultStyle),new Ch(et)}reset(){deepCopyProperties(this,Ch.defaultStyle,Ch.defaultStyle)}get align(){return this._align}set align(et){this._align!==et&&(this._align=et,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(et){this._breakWords!==et&&(this._breakWords=et,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(et){this._dropShadow!==et&&(this._dropShadow=et,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(et){this._dropShadowAlpha!==et&&(this._dropShadowAlpha=et,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(et){this._dropShadowAngle!==et&&(this._dropShadowAngle=et,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(et){this._dropShadowBlur!==et&&(this._dropShadowBlur=et,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(et){const tt=getColor(et);this._dropShadowColor!==tt&&(this._dropShadowColor=tt,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(et){this._dropShadowDistance!==et&&(this._dropShadowDistance=et,this.styleID++)}get fill(){return this._fill}set fill(et){const tt=getColor(et);this._fill!==tt&&(this._fill=tt,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(et){this._fillGradientType!==et&&(this._fillGradientType=et,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(et){areArraysEqual(this._fillGradientStops,et)||(this._fillGradientStops=et,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(et){this.fontFamily!==et&&(this._fontFamily=et,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(et){this._fontSize!==et&&(this._fontSize=et,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(et){this._fontStyle!==et&&(this._fontStyle=et,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(et){this._fontVariant!==et&&(this._fontVariant=et,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(et){this._fontWeight!==et&&(this._fontWeight=et,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(et){this._letterSpacing!==et&&(this._letterSpacing=et,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(et){this._lineHeight!==et&&(this._lineHeight=et,this.styleID++)}get leading(){return this._leading}set leading(et){this._leading!==et&&(this._leading=et,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(et){this._lineJoin!==et&&(this._lineJoin=et,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(et){this._miterLimit!==et&&(this._miterLimit=et,this.styleID++)}get padding(){return this._padding}set padding(et){this._padding!==et&&(this._padding=et,this.styleID++)}get stroke(){return this._stroke}set stroke(et){const tt=getColor(et);this._stroke!==tt&&(this._stroke=tt,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(et){this._strokeThickness!==et&&(this._strokeThickness=et,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(et){this._textBaseline!==et&&(this._textBaseline=et,this.styleID++)}get trim(){return this._trim}set trim(et){this._trim!==et&&(this._trim=et,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(et){this._whiteSpace!==et&&(this._whiteSpace=et,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(et){this._wordWrap!==et&&(this._wordWrap=et,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(et){this._wordWrapWidth!==et&&(this._wordWrapWidth=et,this.styleID++)}toFontString(){const et=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let tt=this.fontFamily;Array.isArray(this.fontFamily)||(tt=this.fontFamily.split(","));for(let nt=tt.length-1;nt>=0;nt--){let st=tt[nt].trim();!/([\"\'])[^\'\"]+\1/.test(st)&&!genericFontFamilies.includes(st)&&(st=`"${st}"`),tt[nt]=st}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${et} ${tt.join(",")}`}};_TextStyle.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let TextStyle=_TextStyle;function getColor(rt){const et=Color.shared,tt=nt=>{const st=et.setValue(nt);return st.alpha===1?st.toHex():st.toRgbaString()};return Array.isArray(rt)?rt.map(tt):tt(rt)}function areArraysEqual(rt,et){if(!Array.isArray(rt)||!Array.isArray(et)||rt.length!==et.length)return!1;for(let tt=0;tt<rt.length;++tt)if(rt[tt]!==et[tt])return!1;return!0}function deepCopyProperties(rt,et,tt){for(const nt in tt)Array.isArray(et[nt])?rt[nt]=et[nt].slice():rt[nt]=et[nt]}const defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_Text=class ff extends Sprite{constructor(et,tt,nt){let st=!1;nt||(nt=settings.ADAPTER.createCanvas(),st=!0),nt.width=3,nt.height=3;const ot=Texture.from(nt);ot.orig=new Rectangle,ot.trim=new Rectangle,super(ot),this._ownCanvas=st,this.canvas=nt,this.context=nt.getContext("2d",{willReadFrequently:!0}),this._resolution=ff.defaultResolution??settings.RESOLUTION,this._autoResolution=ff.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=et,this.style=tt,this.localStyleID=-1}static get experimentalLetterSpacing(){return TextMetrics.experimentalLetterSpacing}static set experimentalLetterSpacing(et){deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),TextMetrics.experimentalLetterSpacing=et}updateText(et){const tt=this._style;if(this.localStyleID!==tt.styleID&&(this.dirty=!0,this.localStyleID=tt.styleID),!this.dirty&&et)return;this._font=this._style.toFontString();const nt=this.context,st=TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),ot=st.width,ct=st.height,dt=st.lines,ft=st.lineHeight,gt=st.lineWidths,yt=st.maxLineWidth,xt=st.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,ot)+tt.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,ct)+tt.padding*2)*this._resolution),nt.scale(this._resolution,this._resolution),nt.clearRect(0,0,this.canvas.width,this.canvas.height),nt.font=this._font,nt.lineWidth=tt.strokeThickness,nt.textBaseline=tt.textBaseline,nt.lineJoin=tt.lineJoin,nt.miterLimit=tt.miterLimit;let St,wt;const bt=tt.dropShadow?2:1;for(let Pt=0;Pt<bt;++Pt){const Rt=tt.dropShadow&&Pt===0,Mt=Rt?Math.ceil(Math.max(1,ct)+tt.padding*2):0,kt=Mt*this._resolution;if(Rt){nt.fillStyle="black",nt.strokeStyle="black";const zt=tt.dropShadowColor,Lt=tt.dropShadowBlur*this._resolution,Yt=tt.dropShadowDistance*this._resolution;nt.shadowColor=Color.shared.setValue(zt).setAlpha(tt.dropShadowAlpha).toRgbaString(),nt.shadowBlur=Lt,nt.shadowOffsetX=Math.cos(tt.dropShadowAngle)*Yt,nt.shadowOffsetY=Math.sin(tt.dropShadowAngle)*Yt+kt}else nt.fillStyle=this._generateFillStyle(tt,dt,st),nt.strokeStyle=tt.stroke,nt.shadowColor="black",nt.shadowBlur=0,nt.shadowOffsetX=0,nt.shadowOffsetY=0;let Dt=(ft-xt.fontSize)/2;ft-xt.fontSize<0&&(Dt=0);for(let zt=0;zt<dt.length;zt++)St=tt.strokeThickness/2,wt=tt.strokeThickness/2+zt*ft+xt.ascent+Dt,tt.align==="right"?St+=yt-gt[zt]:tt.align==="center"&&(St+=(yt-gt[zt])/2),tt.stroke&&tt.strokeThickness&&this.drawLetterSpacing(dt[zt],St+tt.padding,wt+tt.padding-Mt,!0),tt.fill&&this.drawLetterSpacing(dt[zt],St+tt.padding,wt+tt.padding-Mt)}this.updateTexture()}drawLetterSpacing(et,tt,nt,st=!1){const ot=this._style.letterSpacing;let ct=!1;if(TextMetrics.experimentalLetterSpacingSupported&&(TextMetrics.experimentalLetterSpacing?(this.context.letterSpacing=`${ot}px`,this.context.textLetterSpacing=`${ot}px`,ct=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),ot===0||ct){st?this.context.strokeText(et,tt,nt):this.context.fillText(et,tt,nt);return}let dt=tt;const ft=TextMetrics.graphemeSegmenter(et);let gt=this.context.measureText(et).width,yt=0;for(let xt=0;xt<ft.length;++xt){const St=ft[xt];st?this.context.strokeText(St,dt,nt):this.context.fillText(St,dt,nt);let wt="";for(let bt=xt+1;bt<ft.length;++bt)wt+=ft[bt];yt=this.context.measureText(wt).width,dt+=gt-yt+ot,gt=yt}}updateTexture(){const et=this.canvas;if(this._style.trim){const ct=trimCanvas(et);ct.data&&(et.width=ct.width,et.height=ct.height,this.context.putImageData(ct.data,0,0))}const tt=this._texture,nt=this._style,st=nt.trim?0:nt.padding,ot=tt.baseTexture;tt.trim.width=tt._frame.width=et.width/this._resolution,tt.trim.height=tt._frame.height=et.height/this._resolution,tt.trim.x=-st,tt.trim.y=-st,tt.orig.width=tt._frame.width-st*2,tt.orig.height=tt._frame.height-st*2,this._onTextureUpdate(),ot.setRealSize(et.width,et.height,this._resolution),tt.updateUvs(),this.dirty=!1}_render(et){this._autoResolution&&this._resolution!==et.resolution&&(this._resolution=et.resolution,this.dirty=!0),this.updateText(!0),super._render(et)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(et,tt){return this.updateText(!0),this._textureID===-1&&(et=!1),super.getBounds(et,tt)}getLocalBounds(et){return this.updateText(!0),super.getLocalBounds.call(this,et)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(et,tt,nt){const st=et.fill;if(Array.isArray(st)){if(st.length===1)return st[0]}else return st;let ot;const ct=et.dropShadow?et.dropShadowDistance:0,dt=et.padding||0,ft=this.canvas.width/this._resolution-ct-dt*2,gt=this.canvas.height/this._resolution-ct-dt*2,yt=st.slice(),xt=et.fillGradientStops.slice();if(!xt.length){const St=yt.length+1;for(let wt=1;wt<St;++wt)xt.push(wt/St)}if(yt.unshift(st[0]),xt.unshift(0),yt.push(st[st.length-1]),xt.push(1),et.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){ot=this.context.createLinearGradient(ft/2,dt,ft/2,gt+dt);const St=nt.fontProperties.fontSize+et.strokeThickness;for(let wt=0;wt<tt.length;wt++){const bt=nt.lineHeight*(wt-1)+St,Pt=nt.lineHeight*wt;let Rt=Pt;wt>0&&bt>Pt&&(Rt=(Pt+bt)/2);const Mt=Pt+St,kt=nt.lineHeight*(wt+1);let Dt=Mt;wt+1<tt.length&&kt<Mt&&(Dt=(Mt+kt)/2);const zt=(Dt-Rt)/gt;for(let Lt=0;Lt<yt.length;Lt++){let Yt=0;typeof xt[Lt]=="number"?Yt=xt[Lt]:Yt=Lt/yt.length;let Nt=Math.min(1,Math.max(0,Rt/gt+Yt*zt));Nt=Number(Nt.toFixed(5)),ot.addColorStop(Nt,yt[Lt])}}}else{ot=this.context.createLinearGradient(dt,gt/2,ft+dt,gt/2);const St=yt.length+1;let wt=1;for(let bt=0;bt<yt.length;bt++){let Pt;typeof xt[bt]=="number"?Pt=xt[bt]:Pt=wt/St,ot.addColorStop(Pt,yt[bt]),wt++}}return ot}destroy(et){typeof et=="boolean"&&(et={children:et}),et=Object.assign({},defaultDestroyOptions,et),super.destroy(et),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(et){this.updateText(!0);const tt=sign(this.scale.x)||1;this.scale.x=tt*et/this._texture.orig.width,this._width=et}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(et){this.updateText(!0);const tt=sign(this.scale.y)||1;this.scale.y=tt*et/this._texture.orig.height,this._height=et}get style(){return this._style}set style(et){et=et||{},et instanceof TextStyle?this._style=et:this._style=new TextStyle(et),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(et){et=String(et??""),this._text!==et&&(this._text=et,this.dirty=!0)}get resolution(){return this._resolution}set resolution(et){this._autoResolution=!1,this._resolution!==et&&(this._resolution=et,this.dirty=!0)}};_Text.defaultAutoResolution=!0;let Text=_Text;class BitmapFontData{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class TextFormat{static test(et){return typeof et=="string"&&et.startsWith("info face=")}static parse(et){const tt=et.match(/^[a-z]+\s+.+$/gm),nt={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const ot in tt){const ct=tt[ot].match(/^[a-z]+/gm)[0],dt=tt[ot].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),ft={};for(const gt in dt){const yt=dt[gt].split("="),xt=yt[0],St=yt[1].replace(/"/gm,""),wt=parseFloat(St),bt=isNaN(wt)?St:wt;ft[xt]=bt}nt[ct].push(ft)}const st=new BitmapFontData;return nt.info.forEach(ot=>st.info.push({face:ot.face,size:parseInt(ot.size,10)})),nt.common.forEach(ot=>st.common.push({lineHeight:parseInt(ot.lineHeight,10)})),nt.page.forEach(ot=>st.page.push({id:parseInt(ot.id,10),file:ot.file})),nt.char.forEach(ot=>st.char.push({id:parseInt(ot.id,10),page:parseInt(ot.page,10),x:parseInt(ot.x,10),y:parseInt(ot.y,10),width:parseInt(ot.width,10),height:parseInt(ot.height,10),xoffset:parseInt(ot.xoffset,10),yoffset:parseInt(ot.yoffset,10),xadvance:parseInt(ot.xadvance,10)})),nt.kerning.forEach(ot=>st.kerning.push({first:parseInt(ot.first,10),second:parseInt(ot.second,10),amount:parseInt(ot.amount,10)})),nt.distanceField.forEach(ot=>st.distanceField.push({distanceRange:parseInt(ot.distanceRange,10),fieldType:ot.fieldType})),st}}class XMLFormat{static test(et){const tt=et;return typeof et!="string"&&"getElementsByTagName"in et&&tt.getElementsByTagName("page").length&&tt.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(et){const tt=new BitmapFontData,nt=et.getElementsByTagName("info"),st=et.getElementsByTagName("common"),ot=et.getElementsByTagName("page"),ct=et.getElementsByTagName("char"),dt=et.getElementsByTagName("kerning"),ft=et.getElementsByTagName("distanceField");for(let gt=0;gt<nt.length;gt++)tt.info.push({face:nt[gt].getAttribute("face"),size:parseInt(nt[gt].getAttribute("size"),10)});for(let gt=0;gt<st.length;gt++)tt.common.push({lineHeight:parseInt(st[gt].getAttribute("lineHeight"),10)});for(let gt=0;gt<ot.length;gt++)tt.page.push({id:parseInt(ot[gt].getAttribute("id"),10)||0,file:ot[gt].getAttribute("file")});for(let gt=0;gt<ct.length;gt++){const yt=ct[gt];tt.char.push({id:parseInt(yt.getAttribute("id"),10),page:parseInt(yt.getAttribute("page"),10)||0,x:parseInt(yt.getAttribute("x"),10),y:parseInt(yt.getAttribute("y"),10),width:parseInt(yt.getAttribute("width"),10),height:parseInt(yt.getAttribute("height"),10),xoffset:parseInt(yt.getAttribute("xoffset"),10),yoffset:parseInt(yt.getAttribute("yoffset"),10),xadvance:parseInt(yt.getAttribute("xadvance"),10)})}for(let gt=0;gt<dt.length;gt++)tt.kerning.push({first:parseInt(dt[gt].getAttribute("first"),10),second:parseInt(dt[gt].getAttribute("second"),10),amount:parseInt(dt[gt].getAttribute("amount"),10)});for(let gt=0;gt<ft.length;gt++)tt.distanceField.push({fieldType:ft[gt].getAttribute("fieldType"),distanceRange:parseInt(ft[gt].getAttribute("distanceRange"),10)});return tt}}class XMLStringFormat{static test(et){return typeof et=="string"&&et.includes("<font>")?XMLFormat.test(settings.ADAPTER.parseXML(et)):!1}static parse(et){return XMLFormat.parse(settings.ADAPTER.parseXML(et))}}const formats=[TextFormat,XMLFormat,XMLStringFormat];function autoDetectFormat(rt){for(let et=0;et<formats.length;et++)if(formats[et].test(rt))return formats[et];return null}function generateFillStyle(rt,et,tt,nt,st,ot){const ct=tt.fill;if(Array.isArray(ct)){if(ct.length===1)return ct[0]}else return ct;let dt;const ft=tt.dropShadow?tt.dropShadowDistance:0,gt=tt.padding||0,yt=rt.width/nt-ft-gt*2,xt=rt.height/nt-ft-gt*2,St=ct.slice(),wt=tt.fillGradientStops.slice();if(!wt.length){const bt=St.length+1;for(let Pt=1;Pt<bt;++Pt)wt.push(Pt/bt)}if(St.unshift(ct[0]),wt.unshift(0),St.push(ct[ct.length-1]),wt.push(1),tt.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){dt=et.createLinearGradient(yt/2,gt,yt/2,xt+gt);let bt=0;const Pt=(ot.fontProperties.fontSize+tt.strokeThickness)/xt;for(let Rt=0;Rt<st.length;Rt++){const Mt=ot.lineHeight*Rt;for(let kt=0;kt<St.length;kt++){let Dt=0;typeof wt[kt]=="number"?Dt=wt[kt]:Dt=kt/St.length;const zt=Mt/xt+Dt*Pt;let Lt=Math.max(bt,zt);Lt=Math.min(Lt,1),dt.addColorStop(Lt,St[kt]),bt=Lt}}}else{dt=et.createLinearGradient(gt,xt/2,yt+gt,xt/2);const bt=St.length+1;let Pt=1;for(let Rt=0;Rt<St.length;Rt++){let Mt;typeof wt[Rt]=="number"?Mt=wt[Rt]:Mt=Pt/bt,dt.addColorStop(Mt,St[Rt]),Pt++}}return dt}function drawGlyph(rt,et,tt,nt,st,ot,ct){const dt=tt.text,ft=tt.fontProperties;et.translate(nt,st),et.scale(ot,ot);const gt=ct.strokeThickness/2,yt=-(ct.strokeThickness/2);if(et.font=ct.toFontString(),et.lineWidth=ct.strokeThickness,et.textBaseline=ct.textBaseline,et.lineJoin=ct.lineJoin,et.miterLimit=ct.miterLimit,et.fillStyle=generateFillStyle(rt,et,ct,ot,[dt],tt),et.strokeStyle=ct.stroke,ct.dropShadow){const xt=ct.dropShadowColor,St=ct.dropShadowBlur*ot,wt=ct.dropShadowDistance*ot;et.shadowColor=Color.shared.setValue(xt).setAlpha(ct.dropShadowAlpha).toRgbaString(),et.shadowBlur=St,et.shadowOffsetX=Math.cos(ct.dropShadowAngle)*wt,et.shadowOffsetY=Math.sin(ct.dropShadowAngle)*wt}else et.shadowColor="black",et.shadowBlur=0,et.shadowOffsetX=0,et.shadowOffsetY=0;ct.stroke&&ct.strokeThickness&&et.strokeText(dt,gt,yt+tt.lineHeight-ft.descent),ct.fill&&et.fillText(dt,gt,yt+tt.lineHeight-ft.descent),et.setTransform(1,0,0,1,0,0),et.fillStyle="rgba(0, 0, 0, 0)"}function extractCharCode(rt){return rt.codePointAt?rt.codePointAt(0):rt.charCodeAt(0)}function splitTextToCharacters(rt){return Array.from?Array.from(rt):rt.split("")}function resolveCharacters(rt){typeof rt=="string"&&(rt=[rt]);const et=[];for(let tt=0,nt=rt.length;tt<nt;tt++){const st=rt[tt];if(Array.isArray(st)){if(st.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${st.length}.`);const ot=st[0].charCodeAt(0),ct=st[1].charCodeAt(0);if(ct<ot)throw new Error("[BitmapFont]: Invalid character range.");for(let dt=ot,ft=ct;dt<=ft;dt++)et.push(String.fromCharCode(dt))}else et.push(...splitTextToCharacters(st))}if(et.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return et}const _BitmapFont=class lo{constructor(et,tt,nt){var yt;const[st]=et.info,[ot]=et.common,[ct]=et.page,[dt]=et.distanceField,ft=getResolutionOfUrl(ct.file),gt={};this._ownsTextures=nt,this.font=st.face,this.size=st.size,this.lineHeight=ot.lineHeight/ft,this.chars={},this.pageTextures=gt;for(let xt=0;xt<et.page.length;xt++){const{id:St,file:wt}=et.page[xt];gt[St]=tt instanceof Array?tt[xt]:tt[wt],dt!=null&&dt.fieldType&&dt.fieldType!=="none"&&(gt[St].baseTexture.alphaMode=ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,gt[St].baseTexture.mipmap=MIPMAP_MODES.OFF)}for(let xt=0;xt<et.char.length;xt++){const{id:St,page:wt}=et.char[xt];let{x:bt,y:Pt,width:Rt,height:Mt,xoffset:kt,yoffset:Dt,xadvance:zt}=et.char[xt];bt/=ft,Pt/=ft,Rt/=ft,Mt/=ft,kt/=ft,Dt/=ft,zt/=ft;const Lt=new Rectangle(bt+gt[wt].frame.x/ft,Pt+gt[wt].frame.y/ft,Rt,Mt);this.chars[St]={xOffset:kt,yOffset:Dt,xAdvance:zt,kerning:{},texture:new Texture(gt[wt].baseTexture,Lt),page:wt}}for(let xt=0;xt<et.kerning.length;xt++){let{first:St,second:wt,amount:bt}=et.kerning[xt];St/=ft,wt/=ft,bt/=ft,this.chars[wt]&&(this.chars[wt].kerning[St]=bt)}this.distanceFieldRange=dt==null?void 0:dt.distanceRange,this.distanceFieldType=((yt=dt==null?void 0:dt.fieldType)==null?void 0:yt.toLowerCase())??"none"}destroy(){for(const et in this.chars)this.chars[et].texture.destroy(),this.chars[et].texture=null;for(const et in this.pageTextures)this._ownsTextures&&this.pageTextures[et].destroy(!0),this.pageTextures[et]=null;this.chars=null,this.pageTextures=null}static install(et,tt,nt){let st;if(et instanceof BitmapFontData)st=et;else{const ct=autoDetectFormat(et);if(!ct)throw new Error("Unrecognized data format for font.");st=ct.parse(et)}tt instanceof Texture&&(tt=[tt]);const ot=new lo(st,tt,nt);return lo.available[ot.font]=ot,ot}static uninstall(et){const tt=lo.available[et];if(!tt)throw new Error(`No font found named '${et}'`);tt.destroy(),delete lo.available[et]}static from(et,tt,nt){if(!et)throw new Error("[BitmapFont] Property `name` is required.");const{chars:st,padding:ot,resolution:ct,textureWidth:dt,textureHeight:ft,...gt}=Object.assign({},lo.defaultOptions,nt),yt=resolveCharacters(st),xt=tt instanceof TextStyle?tt:new TextStyle(tt),St=dt,wt=new BitmapFontData;wt.info[0]={face:xt.fontFamily,size:xt.fontSize},wt.common[0]={lineHeight:xt.fontSize};let bt=0,Pt=0,Rt,Mt,kt,Dt=0;const zt=[];for(let Yt=0;Yt<yt.length;Yt++){Rt||(Rt=settings.ADAPTER.createCanvas(),Rt.width=dt,Rt.height=ft,Mt=Rt.getContext("2d"),kt=new BaseTexture(Rt,{resolution:ct,...gt}),zt.push(new Texture(kt)),wt.page.push({id:zt.length-1,file:""}));const Nt=yt[Yt],Jt=TextMetrics.measureText(Nt,xt,!1,Rt),ur=Jt.width,dr=Math.ceil(Jt.height),Tr=Math.ceil((xt.fontStyle==="italic"?2:1)*ur);if(Pt>=ft-dr*ct){if(Pt===0)throw new Error(`[BitmapFont] textureHeight ${ft}px is too small (fontFamily: '${xt.fontFamily}', fontSize: ${xt.fontSize}px, char: '${Nt}')`);--Yt,Rt=null,Mt=null,kt=null,Pt=0,bt=0,Dt=0;continue}if(Dt=Math.max(dr+Jt.fontProperties.descent,Dt),Tr*ct+bt>=St){if(bt===0)throw new Error(`[BitmapFont] textureWidth ${dt}px is too small (fontFamily: '${xt.fontFamily}', fontSize: ${xt.fontSize}px, char: '${Nt}')`);--Yt,Pt+=Dt*ct,Pt=Math.ceil(Pt),bt=0,Dt=0;continue}drawGlyph(Rt,Mt,Jt,bt,Pt,ct,xt);const Kt=extractCharCode(Jt.text);wt.char.push({id:Kt,page:zt.length-1,x:bt/ct,y:Pt/ct,width:Tr,height:dr,xoffset:0,yoffset:0,xadvance:ur-(xt.dropShadow?xt.dropShadowDistance:0)-(xt.stroke?xt.strokeThickness:0)}),bt+=(Tr+2*ot)*ct,bt=Math.ceil(bt)}if(!(nt!=null&&nt.skipKerning))for(let Yt=0,Nt=yt.length;Yt<Nt;Yt++){const Jt=yt[Yt];for(let ur=0;ur<Nt;ur++){const dr=yt[ur],Tr=Mt.measureText(Jt).width,Kt=Mt.measureText(dr).width,Zt=Mt.measureText(Jt+dr).width-(Tr+Kt);Zt&&wt.kerning.push({first:extractCharCode(Jt),second:extractCharCode(dr),amount:Zt})}}const Lt=new lo(wt,zt,!0);return lo.available[et]!==void 0&&lo.uninstall(et),lo.available[et]=Lt,Lt}};_BitmapFont.ALPHA=[["a","z"],["A","Z"]," "],_BitmapFont.NUMERIC=[["0","9"]],_BitmapFont.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],_BitmapFont.ASCII=[[" ","~"]],_BitmapFont.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:_BitmapFont.ALPHANUMERIC},_BitmapFont.available={};let BitmapFont=_BitmapFont;class MeshBatchUvs{constructor(et,tt){this.uvBuffer=et,this.uvMatrix=tt,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(et){if(!et&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const tt=this.uvBuffer.data;(!this.data||this.data.length!==tt.length)&&(this.data=new Float32Array(tt.length)),this.uvMatrix.multiplyUvs(tt,this.data),this._updateID++}}const tempPoint$1=new Point,tempPolygon=new Polygon,_Mesh=class Yf extends Container{constructor(et,tt,nt,st=DRAW_MODES.TRIANGLES){super(),this.geometry=et,this.shader=tt,this.state=nt||State.for2d(),this.drawMode=st,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=settings.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(et){this._geometry!==et&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=et,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(et){this.shader=et}get material(){return this.shader}set blendMode(et){this.state.blendMode=et}get blendMode(){return this.state.blendMode}set roundPixels(et){this._roundPixels!==et&&(this._transformID=-1),this._roundPixels=et}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(et){this.shader.tint=et}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(et){this.shader.texture=et}_render(et){const tt=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===DRAW_MODES.TRIANGLES&&tt.length<Yf.BATCHABLE_SIZE*2?this._renderToBatch(et):this._renderDefault(et)}_renderDefault(et){const tt=this.shader;tt.alpha=this.worldAlpha,tt.update&&tt.update(),et.batch.flush(),tt.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),et.shader.bind(tt),et.state.set(this.state),et.geometry.bind(this.geometry,tt),et.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(et){const tt=this.geometry,nt=this.shader;nt.uvMatrix&&(nt.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=tt.indexBuffer.data,this._tintRGB=nt._tintRGB,this._texture=nt.texture;const st=this.material.pluginName;et.batch.setObjectRenderer(et.plugins[st]),et.plugins[st].render(this)}calculateVertices(){const et=this.geometry.buffers[0],tt=et.data,nt=et._updateID;if(nt===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==tt.length&&(this.vertexData=new Float32Array(tt.length));const st=this.transform.worldTransform,ot=st.a,ct=st.b,dt=st.c,ft=st.d,gt=st.tx,yt=st.ty,xt=this.vertexData;for(let St=0;St<xt.length/2;St++){const wt=tt[St*2],bt=tt[St*2+1];xt[St*2]=ot*wt+dt*bt+gt,xt[St*2+1]=ct*wt+ft*bt+yt}if(this._roundPixels){const St=settings.RESOLUTION;for(let wt=0;wt<xt.length;++wt)xt[wt]=Math.round(xt[wt]*St)/St}this.vertexDirty=nt}calculateUvs(){const et=this.geometry.buffers[1],tt=this.shader;tt.uvMatrix.isSimple?this.uvs=et.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(et,tt.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(et){if(!this.getBounds().contains(et.x,et.y))return!1;this.worldTransform.applyInverse(et,tempPoint$1);const tt=this.geometry.getBuffer("aVertexPosition").data,nt=tempPolygon.points,st=this.geometry.getIndex().data,ot=st.length,ct=this.drawMode===4?3:1;for(let dt=0;dt+2<ot;dt+=ct){const ft=st[dt]*2,gt=st[dt+1]*2,yt=st[dt+2]*2;if(nt[0]=tt[ft],nt[1]=tt[ft+1],nt[2]=tt[gt],nt[3]=tt[gt+1],nt[4]=tt[yt],nt[5]=tt[yt+1],tempPolygon.contains(tempPoint$1.x,tempPoint$1.y))return!0}return!1}destroy(et){super.destroy(et),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};_Mesh.BATCHABLE_SIZE=100;let Mesh=_Mesh;class MeshGeometry extends Geometry{constructor(et,tt,nt){super();const st=new Buffer(et),ot=new Buffer(tt,!0),ct=new Buffer(nt,!0,!0);this.addAttribute("aVertexPosition",st,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",ot,2,!1,TYPES.FLOAT).addIndex(ct),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var fragment$6=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class MeshMaterial extends Shader{constructor(et,tt){const nt={uSampler:et,alpha:1,uTextureMatrix:Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};tt=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},tt),tt.uniforms&&Object.assign(nt,tt.uniforms),super(tt.program||Program.from(vertex$3,fragment$6),nt),this._colorDirty=!1,this.uvMatrix=new TextureMatrix(et),this.batchable=tt.program===void 0,this.pluginName=tt.pluginName,this._tintColor=new Color(tt.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=tt.alpha}get texture(){return this.uniforms.uSampler}set texture(et){this.uniforms.uSampler!==et&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!et.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=et,this.uvMatrix.texture=et)}set alpha(et){et!==this._alpha&&(this._alpha=et,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(et){et!==this.tint&&(this._tintColor.setValue(et),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const et=this.texture.baseTexture.alphaMode;Color.shared.setValue(this._tintColor).premultiply(this._alpha,et).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}var msdfFrag=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,msdfVert=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const pageMeshDataDefaultPageMeshData=[],pageMeshDataMSDFPageMeshData=[],charRenderDataPool=[],_BitmapText=class Kf extends Container{constructor(et,tt={}){super();const{align:nt,tint:st,maxWidth:ot,letterSpacing:ct,fontName:dt,fontSize:ft}=Object.assign({},Kf.styleDefaults,tt);if(!BitmapFont.available[dt])throw new Error(`Missing BitmapFont "${dt}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=nt,this._tintColor=new Color(st),this._font=void 0,this._fontName=dt,this._fontSize=ft,this.text=et,this._maxWidth=ot,this._maxLineHeight=0,this._letterSpacing=ct,this._anchor=new ObservablePoint(()=>{this.dirty=!0},this,0,0),this._roundPixels=settings.ROUND_PIXELS,this.dirty=!0,this._resolution=settings.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var Tr;const et=BitmapFont.available[this._fontName],tt=this.fontSize,nt=tt/et.size,st=new Point,ot=[],ct=[],dt=[],ft=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",gt=splitTextToCharacters(ft),yt=this._maxWidth*et.size/tt,xt=et.distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;let St=null,wt=0,bt=0,Pt=0,Rt=-1,Mt=0,kt=0,Dt=0,zt=0;for(let Kt=0;Kt<gt.length;Kt++){const Zt=gt[Kt],lr=extractCharCode(Zt);if(/(?:\s)/.test(Zt)&&(Rt=Kt,Mt=wt,zt++),Zt==="\r"||Zt===`
`){ct.push(wt),dt.push(-1),bt=Math.max(bt,wt),++Pt,++kt,st.x=0,st.y+=et.lineHeight,St=null,zt=0;continue}const vr=et.chars[lr];if(!vr)continue;St&&vr.kerning[St]&&(st.x+=vr.kerning[St]);const Ut=charRenderDataPool.pop()||{texture:Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Point};Ut.texture=vr.texture,Ut.line=Pt,Ut.charCode=lr,Ut.position.x=Math.round(st.x+vr.xOffset+this._letterSpacing/2),Ut.position.y=Math.round(st.y+vr.yOffset),Ut.prevSpaces=zt,ot.push(Ut),wt=Ut.position.x+Math.max(vr.xAdvance-vr.xOffset,vr.texture.orig.width),st.x+=vr.xAdvance+this._letterSpacing,Dt=Math.max(Dt,vr.yOffset+vr.texture.height),St=lr,Rt!==-1&&yt>0&&st.x>yt&&(++kt,removeItems(ot,1+Rt-kt,1+Kt-Rt),Kt=Rt,Rt=-1,ct.push(Mt),dt.push(ot.length>0?ot[ot.length-1].prevSpaces:0),bt=Math.max(bt,Mt),Pt++,st.x=0,st.y+=et.lineHeight,St=null,zt=0)}const Lt=gt[gt.length-1];Lt!=="\r"&&Lt!==`
`&&(/(?:\s)/.test(Lt)&&(wt=Mt),ct.push(wt),bt=Math.max(bt,wt),dt.push(-1));const Yt=[];for(let Kt=0;Kt<=Pt;Kt++){let Zt=0;this._align==="right"?Zt=bt-ct[Kt]:this._align==="center"?Zt=(bt-ct[Kt])/2:this._align==="justify"&&(Zt=dt[Kt]<0?0:(bt-ct[Kt])/dt[Kt]),Yt.push(Zt)}const Nt=ot.length,Jt={},ur=[],dr=this._activePagesMeshData;xt.push(...dr);for(let Kt=0;Kt<Nt;Kt++){const Zt=ot[Kt].texture,lr=Zt.baseTexture.uid;if(!Jt[lr]){let vr=xt.pop();if(!vr){const Ht=new MeshGeometry;let Ct,jt;et.distanceFieldType==="none"?(Ct=new MeshMaterial(Texture.EMPTY),jt=BLEND_MODES.NORMAL):(Ct=new MeshMaterial(Texture.EMPTY,{program:Program.from(msdfVert,msdfFrag),uniforms:{uFWidth:0}}),jt=BLEND_MODES.NORMAL_NPM);const Ft=new Mesh(Ht,Ct);Ft.blendMode=jt,vr={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Ft,vertices:null,uvs:null,indices:null}}vr.index=0,vr.indexCount=0,vr.vertexCount=0,vr.uvsCount=0,vr.total=0;const{_textureCache:Ut}=this;Ut[lr]=Ut[lr]||new Texture(Zt.baseTexture),vr.mesh.texture=Ut[lr],vr.mesh.tint=this._tintColor.value,ur.push(vr),Jt[lr]=vr}Jt[lr].total++}for(let Kt=0;Kt<dr.length;Kt++)ur.includes(dr[Kt])||this.removeChild(dr[Kt].mesh);for(let Kt=0;Kt<ur.length;Kt++)ur[Kt].mesh.parent!==this&&this.addChild(ur[Kt].mesh);this._activePagesMeshData=ur;for(const Kt in Jt){const Zt=Jt[Kt],lr=Zt.total;if(!(((Tr=Zt.indices)==null?void 0:Tr.length)>6*lr)||Zt.vertices.length<Mesh.BATCHABLE_SIZE*2)Zt.vertices=new Float32Array(4*2*lr),Zt.uvs=new Float32Array(4*2*lr),Zt.indices=new Uint16Array(6*lr);else{const vr=Zt.total,Ut=Zt.vertices;for(let Ht=vr*4*2;Ht<Ut.length;Ht++)Ut[Ht]=0}Zt.mesh.size=6*lr}for(let Kt=0;Kt<Nt;Kt++){const Zt=ot[Kt];let lr=Zt.position.x+Yt[Zt.line]*(this._align==="justify"?Zt.prevSpaces:1);this._roundPixels&&(lr=Math.round(lr));const vr=lr*nt,Ut=Zt.position.y*nt,Ht=Zt.texture,Ct=Jt[Ht.baseTexture.uid],jt=Ht.frame,Ft=Ht._uvs,It=Ct.index++;Ct.indices[It*6+0]=0+It*4,Ct.indices[It*6+1]=1+It*4,Ct.indices[It*6+2]=2+It*4,Ct.indices[It*6+3]=0+It*4,Ct.indices[It*6+4]=2+It*4,Ct.indices[It*6+5]=3+It*4,Ct.vertices[It*8+0]=vr,Ct.vertices[It*8+1]=Ut,Ct.vertices[It*8+2]=vr+jt.width*nt,Ct.vertices[It*8+3]=Ut,Ct.vertices[It*8+4]=vr+jt.width*nt,Ct.vertices[It*8+5]=Ut+jt.height*nt,Ct.vertices[It*8+6]=vr,Ct.vertices[It*8+7]=Ut+jt.height*nt,Ct.uvs[It*8+0]=Ft.x0,Ct.uvs[It*8+1]=Ft.y0,Ct.uvs[It*8+2]=Ft.x1,Ct.uvs[It*8+3]=Ft.y1,Ct.uvs[It*8+4]=Ft.x2,Ct.uvs[It*8+5]=Ft.y2,Ct.uvs[It*8+6]=Ft.x3,Ct.uvs[It*8+7]=Ft.y3}this._textWidth=bt*nt,this._textHeight=(st.y+et.lineHeight)*nt;for(const Kt in Jt){const Zt=Jt[Kt];if(this.anchor.x!==0||this.anchor.y!==0){let Ht=0;const Ct=this._textWidth*this.anchor.x,jt=this._textHeight*this.anchor.y;for(let Ft=0;Ft<Zt.total;Ft++)Zt.vertices[Ht++]-=Ct,Zt.vertices[Ht++]-=jt,Zt.vertices[Ht++]-=Ct,Zt.vertices[Ht++]-=jt,Zt.vertices[Ht++]-=Ct,Zt.vertices[Ht++]-=jt,Zt.vertices[Ht++]-=Ct,Zt.vertices[Ht++]-=jt}this._maxLineHeight=Dt*nt;const lr=Zt.mesh.geometry.getBuffer("aVertexPosition"),vr=Zt.mesh.geometry.getBuffer("aTextureCoord"),Ut=Zt.mesh.geometry.getIndex();lr.data=Zt.vertices,vr.data=Zt.uvs,Ut.data=Zt.indices,lr.update(),vr.update(),Ut.update()}for(let Kt=0;Kt<ot.length;Kt++)charRenderDataPool.push(ot[Kt]);this._font=et,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(et){this._autoResolution&&this._resolution!==et.resolution&&(this._resolution=et.resolution,this.dirty=!0);const{distanceFieldRange:tt,distanceFieldType:nt,size:st}=BitmapFont.available[this._fontName];if(nt!=="none"){const{a:ot,b:ct,c:dt,d:ft}=this.worldTransform,gt=Math.sqrt(ot*ot+ct*ct),yt=Math.sqrt(dt*dt+ft*ft),xt=(Math.abs(gt)+Math.abs(yt))/2,St=this.fontSize/st,wt=et._view.resolution;for(const bt of this._activePagesMeshData)bt.mesh.shader.uniforms.uFWidth=xt*tt*St*wt}super._render(et)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const et=BitmapFont.available[this._fontName];if(!et)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==et&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(et){if(this.tint!==et){this._tintColor.setValue(et);for(let tt=0;tt<this._activePagesMeshData.length;tt++)this._activePagesMeshData[tt].mesh.tint=et}}get align(){return this._align}set align(et){this._align!==et&&(this._align=et,this.dirty=!0)}get fontName(){return this._fontName}set fontName(et){if(!BitmapFont.available[et])throw new Error(`Missing BitmapFont "${et}"`);this._fontName!==et&&(this._fontName=et,this.dirty=!0)}get fontSize(){return this._fontSize??BitmapFont.available[this._fontName].size}set fontSize(et){this._fontSize!==et&&(this._fontSize=et,this.dirty=!0)}get anchor(){return this._anchor}set anchor(et){typeof et=="number"?this._anchor.set(et):this._anchor.copyFrom(et)}get text(){return this._text}set text(et){et=String(et??""),this._text!==et&&(this._text=et,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(et){this._maxWidth!==et&&(this._maxWidth=et,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(et){this._letterSpacing!==et&&(this._letterSpacing=et,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(et){et!==this._roundPixels&&(this._roundPixels=et,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(et){this._autoResolution=!1,this._resolution!==et&&(this._resolution=et,this.dirty=!0)}destroy(et){const{_textureCache:tt}=this,nt=BitmapFont.available[this._fontName].distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;nt.push(...this._activePagesMeshData);for(const st of this._activePagesMeshData)this.removeChild(st.mesh);this._activePagesMeshData=[],nt.filter(st=>tt[st.mesh.texture.baseTexture.uid]).forEach(st=>{st.mesh.texture=Texture.EMPTY});for(const st in tt)tt[st].destroy(),delete tt[st];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(et)}};_BitmapText.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let BitmapText=_BitmapText;const assetKeyMap={loader:ExtensionType.LoadParser,resolver:ExtensionType.ResolveParser,cache:ExtensionType.CacheParser,detection:ExtensionType.DetectionParser};extensions$1.handle(ExtensionType.Asset,rt=>{const et=rt.ref;Object.entries(assetKeyMap).filter(([tt])=>!!et[tt]).forEach(([tt,nt])=>extensions$1.add(Object.assign(et[tt],{extension:et[tt].extension??nt})))},rt=>{const et=rt.ref;Object.keys(assetKeyMap).filter(tt=>!!et[tt]).forEach(tt=>extensions$1.remove(et[tt]))});class BackgroundLoader{constructor(et,tt=!1){this._loader=et,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=tt}add(et){et.forEach(tt=>{this._assetList.push(tt)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const et=[],tt=Math.min(this._assetList.length,this._maxConcurrent);for(let nt=0;nt<tt;nt++)et.push(this._assetList.pop());await this._loader.load(et),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(et){this._isActive!==et&&(this._isActive=et,et&&!this._isLoading&&this._next())}}function checkDataUrl(rt,et){if(Array.isArray(et)){for(const tt of et)if(rt.startsWith(`data:${tt}`))return!0;return!1}return rt.startsWith(`data:${et}`)}function checkExtension(rt,et){const tt=rt.split("?")[0],nt=path.extname(tt).toLowerCase();return Array.isArray(et)?et.includes(nt):nt===et}const convertToList=(rt,et,tt=!1)=>(Array.isArray(rt)||(rt=[rt]),et?rt.map(nt=>typeof nt=="string"||tt?et(nt):nt):rt),copySearchParams=(rt,et)=>{const tt=et.split("?")[1];return tt&&(rt+=`?${tt}`),rt};function processX(rt,et,tt,nt,st){const ot=et[tt];for(let ct=0;ct<ot.length;ct++){const dt=ot[ct];tt<et.length-1?processX(rt.replace(nt[tt],dt),et,tt+1,nt,st):st.push(rt.replace(nt[tt],dt))}}function createStringVariations(rt){const et=/\{(.*?)\}/g,tt=rt.match(et),nt=[];if(tt){const st=[];tt.forEach(ot=>{const ct=ot.substring(1,ot.length-1).split(",");st.push(ct)}),processX(rt,st,0,tt,nt)}else nt.push(rt);return nt}const isSingleItem=rt=>!Array.isArray(rt);class CacheClass{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(et){return this._cache.has(et)}get(et){const tt=this._cache.get(et);return tt||console.warn(`[Assets] Asset id ${et} was not found in the Cache`),tt}set(et,tt){const nt=convertToList(et);let st;for(let dt=0;dt<this.parsers.length;dt++){const ft=this.parsers[dt];if(ft.test(tt)){st=ft.getCacheableAssets(nt,tt);break}}st||(st={},nt.forEach(dt=>{st[dt]=tt}));const ot=Object.keys(st),ct={cacheKeys:ot,keys:nt};if(nt.forEach(dt=>{this._cacheMap.set(dt,ct)}),ot.forEach(dt=>{this._cache.has(dt)&&this._cache.get(dt)!==tt&&console.warn("[Cache] already has key:",dt),this._cache.set(dt,st[dt])}),tt instanceof Texture){const dt=tt;nt.forEach(ft=>{dt.baseTexture!==Texture.EMPTY.baseTexture&&BaseTexture.addToCache(dt.baseTexture,ft),Texture.addToCache(dt,ft)})}}remove(et){if(!this._cacheMap.has(et)){console.warn(`[Assets] Asset id ${et} was not found in the Cache`);return}const tt=this._cacheMap.get(et);tt.cacheKeys.forEach(nt=>{this._cache.delete(nt)}),tt.keys.forEach(nt=>{this._cacheMap.delete(nt)})}get parsers(){return this._parsers}}const Cache=new CacheClass;class Loader{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(et,tt,nt)=>(this._parsersValidated=!1,et[tt]=nt,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(et,tt){const nt={promise:null,parser:null};return nt.promise=(async()=>{var ct,dt;let st=null,ot=null;if(tt.loadParser&&(ot=this._parserHash[tt.loadParser],ot||console.warn(`[Assets] specified load parser "${tt.loadParser}" not found while loading ${et}`)),!ot){for(let ft=0;ft<this.parsers.length;ft++){const gt=this.parsers[ft];if(gt.load&&((ct=gt.test)!=null&&ct.call(gt,et,tt,this))){ot=gt;break}}if(!ot)return console.warn(`[Assets] ${et} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}st=await ot.load(et,tt,this),nt.parser=ot;for(let ft=0;ft<this.parsers.length;ft++){const gt=this.parsers[ft];gt.parse&&gt.parse&&await((dt=gt.testParse)==null?void 0:dt.call(gt,st,tt,this))&&(st=await gt.parse(st,tt,this)||st,nt.parser=gt)}return st})(),nt}async load(et,tt){this._parsersValidated||this._validateParsers();let nt=0;const st={},ot=isSingleItem(et),ct=convertToList(et,gt=>({alias:[gt],src:gt})),dt=ct.length,ft=ct.map(async gt=>{const yt=path.toAbsolute(gt.src);if(!st[gt.src])try{this.promiseCache[yt]||(this.promiseCache[yt]=this._getLoadPromiseAndParser(yt,gt)),st[gt.src]=await this.promiseCache[yt].promise,tt&&tt(++nt/dt)}catch(xt){throw delete this.promiseCache[yt],delete st[gt.src],new Error(`[Loader.load] Failed to load ${yt}.
${xt}`)}});return await Promise.all(ft),ot?st[ct[0].src]:st}async unload(et){const tt=convertToList(et,nt=>({alias:[nt],src:nt})).map(async nt=>{var ct,dt;const st=path.toAbsolute(nt.src),ot=this.promiseCache[st];if(ot){const ft=await ot.promise;delete this.promiseCache[st],(dt=(ct=ot.parser)==null?void 0:ct.unload)==null||dt.call(ct,ft,nt,this)}});await Promise.all(tt)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(et=>et.name).reduce((et,tt)=>(et[tt.name]&&console.warn(`[Assets] loadParser name conflict "${tt.name}"`),{...et,[tt.name]:tt}),{})}}var LoaderParserPriority=(rt=>(rt[rt.Low=0]="Low",rt[rt.Normal=1]="Normal",rt[rt.High=2]="High",rt))(LoaderParserPriority||{});const validJSONExtension=".json",validJSONMIME="application/json",loadJson={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadJson",test(rt){return checkDataUrl(rt,validJSONMIME)||checkExtension(rt,validJSONExtension)},async load(rt){return await(await settings.ADAPTER.fetch(rt)).json()}};extensions$1.add(loadJson);const validTXTExtension=".txt",validTXTMIME="text/plain",loadTxt={name:"loadTxt",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},test(rt){return checkDataUrl(rt,validTXTMIME)||checkExtension(rt,validTXTExtension)},async load(rt){return await(await settings.ADAPTER.fetch(rt)).text()}};extensions$1.add(loadTxt);const validWeights=["normal","bold","100","200","300","400","500","600","700","800","900"],validFontExtensions=[".ttf",".otf",".woff",".woff2"],validFontMIMEs=["font/ttf","font/otf","font/woff","font/woff2"],CSS_IDENT_TOKEN_REGEX=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function getFontFamilyName(rt){const et=path.extname(rt),tt=path.basename(rt,et).replace(/(-|_)/g," ").toLowerCase().split(" ").map(ot=>ot.charAt(0).toUpperCase()+ot.slice(1));let nt=tt.length>0;for(const ot of tt)if(!ot.match(CSS_IDENT_TOKEN_REGEX)){nt=!1;break}let st=tt.join(" ");return nt||(st=`"${st.replace(/[\\"]/g,"\\$&")}"`),st}const validURICharactersRegex=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function encodeURIWhenNeeded(rt){return validURICharactersRegex.test(rt)?rt:encodeURI(rt)}const loadWebFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadWebFont",test(rt){return checkDataUrl(rt,validFontMIMEs)||checkExtension(rt,validFontExtensions)},async load(rt,et){var nt,st,ot;const tt=settings.ADAPTER.getFontFaceSet();if(tt){const ct=[],dt=((nt=et.data)==null?void 0:nt.family)??getFontFamilyName(rt),ft=((ot=(st=et.data)==null?void 0:st.weights)==null?void 0:ot.filter(yt=>validWeights.includes(yt)))??["normal"],gt=et.data??{};for(let yt=0;yt<ft.length;yt++){const xt=ft[yt],St=new FontFace(dt,`url(${encodeURIWhenNeeded(rt)})`,{...gt,weight:xt});await St.load(),tt.add(St),ct.push(St)}return ct.length===1?ct[0]:ct}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(rt){(Array.isArray(rt)?rt:[rt]).forEach(et=>settings.ADAPTER.getFontFaceSet().delete(et))}};extensions$1.add(loadWebFont);const WORKER_CODE$1=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let WORKER_URL$1=null,WorkerInstance$1=class{constructor(){WORKER_URL$1||(WORKER_URL$1=URL.createObjectURL(new Blob([WORKER_CODE$1],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL$1)}};WorkerInstance$1.revokeObjectURL=function(){WORKER_URL$1&&(URL.revokeObjectURL(WORKER_URL$1),WORKER_URL$1=null)};const WORKER_CODE=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let WORKER_URL=null;class WorkerInstance{constructor(){WORKER_URL||(WORKER_URL=URL.createObjectURL(new Blob([WORKER_CODE],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL)}}WorkerInstance.revokeObjectURL=function(){WORKER_URL&&(URL.revokeObjectURL(WORKER_URL),WORKER_URL=null)};let UUID=0,MAX_WORKERS;class WorkerManagerClass{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(et=>{const{worker:tt}=new WorkerInstance$1;tt.addEventListener("message",nt=>{tt.terminate(),WorkerInstance$1.revokeObjectURL(),et(nt.data)})}),this._isImageBitmapSupported)}loadImageBitmap(et){return this._run("loadImageBitmap",[et])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){MAX_WORKERS===void 0&&(MAX_WORKERS=navigator.hardwareConcurrency||4);let et=this.workerPool.pop();return!et&&this._createdWorkers<MAX_WORKERS&&(this._createdWorkers++,et=new WorkerInstance().worker,et.addEventListener("message",tt=>{this.complete(tt.data),this.returnWorker(tt.target),this.next()})),et}returnWorker(et){this.workerPool.push(et)}complete(et){et.error!==void 0?this.resolveHash[et.uuid].reject(et.error):this.resolveHash[et.uuid].resolve(et.data),this.resolveHash[et.uuid]=null}async _run(et,tt){await this._initWorkers();const nt=new Promise((st,ot)=>{this.queue.push({id:et,arguments:tt,resolve:st,reject:ot})});return this.next(),nt}next(){if(!this.queue.length)return;const et=this.getWorker();if(!et)return;const tt=this.queue.pop(),nt=tt.id;this.resolveHash[UUID]={resolve:tt.resolve,reject:tt.reject},et.postMessage({data:tt.arguments,uuid:UUID++,id:nt})}}const WorkerManager=new WorkerManagerClass;function createTexture(rt,et,tt){rt.resource.internal=!0;const nt=new Texture(rt),st=()=>{delete et.promiseCache[tt],Cache.has(tt)&&Cache.remove(tt)};return nt.baseTexture.once("destroyed",()=>{tt in et.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),st())}),nt.once("destroyed",()=>{rt.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),st())}),nt}const validImageExtensions=[".jpeg",".jpg",".png",".webp",".avif"],validImageMIMEs=["image/jpeg","image/png","image/webp","image/avif"];async function loadImageBitmap(rt){const et=await settings.ADAPTER.fetch(rt);if(!et.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${rt}: ${et.status} ${et.statusText}`);const tt=await et.blob();return await createImageBitmap(tt)}const loadTextures={name:"loadTextures",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(rt){return checkDataUrl(rt,validImageMIMEs)||checkExtension(rt,validImageExtensions)},async load(rt,et,tt){var dt;const nt=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let st;nt?this.config.preferWorkers&&await WorkerManager.isImageBitmapSupported()?st=await WorkerManager.loadImageBitmap(rt):st=await loadImageBitmap(rt):st=await new Promise((ft,gt)=>{const yt=new Image;yt.crossOrigin=this.config.crossOrigin,yt.src=rt,yt.complete?ft(yt):(yt.onload=()=>ft(yt),yt.onerror=xt=>gt(xt))});const ot={...et.data};ot.resolution??(ot.resolution=getResolutionOfUrl(rt)),nt&&((dt=ot.resourceOptions)==null?void 0:dt.ownsImageBitmap)===void 0&&(ot.resourceOptions={...ot.resourceOptions},ot.resourceOptions.ownsImageBitmap=!0);const ct=new BaseTexture(st,ot);return ct.resource.src=rt,createTexture(ct,tt,rt)},unload(rt){rt.destroy(!0)}};extensions$1.add(loadTextures);const validSVGExtension=".svg",validSVGMIME="image/svg+xml",loadSVG={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadSVG",test(rt){return checkDataUrl(rt,validSVGMIME)||checkExtension(rt,validSVGExtension)},async testParse(rt){return SVGResource.test(rt)},async parse(rt,et,tt){var ot;const nt=new SVGResource(rt,(ot=et==null?void 0:et.data)==null?void 0:ot.resourceOptions);await nt.load();const st=new BaseTexture(nt,{resolution:getResolutionOfUrl(rt),...et==null?void 0:et.data});return st.resource.src=et.src,createTexture(st,tt,et.src)},async load(rt,et){return(await settings.ADAPTER.fetch(rt)).text()},unload:loadTextures.unload};extensions$1.add(loadSVG);const validVideoExtensions=[".mp4",".m4v",".webm",".ogv"],validVideoMIMEs=["video/mp4","video/webm","video/ogg"],loadVideo={name:"loadVideo",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(rt){return checkDataUrl(rt,validVideoMIMEs)||checkExtension(rt,validVideoExtensions)},async load(rt,et,tt){var ct;let nt;const st=await(await settings.ADAPTER.fetch(rt)).blob(),ot=URL.createObjectURL(st);try{const dt={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(ct=et==null?void 0:et.data)==null?void 0:ct.resourceOptions,autoLoad:!0},ft=new VideoResource(ot,dt);await ft.load();const gt=new BaseTexture(ft,{alphaMode:await detectVideoAlphaMode(),resolution:getResolutionOfUrl(rt),...et==null?void 0:et.data});gt.resource.src=rt,nt=createTexture(gt,tt,rt),nt.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(ot)})}catch(dt){throw URL.revokeObjectURL(ot),dt}return nt},unload(rt){rt.destroy(!0)}};extensions$1.add(loadVideo);class Resolver{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(et,tt)=>`${et}${this._bundleIdConnector}${tt}`,extractAssetIdFromBundle:(et,tt)=>tt.replace(`${et}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(et){if(this._bundleIdConnector=et.connector??this._bundleIdConnector,this._createBundleAssetId=et.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=et.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...et){et.forEach(tt=>{this._preferredOrder.push(tt),tt.priority||(tt.priority=Object.keys(tt.params))}),this._resolverHash={}}set basePath(et){this._basePath=et}get basePath(){return this._basePath}set rootPath(et){this._rootPath=et}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(et){if(typeof et=="string")this._defaultSearchParams=et;else{const tt=et;this._defaultSearchParams=Object.keys(tt).map(nt=>`${encodeURIComponent(nt)}=${encodeURIComponent(tt[nt])}`).join("&")}}getAlias(et){const{alias:tt,name:nt,src:st,srcs:ot}=et;return convertToList(tt||nt||st||ot,ct=>typeof ct=="string"?ct:Array.isArray(ct)?ct.map(dt=>(dt==null?void 0:dt.src)??(dt==null?void 0:dt.srcs)??dt):ct!=null&&ct.src||ct!=null&&ct.srcs?ct.src??ct.srcs:ct,!0)}addManifest(et){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=et,et.bundles.forEach(tt=>{this.addBundle(tt.name,tt.assets)})}addBundle(et,tt){const nt=[];Array.isArray(tt)?tt.forEach(st=>{const ot=st.src??st.srcs,ct=st.alias??st.name;let dt;if(typeof ct=="string"){const ft=this._createBundleAssetId(et,ct);nt.push(ft),dt=[ct,ft]}else{const ft=ct.map(gt=>this._createBundleAssetId(et,gt));nt.push(...ft),dt=[...ct,...ft]}this.add({...st,alias:dt,src:ot})}):Object.keys(tt).forEach(st=>{const ot=[st,this._createBundleAssetId(et,st)];if(typeof tt[st]=="string")this.add({alias:ot,src:tt[st]});else if(Array.isArray(tt[st]))this.add({alias:ot,src:tt[st]});else{const ct=tt[st],dt=ct.src??ct.srcs;this.add({...ct,alias:ot,src:Array.isArray(dt)?dt:[dt]})}nt.push(...ot)}),this._bundles[et]=nt}add(et,tt,nt,st,ot){const ct=[];typeof et=="string"||Array.isArray(et)&&typeof et[0]=="string"?(deprecation("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),ct.push({alias:et,src:tt,data:nt,format:st,loadParser:ot})):Array.isArray(et)?ct.push(...et):ct.push(et);let dt;dt=ft=>{this.hasKey(ft)&&console.warn(`[Resolver] already has key: ${ft} overwriting`)},convertToList(ct).forEach(ft=>{const{src:gt,srcs:yt}=ft;let{data:xt,format:St,loadParser:wt}=ft;const bt=convertToList(gt||yt).map(Mt=>typeof Mt=="string"?createStringVariations(Mt):Array.isArray(Mt)?Mt:[Mt]),Pt=this.getAlias(ft);Array.isArray(Pt)?Pt.forEach(dt):dt(Pt);const Rt=[];bt.forEach(Mt=>{Mt.forEach(kt=>{let Dt={};if(typeof kt!="object"){Dt.src=kt;for(let zt=0;zt<this._parsers.length;zt++){const Lt=this._parsers[zt];if(Lt.test(kt)){Dt=Lt.parse(kt);break}}}else xt=kt.data??xt,St=kt.format??St,wt=kt.loadParser??wt,Dt={...Dt,...kt};if(!Pt)throw new Error(`[Resolver] alias is undefined for this asset: ${Dt.src}`);Dt=this.buildResolvedAsset(Dt,{aliases:Pt,data:xt,format:St,loadParser:wt}),Rt.push(Dt)})}),Pt.forEach(Mt=>{this._assetMap[Mt]=Rt})})}resolveBundle(et){const tt=isSingleItem(et);et=convertToList(et);const nt={};return et.forEach(st=>{const ot=this._bundles[st];if(ot){const ct=this.resolve(ot),dt={};for(const ft in ct){const gt=ct[ft];dt[this._extractAssetIdFromBundle(st,ft)]=gt}nt[st]=dt}}),tt?nt[et[0]]:nt}resolveUrl(et){const tt=this.resolve(et);if(typeof et!="string"){const nt={};for(const st in tt)nt[st]=tt[st].src;return nt}return tt.src}resolve(et){const tt=isSingleItem(et);et=convertToList(et);const nt={};return et.forEach(st=>{if(!this._resolverHash[st])if(this._assetMap[st]){let ot=this._assetMap[st];const ct=ot[0],dt=this._getPreferredOrder(ot);dt==null||dt.priority.forEach(ft=>{dt.params[ft].forEach(gt=>{const yt=ot.filter(xt=>xt[ft]?xt[ft]===gt:!1);yt.length&&(ot=yt)})}),this._resolverHash[st]=ot[0]??ct}else this._resolverHash[st]=this.buildResolvedAsset({alias:[st],src:st},{});nt[st]=this._resolverHash[st]}),tt?nt[et[0]]:nt}hasKey(et){return!!this._assetMap[et]}hasBundle(et){return!!this._bundles[et]}_getPreferredOrder(et){for(let tt=0;tt<et.length;tt++){const nt=et[0],st=this._preferredOrder.find(ot=>ot.params.format.includes(nt.format));if(st)return st}return this._preferredOrder[0]}_appendDefaultSearchParams(et){if(!this._defaultSearchParams)return et;const tt=/\?/.test(et)?"&":"?";return`${et}${tt}${this._defaultSearchParams}`}buildResolvedAsset(et,tt){const{aliases:nt,data:st,loadParser:ot,format:ct}=tt;return(this._basePath||this._rootPath)&&(et.src=path.toAbsolute(et.src,this._basePath,this._rootPath)),et.alias=nt??et.alias??[et.src],et.src=this._appendDefaultSearchParams(et.src),et.data={...st||{},...et.data},et.loadParser=ot??et.loadParser,et.format=ct??et.format??path.extname(et.src).slice(1),et.srcs=et.src,et.name=et.alias,et}}class AssetsClass{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Resolver,this.loader=new Loader,this.cache=Cache,this._backgroundLoader=new BackgroundLoader(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(et={}){var ot,ct;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,et.defaultSearchParams&&this.resolver.setDefaultSearchParams(et.defaultSearchParams),et.basePath&&(this.resolver.basePath=et.basePath),et.bundleIdentifier&&this.resolver.setBundleIdentifier(et.bundleIdentifier),et.manifest){let dt=et.manifest;typeof dt=="string"&&(dt=await this.load(dt)),this.resolver.addManifest(dt)}const tt=((ot=et.texturePreference)==null?void 0:ot.resolution)??1,nt=typeof tt=="number"?[tt]:tt,st=await this._detectFormats({preferredFormats:(ct=et.texturePreference)==null?void 0:ct.format,skipDetections:et.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:st,resolution:nt}}),et.preferences&&this.setPreferences(et.preferences)}add(et,tt,nt,st,ot){this.resolver.add(et,tt,nt,st,ot)}async load(et,tt){this._initialized||await this.init();const nt=isSingleItem(et),st=convertToList(et).map(dt=>{if(typeof dt!="string"){const ft=this.resolver.getAlias(dt);return ft.some(gt=>!this.resolver.hasKey(gt))&&this.add(dt),Array.isArray(ft)?ft[0]:ft}return this.resolver.hasKey(dt)||this.add({alias:dt,src:dt}),dt}),ot=this.resolver.resolve(st),ct=await this._mapLoadToResolve(ot,tt);return nt?ct[st[0]]:ct}addBundle(et,tt){this.resolver.addBundle(et,tt)}async loadBundle(et,tt){this._initialized||await this.init();let nt=!1;typeof et=="string"&&(nt=!0,et=[et]);const st=this.resolver.resolveBundle(et),ot={},ct=Object.keys(st);let dt=0,ft=0;const gt=()=>{tt==null||tt(++dt/ft)},yt=ct.map(xt=>{const St=st[xt];return ft+=Object.keys(St).length,this._mapLoadToResolve(St,gt).then(wt=>{ot[xt]=wt})});return await Promise.all(yt),nt?ot[et[0]]:ot}async backgroundLoad(et){this._initialized||await this.init(),typeof et=="string"&&(et=[et]);const tt=this.resolver.resolve(et);this._backgroundLoader.add(Object.values(tt))}async backgroundLoadBundle(et){this._initialized||await this.init(),typeof et=="string"&&(et=[et]);const tt=this.resolver.resolveBundle(et);Object.values(tt).forEach(nt=>{this._backgroundLoader.add(Object.values(nt))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(et){if(typeof et=="string")return Cache.get(et);const tt={};for(let nt=0;nt<et.length;nt++)tt[nt]=Cache.get(et[nt]);return tt}async _mapLoadToResolve(et,tt){const nt=Object.values(et),st=Object.keys(et);this._backgroundLoader.active=!1;const ot=await this.loader.load(nt,tt);this._backgroundLoader.active=!0;const ct={};return nt.forEach((dt,ft)=>{const gt=ot[dt.src],yt=[dt.src];dt.alias&&yt.push(...dt.alias),ct[st[ft]]=gt,Cache.set(yt,gt)}),ct}async unload(et){this._initialized||await this.init();const tt=convertToList(et).map(st=>typeof st!="string"?st.src:st),nt=this.resolver.resolve(tt);await this._unloadFromResolved(nt)}async unloadBundle(et){this._initialized||await this.init(),et=convertToList(et);const tt=this.resolver.resolveBundle(et),nt=Object.keys(tt).map(st=>this._unloadFromResolved(tt[st]));await Promise.all(nt)}async _unloadFromResolved(et){const tt=Object.values(et);tt.forEach(nt=>{Cache.remove(nt.src)}),await this.loader.unload(tt)}async _detectFormats(et){let tt=[];et.preferredFormats&&(tt=Array.isArray(et.preferredFormats)?et.preferredFormats:[et.preferredFormats]);for(const nt of et.detections)et.skipDetections||await nt.test()?tt=await nt.add(tt):et.skipDetections||(tt=await nt.remove(tt));return tt=tt.filter((nt,st)=>tt.indexOf(nt)===st),tt}get detections(){return this._detections}get preferWorkers(){return loadTextures.config.preferWorkers}set preferWorkers(et){deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:et})}setPreferences(et){this.loader.parsers.forEach(tt=>{tt.config&&Object.keys(tt.config).filter(nt=>nt in et).forEach(nt=>{tt.config[nt]=et[nt]})})}}const Assets=new AssetsClass;extensions$1.handleByList(ExtensionType.LoadParser,Assets.loader.parsers).handleByList(ExtensionType.ResolveParser,Assets.resolver.parsers).handleByList(ExtensionType.CacheParser,Assets.cache.parsers).handleByList(ExtensionType.DetectionParser,Assets.detections);const cacheTextureArray={extension:ExtensionType.CacheParser,test:rt=>Array.isArray(rt)&&rt.every(et=>et instanceof Texture),getCacheableAssets:(rt,et)=>{const tt={};return rt.forEach(nt=>{et.forEach((st,ot)=>{tt[nt+(ot===0?"":ot+1)]=st})}),tt}};extensions$1.add(cacheTextureArray);async function testImageFormat(rt){if("Image"in globalThis)return new Promise(et=>{const tt=new Image;tt.onload=()=>{et(!0)},tt.onerror=()=>{et(!1)},tt.src=rt});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const et=await(await fetch(rt)).blob();await createImageBitmap(et)}catch{return!1}return!0}return!1}const detectAvif={extension:{type:ExtensionType.DetectionParser,priority:1},test:async()=>testImageFormat("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async rt=>[...rt,"avif"],remove:async rt=>rt.filter(et=>et!=="avif")};extensions$1.add(detectAvif);const detectWebp={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testImageFormat("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async rt=>[...rt,"webp"],remove:async rt=>rt.filter(et=>et!=="webp")};extensions$1.add(detectWebp);const imageFormats=["png","jpg","jpeg"],detectDefaults={extension:{type:ExtensionType.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async rt=>[...rt,...imageFormats],remove:async rt=>rt.filter(et=>!imageFormats.includes(et))};extensions$1.add(detectDefaults);const inWorker="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function testVideoFormat(rt){return inWorker?!1:document.createElement("video").canPlayType(rt)!==""}const detectWebm={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/webm"),add:async rt=>[...rt,"webm"],remove:async rt=>rt.filter(et=>et!=="webm")};extensions$1.add(detectWebm);const detectMp4={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/mp4"),add:async rt=>[...rt,"mp4","m4v"],remove:async rt=>rt.filter(et=>et!=="mp4"&&et!=="m4v")};extensions$1.add(detectMp4);const detectOgv={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/ogg"),add:async rt=>[...rt,"ogv"],remove:async rt=>rt.filter(et=>et!=="ogv")};extensions$1.add(detectOgv);const resolveTextureUrl={extension:ExtensionType.ResolveParser,test:loadTextures.test,parse:rt=>{var et;return{resolution:parseFloat(((et=settings.RETINA_PREFIX.exec(rt))==null?void 0:et[1])??"1"),format:path.extname(rt).slice(1),src:rt}}};extensions$1.add(resolveTextureUrl);const validExtensions=[".xml",".fnt"],loadBitmapFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},name:"loadBitmapFont",test(rt){return validExtensions.includes(path.extname(rt).toLowerCase())},async testParse(rt){return TextFormat.test(rt)||XMLStringFormat.test(rt)},async parse(rt,et,tt){const nt=TextFormat.test(rt)?TextFormat.parse(rt):XMLStringFormat.parse(rt),{src:st}=et,{page:ot}=nt,ct=[];for(let gt=0;gt<ot.length;++gt){const yt=ot[gt].file;let xt=path.join(path.dirname(st),yt);xt=copySearchParams(xt,st),ct.push(xt)}const dt=await tt.load(ct),ft=ct.map(gt=>dt[gt]);return BitmapFont.install(nt,ft,!0)},async load(rt,et){return(await settings.ADAPTER.fetch(rt)).text()},unload(rt){rt.destroy()}};extensions$1.add(loadBitmapFont);const buildCircle={build(rt){const et=rt.points;let tt,nt,st,ot,ct,dt;if(rt.type===SHAPES.CIRC){const bt=rt.shape;tt=bt.x,nt=bt.y,ct=dt=bt.radius,st=ot=0}else if(rt.type===SHAPES.ELIP){const bt=rt.shape;tt=bt.x,nt=bt.y,ct=bt.width,dt=bt.height,st=ot=0}else{const bt=rt.shape,Pt=bt.width/2,Rt=bt.height/2;tt=bt.x+Pt,nt=bt.y+Rt,ct=dt=Math.max(0,Math.min(bt.radius,Math.min(Pt,Rt))),st=Pt-ct,ot=Rt-dt}if(!(ct>=0&&dt>=0&&st>=0&&ot>=0)){et.length=0;return}const ft=Math.ceil(2.3*Math.sqrt(ct+dt)),gt=ft*8+(st?4:0)+(ot?4:0);if(et.length=gt,gt===0)return;if(ft===0){et.length=8,et[0]=et[6]=tt+st,et[1]=et[3]=nt+ot,et[2]=et[4]=tt-st,et[5]=et[7]=nt-ot;return}let yt=0,xt=ft*4+(st?2:0)+2,St=xt,wt=gt;{const bt=st+ct,Pt=ot,Rt=tt+bt,Mt=tt-bt,kt=nt+Pt;if(et[yt++]=Rt,et[yt++]=kt,et[--xt]=kt,et[--xt]=Mt,ot){const Dt=nt-Pt;et[St++]=Mt,et[St++]=Dt,et[--wt]=Dt,et[--wt]=Rt}}for(let bt=1;bt<ft;bt++){const Pt=Math.PI/2*(bt/ft),Rt=st+Math.cos(Pt)*ct,Mt=ot+Math.sin(Pt)*dt,kt=tt+Rt,Dt=tt-Rt,zt=nt+Mt,Lt=nt-Mt;et[yt++]=kt,et[yt++]=zt,et[--xt]=zt,et[--xt]=Dt,et[St++]=Dt,et[St++]=Lt,et[--wt]=Lt,et[--wt]=kt}{const bt=st,Pt=ot+dt,Rt=tt+bt,Mt=tt-bt,kt=nt+Pt,Dt=nt-Pt;et[yt++]=Rt,et[yt++]=kt,et[--wt]=Dt,et[--wt]=Rt,st&&(et[yt++]=Mt,et[yt++]=kt,et[--wt]=Dt,et[--wt]=Mt)}},triangulate(rt,et){const tt=rt.points,nt=et.points,st=et.indices;if(tt.length===0)return;let ot=nt.length/2;const ct=ot;let dt,ft;if(rt.type!==SHAPES.RREC){const yt=rt.shape;dt=yt.x,ft=yt.y}else{const yt=rt.shape;dt=yt.x+yt.width/2,ft=yt.y+yt.height/2}const gt=rt.matrix;nt.push(rt.matrix?gt.a*dt+gt.c*ft+gt.tx:dt,rt.matrix?gt.b*dt+gt.d*ft+gt.ty:ft),ot++,nt.push(tt[0],tt[1]);for(let yt=2;yt<tt.length;yt+=2)nt.push(tt[yt],tt[yt+1]),st.push(ot++,ct,ot);st.push(ct+1,ct,ot)}};function fixOrientation(rt,et=!1){const tt=rt.length;if(tt<6)return;let nt=0;for(let st=0,ot=rt[tt-2],ct=rt[tt-1];st<tt;st+=2){const dt=rt[st],ft=rt[st+1];nt+=(dt-ot)*(ft+ct),ot=dt,ct=ft}if(!et&&nt>0||et&&nt<=0){const st=tt/2;for(let ot=st+st%2;ot<tt;ot+=2){const ct=tt-ot-2,dt=tt-ot-1,ft=ot,gt=ot+1;[rt[ct],rt[ft]]=[rt[ft],rt[ct]],[rt[dt],rt[gt]]=[rt[gt],rt[dt]]}}}const buildPoly={build(rt){rt.points=rt.shape.points.slice()},triangulate(rt,et){let tt=rt.points;const nt=rt.holes,st=et.points,ot=et.indices;if(tt.length>=6){fixOrientation(tt,!1);const ct=[];for(let gt=0;gt<nt.length;gt++){const yt=nt[gt];fixOrientation(yt.points,!0),ct.push(tt.length/2),tt=tt.concat(yt.points)}const dt=earcut(tt,ct,2);if(!dt)return;const ft=st.length/2;for(let gt=0;gt<dt.length;gt+=3)ot.push(dt[gt]+ft),ot.push(dt[gt+1]+ft),ot.push(dt[gt+2]+ft);for(let gt=0;gt<tt.length;gt++)st.push(tt[gt])}}},buildRectangle={build(rt){const et=rt.shape,tt=et.x,nt=et.y,st=et.width,ot=et.height,ct=rt.points;ct.length=0,st>=0&&ot>=0&&ct.push(tt,nt,tt+st,nt,tt+st,nt+ot,tt,nt+ot)},triangulate(rt,et){const tt=rt.points,nt=et.points;if(tt.length===0)return;const st=nt.length/2;nt.push(tt[0],tt[1],tt[2],tt[3],tt[6],tt[7],tt[4],tt[5]),et.indices.push(st,st+1,st+2,st+1,st+2,st+3)}},buildRoundedRectangle={build(rt){buildCircle.build(rt)},triangulate(rt,et){buildCircle.triangulate(rt,et)}};var LINE_JOIN=(rt=>(rt.MITER="miter",rt.BEVEL="bevel",rt.ROUND="round",rt))(LINE_JOIN||{}),LINE_CAP=(rt=>(rt.BUTT="butt",rt.ROUND="round",rt.SQUARE="square",rt))(LINE_CAP||{});const curves={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(rt,et=20){if(!this.adaptive||!rt||isNaN(rt))return et;let tt=Math.ceil(rt/this.maxLength);return tt<this.minSegments?tt=this.minSegments:tt>this.maxSegments&&(tt=this.maxSegments),tt}};class ArcUtils{static curveTo(et,tt,nt,st,ot,ct){const dt=ct[ct.length-2],ft=ct[ct.length-1]-tt,gt=dt-et,yt=st-tt,xt=nt-et,St=Math.abs(ft*xt-gt*yt);if(St<1e-8||ot===0)return(ct[ct.length-2]!==et||ct[ct.length-1]!==tt)&&ct.push(et,tt),null;const wt=ft*ft+gt*gt,bt=yt*yt+xt*xt,Pt=ft*yt+gt*xt,Rt=ot*Math.sqrt(wt)/St,Mt=ot*Math.sqrt(bt)/St,kt=Rt*Pt/wt,Dt=Mt*Pt/bt,zt=Rt*xt+Mt*gt,Lt=Rt*yt+Mt*ft,Yt=gt*(Mt+kt),Nt=ft*(Mt+kt),Jt=xt*(Rt+Dt),ur=yt*(Rt+Dt),dr=Math.atan2(Nt-Lt,Yt-zt),Tr=Math.atan2(ur-Lt,Jt-zt);return{cx:zt+et,cy:Lt+tt,radius:ot,startAngle:dr,endAngle:Tr,anticlockwise:gt*yt>xt*ft}}static arc(et,tt,nt,st,ot,ct,dt,ft,gt){const yt=dt-ct,xt=curves._segmentsCount(Math.abs(yt)*ot,Math.ceil(Math.abs(yt)/PI_2)*40),St=yt/(xt*2),wt=St*2,bt=Math.cos(St),Pt=Math.sin(St),Rt=xt-1,Mt=Rt%1/Rt;for(let kt=0;kt<=Rt;++kt){const Dt=kt+Mt*kt,zt=St+ct+wt*Dt,Lt=Math.cos(zt),Yt=-Math.sin(zt);gt.push((bt*Lt+Pt*Yt)*ot+nt,(bt*-Yt+Pt*Lt)*ot+st)}}}class BatchPart{constructor(){this.reset()}begin(et,tt,nt){this.reset(),this.style=et,this.start=tt,this.attribStart=nt}end(et,tt){this.attribSize=tt-this.attribStart,this.size=et-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class BezierUtils{static curveLength(et,tt,nt,st,ot,ct,dt,ft){let gt=0,yt=0,xt=0,St=0,wt=0,bt=0,Pt=0,Rt=0,Mt=0,kt=0,Dt=0,zt=et,Lt=tt;for(let Yt=1;Yt<=10;++Yt)yt=Yt/10,xt=yt*yt,St=xt*yt,wt=1-yt,bt=wt*wt,Pt=bt*wt,Rt=Pt*et+3*bt*yt*nt+3*wt*xt*ot+St*dt,Mt=Pt*tt+3*bt*yt*st+3*wt*xt*ct+St*ft,kt=zt-Rt,Dt=Lt-Mt,zt=Rt,Lt=Mt,gt+=Math.sqrt(kt*kt+Dt*Dt);return gt}static curveTo(et,tt,nt,st,ot,ct,dt){const ft=dt[dt.length-2],gt=dt[dt.length-1];dt.length-=2;const yt=curves._segmentsCount(BezierUtils.curveLength(ft,gt,et,tt,nt,st,ot,ct));let xt=0,St=0,wt=0,bt=0,Pt=0;dt.push(ft,gt);for(let Rt=1,Mt=0;Rt<=yt;++Rt)Mt=Rt/yt,xt=1-Mt,St=xt*xt,wt=St*xt,bt=Mt*Mt,Pt=bt*Mt,dt.push(wt*ft+3*St*Mt*et+3*xt*bt*nt+Pt*ot,wt*gt+3*St*Mt*tt+3*xt*bt*st+Pt*ct)}}function square(rt,et,tt,nt,st,ot,ct,dt){const ft=rt-tt*st,gt=et-nt*st,yt=rt+tt*ot,xt=et+nt*ot;let St,wt;ct?(St=nt,wt=-tt):(St=-nt,wt=tt);const bt=ft+St,Pt=gt+wt,Rt=yt+St,Mt=xt+wt;return dt.push(bt,Pt,Rt,Mt),2}function round(rt,et,tt,nt,st,ot,ct,dt){const ft=tt-rt,gt=nt-et;let yt=Math.atan2(ft,gt),xt=Math.atan2(st-rt,ot-et);dt&&yt<xt?yt+=Math.PI*2:!dt&&yt>xt&&(xt+=Math.PI*2);let St=yt;const wt=xt-yt,bt=Math.abs(wt),Pt=Math.sqrt(ft*ft+gt*gt),Rt=(15*bt*Math.sqrt(Pt)/Math.PI>>0)+1,Mt=wt/Rt;if(St+=Mt,dt){ct.push(rt,et,tt,nt);for(let kt=1,Dt=St;kt<Rt;kt++,Dt+=Mt)ct.push(rt,et,rt+Math.sin(Dt)*Pt,et+Math.cos(Dt)*Pt);ct.push(rt,et,st,ot)}else{ct.push(tt,nt,rt,et);for(let kt=1,Dt=St;kt<Rt;kt++,Dt+=Mt)ct.push(rt+Math.sin(Dt)*Pt,et+Math.cos(Dt)*Pt,rt,et);ct.push(st,ot,rt,et)}return Rt*2}function buildNonNativeLine(rt,et){const tt=rt.shape;let nt=rt.points||tt.points.slice();const st=et.closePointEps;if(nt.length===0)return;const ot=rt.lineStyle,ct=new Point(nt[0],nt[1]),dt=new Point(nt[nt.length-2],nt[nt.length-1]),ft=tt.type!==SHAPES.POLY||tt.closeStroke,gt=Math.abs(ct.x-dt.x)<st&&Math.abs(ct.y-dt.y)<st;if(ft){nt=nt.slice(),gt&&(nt.pop(),nt.pop(),dt.set(nt[nt.length-2],nt[nt.length-1]));const Ht=(ct.x+dt.x)*.5,Ct=(dt.y+ct.y)*.5;nt.unshift(Ht,Ct),nt.push(Ht,Ct)}const yt=et.points,xt=nt.length/2;let St=nt.length;const wt=yt.length/2,bt=ot.width/2,Pt=bt*bt,Rt=ot.miterLimit*ot.miterLimit;let Mt=nt[0],kt=nt[1],Dt=nt[2],zt=nt[3],Lt=0,Yt=0,Nt=-(kt-zt),Jt=Mt-Dt,ur=0,dr=0,Tr=Math.sqrt(Nt*Nt+Jt*Jt);Nt/=Tr,Jt/=Tr,Nt*=bt,Jt*=bt;const Kt=ot.alignment,Zt=(1-Kt)*2,lr=Kt*2;ft||(ot.cap===LINE_CAP.ROUND?St+=round(Mt-Nt*(Zt-lr)*.5,kt-Jt*(Zt-lr)*.5,Mt-Nt*Zt,kt-Jt*Zt,Mt+Nt*lr,kt+Jt*lr,yt,!0)+2:ot.cap===LINE_CAP.SQUARE&&(St+=square(Mt,kt,Nt,Jt,Zt,lr,!0,yt))),yt.push(Mt-Nt*Zt,kt-Jt*Zt,Mt+Nt*lr,kt+Jt*lr);for(let Ht=1;Ht<xt-1;++Ht){Mt=nt[(Ht-1)*2],kt=nt[(Ht-1)*2+1],Dt=nt[Ht*2],zt=nt[Ht*2+1],Lt=nt[(Ht+1)*2],Yt=nt[(Ht+1)*2+1],Nt=-(kt-zt),Jt=Mt-Dt,Tr=Math.sqrt(Nt*Nt+Jt*Jt),Nt/=Tr,Jt/=Tr,Nt*=bt,Jt*=bt,ur=-(zt-Yt),dr=Dt-Lt,Tr=Math.sqrt(ur*ur+dr*dr),ur/=Tr,dr/=Tr,ur*=bt,dr*=bt;const Ct=Dt-Mt,jt=kt-zt,Ft=Dt-Lt,It=Yt-zt,Gt=Ct*Ft+jt*It,Xt=jt*Ft-It*Ct,ir=Xt<0;if(Math.abs(Xt)<.001*Math.abs(Gt)){yt.push(Dt-Nt*Zt,zt-Jt*Zt,Dt+Nt*lr,zt+Jt*lr),Gt>=0&&(ot.join===LINE_JOIN.ROUND?St+=round(Dt,zt,Dt-Nt*Zt,zt-Jt*Zt,Dt-ur*Zt,zt-dr*Zt,yt,!1)+4:St+=2,yt.push(Dt-ur*lr,zt-dr*lr,Dt+ur*Zt,zt+dr*Zt));continue}const cr=(-Nt+Mt)*(-Jt+zt)-(-Nt+Dt)*(-Jt+kt),gr=(-ur+Lt)*(-dr+zt)-(-ur+Dt)*(-dr+Yt),Sr=(Ct*gr-Ft*cr)/Xt,br=(It*cr-jt*gr)/Xt,Pr=(Sr-Dt)*(Sr-Dt)+(br-zt)*(br-zt),yr=Dt+(Sr-Dt)*Zt,Ir=zt+(br-zt)*Zt,Nr=Dt-(Sr-Dt)*lr,Br=zt-(br-zt)*lr,Qr=Math.min(Ct*Ct+jt*jt,Ft*Ft+It*It),Ur=ir?Zt:lr,Or=Qr+Ur*Ur*Pt,ai=Pr<=Or;let $i=ot.join;if($i===LINE_JOIN.MITER&&Pr/Pt>Rt&&($i=LINE_JOIN.BEVEL),ai)switch($i){case LINE_JOIN.MITER:{yt.push(yr,Ir,Nr,Br);break}case LINE_JOIN.BEVEL:{ir?yt.push(yr,Ir,Dt+Nt*lr,zt+Jt*lr,yr,Ir,Dt+ur*lr,zt+dr*lr):yt.push(Dt-Nt*Zt,zt-Jt*Zt,Nr,Br,Dt-ur*Zt,zt-dr*Zt,Nr,Br),St+=2;break}case LINE_JOIN.ROUND:{ir?(yt.push(yr,Ir,Dt+Nt*lr,zt+Jt*lr),St+=round(Dt,zt,Dt+Nt*lr,zt+Jt*lr,Dt+ur*lr,zt+dr*lr,yt,!0)+4,yt.push(yr,Ir,Dt+ur*lr,zt+dr*lr)):(yt.push(Dt-Nt*Zt,zt-Jt*Zt,Nr,Br),St+=round(Dt,zt,Dt-Nt*Zt,zt-Jt*Zt,Dt-ur*Zt,zt-dr*Zt,yt,!1)+4,yt.push(Dt-ur*Zt,zt-dr*Zt,Nr,Br));break}}else{switch(yt.push(Dt-Nt*Zt,zt-Jt*Zt,Dt+Nt*lr,zt+Jt*lr),$i){case LINE_JOIN.MITER:{ir?yt.push(Nr,Br,Nr,Br):yt.push(yr,Ir,yr,Ir),St+=2;break}case LINE_JOIN.ROUND:{ir?St+=round(Dt,zt,Dt+Nt*lr,zt+Jt*lr,Dt+ur*lr,zt+dr*lr,yt,!0)+2:St+=round(Dt,zt,Dt-Nt*Zt,zt-Jt*Zt,Dt-ur*Zt,zt-dr*Zt,yt,!1)+2;break}}yt.push(Dt-ur*Zt,zt-dr*Zt,Dt+ur*lr,zt+dr*lr),St+=2}}Mt=nt[(xt-2)*2],kt=nt[(xt-2)*2+1],Dt=nt[(xt-1)*2],zt=nt[(xt-1)*2+1],Nt=-(kt-zt),Jt=Mt-Dt,Tr=Math.sqrt(Nt*Nt+Jt*Jt),Nt/=Tr,Jt/=Tr,Nt*=bt,Jt*=bt,yt.push(Dt-Nt*Zt,zt-Jt*Zt,Dt+Nt*lr,zt+Jt*lr),ft||(ot.cap===LINE_CAP.ROUND?St+=round(Dt-Nt*(Zt-lr)*.5,zt-Jt*(Zt-lr)*.5,Dt-Nt*Zt,zt-Jt*Zt,Dt+Nt*lr,zt+Jt*lr,yt,!1)+2:ot.cap===LINE_CAP.SQUARE&&(St+=square(Dt,zt,Nt,Jt,Zt,lr,!1,yt)));const vr=et.indices,Ut=curves.epsilon*curves.epsilon;for(let Ht=wt;Ht<St+wt-2;++Ht)Mt=yt[Ht*2],kt=yt[Ht*2+1],Dt=yt[(Ht+1)*2],zt=yt[(Ht+1)*2+1],Lt=yt[(Ht+2)*2],Yt=yt[(Ht+2)*2+1],!(Math.abs(Mt*(zt-Yt)+Dt*(Yt-kt)+Lt*(kt-zt))<Ut)&&vr.push(Ht,Ht+1,Ht+2)}function buildNativeLine(rt,et){let tt=0;const nt=rt.shape,st=rt.points||nt.points,ot=nt.type!==SHAPES.POLY||nt.closeStroke;if(st.length===0)return;const ct=et.points,dt=et.indices,ft=st.length/2,gt=ct.length/2;let yt=gt;for(ct.push(st[0],st[1]),tt=1;tt<ft;tt++)ct.push(st[tt*2],st[tt*2+1]),dt.push(yt,yt+1),yt++;ot&&dt.push(yt,gt)}function buildLine(rt,et){rt.lineStyle.native?buildNativeLine(rt,et):buildNonNativeLine(rt,et)}class QuadraticUtils{static curveLength(et,tt,nt,st,ot,ct){const dt=et-2*nt+ot,ft=tt-2*st+ct,gt=2*nt-2*et,yt=2*st-2*tt,xt=4*(dt*dt+ft*ft),St=4*(dt*gt+ft*yt),wt=gt*gt+yt*yt,bt=2*Math.sqrt(xt+St+wt),Pt=Math.sqrt(xt),Rt=2*xt*Pt,Mt=2*Math.sqrt(wt),kt=St/Pt;return(Rt*bt+Pt*St*(bt-Mt)+(4*wt*xt-St*St)*Math.log((2*Pt+kt+bt)/(kt+Mt)))/(4*Rt)}static curveTo(et,tt,nt,st,ot){const ct=ot[ot.length-2],dt=ot[ot.length-1],ft=curves._segmentsCount(QuadraticUtils.curveLength(ct,dt,et,tt,nt,st));let gt=0,yt=0;for(let xt=1;xt<=ft;++xt){const St=xt/ft;gt=ct+(et-ct)*St,yt=dt+(tt-dt)*St,ot.push(gt+(et+(nt-et)*St-gt)*St,yt+(tt+(st-tt)*St-yt)*St)}}}const FILL_COMMANDS={[SHAPES.POLY]:buildPoly,[SHAPES.CIRC]:buildCircle,[SHAPES.ELIP]:buildCircle,[SHAPES.RECT]:buildRectangle,[SHAPES.RREC]:buildRoundedRectangle},BATCH_POOL=[],DRAW_CALL_POOL=[];class GraphicsData{constructor(et,tt=null,nt=null,st=null){this.points=[],this.holes=[],this.shape=et,this.lineStyle=nt,this.fillStyle=tt,this.matrix=st,this.type=et.type}clone(){return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const tmpPoint=new Point,_GraphicsGeometry=class Qf extends BatchGeometry{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Bounds,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let et=0;et<this.drawCalls.length;et++)this.drawCalls[et].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[et]);this.drawCalls.length=0;for(let et=0;et<this.batches.length;et++){const tt=this.batches[et];tt.reset(),BATCH_POOL.push(tt)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(et,tt=null,nt=null,st=null){const ot=new GraphicsData(et,tt,nt,st);return this.graphicsData.push(ot),this.dirty++,this}drawHole(et,tt=null){if(!this.graphicsData.length)return null;const nt=new GraphicsData(et,null,null,tt),st=this.graphicsData[this.graphicsData.length-1];return nt.lineStyle=st.lineStyle,st.holes.push(nt),this.dirty++,this}destroy(){super.destroy();for(let et=0;et<this.graphicsData.length;++et)this.graphicsData[et].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(et){const tt=this.graphicsData;for(let nt=0;nt<tt.length;++nt){const st=tt[nt];if(st.fillStyle.visible&&st.shape&&(st.matrix?st.matrix.applyInverse(et,tmpPoint):tmpPoint.copyFrom(et),st.shape.contains(tmpPoint.x,tmpPoint.y))){let ot=!1;if(st.holes){for(let ct=0;ct<st.holes.length;ct++)if(st.holes[ct].shape.contains(tmpPoint.x,tmpPoint.y)){ot=!0;break}}if(!ot)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const et=this.uvs,tt=this.graphicsData;let nt=null,st=null;this.batches.length>0&&(nt=this.batches[this.batches.length-1],st=nt.style);for(let ft=this.shapeIndex;ft<tt.length;ft++){this.shapeIndex++;const gt=tt[ft],yt=gt.fillStyle,xt=gt.lineStyle;FILL_COMMANDS[gt.type].build(gt),gt.matrix&&this.transformPoints(gt.points,gt.matrix),(yt.visible||xt.visible)&&this.processHoles(gt.holes);for(let St=0;St<2;St++){const wt=St===0?yt:xt;if(!wt.visible)continue;const bt=wt.texture.baseTexture,Pt=this.indices.length,Rt=this.points.length/2;bt.wrapMode=WRAP_MODES.REPEAT,St===0?this.processFill(gt):this.processLine(gt);const Mt=this.points.length/2-Rt;Mt!==0&&(nt&&!this._compareStyles(st,wt)&&(nt.end(Pt,Rt),nt=null),nt||(nt=BATCH_POOL.pop()||new BatchPart,nt.begin(wt,Pt,Rt),this.batches.push(nt),st=wt),this.addUvs(this.points,et,wt.texture,Rt,Mt,wt.matrix))}}const ot=this.indices.length,ct=this.points.length/2;if(nt&&nt.end(ot,ct),this.batches.length===0){this.batchable=!0;return}const dt=ct>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&dt===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=dt?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(et,tt){return!(!et||!tt||et.texture.baseTexture!==tt.texture.baseTexture||et.color+et.alpha!==tt.color+tt.alpha||!!et.native!=!!tt.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let et=0,tt=this.graphicsData.length;et<tt;et++){const nt=this.graphicsData[et],st=nt.fillStyle,ot=nt.lineStyle;if(st&&!st.texture.baseTexture.valid||ot&&!ot.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const et=this.batches;for(let tt=0,nt=et.length;tt<nt;tt++){const st=et[tt];for(let ot=0;ot<st.size;ot++){const ct=st.start+ot;this.indicesUint16[ct]=this.indicesUint16[ct]-st.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const et=this.batches;for(let tt=0;tt<et.length;tt++)if(et[tt].style.native)return!1;return this.points.length<Qf.BATCHABLE_SIZE*2}buildDrawCalls(){let et=++BaseTexture._globalBatch;for(let xt=0;xt<this.drawCalls.length;xt++)this.drawCalls[xt].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[xt]);this.drawCalls.length=0;const tt=this.colors,nt=this.textureIds;let st=DRAW_CALL_POOL.pop();st||(st=new BatchDrawCall,st.texArray=new BatchTextureArray),st.texArray.count=0,st.start=0,st.size=0,st.type=DRAW_MODES.TRIANGLES;let ot=0,ct=null,dt=0,ft=!1,gt=DRAW_MODES.TRIANGLES,yt=0;this.drawCalls.push(st);for(let xt=0;xt<this.batches.length;xt++){const St=this.batches[xt],wt=8,bt=St.style,Pt=bt.texture.baseTexture;ft!==!!bt.native&&(ft=!!bt.native,gt=ft?DRAW_MODES.LINES:DRAW_MODES.TRIANGLES,ct=null,ot=wt,et++),ct!==Pt&&(ct=Pt,Pt._batchEnabled!==et&&(ot===wt&&(et++,ot=0,st.size>0&&(st=DRAW_CALL_POOL.pop(),st||(st=new BatchDrawCall,st.texArray=new BatchTextureArray),this.drawCalls.push(st)),st.start=yt,st.size=0,st.texArray.count=0,st.type=gt),Pt.touched=1,Pt._batchEnabled=et,Pt._batchLocation=ot,Pt.wrapMode=WRAP_MODES.REPEAT,st.texArray.elements[st.texArray.count++]=Pt,ot++)),st.size+=St.size,yt+=St.size,dt=Pt._batchLocation,this.addColors(tt,bt.color,bt.alpha,St.attribSize,St.attribStart),this.addTextureIds(nt,dt,St.attribSize,St.attribStart)}BaseTexture._globalBatch=et,this.packAttributes()}packAttributes(){const et=this.points,tt=this.uvs,nt=this.colors,st=this.textureIds,ot=new ArrayBuffer(et.length*3*4),ct=new Float32Array(ot),dt=new Uint32Array(ot);let ft=0;for(let gt=0;gt<et.length/2;gt++)ct[ft++]=et[gt*2],ct[ft++]=et[gt*2+1],ct[ft++]=tt[gt*2],ct[ft++]=tt[gt*2+1],dt[ft++]=nt[gt],ct[ft++]=st[gt];this._buffer.update(ot),this._indexBuffer.update(this.indicesUint16)}processFill(et){et.holes.length?buildPoly.triangulate(et,this):FILL_COMMANDS[et.type].triangulate(et,this)}processLine(et){buildLine(et,this);for(let tt=0;tt<et.holes.length;tt++)buildLine(et.holes[tt],this)}processHoles(et){for(let tt=0;tt<et.length;tt++){const nt=et[tt];FILL_COMMANDS[nt.type].build(nt),nt.matrix&&this.transformPoints(nt.points,nt.matrix)}}calculateBounds(){const et=this._bounds;et.clear(),et.addVertexData(this.points,0,this.points.length),et.pad(this.boundsPadding,this.boundsPadding)}transformPoints(et,tt){for(let nt=0;nt<et.length/2;nt++){const st=et[nt*2],ot=et[nt*2+1];et[nt*2]=tt.a*st+tt.c*ot+tt.tx,et[nt*2+1]=tt.b*st+tt.d*ot+tt.ty}}addColors(et,tt,nt,st,ot=0){const ct=Color.shared.setValue(tt).toLittleEndianNumber(),dt=Color.shared.setValue(ct).toPremultiplied(nt);et.length=Math.max(et.length,ot+st);for(let ft=0;ft<st;ft++)et[ot+ft]=dt}addTextureIds(et,tt,nt,st=0){et.length=Math.max(et.length,st+nt);for(let ot=0;ot<nt;ot++)et[st+ot]=tt}addUvs(et,tt,nt,st,ot,ct=null){let dt=0;const ft=tt.length,gt=nt.frame;for(;dt<ot;){let xt=et[(st+dt)*2],St=et[(st+dt)*2+1];if(ct){const wt=ct.a*xt+ct.c*St+ct.tx;St=ct.b*xt+ct.d*St+ct.ty,xt=wt}dt++,tt.push(xt/gt.width,St/gt.height)}const yt=nt.baseTexture;(gt.width<yt.width||gt.height<yt.height)&&this.adjustUvs(tt,nt,ft,ot)}adjustUvs(et,tt,nt,st){const ot=tt.baseTexture,ct=1e-6,dt=nt+st*2,ft=tt.frame,gt=ft.width/ot.width,yt=ft.height/ot.height;let xt=ft.x/ft.width,St=ft.y/ft.height,wt=Math.floor(et[nt]+ct),bt=Math.floor(et[nt+1]+ct);for(let Pt=nt+2;Pt<dt;Pt+=2)wt=Math.min(wt,Math.floor(et[Pt]+ct)),bt=Math.min(bt,Math.floor(et[Pt+1]+ct));xt-=wt,St-=bt;for(let Pt=nt;Pt<dt;Pt+=2)et[Pt]=(et[Pt]+xt)*gt,et[Pt+1]=(et[Pt+1]+St)*yt}};_GraphicsGeometry.BATCHABLE_SIZE=100;let GraphicsGeometry=_GraphicsGeometry;class FillStyle{constructor(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const et=new FillStyle;return et.color=this.color,et.alpha=this.alpha,et.texture=this.texture,et.matrix=this.matrix,et.visible=this.visible,et}reset(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class LineStyle extends FillStyle{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}clone(){const et=new LineStyle;return et.color=this.color,et.alpha=this.alpha,et.texture=this.texture,et.matrix=this.matrix,et.visible=this.visible,et.width=this.width,et.alignment=this.alignment,et.native=this.native,et.cap=this.cap,et.join=this.join,et.miterLimit=this.miterLimit,et}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}}const DEFAULT_SHADERS={},_Graphics=class Td extends Container{constructor(et=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new FillStyle,this._lineStyle=new LineStyle,this._matrix=null,this._holeMode=!1,this.state=State.for2d(),this._geometry=et||new GraphicsGeometry,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Color(16777215),this.blendMode=BLEND_MODES.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Td(this._geometry)}set blendMode(et){this.state.blendMode=et}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(et){this._tintColor.setValue(et)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(et=null,tt=0,nt,st=.5,ot=!1){return typeof et=="number"&&(et={width:et,color:tt,alpha:nt,alignment:st,native:ot}),this.lineTextureStyle(et)}lineTextureStyle(et){const tt={width:0,texture:Texture.WHITE,color:et!=null&&et.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:LINE_CAP.BUTT,join:LINE_JOIN.MITER,miterLimit:10};et=Object.assign(tt,et),this.normalizeColor(et),this.currentPath&&this.startPoly();const nt=et.width>0&&et.alpha>0;return nt?(et.matrix&&(et.matrix=et.matrix.clone(),et.matrix.invert()),Object.assign(this._lineStyle,{visible:nt},et)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const et=this.currentPath.points,tt=this.currentPath.points.length;tt>2&&(this.drawShape(this.currentPath),this.currentPath=new Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(et[tt-2],et[tt-1]))}else this.currentPath=new Polygon,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(et,tt){return this.startPoly(),this.currentPath.points[0]=et,this.currentPath.points[1]=tt,this}lineTo(et,tt){this.currentPath||this.moveTo(0,0);const nt=this.currentPath.points,st=nt[nt.length-2],ot=nt[nt.length-1];return(st!==et||ot!==tt)&&nt.push(et,tt),this}_initCurve(et=0,tt=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[et,tt]):this.moveTo(et,tt)}quadraticCurveTo(et,tt,nt,st){this._initCurve();const ot=this.currentPath.points;return ot.length===0&&this.moveTo(0,0),QuadraticUtils.curveTo(et,tt,nt,st,ot),this}bezierCurveTo(et,tt,nt,st,ot,ct){return this._initCurve(),BezierUtils.curveTo(et,tt,nt,st,ot,ct,this.currentPath.points),this}arcTo(et,tt,nt,st,ot){this._initCurve(et,tt);const ct=this.currentPath.points,dt=ArcUtils.curveTo(et,tt,nt,st,ot,ct);if(dt){const{cx:ft,cy:gt,radius:yt,startAngle:xt,endAngle:St,anticlockwise:wt}=dt;this.arc(ft,gt,yt,xt,St,wt)}return this}arc(et,tt,nt,st,ot,ct=!1){if(st===ot)return this;if(!ct&&ot<=st?ot+=PI_2:ct&&st<=ot&&(st+=PI_2),ot-st===0)return this;const dt=et+Math.cos(st)*nt,ft=tt+Math.sin(st)*nt,gt=this._geometry.closePointEps;let yt=this.currentPath?this.currentPath.points:null;if(yt){const xt=Math.abs(yt[yt.length-2]-dt),St=Math.abs(yt[yt.length-1]-ft);xt<gt&&St<gt||yt.push(dt,ft)}else this.moveTo(dt,ft),yt=this.currentPath.points;return ArcUtils.arc(dt,ft,et,tt,nt,st,ot,ct,yt),this}beginFill(et=0,tt){return this.beginTextureFill({texture:Texture.WHITE,color:et,alpha:tt})}normalizeColor(et){const tt=Color.shared.setValue(et.color??0);et.color=tt.toNumber(),et.alpha??(et.alpha=tt.alpha)}beginTextureFill(et){const tt={texture:Texture.WHITE,color:16777215,matrix:null};et=Object.assign(tt,et),this.normalizeColor(et),this.currentPath&&this.startPoly();const nt=et.alpha>0;return nt?(et.matrix&&(et.matrix=et.matrix.clone(),et.matrix.invert()),Object.assign(this._fillStyle,{visible:nt},et)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(et,tt,nt,st){return this.drawShape(new Rectangle(et,tt,nt,st))}drawRoundedRect(et,tt,nt,st,ot){return this.drawShape(new RoundedRectangle(et,tt,nt,st,ot))}drawCircle(et,tt,nt){return this.drawShape(new Circle(et,tt,nt))}drawEllipse(et,tt,nt,st){return this.drawShape(new Ellipse(et,tt,nt,st))}drawPolygon(...et){let tt,nt=!0;const st=et[0];st.points?(nt=st.closeStroke,tt=st.points):Array.isArray(et[0])?tt=et[0]:tt=et;const ot=new Polygon(tt);return ot.closeStroke=nt,this.drawShape(ot),this}drawShape(et){return this._holeMode?this._geometry.drawHole(et,this._matrix):this._geometry.drawShape(et,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const et=this._geometry.graphicsData;return et.length===1&&et[0].shape.type===SHAPES.RECT&&!et[0].matrix&&!et[0].holes.length&&!(et[0].lineStyle.visible&&et[0].lineStyle.width)}_render(et){this.finishPoly();const tt=this._geometry;tt.updateBatches(),tt.batchable?(this.batchDirty!==tt.batchDirty&&this._populateBatches(),this._renderBatched(et)):(et.batch.flush(),this._renderDirect(et))}_populateBatches(){const et=this._geometry,tt=this.blendMode,nt=et.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=et.batchDirty,this.batches.length=nt,this.vertexData=new Float32Array(et.points);for(let st=0;st<nt;st++){const ot=et.batches[st],ct=ot.style.color,dt=new Float32Array(this.vertexData.buffer,ot.attribStart*4*2,ot.attribSize*2),ft=new Float32Array(et.uvsFloat32.buffer,ot.attribStart*4*2,ot.attribSize*2),gt=new Uint16Array(et.indicesUint16.buffer,ot.start*2,ot.size),yt={vertexData:dt,blendMode:tt,indices:gt,uvs:ft,_batchRGB:Color.shared.setValue(ct).toRgbArray(),_tintRGB:ct,_texture:ot.style.texture,alpha:ot.style.alpha,worldAlpha:1};this.batches[st]=yt}}_renderBatched(et){if(this.batches.length){et.batch.setObjectRenderer(et.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let tt=0,nt=this.batches.length;tt<nt;tt++){const st=this.batches[tt];st.worldAlpha=this.worldAlpha*st.alpha,et.plugins[this.pluginName].render(st)}}}_renderDirect(et){const tt=this._resolveDirectShader(et),nt=this._geometry,st=this.worldAlpha,ot=tt.uniforms,ct=nt.drawCalls;ot.translationMatrix=this.transform.worldTransform,Color.shared.setValue(this._tintColor).premultiply(st).toArray(ot.tint),et.shader.bind(tt),et.geometry.bind(nt,tt),et.state.set(this.state);for(let dt=0,ft=ct.length;dt<ft;dt++)this._renderDrawCallDirect(et,nt.drawCalls[dt])}_renderDrawCallDirect(et,tt){const{texArray:nt,type:st,size:ot,start:ct}=tt,dt=nt.count;for(let ft=0;ft<dt;ft++)et.texture.bind(nt.elements[ft],ft);et.geometry.draw(st,ot,ct)}_resolveDirectShader(et){let tt=this.shader;const nt=this.pluginName;if(!tt){if(!DEFAULT_SHADERS[nt]){const{maxTextures:st}=et.plugins[nt],ot=new Int32Array(st);for(let ft=0;ft<st;ft++)ot[ft]=ft;const ct={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:UniformGroup.from({uSamplers:ot},!0)},dt=et.plugins[nt]._shader.program;DEFAULT_SHADERS[nt]=new Shader(dt,ct)}tt=DEFAULT_SHADERS[nt]}return tt}_calculateBounds(){this.finishPoly();const et=this._geometry;if(!et.graphicsData.length)return;const{minX:tt,minY:nt,maxX:st,maxY:ot}=et.bounds;this._bounds.addFrame(this.transform,tt,nt,st,ot)}containsPoint(et){return this.worldTransform.applyInverse(et,Td._TEMP_POINT),this._geometry.containsPoint(Td._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let et=0;et<this.batches.length;et++){const tt=this.batches[et];tt._tintRGB=Color.shared.setValue(this._tintColor).multiply(tt._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const et=this.transform._worldID;if(this._transformID===et)return;this._transformID=et;const tt=this.transform.worldTransform,nt=tt.a,st=tt.b,ot=tt.c,ct=tt.d,dt=tt.tx,ft=tt.ty,gt=this._geometry.points,yt=this.vertexData;let xt=0;for(let St=0;St<gt.length;St+=2){const wt=gt[St],bt=gt[St+1];yt[xt++]=nt*wt+ot*bt+dt,yt[xt++]=ct*bt+st*wt+ft}}closePath(){const et=this.currentPath;return et&&(et.closeStroke=!0,this.finishPoly()),this}setMatrix(et){return this._matrix=et,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(et){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(et)}};_Graphics.curves=curves,_Graphics._TEMP_POINT=new Point;let Graphics=_Graphics;class PlaneGeometry extends MeshGeometry{constructor(et=100,tt=100,nt=10,st=10){super(),this.segWidth=nt,this.segHeight=st,this.width=et,this.height=tt,this.build()}build(){const et=this.segWidth*this.segHeight,tt=[],nt=[],st=[],ot=this.segWidth-1,ct=this.segHeight-1,dt=this.width/ot,ft=this.height/ct;for(let yt=0;yt<et;yt++){const xt=yt%this.segWidth,St=yt/this.segWidth|0;tt.push(xt*dt,St*ft),nt.push(xt/ot,St/ct)}const gt=ot*ct;for(let yt=0;yt<gt;yt++){const xt=yt%ot,St=yt/ot|0,wt=St*this.segWidth+xt,bt=St*this.segWidth+xt+1,Pt=(St+1)*this.segWidth+xt,Rt=(St+1)*this.segWidth+xt+1;st.push(wt,bt,Pt,bt,Rt,Pt)}this.buffers[0].data=new Float32Array(tt),this.buffers[1].data=new Float32Array(nt),this.indexBuffer.data=new Uint16Array(st),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class RopeGeometry extends MeshGeometry{constructor(et=200,tt,nt=0){super(new Float32Array(tt.length*4),new Float32Array(tt.length*4),new Uint16Array((tt.length-1)*6)),this.points=tt,this._width=et,this.textureScale=nt,this.build()}get width(){return this._width}build(){const et=this.points;if(!et)return;const tt=this.getBuffer("aVertexPosition"),nt=this.getBuffer("aTextureCoord"),st=this.getIndex();if(et.length<1)return;tt.data.length/4!==et.length&&(tt.data=new Float32Array(et.length*4),nt.data=new Float32Array(et.length*4),st.data=new Uint16Array((et.length-1)*6));const ot=nt.data,ct=st.data;ot[0]=0,ot[1]=0,ot[2]=0,ot[3]=1;let dt=0,ft=et[0];const gt=this._width*this.textureScale,yt=et.length;for(let St=0;St<yt;St++){const wt=St*4;if(this.textureScale>0){const bt=ft.x-et[St].x,Pt=ft.y-et[St].y,Rt=Math.sqrt(bt*bt+Pt*Pt);ft=et[St],dt+=Rt/gt}else dt=St/(yt-1);ot[wt]=dt,ot[wt+1]=0,ot[wt+2]=dt,ot[wt+3]=1}let xt=0;for(let St=0;St<yt-1;St++){const wt=St*2;ct[xt++]=wt,ct[xt++]=wt+1,ct[xt++]=wt+2,ct[xt++]=wt+2,ct[xt++]=wt+1,ct[xt++]=wt+3}nt.update(),st.update(),this.updateVertices()}updateVertices(){const et=this.points;if(et.length<1)return;let tt=et[0],nt,st=0,ot=0;const ct=this.buffers[0].data,dt=et.length,ft=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let gt=0;gt<dt;gt++){const yt=et[gt],xt=gt*4;gt<et.length-1?nt=et[gt+1]:nt=yt,ot=-(nt.x-tt.x),st=nt.y-tt.y;const St=Math.sqrt(st*st+ot*ot);St<1e-6?(st=0,ot=0):(st/=St,ot/=St,st*=ft,ot*=ft),ct[xt]=yt.x+st,ct[xt+1]=yt.y+ot,ct[xt+2]=yt.x-st,ct[xt+3]=yt.y-ot,tt=yt}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class SimplePlane extends Mesh{constructor(et,tt,nt){const st=new PlaneGeometry(et.width,et.height,tt,nt),ot=new MeshMaterial(Texture.WHITE);super(st,ot),this.texture=et,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const et=this.geometry,{width:tt,height:nt}=this.shader.texture;this.autoResize&&(et.width!==tt||et.height!==nt)&&(et.width=this.shader.texture.width,et.height=this.shader.texture.height,et.build())}set texture(et){this.shader.texture!==et&&(this.shader.texture=et,this._textureID=-1,et.baseTexture.valid?this.textureUpdated():et.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(et){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(et)}destroy(et){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(et)}}const DEFAULT_BORDER_SIZE=10;class NineSlicePlane extends SimplePlane{constructor(et,tt,nt,st,ot){var ct,dt,ft,gt;super(Texture.WHITE,4,4),this._origWidth=et.orig.width,this._origHeight=et.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=tt??((ct=et.defaultBorders)==null?void 0:ct.left)??DEFAULT_BORDER_SIZE,this._rightWidth=st??((dt=et.defaultBorders)==null?void 0:dt.right)??DEFAULT_BORDER_SIZE,this._topHeight=nt??((ft=et.defaultBorders)==null?void 0:ft.top)??DEFAULT_BORDER_SIZE,this._bottomHeight=ot??((gt=et.defaultBorders)==null?void 0:gt.bottom)??DEFAULT_BORDER_SIZE,this.texture=et}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(et){this.geometry.getBuffer("aVertexPosition").data=et}updateHorizontalVertices(){const et=this.vertices,tt=this._getMinScale();et[9]=et[11]=et[13]=et[15]=this._topHeight*tt,et[17]=et[19]=et[21]=et[23]=this._height-this._bottomHeight*tt,et[25]=et[27]=et[29]=et[31]=this._height}updateVerticalVertices(){const et=this.vertices,tt=this._getMinScale();et[2]=et[10]=et[18]=et[26]=this._leftWidth*tt,et[4]=et[12]=et[20]=et[28]=this._width-this._rightWidth*tt,et[6]=et[14]=et[22]=et[30]=this._width}_getMinScale(){const et=this._leftWidth+this._rightWidth,tt=this._width>et?1:this._width/et,nt=this._topHeight+this._bottomHeight,st=this._height>nt?1:this._height/nt;return Math.min(tt,st)}get width(){return this._width}set width(et){this._width=et,this._refresh()}get height(){return this._height}set height(et){this._height=et,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(et){this._leftWidth=et,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(et){this._rightWidth=et,this._refresh()}get topHeight(){return this._topHeight}set topHeight(et){this._topHeight=et,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(et){this._bottomHeight=et,this._refresh()}_refresh(){const et=this.texture,tt=this.geometry.buffers[1].data;this._origWidth=et.orig.width,this._origHeight=et.orig.height;const nt=1/this._origWidth,st=1/this._origHeight;tt[0]=tt[8]=tt[16]=tt[24]=0,tt[1]=tt[3]=tt[5]=tt[7]=0,tt[6]=tt[14]=tt[22]=tt[30]=1,tt[25]=tt[27]=tt[29]=tt[31]=1,tt[2]=tt[10]=tt[18]=tt[26]=nt*this._leftWidth,tt[4]=tt[12]=tt[20]=tt[28]=1-nt*this._rightWidth,tt[9]=tt[11]=tt[13]=tt[15]=st*this._topHeight,tt[17]=tt[19]=tt[21]=tt[23]=1-st*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class SimpleMesh extends Mesh{constructor(et=Texture.EMPTY,tt,nt,st,ot){const ct=new MeshGeometry(tt,nt,st);ct.getBuffer("aVertexPosition").static=!1;const dt=new MeshMaterial(et);super(ct,dt,null,ot),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(et){this.geometry.getBuffer("aVertexPosition").data=et}_render(et){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(et)}}class SimpleRope extends Mesh{constructor(et,tt,nt=0){const st=new RopeGeometry(et.height,tt,nt),ot=new MeshMaterial(et);nt>0&&(et.baseTexture.wrapMode=WRAP_MODES.REPEAT),super(st,ot),this.autoUpdate=!0}_render(et){const tt=this.geometry;(this.autoUpdate||tt._width!==this.shader.texture.height)&&(tt._width=this.shader.texture.height,tt.update()),super._render(et)}}class ParticleContainer extends Container{constructor(et=1500,tt,nt=16384,st=!1){super();const ot=16384;nt>ot&&(nt=ot),this._properties=[!1,!0,!1,!1,!1],this._maxSize=et,this._batchSize=nt,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=BLEND_MODES.NORMAL,this.autoResize=st,this.roundPixels=!0,this.baseTexture=null,this.setProperties(tt),this._tintColor=new Color(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(et){et&&(this._properties[0]="vertices"in et||"scale"in et?!!et.vertices||!!et.scale:this._properties[0],this._properties[1]="position"in et?!!et.position:this._properties[1],this._properties[2]="rotation"in et?!!et.rotation:this._properties[2],this._properties[3]="uvs"in et?!!et.uvs:this._properties[3],this._properties[4]="tint"in et||"alpha"in et?!!et.tint||!!et.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(et){this._tintColor.setValue(et),this._tintColor.toRgbArray(this.tintRgb)}render(et){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),et.batch.setObjectRenderer(et.plugins.particle),et.plugins.particle.render(this))}onChildrenChange(et){const tt=Math.floor(et/this._batchSize);for(;this._bufferUpdateIDs.length<tt;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[tt]=++this._updateID}dispose(){if(this._buffers){for(let et=0;et<this._buffers.length;++et)this._buffers[et].destroy();this._buffers=null}}destroy(et){super.destroy(et),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class ParticleBuffer{constructor(et,tt,nt){this.geometry=new Geometry,this.indexBuffer=null,this.size=nt,this.dynamicProperties=[],this.staticProperties=[];for(let st=0;st<et.length;++st){let ot=et[st];ot={attributeName:ot.attributeName,size:ot.size,uploadFunction:ot.uploadFunction,type:ot.type||TYPES.FLOAT,offset:ot.offset},tt[st]?this.dynamicProperties.push(ot):this.staticProperties.push(ot)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const et=this.geometry;let tt=0;this.indexBuffer=new Buffer(createIndicesForQuads(this.size),!0,!0),et.addIndex(this.indexBuffer),this.dynamicStride=0;for(let ct=0;ct<this.dynamicProperties.length;++ct){const dt=this.dynamicProperties[ct];dt.offset=tt,tt+=dt.size,this.dynamicStride+=dt.size}const nt=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(nt),this.dynamicDataUint32=new Uint32Array(nt),this.dynamicBuffer=new Buffer(this.dynamicData,!1,!1);let st=0;this.staticStride=0;for(let ct=0;ct<this.staticProperties.length;++ct){const dt=this.staticProperties[ct];dt.offset=st,st+=dt.size,this.staticStride+=dt.size}const ot=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(ot),this.staticDataUint32=new Uint32Array(ot),this.staticBuffer=new Buffer(this.staticData,!0,!1);for(let ct=0;ct<this.dynamicProperties.length;++ct){const dt=this.dynamicProperties[ct];et.addAttribute(dt.attributeName,this.dynamicBuffer,0,dt.type===TYPES.UNSIGNED_BYTE,dt.type,this.dynamicStride*4,dt.offset*4)}for(let ct=0;ct<this.staticProperties.length;++ct){const dt=this.staticProperties[ct];et.addAttribute(dt.attributeName,this.staticBuffer,0,dt.type===TYPES.UNSIGNED_BYTE,dt.type,this.staticStride*4,dt.offset*4)}}uploadDynamic(et,tt,nt){for(let st=0;st<this.dynamicProperties.length;st++){const ot=this.dynamicProperties[st];ot.uploadFunction(et,tt,nt,ot.type===TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,ot.offset)}this.dynamicBuffer._updateID++}uploadStatic(et,tt,nt){for(let st=0;st<this.staticProperties.length;st++){const ot=this.staticProperties[st];ot.uploadFunction(et,tt,nt,ot.type===TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,ot.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var fragment$5=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,vertex$2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class ParticleRenderer extends ObjectRenderer{constructor(et){super(et),this.shader=null,this.properties=null,this.tempMatrix=new Matrix,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:TYPES.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Shader.from(vertex$2,fragment$5,{}),this.state=State.for2d()}render(et){const tt=et.children,nt=et._maxSize,st=et._batchSize,ot=this.renderer;let ct=tt.length;if(ct===0)return;ct>nt&&!et.autoResize&&(ct=nt);let dt=et._buffers;dt||(dt=et._buffers=this.generateBuffers(et));const ft=tt[0]._texture.baseTexture,gt=ft.alphaMode>0;this.state.blendMode=correctBlendMode(et.blendMode,gt),ot.state.set(this.state);const yt=ot.gl,xt=et.worldTransform.copyTo(this.tempMatrix);xt.prepend(ot.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=xt.toArray(!0),this.shader.uniforms.uColor=Color.shared.setValue(et.tintRgb).premultiply(et.worldAlpha,gt).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=ft,this.renderer.shader.bind(this.shader);let St=!1;for(let wt=0,bt=0;wt<ct;wt+=st,bt+=1){let Pt=ct-wt;Pt>st&&(Pt=st),bt>=dt.length&&dt.push(this._generateOneMoreBuffer(et));const Rt=dt[bt];Rt.uploadDynamic(tt,wt,Pt);const Mt=et._bufferUpdateIDs[bt]||0;St=St||Rt._updateID<Mt,St&&(Rt._updateID=et._updateID,Rt.uploadStatic(tt,wt,Pt)),ot.geometry.bind(Rt.geometry),yt.drawElements(yt.TRIANGLES,Pt*6,yt.UNSIGNED_SHORT,0)}}generateBuffers(et){const tt=[],nt=et._maxSize,st=et._batchSize,ot=et._properties;for(let ct=0;ct<nt;ct+=st)tt.push(new ParticleBuffer(this.properties,ot,st));return tt}_generateOneMoreBuffer(et){const tt=et._batchSize,nt=et._properties;return new ParticleBuffer(this.properties,nt,tt)}uploadVertices(et,tt,nt,st,ot,ct){let dt=0,ft=0,gt=0,yt=0;for(let xt=0;xt<nt;++xt){const St=et[tt+xt],wt=St._texture,bt=St.scale.x,Pt=St.scale.y,Rt=wt.trim,Mt=wt.orig;Rt?(ft=Rt.x-St.anchor.x*Mt.width,dt=ft+Rt.width,yt=Rt.y-St.anchor.y*Mt.height,gt=yt+Rt.height):(dt=Mt.width*(1-St.anchor.x),ft=Mt.width*-St.anchor.x,gt=Mt.height*(1-St.anchor.y),yt=Mt.height*-St.anchor.y),st[ct]=ft*bt,st[ct+1]=yt*Pt,st[ct+ot]=dt*bt,st[ct+ot+1]=yt*Pt,st[ct+ot*2]=dt*bt,st[ct+ot*2+1]=gt*Pt,st[ct+ot*3]=ft*bt,st[ct+ot*3+1]=gt*Pt,ct+=ot*4}}uploadPosition(et,tt,nt,st,ot,ct){for(let dt=0;dt<nt;dt++){const ft=et[tt+dt].position;st[ct]=ft.x,st[ct+1]=ft.y,st[ct+ot]=ft.x,st[ct+ot+1]=ft.y,st[ct+ot*2]=ft.x,st[ct+ot*2+1]=ft.y,st[ct+ot*3]=ft.x,st[ct+ot*3+1]=ft.y,ct+=ot*4}}uploadRotation(et,tt,nt,st,ot,ct){for(let dt=0;dt<nt;dt++){const ft=et[tt+dt].rotation;st[ct]=ft,st[ct+ot]=ft,st[ct+ot*2]=ft,st[ct+ot*3]=ft,ct+=ot*4}}uploadUvs(et,tt,nt,st,ot,ct){for(let dt=0;dt<nt;++dt){const ft=et[tt+dt]._texture._uvs;ft?(st[ct]=ft.x0,st[ct+1]=ft.y0,st[ct+ot]=ft.x1,st[ct+ot+1]=ft.y1,st[ct+ot*2]=ft.x2,st[ct+ot*2+1]=ft.y2,st[ct+ot*3]=ft.x3,st[ct+ot*3+1]=ft.y3,ct+=ot*4):(st[ct]=0,st[ct+1]=0,st[ct+ot]=0,st[ct+ot+1]=0,st[ct+ot*2]=0,st[ct+ot*2+1]=0,st[ct+ot*3]=0,st[ct+ot*3+1]=0,ct+=ot*4)}}uploadTint(et,tt,nt,st,ot,ct){for(let dt=0;dt<nt;++dt){const ft=et[tt+dt],gt=Color.shared.setValue(ft._tintRGB).toPremultiplied(ft.alpha,ft.texture.baseTexture.alphaMode>0);st[ct]=gt,st[ct+ot]=gt,st[ct+ot*2]=gt,st[ct+ot*3]=gt,ct+=ot*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}ParticleRenderer.extension={name:"particle",type:ExtensionType.RendererPlugin};extensions$1.add(ParticleRenderer);class AnimatedSprite extends Sprite{constructor(et,tt=!0){super(et[0]instanceof Texture?et[0]:et[0].texture),this._textures=null,this._durations=null,this._autoUpdate=tt,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=et}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ticker.shared.add(this.update,this,UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(et){this.stop(),this.currentFrame=et}gotoAndPlay(et){this.currentFrame=et,this.play()}update(et){if(!this._playing)return;const tt=this.animationSpeed*et,nt=this.currentFrame;if(this._durations!==null){let st=this._currentTime%1*this._durations[this.currentFrame];for(st+=tt/60*1e3;st<0;)this._currentTime--,st+=this._durations[this.currentFrame];const ot=Math.sign(this.animationSpeed*et);for(this._currentTime=Math.floor(this._currentTime);st>=this._durations[this.currentFrame];)st-=this._durations[this.currentFrame]*ot,this._currentTime+=ot;this._currentTime+=st/this._durations[this.currentFrame]}else this._currentTime+=tt;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):nt!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<nt||this.animationSpeed<0&&this.currentFrame>nt)&&this.onLoop(),this.updateTexture())}updateTexture(){const et=this.currentFrame;this._previousFrame!==et&&(this._previousFrame=et,this._texture=this._textures[et],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(et){this.stop(),super.destroy(et),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(et){const tt=[];for(let nt=0;nt<et.length;++nt)tt.push(Texture.from(et[nt]));return new AnimatedSprite(tt)}static fromImages(et){const tt=[];for(let nt=0;nt<et.length;++nt)tt.push(Texture.from(et[nt]));return new AnimatedSprite(tt)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(et){if(et[0]instanceof Texture)this._textures=et,this._durations=null;else{this._textures=[],this._durations=[];for(let tt=0;tt<et.length;tt++)this._textures.push(et[tt].texture),this._durations.push(et[tt].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let et=Math.floor(this._currentTime)%this._textures.length;return et<0&&(et+=this._textures.length),et}set currentFrame(et){if(et<0||et>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${et}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const tt=this.currentFrame;this._currentTime=et,tt!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(et){et!==this._autoUpdate&&(this._autoUpdate=et,!this._autoUpdate&&this._isConnectedToTicker?(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const tempPoint=new Point;class TilingSprite extends Sprite{constructor(et,tt=100,nt=100){super(et),this.tileTransform=new Transform,this._width=tt,this._height=nt,this.uvMatrix=this.texture.uvMatrix||new TextureMatrix(et),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(et){this.uvMatrix.clampMargin=et,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(et){this.tileTransform.scale.copyFrom(et)}get tilePosition(){return this.tileTransform.position}set tilePosition(et){this.tileTransform.position.copyFrom(et)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(et){const tt=this._texture;!tt||!tt.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),et.batch.setObjectRenderer(et.plugins[this.pluginName]),et.plugins[this.pluginName].render(this))}_calculateBounds(){const et=this._width*-this._anchor._x,tt=this._height*-this._anchor._y,nt=this._width*(1-this._anchor._x),st=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,et,tt,nt,st)}getLocalBounds(et){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),et||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),et=this._localBoundsRect),this._bounds.getRectangle(et)):super.getLocalBounds.call(this,et)}containsPoint(et){this.worldTransform.applyInverse(et,tempPoint);const tt=this._width,nt=this._height,st=-tt*this.anchor._x;if(tempPoint.x>=st&&tempPoint.x<st+tt){const ot=-nt*this.anchor._y;if(tempPoint.y>=ot&&tempPoint.y<ot+nt)return!0}return!1}destroy(et){super.destroy(et),this.tileTransform=null,this.uvMatrix=null}static from(et,tt){const nt=et instanceof Texture?et:Texture.from(et,tt);return new TilingSprite(nt,tt.width,tt.height)}get width(){return this._width}set width(et){this._width=et}get height(){return this._height}set height(et){this._height=et}}var gl2FragmentSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,gl2VertexSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl1FragmentSrc=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gl1VertexSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,fragmentSimpleSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const tempMat=new Matrix;class TilingSpriteRenderer extends ObjectRenderer{constructor(et){super(et),et.runners.contextChange.add(this),this.quad=new QuadUv,this.state=State.for2d()}contextChange(){const et=this.renderer,tt={globals:et.globalUniforms};this.simpleShader=Shader.from(gl1VertexSrc,fragmentSimpleSrc,tt),this.shader=et.context.webGLVersion>1?Shader.from(gl2VertexSrc,gl2FragmentSrc,tt):Shader.from(gl1VertexSrc,gl1FragmentSrc,tt)}render(et){const tt=this.renderer,nt=this.quad;let st=nt.vertices;st[0]=st[6]=et._width*-et.anchor.x,st[1]=st[3]=et._height*-et.anchor.y,st[2]=st[4]=et._width*(1-et.anchor.x),st[5]=st[7]=et._height*(1-et.anchor.y);const ot=et.uvRespectAnchor?et.anchor.x:0,ct=et.uvRespectAnchor?et.anchor.y:0;st=nt.uvs,st[0]=st[6]=-ot,st[1]=st[3]=-ct,st[2]=st[4]=1-ot,st[5]=st[7]=1-ct,nt.invalidate();const dt=et._texture,ft=dt.baseTexture,gt=ft.alphaMode>0,yt=et.tileTransform.localTransform,xt=et.uvMatrix;let St=ft.isPowerOfTwo&&dt.frame.width===ft.width&&dt.frame.height===ft.height;St&&(ft._glTextures[tt.CONTEXT_UID]?St=ft.wrapMode!==WRAP_MODES.CLAMP:ft.wrapMode===WRAP_MODES.CLAMP&&(ft.wrapMode=WRAP_MODES.REPEAT));const wt=St?this.simpleShader:this.shader,bt=dt.width,Pt=dt.height,Rt=et._width,Mt=et._height;tempMat.set(yt.a*bt/Rt,yt.b*bt/Mt,yt.c*Pt/Rt,yt.d*Pt/Mt,yt.tx/Rt,yt.ty/Mt),tempMat.invert(),St?tempMat.prepend(xt.mapCoord):(wt.uniforms.uMapCoord=xt.mapCoord.toArray(!0),wt.uniforms.uClampFrame=xt.uClampFrame,wt.uniforms.uClampOffset=xt.uClampOffset),wt.uniforms.uTransform=tempMat.toArray(!0),wt.uniforms.uColor=Color.shared.setValue(et.tint).premultiply(et.worldAlpha,gt).toArray(wt.uniforms.uColor),wt.uniforms.translationMatrix=et.transform.worldTransform.toArray(!0),wt.uniforms.uSampler=dt,tt.shader.bind(wt),tt.geometry.bind(nt),this.state.blendMode=correctBlendMode(et.blendMode,gt),tt.state.set(this.state),tt.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}TilingSpriteRenderer.extension={name:"tilingSprite",type:ExtensionType.RendererPlugin};extensions$1.add(TilingSpriteRenderer);const _Application=class pf{constructor(et){this.stage=new Container,et=Object.assign({forceCanvas:!1},et),this.renderer=autoDetectRenderer(et),pf._plugins.forEach(tt=>{tt.init.call(this,et)})}render(){this.renderer.render(this.stage)}get view(){var et;return(et=this.renderer)==null?void 0:et.view}get screen(){var et;return(et=this.renderer)==null?void 0:et.screen}destroy(et,tt){const nt=pf._plugins.slice(0);nt.reverse(),nt.forEach(st=>{st.destroy.call(this)}),this.stage.destroy(tt),this.stage=null,this.renderer.destroy(et),this.renderer=null}};_Application._plugins=[];let Application=_Application;extensions$1.handleByList(ExtensionType.Application,Application._plugins);class ResizePlugin{static init(et){Object.defineProperty(this,"resizeTo",{set(tt){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=tt,tt&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let tt,nt;if(this._resizeTo===globalThis.window)tt=globalThis.innerWidth,nt=globalThis.innerHeight;else{const{clientWidth:st,clientHeight:ot}=this._resizeTo;tt=st,nt=ot}this.renderer.resize(tt,nt),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=et.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}ResizePlugin.extension=ExtensionType.Application;extensions$1.add(ResizePlugin);var propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var rt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=rt,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var rt=requireReactPropTypesSecret();function et(){}function tt(){}return tt.resetWarningCache=et,factoryWithThrowingShims=function(){function nt(ct,dt,ft,gt,yt,xt){if(xt!==rt){var St=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw St.name="Invariant Violation",St}}nt.isRequired=nt;function st(){return nt}var ot={array:nt,bigint:nt,bool:nt,func:nt,number:nt,object:nt,string:nt,symbol:nt,any:nt,arrayOf:st,element:nt,elementType:nt,instanceOf:st,node:nt,objectOf:st,oneOf:st,oneOfType:st,shape:st,exact:st,checkPropTypes:tt,resetWarningCache:et};return ot.PropTypes=ot,ot},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const k=getDefaultExportFromCjs(propTypesExports);function P(rt){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},P(rt)}function E(rt){var et=function(tt,nt){if(P(tt)!=="object"||tt===null)return tt;var st=tt[Symbol.toPrimitive];if(st!==void 0){var ot=st.call(tt,nt||"default");if(P(ot)!=="object")return ot;throw new TypeError("@@toPrimitive must return a primitive value.")}return(nt==="string"?String:Number)(tt)}(rt,"string");return P(et)==="symbol"?et:String(et)}function _(rt,et,tt){return(et=E(et))in rt?Object.defineProperty(rt,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):rt[et]=tt,rt}function C(rt,et){(et==null||et>rt.length)&&(et=rt.length);for(var tt=0,nt=new Array(et);tt<et;tt++)nt[tt]=rt[tt];return nt}function z(rt){return function(et){if(Array.isArray(et))return C(et)}(rt)||function(et){if(typeof Symbol<"u"&&et[Symbol.iterator]!=null||et["@@iterator"]!=null)return Array.from(et)}(rt)||function(et,tt){if(et){if(typeof et=="string")return C(et,tt);var nt=Object.prototype.toString.call(et).slice(8,-1);return nt==="Object"&&et.constructor&&(nt=et.constructor.name),nt==="Map"||nt==="Set"?Array.from(et):nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt)?C(et,tt):void 0}}(rt)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function N(rt,et){for(var tt=arguments.length,nt=new Array(tt>2?tt-2:0),st=2;st<tt;st++)nt[st-2]=arguments[st]}var T=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function I(rt){return rt&&rt.__esModule&&Object.prototype.hasOwnProperty.call(rt,"default")?rt.default:rt}var R=function(rt){return rt==null};function O(rt){var et=[];if(rt===void 0)return et;if(typeof rt=="string")et=rt.split(",");else if(typeof rt=="number")et=[rt];else if(Array.isArray(rt))et=z(rt);else{if(rt===null||P(rt)!=="object")return et;et=[rt&&(rt==null?void 0:rt.x)||0,rt&&(rt==null?void 0:rt.y)||0]}return et.filter(function(tt){return!R(tt)&&!isNaN(tt)}).map(Number)}function j(rt,et){if(rt.length!==et.length)return!1;for(var tt=0;tt<rt.length;tt++)if(rt[tt]!==et[tt])return!1;return!0}function L(rt){return rt instanceof Point||rt instanceof ObservablePoint}var D=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function M(rt,et,tt){if(L(rt[et])&&L(tt))rt[et].copyFrom(tt);else if(L(rt[et])){var nt=O(tt);N(nt!==void 0&&nt.length>0&&nt.length<3,"The property `%s` is a `Point` and must be set to a comma-separated string of either coordinates, an array containing coordinates, or a Point.",et,JSON.stringify(tt),P(tt)),rt[et].set(nt.shift(),nt.shift())}else rt[et]=tt}var U,F=function(rt){var et,tt=rt;if(!Array.isArray(tt)){if(et=rt,Object.prototype.toString.call(et)!=="[object Object]")throw new Error("collection needs to be an Array or Object");tt=Object.keys(rt)}var nt={};return tt.forEach(function(st){nt[st]=!0}),function(st){return nt[st]!==void 0}},A=function(rt){return function(){return!rt.apply(void 0,arguments)}},Q="children",H=(_(U={},Q,!0),_(U,"parent",!0),_(U,"worldAlpha",!0),_(U,"worldTransform",!0),_(U,"worldVisible",!0),U),B={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},W=function(rt,et){var tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},nt=function(dt){return requestAnimationFrame(function(){var ft,gt;dt==null||(ft=dt.__reactpixi)===null||ft===void 0||(gt=ft.root)===null||gt===void 0||gt.emit("__REACT_PIXI_REQUEST_RENDER__")})},st=function(dt,ft){if(tt.hasOwnProperty(dt))return N(ft.typeofs.some(function(gt){return P(tt[dt])===gt})||ft.instanceofs.some(function(gt){return tt[dt]instanceof gt}),"".concat(rt," ").concat(dt," prop is invalid")),tt[dt]};if(tt.texture)return N(tt.texture instanceof Texture,"".concat(rt," texture needs to be typeof `Texture`")),tt.texture;var ot=st("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||st("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||st("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,Texture]});N(!!ot,"".concat(rt," could not get texture from props"));var ct=Texture.from(ot);return ct.__reactpixi={root:et},ct.once("update",nt),ct.once("loaded",nt),ct.valid&&nt(ct),ct},$=A(F([].concat(z(Object.keys(H)),z(D))));function V(rt,et,tt){var nt=!1;if(N(DisplayObject.prototype.isPrototypeOf(rt),"instance needs to be typeof `DisplayObject`, got `%s`",P(rt)),!tt.ignoreEvents)for(var st=typeof rt.removeListener=="function",ot=typeof rt.on=="function",ct=0;ct<D.length;ct++){var dt=D[ct];et[dt]!==tt[dt]&&(nt=!0,typeof et[dt]=="function"&&st&&rt.removeListener(dt,et[dt]),typeof tt[dt]=="function"&&ot&&rt.on(dt,tt[dt]))}var ft=Object.keys(tt||{});if(tt.overwriteProps){for(var gt=0;gt<ft.length;gt++){var yt=ft[gt];et[yt]!==tt[yt]&&(nt=!0,M(rt,yt,tt[yt]))}return nt}for(var xt=ft.filter($),St=0;St<xt.length;St++){var wt=xt[St],bt=tt[wt];tt[wt]!==et[wt]&&(nt=!0),bt!==void 0?M(rt,wt,bt):wt in B?(console.warn("setting default value: ".concat(wt,", from: ").concat(rt[wt]," to: ").concat(bt," for"),rt),nt=!0,M(rt,wt,B[wt])):console.warn("ignoring prop: ".concat(wt,", from ").concat(rt[wt]," to ").concat(bt," for"),rt)}return nt}var q=function(rt,et){var tt=et.text,nt=et.style;return new BitmapText(tt,nt)},X=function(){return new Container};function G(rt,et){if(rt==null)return{};var tt,nt,st=function(ct,dt){if(ct==null)return{};var ft,gt,yt={},xt=Object.keys(ct);for(gt=0;gt<xt.length;gt++)ft=xt[gt],dt.indexOf(ft)>=0||(yt[ft]=ct[ft]);return yt}(rt,et);if(Object.getOwnPropertySymbols){var ot=Object.getOwnPropertySymbols(rt);for(nt=0;nt<ot.length;nt++)tt=ot[nt],et.indexOf(tt)>=0||Object.prototype.propertyIsEnumerable.call(rt,tt)&&(st[tt]=rt[tt])}return st}var Y=["draw","geometry"],K=function(rt,et){var tt=et.geometry;N(!tt||tt instanceof Graphics,"Graphics geometry needs to be a `Graphics`");var nt=tt?new Graphics(tt.geometry):new Graphics;return nt.applyProps=function(st,ot,ct){var dt=ct.draw;ct.geometry;var ft=V(st,ot,G(ct,Y));return ot.draw!==dt&&typeof dt=="function"&&(ft=!0,dt.call(nt,nt)),ft},nt},J=["image","texture"],Z=function(rt,et){var tt=et.leftWidth,nt=tt===void 0?10:tt,st=et.topHeight,ot=st===void 0?10:st,ct=et.rightWidth,dt=ct===void 0?10:ct,ft=et.bottomHeight,gt=ft===void 0?10:ft,yt=W("NineSlicePlane",rt,et),xt=new NineSlicePlane(yt,nt,ot,dt,gt);return xt.applyProps=function(St,wt,bt){var Pt=bt.image,Rt=bt.texture,Mt=V(St,wt,G(bt,J));return(Pt||Rt)&&(Rt!==wt.texture&&(Mt=!0),St.texture=W("NineSlicePlane",rt,bt)),Mt},xt};function ee(rt,et){var tt=Object.keys(rt);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(rt);et&&(nt=nt.filter(function(st){return Object.getOwnPropertyDescriptor(rt,st).enumerable})),tt.push.apply(tt,nt)}return tt}function ne(rt){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ee(Object(tt),!0).forEach(function(nt){_(rt,nt,tt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(rt,Object.getOwnPropertyDescriptors(tt)):ee(Object(tt)).forEach(function(nt){Object.defineProperty(rt,nt,Object.getOwnPropertyDescriptor(tt,nt))})}return rt}var te=function(rt,et){var tt=et.maxSize,nt=tt===void 0?1500:tt,st=et.batchSize,ot=st===void 0?16384:st,ct=et.autoResize,dt=ct!==void 0&&ct,ft=ne(ne({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),et.properties||{}),gt=ne(ne({},{children:!1,texture:!1,baseTexture:!1}),et.destroyOptions||{}),yt=new ParticleContainer(nt,ft,ot,dt);return yt.willUnmount=function(xt,St,wt){xt.destroy(gt)},yt},re=["image","texture"],le=function(rt,et){var tt=new Sprite(W("Sprite",rt,et));return tt.applyProps=function(nt,st,ot){var ct=ot.image,dt=ot.texture,ft=V(nt,st,G(ot,re));return(dt&&st.texture!==ot.texture||ct&&st.image!==ot.image)&&(st.texture!==ot.texture&&(ft=!0),nt.texture=W("Sprite",rt,ot)),ft},tt},ae=["textures","isPlaying","initialFrame","images"],ie=function(rt,et){var tt=et.textures,nt=et.images,st=et.isPlaying,ot=st===void 0||st,ct=et.initialFrame,dt=function(gt){return gt.map(function(yt){return N(yt instanceof Texture||(yt==null?void 0:yt.texture),"AnimationSprite texture needs to be an array of `Texture` or `{ texture: Texture, time:\n                number }`"),yt})},ft=nt?AnimatedSprite.fromImages(nt):new AnimatedSprite(dt(tt));return ft[ot?"gotoAndPlay":"gotoAndStop"](ct||0),ft.applyProps=function(gt,yt,xt){var St=xt.textures,wt=xt.isPlaying,bt=xt.initialFrame,Pt=xt.images,Rt=V(gt,yt,G(xt,ae));if(Pt&&yt.images!==Pt){for(var Mt=[],kt=0;kt<Pt.length;++kt)Mt.push(Texture.from(Pt[kt]));gt.textures=Mt,Rt=!0}if(St&&yt.textures!==St&&(gt.textures=dt(St),Rt=!0),wt!==yt.isPlaying||bt!==yt.initialFrame){var Dt=typeof bt=="number"?bt:ft.currentFrame||0;ft[wt?"gotoAndPlay":"gotoAndStop"](Dt),Rt=!0}return Rt},ft},oe=function(rt,et){var tt=et.text,nt=tt===void 0?"":tt,st=et.style,ot=st===void 0?{}:st,ct=et.isSprite,dt=new Text(nt,ot);return ct?(dt.updateText(),new Sprite(dt.texture)):dt},ue=["tileScale","tilePosition","image","texture"],se=function(rt,et){var tt=et.width,nt=tt===void 0?100:tt,st=et.height,ot=st===void 0?100:st,ct=W("TilingSprite",rt,et),dt=new TilingSprite(ct,nt,ot);return dt.applyProps=function(ft,gt,yt){var xt=yt.tileScale,St=yt.tilePosition,wt=yt.image,bt=yt.texture,Pt=V(ft,gt,G(yt,ue));if(St){var Rt,Mt=O(St);(Rt=ft.tilePosition).set.apply(Rt,z(Mt)),Pt=!j(O(gt.tilePosition),Mt)||Pt}if(xt){var kt,Dt=O(xt);(kt=ft.tileScale).set.apply(kt,z(Dt)),Pt=!j(O(gt.tileScale),Dt)||Pt}return(wt||bt)&&(bt!==gt.texture&&(Pt=!0),ft.texture=W("Sprite",rt,yt)),Pt},dt},ce=["image","texture"],fe=function(rt,et){var tt=W("Mesh",rt,et),nt=et.vertices,st=et.uvs,ot=et.indices,ct=et.drawMode,dt=ct===void 0?DRAW_MODES.TRIANGLES:ct,ft=new SimpleMesh(tt,nt,st,ot,dt);return ft.applyProps=function(gt,yt,xt){var St=xt.image,wt=xt.texture,bt=V(gt,yt,G(xt,ce));return(St||wt)&&(wt!==yt.texture&&(bt=!0),gt.texture=W("Mesh",rt,xt)),bt},ft},de=["image","texture"],pe=function(rt,et){var tt=W("SimpleRope",rt,et),nt=et.points,st=new SimpleRope(tt,nt);return st.applyProps=function(ot,ct,dt){var ft=dt.image,gt=dt.texture,yt=G(dt,de);N(Array.isArray(dt.points),"SimpleRope points needs to be %s","Array<Point>");var xt=V(ot,ct,yt);return(ft||gt)&&(gt!==ct.texture&&(xt=!0),ot.texture=W("SimpleRope",rt,dt)),xt},st},me=Object.freeze({__proto__:null,BitmapText:q,Container:X,Graphics:K,NineSlicePlane:Z,ParticleContainer:te,Sprite:le,Text:oe,TilingSprite:se,SimpleMesh:fe,SimpleRope:pe,AnimatedSprite:ie});function he(rt,et){var tt=Object.keys(rt);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(rt);et&&(nt=nt.filter(function(st){return Object.getOwnPropertyDescriptor(rt,st).enumerable})),tt.push.apply(tt,nt)}return tt}function ge(rt){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?he(Object(tt),!0).forEach(function(nt){_(rt,nt,tt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(rt,Object.getOwnPropertyDescriptors(tt)):he(Object(tt)).forEach(function(nt){Object.defineProperty(rt,nt,Object.getOwnPropertyDescriptor(tt,nt))})}return rt}var ve={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},ye=Object.keys(ve).reduce(function(rt,et){return ge(ge({},rt),{},_({},et,me[et]))},{}),be={};function Se(rt,et){return N(!!rt,"Expect type to be defined, got `%s`",rt),N(!ve[rt],"Component `%s` could not be created, already exists in default components.",rt),be[rt]=et,rt}var xe,we,ke,Pe,Ee={},_e={},Ce={get exports(){return _e},set exports(rt){_e=rt}},ze={};function Ne(){return we||(we=1,Ce.exports=(xe||(xe=1,function(rt){function et(Ct,jt){var Ft=Ct.length;Ct.push(jt);e:for(;0<Ft;){var It=Ft-1>>>1,Gt=Ct[It];if(!(0<st(Gt,jt)))break e;Ct[It]=jt,Ct[Ft]=Gt,Ft=It}}function tt(Ct){return Ct.length===0?null:Ct[0]}function nt(Ct){if(Ct.length===0)return null;var jt=Ct[0],Ft=Ct.pop();if(Ft!==jt){Ct[0]=Ft;e:for(var It=0,Gt=Ct.length,Xt=Gt>>>1;It<Xt;){var ir=2*(It+1)-1,cr=Ct[ir],gr=ir+1,Sr=Ct[gr];if(0>st(cr,Ft))gr<Gt&&0>st(Sr,cr)?(Ct[It]=Sr,Ct[gr]=Ft,It=gr):(Ct[It]=cr,Ct[ir]=Ft,It=ir);else{if(!(gr<Gt&&0>st(Sr,Ft)))break e;Ct[It]=Sr,Ct[gr]=Ft,It=gr}}}return jt}function st(Ct,jt){var Ft=Ct.sortIndex-jt.sortIndex;return Ft!==0?Ft:Ct.id-jt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ot=performance;rt.unstable_now=function(){return ot.now()}}else{var ct=Date,dt=ct.now();rt.unstable_now=function(){return ct.now()-dt}}var ft=[],gt=[],yt=1,xt=null,St=3,wt=!1,bt=!1,Pt=!1,Rt=typeof setTimeout=="function"?setTimeout:null,Mt=typeof clearTimeout=="function"?clearTimeout:null,kt=typeof setImmediate<"u"?setImmediate:null;function Dt(Ct){for(var jt=tt(gt);jt!==null;){if(jt.callback===null)nt(gt);else{if(!(jt.startTime<=Ct))break;nt(gt),jt.sortIndex=jt.expirationTime,et(ft,jt)}jt=tt(gt)}}function zt(Ct){if(Pt=!1,Dt(Ct),!bt)if(tt(ft)!==null)bt=!0,Ut(Lt);else{var jt=tt(gt);jt!==null&&Ht(zt,jt.startTime-Ct)}}function Lt(Ct,jt){bt=!1,Pt&&(Pt=!1,Mt(ur),ur=-1),wt=!0;var Ft=St;try{for(Dt(jt),xt=tt(ft);xt!==null&&(!(xt.expirationTime>jt)||Ct&&!Kt());){var It=xt.callback;if(typeof It=="function"){xt.callback=null,St=xt.priorityLevel;var Gt=It(xt.expirationTime<=jt);jt=rt.unstable_now(),typeof Gt=="function"?xt.callback=Gt:xt===tt(ft)&&nt(ft),Dt(jt)}else nt(ft);xt=tt(ft)}if(xt!==null)var Xt=!0;else{var ir=tt(gt);ir!==null&&Ht(zt,ir.startTime-jt),Xt=!1}return Xt}finally{xt=null,St=Ft,wt=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var Yt,Nt=!1,Jt=null,ur=-1,dr=5,Tr=-1;function Kt(){return!(rt.unstable_now()-Tr<dr)}function Zt(){if(Jt!==null){var Ct=rt.unstable_now();Tr=Ct;var jt=!0;try{jt=Jt(!0,Ct)}finally{jt?Yt():(Nt=!1,Jt=null)}}else Nt=!1}if(typeof kt=="function")Yt=function(){kt(Zt)};else if(typeof MessageChannel<"u"){var lr=new MessageChannel,vr=lr.port2;lr.port1.onmessage=Zt,Yt=function(){vr.postMessage(null)}}else Yt=function(){Rt(Zt,0)};function Ut(Ct){Jt=Ct,Nt||(Nt=!0,Yt())}function Ht(Ct,jt){ur=Rt(function(){Ct(rt.unstable_now())},jt)}rt.unstable_IdlePriority=5,rt.unstable_ImmediatePriority=1,rt.unstable_LowPriority=4,rt.unstable_NormalPriority=3,rt.unstable_Profiling=null,rt.unstable_UserBlockingPriority=2,rt.unstable_cancelCallback=function(Ct){Ct.callback=null},rt.unstable_continueExecution=function(){bt||wt||(bt=!0,Ut(Lt))},rt.unstable_forceFrameRate=function(Ct){0>Ct||125<Ct?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):dr=0<Ct?Math.floor(1e3/Ct):5},rt.unstable_getCurrentPriorityLevel=function(){return St},rt.unstable_getFirstCallbackNode=function(){return tt(ft)},rt.unstable_next=function(Ct){switch(St){case 1:case 2:case 3:var jt=3;break;default:jt=St}var Ft=St;St=jt;try{return Ct()}finally{St=Ft}},rt.unstable_pauseExecution=function(){},rt.unstable_requestPaint=function(){},rt.unstable_runWithPriority=function(Ct,jt){switch(Ct){case 1:case 2:case 3:case 4:case 5:break;default:Ct=3}var Ft=St;St=Ct;try{return jt()}finally{St=Ft}},rt.unstable_scheduleCallback=function(Ct,jt,Ft){var It=rt.unstable_now();switch(Ft=typeof Ft=="object"&&Ft!==null&&typeof(Ft=Ft.delay)=="number"&&0<Ft?It+Ft:It,Ct){case 1:var Gt=-1;break;case 2:Gt=250;break;case 5:Gt=1073741823;break;case 4:Gt=1e4;break;default:Gt=5e3}return Ct={id:yt++,callback:jt,priorityLevel:Ct,startTime:Ft,expirationTime:Gt=Ft+Gt,sortIndex:-1},Ft>It?(Ct.sortIndex=Ft,et(gt,Ct),tt(ft)===null&&Ct===tt(gt)&&(Pt?(Mt(ur),ur=-1):Pt=!0,Ht(zt,Ft-It))):(Ct.sortIndex=Gt,et(ft,Ct),bt||wt||(bt=!0,Ut(Lt))),Ct},rt.unstable_shouldYield=Kt,rt.unstable_wrapCallback=function(Ct){var jt=St;return function(){var Ft=St;St=jt;try{return Ct.apply(this,arguments)}finally{St=Ft}}}}(ze)),ze)),_e}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Te(){return Pe||(Pe=1,ke=function(rt){var et={},tt=g$1,nt=Ne(),st=Object.assign;function ot(lt){for(var ut="https://reactjs.org/docs/error-decoder.html?invariant="+lt,mt=1;mt<arguments.length;mt++)ut+="&args[]="+encodeURIComponent(arguments[mt]);return"Minified React error #"+lt+"; visit "+ut+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ct=tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dt=Symbol.for("react.element"),ft=Symbol.for("react.portal"),gt=Symbol.for("react.fragment"),yt=Symbol.for("react.strict_mode"),xt=Symbol.for("react.profiler"),St=Symbol.for("react.provider"),wt=Symbol.for("react.context"),bt=Symbol.for("react.forward_ref"),Pt=Symbol.for("react.suspense"),Rt=Symbol.for("react.suspense_list"),Mt=Symbol.for("react.memo"),kt=Symbol.for("react.lazy"),Dt=Symbol.for("react.offscreen"),zt=Symbol.iterator;function Lt(lt){return lt===null||typeof lt!="object"?null:typeof(lt=zt&&lt[zt]||lt["@@iterator"])=="function"?lt:null}function Yt(lt){if(lt==null)return null;if(typeof lt=="function")return lt.displayName||lt.name||null;if(typeof lt=="string")return lt;switch(lt){case gt:return"Fragment";case ft:return"Portal";case xt:return"Profiler";case yt:return"StrictMode";case Pt:return"Suspense";case Rt:return"SuspenseList"}if(typeof lt=="object")switch(lt.$$typeof){case wt:return(lt.displayName||"Context")+".Consumer";case St:return(lt._context.displayName||"Context")+".Provider";case bt:var ut=lt.render;return(lt=lt.displayName)||(lt=(lt=ut.displayName||ut.name||"")!==""?"ForwardRef("+lt+")":"ForwardRef"),lt;case Mt:return(ut=lt.displayName||null)!==null?ut:Yt(lt.type)||"Memo";case kt:ut=lt._payload,lt=lt._init;try{return Yt(lt(ut))}catch{}}return null}function Nt(lt){var ut=lt.type;switch(lt.tag){case 24:return"Cache";case 9:return(ut.displayName||"Context")+".Consumer";case 10:return(ut._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return lt=(lt=ut.render).displayName||lt.name||"",ut.displayName||(lt!==""?"ForwardRef("+lt+")":"ForwardRef");case 7:return"Fragment";case 5:return ut;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yt(ut);case 8:return ut===yt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof ut=="function")return ut.displayName||ut.name||null;if(typeof ut=="string")return ut}return null}function Jt(lt){var ut=lt,mt=lt;if(lt.alternate)for(;ut.return;)ut=ut.return;else{lt=ut;do 4098&(ut=lt).flags&&(mt=ut.return),lt=ut.return;while(lt)}return ut.tag===3?mt:null}function ur(lt){if(Jt(lt)!==lt)throw Error(ot(188))}function dr(lt){var ut=lt.alternate;if(!ut){if((ut=Jt(lt))===null)throw Error(ot(188));return ut!==lt?null:lt}for(var mt=lt,vt=ut;;){var Et=mt.return;if(Et===null)break;var At=Et.alternate;if(At===null){if((vt=Et.return)!==null){mt=vt;continue}break}if(Et.child===At.child){for(At=Et.child;At;){if(At===mt)return ur(Et),lt;if(At===vt)return ur(Et),ut;At=At.sibling}throw Error(ot(188))}if(mt.return!==vt.return)mt=Et,vt=At;else{for(var Bt=!1,Wt=Et.child;Wt;){if(Wt===mt){Bt=!0,mt=Et,vt=At;break}if(Wt===vt){Bt=!0,vt=Et,mt=At;break}Wt=Wt.sibling}if(!Bt){for(Wt=At.child;Wt;){if(Wt===mt){Bt=!0,mt=At,vt=Et;break}if(Wt===vt){Bt=!0,vt=At,mt=Et;break}Wt=Wt.sibling}if(!Bt)throw Error(ot(189))}}if(mt.alternate!==vt)throw Error(ot(190))}if(mt.tag!==3)throw Error(ot(188));return mt.stateNode.current===mt?lt:ut}function Tr(lt){return(lt=dr(lt))!==null?Kt(lt):null}function Kt(lt){if(lt.tag===5||lt.tag===6)return lt;for(lt=lt.child;lt!==null;){var ut=Kt(lt);if(ut!==null)return ut;lt=lt.sibling}return null}function Zt(lt){if(lt.tag===5||lt.tag===6)return lt;for(lt=lt.child;lt!==null;){if(lt.tag!==4){var ut=Zt(lt);if(ut!==null)return ut}lt=lt.sibling}return null}var lr,vr=Array.isArray,Ut=rt.getPublicInstance,Ht=rt.getRootHostContext,Ct=rt.getChildHostContext,jt=rt.prepareForCommit,Ft=rt.resetAfterCommit,It=rt.createInstance,Gt=rt.appendInitialChild,Xt=rt.finalizeInitialChildren,ir=rt.prepareUpdate,cr=rt.shouldSetTextContent,gr=rt.createTextInstance,Sr=rt.scheduleTimeout,br=rt.cancelTimeout,Pr=rt.noTimeout,yr=rt.isPrimaryRenderer,Ir=rt.supportsMutation,Nr=rt.supportsPersistence,Br=rt.supportsHydration,Qr=rt.getInstanceFromNode,Ur=rt.preparePortalMount,Or=rt.getCurrentEventPriority,ai=rt.detachDeletedInstance,$i=rt.supportsMicrotasks,zs=rt.scheduleMicrotask,Ci=rt.supportsTestSelectors,Ai=rt.findFiberRoot,ea=rt.getBoundingRect,fa=rt.getTextContent,cs=rt.isHiddenSubtree,Mu=rt.matchAccessibilityRole,Ol=rt.setFocusIfFocusable,Dl=rt.setupIntersectionObserver,ta=rt.appendChild,zo=rt.appendChildToContainer,Ua=rt.commitTextUpdate,uo=rt.commitMount,Pc=rt.commitUpdate,Ho=rt.insertBefore,co=rt.insertInContainerBefore,rr=rt.removeChild,sr=rt.removeChildFromContainer,Zr=rt.resetTextContent,Hn=rt.hideInstance,Wn=rt.hideTextInstance,qr=rt.unhideInstance,Vi=rt.unhideTextInstance,Ki=rt.clearContainer,Ni=rt.cloneInstance,Es=rt.createContainerChildSet,ho=rt.appendChildToContainerChildSet,pa=rt.finalizeContainerChildren,ki=rt.replaceContainerChildren,fo=rt.cloneHiddenInstance,jo=rt.cloneHiddenTextInstance,Ga=rt.canHydrateInstance,ma=rt.canHydrateTextInstance,ga=rt.canHydrateSuspenseInstance,po=rt.isSuspenseInstancePending,Hs=rt.isSuspenseInstanceFallback,za=rt.getSuspenseInstanceFallbackErrorDetails,mo=rt.registerSuspenseInstanceRetry,ya=rt.getNextHydratableSibling,Fl=rt.getFirstHydratableChild,Ou=rt.getFirstHydratableChildWithinContainer,Nl=rt.getFirstHydratableChildWithinSuspenseInstance,ra=rt.hydrateInstance,Du=rt.hydrateTextInstance,$o=rt.hydrateSuspenseInstance,Ha=rt.getNextHydratableInstanceAfterSuspenseInstance,go=rt.commitHydratedContainer,Fu=rt.commitHydratedSuspenseInstance,kl=rt.clearSuspenseBoundary,Oh=rt.clearSuspenseBoundaryFromContainer,wd=rt.shouldDeleteUnhydratedTailInstances,bd=rt.didNotMatchHydratedContainerTextInstance,hi=rt.didNotMatchHydratedTextInstance;function Ll(lt){if(lr===void 0)try{throw Error()}catch(mt){var ut=mt.stack.trim().match(/\n( *(at )?)/);lr=ut&&ut[1]||""}return`
`+lr+lt}var Bl=!1;function Nu(lt,ut){if(!lt||Bl)return"";Bl=!0;var mt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(ut)if(ut=function(){throw Error()},Object.defineProperty(ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ut,[])}catch(hr){var vt=hr}Reflect.construct(lt,[],ut)}else{try{ut.call()}catch(hr){vt=hr}lt.call(ut.prototype)}else{try{throw Error()}catch(hr){vt=hr}lt()}}catch(hr){if(hr&&vt&&typeof hr.stack=="string"){for(var Et=hr.stack.split(`
`),At=vt.stack.split(`
`),Bt=Et.length-1,Wt=At.length-1;1<=Bt&&0<=Wt&&Et[Bt]!==At[Wt];)Wt--;for(;1<=Bt&&0<=Wt;Bt--,Wt--)if(Et[Bt]!==At[Wt]){if(Bt!==1||Wt!==1)do if(Bt--,0>--Wt||Et[Bt]!==At[Wt]){var tr=`
`+Et[Bt].replace(" at new "," at ");return lt.displayName&&tr.includes("<anonymous>")&&(tr=tr.replace("<anonymous>",lt.displayName)),tr}while(1<=Bt&&0<=Wt);break}}}finally{Bl=!1,Error.prepareStackTrace=mt}return(lt=lt?lt.displayName||lt.name:"")?Ll(lt):""}var ku=Object.prototype.hasOwnProperty,Cc=[],yo=-1;function js(lt){return{current:lt}}function An(lt){0>yo||(lt.current=Cc[yo],Cc[yo]=null,yo--)}function Kn(lt,ut){yo++,Cc[yo]=lt.current,lt.current=ut}var Ri={},Li=js(Ri),Qi=js(!1),_o=Ri;function _a(lt,ut){var mt=lt.type.contextTypes;if(!mt)return Ri;var vt=lt.stateNode;if(vt&&vt.__reactInternalMemoizedUnmaskedChildContext===ut)return vt.__reactInternalMemoizedMaskedChildContext;var Et,At={};for(Et in mt)At[Et]=ut[Et];return vt&&((lt=lt.stateNode).__reactInternalMemoizedUnmaskedChildContext=ut,lt.__reactInternalMemoizedMaskedChildContext=At),At}function Bi(lt){return(lt=lt.childContextTypes)!=null}function vo(){An(Qi),An(Li)}function Ul(lt,ut,mt){if(Li.current!==Ri)throw Error(ot(168));Kn(Li,ut),Kn(Qi,mt)}function Dh(lt,ut,mt){var vt=lt.stateNode;if(ut=ut.childContextTypes,typeof vt.getChildContext!="function")return mt;for(var Et in vt=vt.getChildContext())if(!(Et in ut))throw Error(ot(108,Nt(lt)||"Unknown",Et));return st({},mt,vt)}function Lu(lt){return lt=(lt=lt.stateNode)&&lt.__reactInternalMemoizedMergedChildContext||Ri,_o=Li.current,Kn(Li,lt),Kn(Qi,Qi.current),!0}function Bu(lt,ut,mt){var vt=lt.stateNode;if(!vt)throw Error(ot(169));mt?(lt=Dh(lt,ut,_o),vt.__reactInternalMemoizedMergedChildContext=lt,An(Qi),An(Li),Kn(Li,lt)):An(Qi),Kn(Qi,mt)}var Ss=Math.clz32?Math.clz32:function(lt){return(lt>>>=0)===0?32:31-(Ic(lt)/Gl|0)|0},Ic=Math.log,Gl=Math.LN2,Mc=64,zl=4194304;function Mn(lt){switch(lt&-lt){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&lt;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&lt;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return lt}}function Hl(lt,ut){var mt=lt.pendingLanes;if(mt===0)return 0;var vt=0,Et=lt.suspendedLanes,At=lt.pingedLanes,Bt=268435455&mt;if(Bt!==0){var Wt=Bt&~Et;Wt!==0?vt=Mn(Wt):(At&=Bt)!==0&&(vt=Mn(At))}else(Bt=mt&~Et)!==0?vt=Mn(Bt):At!==0&&(vt=Mn(At));if(vt===0)return 0;if(ut!==0&&ut!==vt&&!(ut&Et)&&((Et=vt&-vt)>=(At=ut&-ut)||Et===16&&4194240&At))return ut;if(4&vt&&(vt|=16&mt),(ut=lt.entangledLanes)!==0)for(lt=lt.entanglements,ut&=vt;0<ut;)Et=1<<(mt=31-Ss(ut)),vt|=lt[mt],ut&=~Et;return vt}function Fh(lt,ut){switch(lt){case 1:case 2:case 4:return ut+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ut+5e3;default:return-1}}function jl(lt){return(lt=-1073741825&lt.pendingLanes)!==0?lt:1073741824&lt?1073741824:0}function Oc(){var lt=Mc;return!(4194240&(Mc<<=1))&&(Mc=64),lt}function Uu(lt){for(var ut=[],mt=0;31>mt;mt++)ut.push(lt);return ut}function Vo(lt,ut,mt){lt.pendingLanes|=ut,ut!==536870912&&(lt.suspendedLanes=0,lt.pingedLanes=0),(lt=lt.eventTimes)[ut=31-Ss(ut)]=mt}function $l(lt,ut){var mt=lt.entangledLanes|=ut;for(lt=lt.entanglements;mt;){var vt=31-Ss(mt),Et=1<<vt;Et&ut|lt[vt]&ut&&(lt[vt]|=ut),mt&=~Et}}var Jr=0;function va(lt){return 1<(lt&=-lt)?4<lt?268435455&lt?16:536870912:4:1}var na=nt.unstable_scheduleCallback,xa=nt.unstable_cancelCallback,Vl=nt.unstable_shouldYield,Wl=nt.unstable_requestPaint,ti=nt.unstable_now,Dc=nt.unstable_ImmediatePriority,Nh=nt.unstable_UserBlockingPriority,Wo=nt.unstable_NormalPriority,Ad=nt.unstable_IdlePriority,Xl=null,hs=null,Ts=typeof Object.is=="function"?Object.is:function(lt,ut){return lt===ut&&(lt!==0||1/lt==1/ut)||lt!=lt&&ut!=ut},Ea=null,ja=!1,xo=!1;function Eo(lt){Ea===null?Ea=[lt]:Ea.push(lt)}function ds(){if(!xo&&Ea!==null){xo=!0;var lt=0,ut=Jr;try{var mt=Ea;for(Jr=1;lt<mt.length;lt++){var vt=mt[lt];do vt=vt(!0);while(vt!==null)}Ea=null,ja=!1}catch(Et){throw Ea!==null&&(Ea=Ea.slice(lt+1)),na(Dc,ds),Et}finally{Jr=ut,xo=!1}}return null}var Xo=[],qo=0,Yo=null,So=0,Zi=[],fs=0,Ji=null,ws=1,bs="";function $a(lt,ut){Xo[qo++]=So,Xo[qo++]=Yo,Yo=lt,So=ut}function ql(lt,ut,mt){Zi[fs++]=ws,Zi[fs++]=bs,Zi[fs++]=Ji,Ji=lt;var vt=ws;lt=bs;var Et=32-Ss(vt)-1;vt&=~(1<<Et),mt+=1;var At=32-Ss(ut)+Et;if(30<At){var Bt=Et-Et%5;At=(vt&(1<<Bt)-1).toString(32),vt>>=Bt,Et-=Bt,ws=1<<32-Ss(ut)+Et|mt<<Et|vt,bs=At+lt}else ws=1<<At|mt<<Et|vt,bs=lt}function Ko(lt){lt.return!==null&&($a(lt,1),ql(lt,1,0))}function Gu(lt){for(;lt===Yo;)Yo=Xo[--qo],Xo[qo]=null,So=Xo[--qo],Xo[qo]=null;for(;lt===Ji;)Ji=Zi[--fs],Zi[fs]=null,bs=Zi[--fs],Zi[fs]=null,ws=Zi[--fs],Zi[fs]=null}var ri=null,Ii=null,Qn=!1,Sa=!1,$s=null;function zu(lt,ut){var mt=vs(5,null,null,0);mt.elementType="DELETED",mt.stateNode=ut,mt.return=lt,(ut=lt.deletions)===null?(lt.deletions=[mt],lt.flags|=16):ut.push(mt)}function Hu(lt,ut){switch(lt.tag){case 5:return(ut=Ga(ut,lt.type,lt.pendingProps))!==null&&(lt.stateNode=ut,ri=lt,Ii=Fl(ut),!0);case 6:return(ut=ma(ut,lt.pendingProps))!==null&&(lt.stateNode=ut,ri=lt,Ii=null,!0);case 13:if((ut=ga(ut))!==null){var mt=Ji!==null?{id:ws,overflow:bs}:null;return lt.memoizedState={dehydrated:ut,treeContext:mt,retryLane:1073741824},(mt=vs(18,null,null,0)).stateNode=ut,mt.return=lt,lt.child=mt,ri=lt,Ii=null,!0}return!1;default:return!1}}function To(lt){return(1&lt.mode)!=0&&(128&lt.flags)==0}function Qo(lt){if(Qn){var ut=Ii;if(ut){var mt=ut;if(!Hu(lt,ut)){if(To(lt))throw Error(ot(418));ut=ya(mt);var vt=ri;ut&&Hu(lt,ut)?zu(vt,mt):(lt.flags=-4097&lt.flags|2,Qn=!1,ri=lt)}}else{if(To(lt))throw Error(ot(418));lt.flags=-4097&lt.flags|2,Qn=!1,ri=lt}}}function Fc(lt){for(lt=lt.return;lt!==null&&lt.tag!==5&&lt.tag!==3&&lt.tag!==13;)lt=lt.return;ri=lt}function ju(lt){if(!Br||lt!==ri)return!1;if(!Qn)return Fc(lt),Qn=!0,!1;if(lt.tag!==3&&(lt.tag!==5||wd(lt.type)&&!cr(lt.type,lt.memoizedProps))){var ut=Ii;if(ut){if(To(lt))throw kh(),Error(ot(418));for(;ut;)zu(lt,ut),ut=ya(ut)}}if(Fc(lt),lt.tag===13){if(!Br)throw Error(ot(316));if(!(lt=(lt=lt.memoizedState)!==null?lt.dehydrated:null))throw Error(ot(317));Ii=Ha(lt)}else Ii=ri?ya(lt.stateNode):null;return!0}function kh(){for(var lt=Ii;lt;)lt=ya(lt)}function Zo(){Br&&(Ii=ri=null,Sa=Qn=!1)}function Yl(lt){$s===null?$s=[lt]:$s.push(lt)}var Rd=ct.ReactCurrentBatchConfig;function $u(lt,ut){if(Ts(lt,ut))return!0;if(typeof lt!="object"||lt===null||typeof ut!="object"||ut===null)return!1;var mt=Object.keys(lt),vt=Object.keys(ut);if(mt.length!==vt.length)return!1;for(vt=0;vt<mt.length;vt++){var Et=mt[vt];if(!ku.call(ut,Et)||!Ts(lt[Et],ut[Et]))return!1}return!0}function Pd(lt){switch(lt.tag){case 5:return Ll(lt.type);case 16:return Ll("Lazy");case 13:return Ll("Suspense");case 19:return Ll("SuspenseList");case 0:case 2:case 15:return lt=Nu(lt.type,!1);case 11:return lt=Nu(lt.type.render,!1);case 1:return lt=Nu(lt.type,!0);default:return""}}function Vs(lt,ut){if(lt&&lt.defaultProps){for(var mt in ut=st({},ut),lt=lt.defaultProps)ut[mt]===void 0&&(ut[mt]=lt[mt]);return ut}return ut}var Vu=js(null),Kl=null,Jo=null,Nc=null;function kc(){Nc=Jo=Kl=null}function Lh(lt,ut,mt){yr?(Kn(Vu,ut._currentValue),ut._currentValue=mt):(Kn(Vu,ut._currentValue2),ut._currentValue2=mt)}function Ql(lt){var ut=Vu.current;An(Vu),yr?lt._currentValue=ut:lt._currentValue2=ut}function Lc(lt,ut,mt){for(;lt!==null;){var vt=lt.alternate;if((lt.childLanes&ut)!==ut?(lt.childLanes|=ut,vt!==null&&(vt.childLanes|=ut)):vt!==null&&(vt.childLanes&ut)!==ut&&(vt.childLanes|=ut),lt===mt)break;lt=lt.return}}function el(lt,ut){Kl=lt,Nc=Jo=null,(lt=lt.dependencies)!==null&&lt.firstContext!==null&&(lt.lanes&ut&&(ui=!0),lt.firstContext=null)}function As(lt){var ut=yr?lt._currentValue:lt._currentValue2;if(Nc!==lt)if(lt={context:lt,memoizedValue:ut,next:null},Jo===null){if(Kl===null)throw Error(ot(308));Jo=lt,Kl.dependencies={lanes:0,firstContext:lt}}else Jo=Jo.next=lt;return ut}var Va=null;function Bc(lt){Va===null?Va=[lt]:Va.push(lt)}function Bh(lt,ut,mt,vt){var Et=ut.interleaved;return Et===null?(mt.next=mt,Bc(ut)):(mt.next=Et.next,Et.next=mt),ut.interleaved=mt,ia(lt,vt)}function ia(lt,ut){lt.lanes|=ut;var mt=lt.alternate;for(mt!==null&&(mt.lanes|=ut),mt=lt,lt=lt.return;lt!==null;)lt.childLanes|=ut,(mt=lt.alternate)!==null&&(mt.childLanes|=ut),mt=lt,lt=lt.return;return mt.tag===3?mt.stateNode:null}var Wa=!1;function Uc(lt){lt.updateQueue={baseState:lt.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uh(lt,ut){lt=lt.updateQueue,ut.updateQueue===lt&&(ut.updateQueue={baseState:lt.baseState,firstBaseUpdate:lt.firstBaseUpdate,lastBaseUpdate:lt.lastBaseUpdate,shared:lt.shared,effects:lt.effects})}function Ta(lt,ut){return{eventTime:lt,lane:ut,tag:0,payload:null,callback:null,next:null}}function sa(lt,ut,mt){var vt=lt.updateQueue;if(vt===null)return null;if(vt=vt.shared,(2&Yr)!=0){var Et=vt.pending;return Et===null?ut.next=ut:(ut.next=Et.next,Et.next=ut),vt.pending=ut,ia(lt,mt)}return(Et=vt.interleaved)===null?(ut.next=ut,Bc(vt)):(ut.next=Et.next,Et.next=ut),vt.interleaved=ut,ia(lt,mt)}function Xa(lt,ut,mt){if((ut=ut.updateQueue)!==null&&(ut=ut.shared,(4194240&mt)!=0)){var vt=ut.lanes;mt|=vt&=lt.pendingLanes,ut.lanes=mt,$l(lt,mt)}}function Gh(lt,ut){var mt=lt.updateQueue,vt=lt.alternate;if(vt!==null&&mt===(vt=vt.updateQueue)){var Et=null,At=null;if((mt=mt.firstBaseUpdate)!==null){do{var Bt={eventTime:mt.eventTime,lane:mt.lane,tag:mt.tag,payload:mt.payload,callback:mt.callback,next:null};At===null?Et=At=Bt:At=At.next=Bt,mt=mt.next}while(mt!==null);At===null?Et=At=ut:At=At.next=ut}else Et=At=ut;return mt={baseState:vt.baseState,firstBaseUpdate:Et,lastBaseUpdate:At,shared:vt.shared,effects:vt.effects},void(lt.updateQueue=mt)}(lt=mt.lastBaseUpdate)===null?mt.firstBaseUpdate=ut:lt.next=ut,mt.lastBaseUpdate=ut}function Zl(lt,ut,mt,vt){var Et=lt.updateQueue;Wa=!1;var At=Et.firstBaseUpdate,Bt=Et.lastBaseUpdate,Wt=Et.shared.pending;if(Wt!==null){Et.shared.pending=null;var tr=Wt,hr=tr.next;tr.next=null,Bt===null?At=hr:Bt.next=hr,Bt=tr;var pr=lt.alternate;pr!==null&&(Wt=(pr=pr.updateQueue).lastBaseUpdate)!==Bt&&(Wt===null?pr.firstBaseUpdate=hr:Wt.next=hr,pr.lastBaseUpdate=tr)}if(At!==null){var Cr=Et.baseState;for(Bt=0,pr=hr=tr=null,Wt=At;;){var fr=Wt.lane,Ar=Wt.eventTime;if((vt&fr)===fr){pr!==null&&(pr=pr.next={eventTime:Ar,lane:0,tag:Wt.tag,payload:Wt.payload,callback:Wt.callback,next:null});e:{var kr=lt,Kr=Wt;switch(fr=ut,Ar=mt,Kr.tag){case 1:if(typeof(kr=Kr.payload)=="function"){Cr=kr.call(Ar,Cr,fr);break e}Cr=kr;break e;case 3:kr.flags=-65537&kr.flags|128;case 0:if((fr=typeof(kr=Kr.payload)=="function"?kr.call(Ar,Cr,fr):kr)==null)break e;Cr=st({},Cr,fr);break e;case 2:Wa=!0}}Wt.callback!==null&&Wt.lane!==0&&(lt.flags|=64,(fr=Et.effects)===null?Et.effects=[Wt]:fr.push(Wt))}else Ar={eventTime:Ar,lane:fr,tag:Wt.tag,payload:Wt.payload,callback:Wt.callback,next:null},pr===null?(hr=pr=Ar,tr=Cr):pr=pr.next=Ar,Bt|=fr;if((Wt=Wt.next)===null){if((Wt=Et.shared.pending)===null)break;Wt=(fr=Wt).next,fr.next=null,Et.lastBaseUpdate=fr,Et.shared.pending=null}}if(pr===null&&(tr=Cr),Et.baseState=tr,Et.firstBaseUpdate=hr,Et.lastBaseUpdate=pr,(ut=Et.shared.interleaved)!==null){Et=ut;do Bt|=Et.lane,Et=Et.next;while(Et!==ut)}else At===null&&(Et.shared.lanes=0);io|=Bt,lt.lanes=Bt,lt.memoizedState=Cr}}function Gc(lt,ut,mt){if(lt=ut.effects,ut.effects=null,lt!==null)for(ut=0;ut<lt.length;ut++){var vt=lt[ut],Et=vt.callback;if(Et!==null){if(vt.callback=null,vt=mt,typeof Et!="function")throw Error(ot(191,Et));Et.call(vt)}}}var zc=new tt.Component().refs;function Wu(lt,ut,mt,vt){mt=(mt=mt(vt,ut=lt.memoizedState))==null?ut:st({},ut,mt),lt.memoizedState=mt,lt.lanes===0&&(lt.updateQueue.baseState=mt)}var Jl={isMounted:function(lt){return!!(lt=lt._reactInternals)&&Jt(lt)===lt},enqueueSetState:function(lt,ut,mt){lt=lt._reactInternals;var vt=Ti(),Et=Bs(lt),At=Ta(vt,Et);At.payload=ut,mt!=null&&(At.callback=mt),(ut=sa(lt,At,Et))!==null&&(zi(ut,lt,Et,vt),Xa(ut,lt,Et))},enqueueReplaceState:function(lt,ut,mt){lt=lt._reactInternals;var vt=Ti(),Et=Bs(lt),At=Ta(vt,Et);At.tag=1,At.payload=ut,mt!=null&&(At.callback=mt),(ut=sa(lt,At,Et))!==null&&(zi(ut,lt,Et,vt),Xa(ut,lt,Et))},enqueueForceUpdate:function(lt,ut){lt=lt._reactInternals;var mt=Ti(),vt=Bs(lt),Et=Ta(mt,vt);Et.tag=2,ut!=null&&(Et.callback=ut),(ut=sa(lt,Et,vt))!==null&&(zi(ut,lt,vt,mt),Xa(ut,lt,vt))}};function wo(lt,ut,mt,vt,Et,At,Bt){return typeof(lt=lt.stateNode).shouldComponentUpdate=="function"?lt.shouldComponentUpdate(vt,At,Bt):!ut.prototype||!ut.prototype.isPureReactComponent||!$u(mt,vt)||!$u(Et,At)}function zh(lt,ut,mt){var vt=!1,Et=Ri,At=ut.contextType;return typeof At=="object"&&At!==null?At=As(At):(Et=Bi(ut)?_o:Li.current,At=(vt=(vt=ut.contextTypes)!=null)?_a(lt,Et):Ri),ut=new ut(mt,At),lt.memoizedState=ut.state!==null&&ut.state!==void 0?ut.state:null,ut.updater=Jl,lt.stateNode=ut,ut._reactInternals=lt,vt&&((lt=lt.stateNode).__reactInternalMemoizedUnmaskedChildContext=Et,lt.__reactInternalMemoizedMaskedChildContext=At),ut}function Hh(lt,ut,mt,vt){lt=ut.state,typeof ut.componentWillReceiveProps=="function"&&ut.componentWillReceiveProps(mt,vt),typeof ut.UNSAFE_componentWillReceiveProps=="function"&&ut.UNSAFE_componentWillReceiveProps(mt,vt),ut.state!==lt&&Jl.enqueueReplaceState(ut,ut.state,null)}function Hc(lt,ut,mt,vt){var Et=lt.stateNode;Et.props=mt,Et.state=lt.memoizedState,Et.refs=zc,Uc(lt);var At=ut.contextType;typeof At=="object"&&At!==null?Et.context=As(At):(At=Bi(ut)?_o:Li.current,Et.context=_a(lt,At)),Et.state=lt.memoizedState,typeof(At=ut.getDerivedStateFromProps)=="function"&&(Wu(lt,ut,At,mt),Et.state=lt.memoizedState),typeof ut.getDerivedStateFromProps=="function"||typeof Et.getSnapshotBeforeUpdate=="function"||typeof Et.UNSAFE_componentWillMount!="function"&&typeof Et.componentWillMount!="function"||(ut=Et.state,typeof Et.componentWillMount=="function"&&Et.componentWillMount(),typeof Et.UNSAFE_componentWillMount=="function"&&Et.UNSAFE_componentWillMount(),ut!==Et.state&&Jl.enqueueReplaceState(Et,Et.state,null),Zl(lt,mt,Et,vt),Et.state=lt.memoizedState),typeof Et.componentDidMount=="function"&&(lt.flags|=4194308)}function tl(lt,ut,mt){if((lt=mt.ref)!==null&&typeof lt!="function"&&typeof lt!="object"){if(mt._owner){if(mt=mt._owner){if(mt.tag!==1)throw Error(ot(309));var vt=mt.stateNode}if(!vt)throw Error(ot(147,lt));var Et=vt,At=""+lt;return ut!==null&&ut.ref!==null&&typeof ut.ref=="function"&&ut.ref._stringRef===At?ut.ref:(ut=function(Bt){var Wt=Et.refs;Wt===zc&&(Wt=Et.refs={}),Bt===null?delete Wt[At]:Wt[At]=Bt},ut._stringRef=At,ut)}if(typeof lt!="string")throw Error(ot(284));if(!mt._owner)throw Error(ot(290,lt))}return lt}function eu(lt,ut){throw lt=Object.prototype.toString.call(ut),Error(ot(31,lt==="[object Object]"?"object with keys {"+Object.keys(ut).join(", ")+"}":lt))}function rl(lt){return(0,lt._init)(lt._payload)}function nl(lt){function ut(mr,Qt){if(lt){var or=mr.deletions;or===null?(mr.deletions=[Qt],mr.flags|=16):or.push(Qt)}}function mt(mr,Qt){if(!lt)return null;for(;Qt!==null;)ut(mr,Qt),Qt=Qt.sibling;return null}function vt(mr,Qt){for(mr=new Map;Qt!==null;)Qt.key!==null?mr.set(Qt.key,Qt):mr.set(Qt.index,Qt),Qt=Qt.sibling;return mr}function Et(mr,Qt){return(mr=Fa(mr,Qt)).index=0,mr.sibling=null,mr}function At(mr,Qt,or){return mr.index=or,lt?(or=mr.alternate)!==null?(or=or.index)<Qt?(mr.flags|=2,Qt):or:(mr.flags|=2,Qt):(mr.flags|=1048576,Qt)}function Bt(mr){return lt&&mr.alternate===null&&(mr.flags|=2),mr}function Wt(mr,Qt,or,Er){return Qt===null||Qt.tag!==6?((Qt=_c(or,mr.mode,Er)).return=mr,Qt):((Qt=Et(Qt,or)).return=mr,Qt)}function tr(mr,Qt,or,Er){var $r=or.type;return $r===gt?pr(mr,Qt,or.props.children,Er,or.key):Qt!==null&&(Qt.elementType===$r||typeof $r=="object"&&$r!==null&&$r.$$typeof===kt&&rl($r)===Qt.type)?((Er=Et(Qt,or.props)).ref=tl(mr,Qt,or),Er.return=mr,Er):((Er=wu(or.type,or.key,or.props,null,mr.mode,Er)).ref=tl(mr,Qt,or),Er.return=mr,Er)}function hr(mr,Qt,or,Er){return Qt===null||Qt.tag!==4||Qt.stateNode.containerInfo!==or.containerInfo||Qt.stateNode.implementation!==or.implementation?((Qt=yh(or,mr.mode,Er)).return=mr,Qt):((Qt=Et(Qt,or.children||[])).return=mr,Qt)}function pr(mr,Qt,or,Er,$r){return Qt===null||Qt.tag!==7?((Qt=ao(or,mr.mode,Er,$r)).return=mr,Qt):((Qt=Et(Qt,or)).return=mr,Qt)}function Cr(mr,Qt,or){if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number")return(Qt=_c(""+Qt,mr.mode,or)).return=mr,Qt;if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case dt:return(or=wu(Qt.type,Qt.key,Qt.props,null,mr.mode,or)).ref=tl(mr,null,Qt),or.return=mr,or;case ft:return(Qt=yh(Qt,mr.mode,or)).return=mr,Qt;case kt:return Cr(mr,(0,Qt._init)(Qt._payload),or)}if(vr(Qt)||Lt(Qt))return(Qt=ao(Qt,mr.mode,or,null)).return=mr,Qt;eu(mr,Qt)}return null}function fr(mr,Qt,or,Er){var $r=Qt!==null?Qt.key:null;if(typeof or=="string"&&or!==""||typeof or=="number")return $r!==null?null:Wt(mr,Qt,""+or,Er);if(typeof or=="object"&&or!==null){switch(or.$$typeof){case dt:return or.key===$r?tr(mr,Qt,or,Er):null;case ft:return or.key===$r?hr(mr,Qt,or,Er):null;case kt:return fr(mr,Qt,($r=or._init)(or._payload),Er)}if(vr(or)||Lt(or))return $r!==null?null:pr(mr,Qt,or,Er,null);eu(mr,or)}return null}function Ar(mr,Qt,or,Er,$r){if(typeof Er=="string"&&Er!==""||typeof Er=="number")return Wt(Qt,mr=mr.get(or)||null,""+Er,$r);if(typeof Er=="object"&&Er!==null){switch(Er.$$typeof){case dt:return tr(Qt,mr=mr.get(Er.key===null?or:Er.key)||null,Er,$r);case ft:return hr(Qt,mr=mr.get(Er.key===null?or:Er.key)||null,Er,$r);case kt:return Ar(mr,Qt,or,(0,Er._init)(Er._payload),$r)}if(vr(Er)||Lt(Er))return pr(Qt,mr=mr.get(or)||null,Er,$r,null);eu(Qt,Er)}return null}function kr(mr,Qt,or,Er){for(var $r=null,Bn=null,Gr=Qt,Fn=Qt=0,wi=null;Gr!==null&&Fn<or.length;Fn++){Gr.index>Fn?(wi=Gr,Gr=null):wi=Gr.sibling;var Un=fr(mr,Gr,or[Fn],Er);if(Un===null){Gr===null&&(Gr=wi);break}lt&&Gr&&Un.alternate===null&&ut(mr,Gr),Qt=At(Un,Qt,Fn),Bn===null?$r=Un:Bn.sibling=Un,Bn=Un,Gr=wi}if(Fn===or.length)return mt(mr,Gr),Qn&&$a(mr,Fn),$r;if(Gr===null){for(;Fn<or.length;Fn++)(Gr=Cr(mr,or[Fn],Er))!==null&&(Qt=At(Gr,Qt,Fn),Bn===null?$r=Gr:Bn.sibling=Gr,Bn=Gr);return Qn&&$a(mr,Fn),$r}for(Gr=vt(mr,Gr);Fn<or.length;Fn++)(wi=Ar(Gr,mr,Fn,or[Fn],Er))!==null&&(lt&&wi.alternate!==null&&Gr.delete(wi.key===null?Fn:wi.key),Qt=At(wi,Qt,Fn),Bn===null?$r=wi:Bn.sibling=wi,Bn=wi);return lt&&Gr.forEach(function(ca){return ut(mr,ca)}),Qn&&$a(mr,Fn),$r}function Kr(mr,Qt,or,Er){var $r=Lt(or);if(typeof $r!="function")throw Error(ot(150));if((or=$r.call(or))==null)throw Error(ot(151));for(var Bn=$r=null,Gr=Qt,Fn=Qt=0,wi=null,Un=or.next();Gr!==null&&!Un.done;Fn++,Un=or.next()){Gr.index>Fn?(wi=Gr,Gr=null):wi=Gr.sibling;var ca=fr(mr,Gr,Un.value,Er);if(ca===null){Gr===null&&(Gr=wi);break}lt&&Gr&&ca.alternate===null&&ut(mr,Gr),Qt=At(ca,Qt,Fn),Bn===null?$r=ca:Bn.sibling=ca,Bn=ca,Gr=wi}if(Un.done)return mt(mr,Gr),Qn&&$a(mr,Fn),$r;if(Gr===null){for(;!Un.done;Fn++,Un=or.next())(Un=Cr(mr,Un.value,Er))!==null&&(Qt=At(Un,Qt,Fn),Bn===null?$r=Un:Bn.sibling=Un,Bn=Un);return Qn&&$a(mr,Fn),$r}for(Gr=vt(mr,Gr);!Un.done;Fn++,Un=or.next())(Un=Ar(Gr,mr,Fn,Un.value,Er))!==null&&(lt&&Un.alternate!==null&&Gr.delete(Un.key===null?Fn:Un.key),Qt=At(Un,Qt,Fn),Bn===null?$r=Un:Bn.sibling=Un,Bn=Un);return lt&&Gr.forEach(function(Zh){return ut(mr,Zh)}),Qn&&$a(mr,Fn),$r}return function mr(Qt,or,Er,$r){if(typeof Er=="object"&&Er!==null&&Er.type===gt&&Er.key===null&&(Er=Er.props.children),typeof Er=="object"&&Er!==null){switch(Er.$$typeof){case dt:e:{for(var Bn=Er.key,Gr=or;Gr!==null;){if(Gr.key===Bn){if((Bn=Er.type)===gt){if(Gr.tag===7){mt(Qt,Gr.sibling),(or=Et(Gr,Er.props.children)).return=Qt,Qt=or;break e}}else if(Gr.elementType===Bn||typeof Bn=="object"&&Bn!==null&&Bn.$$typeof===kt&&rl(Bn)===Gr.type){mt(Qt,Gr.sibling),(or=Et(Gr,Er.props)).ref=tl(Qt,Gr,Er),or.return=Qt,Qt=or;break e}mt(Qt,Gr);break}ut(Qt,Gr),Gr=Gr.sibling}Er.type===gt?((or=ao(Er.props.children,Qt.mode,$r,Er.key)).return=Qt,Qt=or):(($r=wu(Er.type,Er.key,Er.props,null,Qt.mode,$r)).ref=tl(Qt,or,Er),$r.return=Qt,Qt=$r)}return Bt(Qt);case ft:e:{for(Gr=Er.key;or!==null;){if(or.key===Gr){if(or.tag===4&&or.stateNode.containerInfo===Er.containerInfo&&or.stateNode.implementation===Er.implementation){mt(Qt,or.sibling),(or=Et(or,Er.children||[])).return=Qt,Qt=or;break e}mt(Qt,or);break}ut(Qt,or),or=or.sibling}(or=yh(Er,Qt.mode,$r)).return=Qt,Qt=or}return Bt(Qt);case kt:return mr(Qt,or,(Gr=Er._init)(Er._payload),$r)}if(vr(Er))return kr(Qt,or,Er,$r);if(Lt(Er))return Kr(Qt,or,Er,$r);eu(Qt,Er)}return typeof Er=="string"&&Er!==""||typeof Er=="number"?(Er=""+Er,or!==null&&or.tag===6?(mt(Qt,or.sibling),(or=Et(or,Er)).return=Qt,Qt=or):(mt(Qt,or),(or=_c(Er,Qt.mode,$r)).return=Qt,Qt=or),Bt(Qt)):mt(Qt,or)}}var il=nl(!0),tu=nl(!1),ru={},ps=js(ru),bo=js(ru),qa=js(ru);function Ws(lt){if(lt===ru)throw Error(ot(174));return lt}function Xu(lt,ut){Kn(qa,ut),Kn(bo,lt),Kn(ps,ru),lt=Ht(ut),An(ps),Kn(ps,lt)}function Ao(){An(ps),An(bo),An(qa)}function jh(lt){var ut=Ws(qa.current),mt=Ws(ps.current);mt!==(ut=Ct(mt,lt.type,ut))&&(Kn(bo,lt),Kn(ps,ut))}function jc(lt){bo.current===lt&&(An(ps),An(bo))}var li=js(0);function qu(lt){for(var ut=lt;ut!==null;){if(ut.tag===13){var mt=ut.memoizedState;if(mt!==null&&((mt=mt.dehydrated)===null||po(mt)||Hs(mt)))return ut}else if(ut.tag===19&&ut.memoizedProps.revealOrder!==void 0){if(128&ut.flags)return ut}else if(ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===lt)break;for(;ut.sibling===null;){if(ut.return===null||ut.return===lt)return null;ut=ut.return}ut.sibling.return=ut.return,ut=ut.sibling}return null}var $c=[];function ms(){for(var lt=0;lt<$c.length;lt++){var ut=$c[lt];yr?ut._workInProgressVersionPrimary=null:ut._workInProgressVersionSecondary=null}$c.length=0}var Ya=ct.ReactCurrentDispatcher,Yu=ct.ReactCurrentBatchConfig,Ka=0,oi=null,Ei=null,pi=null,Ku=!1,nu=!1,aa=0,Vc=0;function mi(){throw Error(ot(321))}function iu(lt,ut){if(ut===null)return!1;for(var mt=0;mt<ut.length&&mt<lt.length;mt++)if(!Ts(lt[mt],ut[mt]))return!1;return!0}function Qu(lt,ut,mt,vt,Et,At){if(Ka=At,oi=ut,ut.memoizedState=null,ut.updateQueue=null,ut.lanes=0,Ya.current=lt===null||lt.memoizedState===null?eh:th,lt=mt(vt,Et),nu){At=0;do{if(nu=!1,aa=0,25<=At)throw Error(ot(301));At+=1,pi=Ei=null,ut.updateQueue=null,Ya.current=rh,lt=mt(vt,Et)}while(nu)}if(Ya.current=hl,ut=Ei!==null&&Ei.next!==null,Ka=0,pi=Ei=oi=null,Ku=!1,ut)throw Error(ot(300));return lt}function sl(){var lt=aa!==0;return aa=0,lt}function Wi(){var lt={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pi===null?oi.memoizedState=pi=lt:pi=pi.next=lt,pi}function es(){if(Ei===null){var lt=oi.alternate;lt=lt!==null?lt.memoizedState:null}else lt=Ei.next;var ut=pi===null?oi.memoizedState:pi.next;if(ut!==null)pi=ut,Ei=lt;else{if(lt===null)throw Error(ot(310));lt={memoizedState:(Ei=lt).memoizedState,baseState:Ei.baseState,baseQueue:Ei.baseQueue,queue:Ei.queue,next:null},pi===null?oi.memoizedState=pi=lt:pi=pi.next=lt}return pi}function al(lt,ut){return typeof ut=="function"?ut(lt):ut}function ol(lt){var ut=es(),mt=ut.queue;if(mt===null)throw Error(ot(311));mt.lastRenderedReducer=lt;var vt=Ei,Et=vt.baseQueue,At=mt.pending;if(At!==null){if(Et!==null){var Bt=Et.next;Et.next=At.next,At.next=Bt}vt.baseQueue=Et=At,mt.pending=null}if(Et!==null){At=Et.next,vt=vt.baseState;var Wt=Bt=null,tr=null,hr=At;do{var pr=hr.lane;if((Ka&pr)===pr)tr!==null&&(tr=tr.next={lane:0,action:hr.action,hasEagerState:hr.hasEagerState,eagerState:hr.eagerState,next:null}),vt=hr.hasEagerState?hr.eagerState:lt(vt,hr.action);else{var Cr={lane:pr,action:hr.action,hasEagerState:hr.hasEagerState,eagerState:hr.eagerState,next:null};tr===null?(Wt=tr=Cr,Bt=vt):tr=tr.next=Cr,oi.lanes|=pr,io|=pr}hr=hr.next}while(hr!==null&&hr!==At);tr===null?Bt=vt:tr.next=Wt,Ts(vt,ut.memoizedState)||(ui=!0),ut.memoizedState=vt,ut.baseState=Bt,ut.baseQueue=tr,mt.lastRenderedState=vt}if((lt=mt.interleaved)!==null){Et=lt;do At=Et.lane,oi.lanes|=At,io|=At,Et=Et.next;while(Et!==lt)}else Et===null&&(mt.lanes=0);return[ut.memoizedState,mt.dispatch]}function Zu(lt){var ut=es(),mt=ut.queue;if(mt===null)throw Error(ot(311));mt.lastRenderedReducer=lt;var vt=mt.dispatch,Et=mt.pending,At=ut.memoizedState;if(Et!==null){mt.pending=null;var Bt=Et=Et.next;do At=lt(At,Bt.action),Bt=Bt.next;while(Bt!==Et);Ts(At,ut.memoizedState)||(ui=!0),ut.memoizedState=At,ut.baseQueue===null&&(ut.baseState=At),mt.lastRenderedState=At}return[At,vt]}function Wc(){}function Xc(lt,ut){var mt=oi,vt=es(),Et=ut(),At=!Ts(vt.memoizedState,Et);if(At&&(vt.memoizedState=Et,ui=!0),vt=vt.queue,rc(Kc.bind(null,mt,vt,lt),[lt]),vt.getSnapshot!==ut||At||pi!==null&&1&pi.memoizedState.tag){if(mt.flags|=2048,su(9,Yc.bind(null,mt,vt,Et,ut),void 0,null),yi===null)throw Error(ot(349));30&Ka||qc(mt,ut,Et)}return Et}function qc(lt,ut,mt){lt.flags|=16384,lt={getSnapshot:ut,value:mt},(ut=oi.updateQueue)===null?(ut={lastEffect:null,stores:null},oi.updateQueue=ut,ut.stores=[lt]):(mt=ut.stores)===null?ut.stores=[lt]:mt.push(lt)}function Yc(lt,ut,mt,vt){ut.value=mt,ut.getSnapshot=vt,wa(ut)&&Ju(lt)}function Kc(lt,ut,mt){return mt(function(){wa(ut)&&Ju(lt)})}function wa(lt){var ut=lt.getSnapshot;lt=lt.value;try{var mt=ut();return!Ts(lt,mt)}catch{return!0}}function Ju(lt){var ut=ia(lt,1);ut!==null&&zi(ut,lt,1,-1)}function ec(lt){var ut=Wi();return typeof lt=="function"&&(lt=lt()),ut.memoizedState=ut.baseState=lt,lt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:lt},ut.queue=lt,lt=lt.dispatch=Id.bind(null,oi,lt),[ut.memoizedState,lt]}function su(lt,ut,mt,vt){return lt={tag:lt,create:ut,destroy:mt,deps:vt,next:null},(ut=oi.updateQueue)===null?(ut={lastEffect:null,stores:null},oi.updateQueue=ut,ut.lastEffect=lt.next=lt):(mt=ut.lastEffect)===null?ut.lastEffect=lt.next=lt:(vt=mt.next,mt.next=lt,lt.next=vt,ut.lastEffect=lt),lt}function $h(){return es().memoizedState}function Qa(lt,ut,mt,vt){var Et=Wi();oi.flags|=lt,Et.memoizedState=su(1|ut,mt,void 0,vt===void 0?null:vt)}function tc(lt,ut,mt,vt){var Et=es();vt=vt===void 0?null:vt;var At=void 0;if(Ei!==null){var Bt=Ei.memoizedState;if(At=Bt.destroy,vt!==null&&iu(vt,Bt.deps))return void(Et.memoizedState=su(ut,mt,At,vt))}oi.flags|=lt,Et.memoizedState=su(1|ut,mt,At,vt)}function Qc(lt,ut){return Qa(8390656,8,lt,ut)}function rc(lt,ut){return tc(2048,8,lt,ut)}function Zn(lt,ut){return tc(4,2,lt,ut)}function nc(lt,ut){return tc(4,4,lt,ut)}function au(lt,ut){return typeof ut=="function"?(lt=lt(),ut(lt),function(){ut(null)}):ut!=null?(lt=lt(),ut.current=lt,function(){ut.current=null}):void 0}function ll(lt,ut,mt){return mt=mt!=null?mt.concat([lt]):null,tc(4,4,au.bind(null,ut,lt),mt)}function ic(){}function sc(lt,ut){var mt=es();ut=ut===void 0?null:ut;var vt=mt.memoizedState;return vt!==null&&ut!==null&&iu(ut,vt[1])?vt[0]:(mt.memoizedState=[lt,ut],lt)}function ul(lt,ut){var mt=es();ut=ut===void 0?null:ut;var vt=mt.memoizedState;return vt!==null&&ut!==null&&iu(ut,vt[1])?vt[0]:(lt=lt(),mt.memoizedState=[lt,ut],lt)}function ou(lt,ut,mt){return 21&Ka?(Ts(mt,ut)||(mt=Oc(),oi.lanes|=mt,io|=mt,lt.baseState=!0),ut):(lt.baseState&&(lt.baseState=!1,ui=!0),lt.memoizedState=mt)}function cl(lt,ut){var mt=Jr;Jr=mt!==0&&4>mt?mt:4,lt(!0);var vt=Yu.transition;Yu.transition={};try{lt(!1),ut()}finally{Jr=mt,Yu.transition=vt}}function Zc(){return es().memoizedState}function Cd(lt,ut,mt){var vt=Bs(lt);mt={lane:vt,action:mt,hasEagerState:!1,eagerState:null,next:null},Jc(lt)?lu(ut,mt):(mt=Bh(lt,ut,mt,vt))!==null&&(zi(mt,lt,vt,Ti()),uu(mt,ut,vt))}function Id(lt,ut,mt){var vt=Bs(lt),Et={lane:vt,action:mt,hasEagerState:!1,eagerState:null,next:null};if(Jc(lt))lu(ut,Et);else{var At=lt.alternate;if(lt.lanes===0&&(At===null||At.lanes===0)&&(At=ut.lastRenderedReducer)!==null)try{var Bt=ut.lastRenderedState,Wt=At(Bt,mt);if(Et.hasEagerState=!0,Et.eagerState=Wt,Ts(Wt,Bt)){var tr=ut.interleaved;return tr===null?(Et.next=Et,Bc(ut)):(Et.next=tr.next,tr.next=Et),void(ut.interleaved=Et)}}catch{}(mt=Bh(lt,ut,Et,vt))!==null&&(zi(mt,lt,vt,Et=Ti()),uu(mt,ut,vt))}}function Jc(lt){var ut=lt.alternate;return lt===oi||ut!==null&&ut===oi}function lu(lt,ut){nu=Ku=!0;var mt=lt.pending;mt===null?ut.next=ut:(ut.next=mt.next,mt.next=ut),lt.pending=ut}function uu(lt,ut,mt){if(4194240&mt){var vt=ut.lanes;mt|=vt&=lt.pendingLanes,ut.lanes=mt,$l(lt,mt)}}var hl={readContext:As,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},eh={readContext:As,useCallback:function(lt,ut){return Wi().memoizedState=[lt,ut===void 0?null:ut],lt},useContext:As,useEffect:Qc,useImperativeHandle:function(lt,ut,mt){return mt=mt!=null?mt.concat([lt]):null,Qa(4194308,4,au.bind(null,ut,lt),mt)},useLayoutEffect:function(lt,ut){return Qa(4194308,4,lt,ut)},useInsertionEffect:function(lt,ut){return Qa(4,2,lt,ut)},useMemo:function(lt,ut){var mt=Wi();return ut=ut===void 0?null:ut,lt=lt(),mt.memoizedState=[lt,ut],lt},useReducer:function(lt,ut,mt){var vt=Wi();return ut=mt!==void 0?mt(ut):ut,vt.memoizedState=vt.baseState=ut,lt={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lt,lastRenderedState:ut},vt.queue=lt,lt=lt.dispatch=Cd.bind(null,oi,lt),[vt.memoizedState,lt]},useRef:function(lt){return lt={current:lt},Wi().memoizedState=lt},useState:ec,useDebugValue:ic,useDeferredValue:function(lt){return Wi().memoizedState=lt},useTransition:function(){var lt=ec(!1),ut=lt[0];return lt=cl.bind(null,lt[1]),Wi().memoizedState=lt,[ut,lt]},useMutableSource:function(){},useSyncExternalStore:function(lt,ut,mt){var vt=oi,Et=Wi();if(Qn){if(mt===void 0)throw Error(ot(407));mt=mt()}else{if(mt=ut(),yi===null)throw Error(ot(349));30&Ka||qc(vt,ut,mt)}Et.memoizedState=mt;var At={value:mt,getSnapshot:ut};return Et.queue=At,Qc(Kc.bind(null,vt,At,lt),[lt]),vt.flags|=2048,su(9,Yc.bind(null,vt,At,mt,ut),void 0,null),mt},useId:function(){var lt=Wi(),ut=yi.identifierPrefix;if(Qn){var mt=bs;ut=":"+ut+"R"+(mt=(ws&~(1<<32-Ss(ws)-1)).toString(32)+mt),0<(mt=aa++)&&(ut+="H"+mt.toString(32)),ut+=":"}else ut=":"+ut+"r"+(mt=Vc++).toString(32)+":";return lt.memoizedState=ut},unstable_isNewReconciler:!1},th={readContext:As,useCallback:sc,useContext:As,useEffect:rc,useImperativeHandle:ll,useInsertionEffect:Zn,useLayoutEffect:nc,useMemo:ul,useReducer:ol,useRef:$h,useState:function(){return ol(al)},useDebugValue:ic,useDeferredValue:function(lt){return ou(es(),Ei.memoizedState,lt)},useTransition:function(){return[ol(al)[0],es().memoizedState]},useMutableSource:Wc,useSyncExternalStore:Xc,useId:Zc,unstable_isNewReconciler:!1},rh={readContext:As,useCallback:sc,useContext:As,useEffect:rc,useImperativeHandle:ll,useInsertionEffect:Zn,useLayoutEffect:nc,useMemo:ul,useReducer:Zu,useRef:$h,useState:function(){return Zu(al)},useDebugValue:ic,useDeferredValue:function(lt){var ut=es();return Ei===null?ut.memoizedState=lt:ou(ut,Ei.memoizedState,lt)},useTransition:function(){return[Zu(al)[0],es().memoizedState]},useMutableSource:Wc,useSyncExternalStore:Xc,useId:Zc,unstable_isNewReconciler:!1};function dl(lt,ut){try{var mt="",vt=ut;do mt+=Pd(vt),vt=vt.return;while(vt);var Et=mt}catch(At){Et=`
Error generating stack: `+At.message+`
`+At.stack}return{value:lt,source:ut,stack:Et,digest:null}}function ac(lt,ut,mt){return{value:lt,source:null,stack:mt??null,digest:ut??null}}function nh(lt,ut){try{console.error(ut.value)}catch(mt){setTimeout(function(){throw mt})}}var Md=typeof WeakMap=="function"?WeakMap:Map;function oc(lt,ut,mt){(mt=Ta(-1,mt)).tag=3,mt.payload={element:null};var vt=ut.value;return mt.callback=function(){ei||(ei=!0,Sl=vt),nh(0,ut)},mt}function ba(lt,ut,mt){(mt=Ta(-1,mt)).tag=3;var vt=lt.type.getDerivedStateFromError;if(typeof vt=="function"){var Et=ut.value;mt.payload=function(){return vt(Et)},mt.callback=function(){nh(0,ut)}}var At=lt.stateNode;return At!==null&&typeof At.componentDidCatch=="function"&&(mt.callback=function(){nh(0,ut),typeof vt!="function"&&(la===null?la=new Set([this]):la.add(this));var Bt=ut.stack;this.componentDidCatch(ut.value,{componentStack:Bt!==null?Bt:""})}),mt}function ih(lt,ut,mt){var vt=lt.pingCache;if(vt===null){vt=lt.pingCache=new Md;var Et=new Set;vt.set(ut,Et)}else(Et=vt.get(ut))===void 0&&(Et=new Set,vt.set(ut,Et));Et.has(mt)||(Et.add(mt),lt=gc.bind(null,lt,ut,mt),ut.then(lt,lt))}function Ro(lt){do{var ut;if((ut=lt.tag===13)&&(ut=(ut=lt.memoizedState)===null||ut.dehydrated!==null),ut)return lt;lt=lt.return}while(lt!==null);return null}function Xs(lt,ut,mt,vt,Et){return 1&lt.mode?(lt.flags|=65536,lt.lanes=Et,lt):(lt===ut?lt.flags|=65536:(lt.flags|=128,mt.flags|=131072,mt.flags&=-52805,mt.tag===1&&(mt.alternate===null?mt.tag=17:((ut=Ta(-1,1)).tag=2,sa(mt,ut,1))),mt.lanes|=1),lt)}var cu=ct.ReactCurrentOwner,ui=!1;function Ui(lt,ut,mt,vt){ut.child=lt===null?tu(ut,null,mt,vt):il(ut,lt.child,mt,vt)}function Vh(lt,ut,mt,vt,Et){mt=mt.render;var At=ut.ref;return el(ut,Et),vt=Qu(lt,ut,mt,vt,At,Et),mt=sl(),lt===null||ui?(Qn&&mt&&Ko(ut),ut.flags|=1,Ui(lt,ut,vt,Et),ut.child):(ut.updateQueue=lt.updateQueue,ut.flags&=-2053,lt.lanes&=~Et,Cs(lt,ut,Et))}function Wh(lt,ut,mt,vt,Et){if(lt===null){var At=mt.type;return typeof At!="function"||Tu(At)||At.defaultProps!==void 0||mt.compare!==null||mt.defaultProps!==void 0?((lt=wu(mt.type,null,vt,ut,ut.mode,Et)).ref=ut.ref,lt.return=ut,ut.child=lt):(ut.tag=15,ut.type=At,Za(lt,ut,At,vt,Et))}if(At=lt.child,(lt.lanes&Et)==0){var Bt=At.memoizedProps;if((mt=(mt=mt.compare)!==null?mt:$u)(Bt,vt)&&lt.ref===ut.ref)return Cs(lt,ut,Et)}return ut.flags|=1,(lt=Fa(At,vt)).ref=ut.ref,lt.return=ut,ut.child=lt}function Za(lt,ut,mt,vt,Et){if(lt!==null){var At=lt.memoizedProps;if($u(At,vt)&&lt.ref===ut.ref){if(ui=!1,ut.pendingProps=vt=At,(lt.lanes&Et)==0)return ut.lanes=lt.lanes,Cs(lt,ut,Et);131072&lt.flags&&(ui=!0)}}return pl(lt,ut,mt,vt,Et)}function fl(lt,ut,mt){var vt=ut.pendingProps,Et=vt.children,At=lt!==null?lt.memoizedState:null;if(vt.mode==="hidden")if(!(1&ut.mode))ut.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kn(Ia,_i),_i|=mt;else{if(!(1073741824&mt))return lt=At!==null?At.baseLanes|mt:mt,ut.lanes=ut.childLanes=1073741824,ut.memoizedState={baseLanes:lt,cachePool:null,transitions:null},ut.updateQueue=null,Kn(Ia,_i),_i|=lt,null;ut.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt=At!==null?At.baseLanes:mt,Kn(Ia,_i),_i|=vt}else At!==null?(vt=At.baseLanes|mt,ut.memoizedState=null):vt=mt,Kn(Ia,_i),_i|=vt;return Ui(lt,ut,Et,mt),ut.child}function Po(lt,ut){var mt=ut.ref;(lt===null&&mt!==null||lt!==null&&lt.ref!==mt)&&(ut.flags|=512,ut.flags|=2097152)}function pl(lt,ut,mt,vt,Et){var At=Bi(mt)?_o:Li.current;return At=_a(ut,At),el(ut,Et),mt=Qu(lt,ut,mt,vt,At,Et),vt=sl(),lt===null||ui?(Qn&&vt&&Ko(ut),ut.flags|=1,Ui(lt,ut,mt,Et),ut.child):(ut.updateQueue=lt.updateQueue,ut.flags&=-2053,lt.lanes&=~Et,Cs(lt,ut,Et))}function lc(lt,ut,mt,vt,Et){if(Bi(mt)){var At=!0;Lu(ut)}else At=!1;if(el(ut,Et),ut.stateNode===null)Ps(lt,ut),zh(ut,mt,vt),Hc(ut,mt,vt,Et),vt=!0;else if(lt===null){var Bt=ut.stateNode,Wt=ut.memoizedProps;Bt.props=Wt;var tr=Bt.context,hr=mt.contextType;typeof hr=="object"&&hr!==null?hr=As(hr):hr=_a(ut,hr=Bi(mt)?_o:Li.current);var pr=mt.getDerivedStateFromProps,Cr=typeof pr=="function"||typeof Bt.getSnapshotBeforeUpdate=="function";Cr||typeof Bt.UNSAFE_componentWillReceiveProps!="function"&&typeof Bt.componentWillReceiveProps!="function"||(Wt!==vt||tr!==hr)&&Hh(ut,Bt,vt,hr),Wa=!1;var fr=ut.memoizedState;Bt.state=fr,Zl(ut,vt,Bt,Et),tr=ut.memoizedState,Wt!==vt||fr!==tr||Qi.current||Wa?(typeof pr=="function"&&(Wu(ut,mt,pr,vt),tr=ut.memoizedState),(Wt=Wa||wo(ut,mt,Wt,vt,fr,tr,hr))?(Cr||typeof Bt.UNSAFE_componentWillMount!="function"&&typeof Bt.componentWillMount!="function"||(typeof Bt.componentWillMount=="function"&&Bt.componentWillMount(),typeof Bt.UNSAFE_componentWillMount=="function"&&Bt.UNSAFE_componentWillMount()),typeof Bt.componentDidMount=="function"&&(ut.flags|=4194308)):(typeof Bt.componentDidMount=="function"&&(ut.flags|=4194308),ut.memoizedProps=vt,ut.memoizedState=tr),Bt.props=vt,Bt.state=tr,Bt.context=hr,vt=Wt):(typeof Bt.componentDidMount=="function"&&(ut.flags|=4194308),vt=!1)}else{Bt=ut.stateNode,Uh(lt,ut),Wt=ut.memoizedProps,hr=ut.type===ut.elementType?Wt:Vs(ut.type,Wt),Bt.props=hr,Cr=ut.pendingProps,fr=Bt.context,typeof(tr=mt.contextType)=="object"&&tr!==null?tr=As(tr):tr=_a(ut,tr=Bi(mt)?_o:Li.current);var Ar=mt.getDerivedStateFromProps;(pr=typeof Ar=="function"||typeof Bt.getSnapshotBeforeUpdate=="function")||typeof Bt.UNSAFE_componentWillReceiveProps!="function"&&typeof Bt.componentWillReceiveProps!="function"||(Wt!==Cr||fr!==tr)&&Hh(ut,Bt,vt,tr),Wa=!1,fr=ut.memoizedState,Bt.state=fr,Zl(ut,vt,Bt,Et);var kr=ut.memoizedState;Wt!==Cr||fr!==kr||Qi.current||Wa?(typeof Ar=="function"&&(Wu(ut,mt,Ar,vt),kr=ut.memoizedState),(hr=Wa||wo(ut,mt,hr,vt,fr,kr,tr)||!1)?(pr||typeof Bt.UNSAFE_componentWillUpdate!="function"&&typeof Bt.componentWillUpdate!="function"||(typeof Bt.componentWillUpdate=="function"&&Bt.componentWillUpdate(vt,kr,tr),typeof Bt.UNSAFE_componentWillUpdate=="function"&&Bt.UNSAFE_componentWillUpdate(vt,kr,tr)),typeof Bt.componentDidUpdate=="function"&&(ut.flags|=4),typeof Bt.getSnapshotBeforeUpdate=="function"&&(ut.flags|=1024)):(typeof Bt.componentDidUpdate!="function"||Wt===lt.memoizedProps&&fr===lt.memoizedState||(ut.flags|=4),typeof Bt.getSnapshotBeforeUpdate!="function"||Wt===lt.memoizedProps&&fr===lt.memoizedState||(ut.flags|=1024),ut.memoizedProps=vt,ut.memoizedState=kr),Bt.props=vt,Bt.state=kr,Bt.context=tr,vt=hr):(typeof Bt.componentDidUpdate!="function"||Wt===lt.memoizedProps&&fr===lt.memoizedState||(ut.flags|=4),typeof Bt.getSnapshotBeforeUpdate!="function"||Wt===lt.memoizedProps&&fr===lt.memoizedState||(ut.flags|=1024),vt=!1)}return Ja(lt,ut,mt,vt,At,Et)}function Ja(lt,ut,mt,vt,Et,At){Po(lt,ut);var Bt=(128&ut.flags)!=0;if(!vt&&!Bt)return Et&&Bu(ut,mt,!1),Cs(lt,ut,At);vt=ut.stateNode,cu.current=ut;var Wt=Bt&&typeof mt.getDerivedStateFromError!="function"?null:vt.render();return ut.flags|=1,lt!==null&&Bt?(ut.child=il(ut,lt.child,null,At),ut.child=il(ut,null,Wt,At)):Ui(lt,ut,Wt,At),ut.memoizedState=vt.state,Et&&Bu(ut,mt,!0),ut.child}function Aa(lt){var ut=lt.stateNode;ut.pendingContext?Ul(0,ut.pendingContext,ut.pendingContext!==ut.context):ut.context&&Ul(0,ut.context,!1),Xu(lt,ut.containerInfo)}function Jn(lt,ut,mt,vt,Et){return Zo(),Yl(Et),ut.flags|=256,Ui(lt,ut,mt,vt),ut.child}var $n,Rs,Si,Mi,Ra={dehydrated:null,treeContext:null,retryLane:0};function eo(lt){return{baseLanes:lt,cachePool:null,transitions:null}}function Xi(lt,ut,mt){var vt,Et=ut.pendingProps,At=li.current,Bt=!1,Wt=(128&ut.flags)!=0;if((vt=Wt)||(vt=(lt===null||lt.memoizedState!==null)&&(2&At)!=0),vt?(Bt=!0,ut.flags&=-129):lt!==null&&lt.memoizedState===null||(At|=1),Kn(li,1&At),lt===null)return Qo(ut),(lt=ut.memoizedState)!==null&&(lt=lt.dehydrated)!==null?(1&ut.mode?Hs(lt)?ut.lanes=8:ut.lanes=1073741824:ut.lanes=1,null):(Wt=Et.children,lt=Et.fallback,Bt?(Et=ut.mode,Bt=ut.child,Wt={mode:"hidden",children:Wt},!(1&Et)&&Bt!==null?(Bt.childLanes=0,Bt.pendingProps=Wt):Bt=yc(Wt,Et,0,null),lt=ao(lt,Et,mt,null),Bt.return=ut,lt.return=ut,Bt.sibling=lt,ut.child=Bt,ut.child.memoizedState=eo(mt),ut.memoizedState=Ra,lt):ml(ut,Wt));if((At=lt.memoizedState)!==null&&(vt=At.dehydrated)!==null)return function(hr,pr,Cr,fr,Ar,kr,Kr){if(Cr)return 256&pr.flags?(pr.flags&=-257,hu(hr,pr,Kr,fr=ac(Error(ot(422))))):pr.memoizedState!==null?(pr.child=hr.child,pr.flags|=128,null):(kr=fr.fallback,Ar=pr.mode,fr=yc({mode:"visible",children:fr.children},Ar,0,null),(kr=ao(kr,Ar,Kr,null)).flags|=2,fr.return=pr,kr.return=pr,fr.sibling=kr,pr.child=fr,1&pr.mode&&il(pr,hr.child,null,Kr),pr.child.memoizedState=eo(Kr),pr.memoizedState=Ra,kr);if(!(1&pr.mode))return hu(hr,pr,Kr,null);if(Hs(Ar))return fr=za(Ar).digest,kr=Error(ot(419)),fr=ac(kr,fr,void 0),hu(hr,pr,Kr,fr);if(Cr=(Kr&hr.childLanes)!=0,ui||Cr){if((fr=yi)!==null){switch(Kr&-Kr){case 4:Ar=2;break;case 16:Ar=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Ar=32;break;case 536870912:Ar=268435456;break;default:Ar=0}(Ar=Ar&(fr.suspendedLanes|Kr)?0:Ar)!==0&&Ar!==kr.retryLane&&(kr.retryLane=Ar,ia(hr,Ar),zi(fr,hr,Ar,-1))}return mc(),hu(hr,pr,Kr,fr=ac(Error(ot(421))))}return po(Ar)?(pr.flags|=128,pr.child=hr.child,pr=mh.bind(null,hr),mo(Ar,pr),null):(hr=kr.treeContext,Br&&(Ii=Nl(Ar),ri=pr,Qn=!0,$s=null,Sa=!1,hr!==null&&(Zi[fs++]=ws,Zi[fs++]=bs,Zi[fs++]=Ji,ws=hr.id,bs=hr.overflow,Ji=pr)),pr=ml(pr,fr.children),pr.flags|=4096,pr)}(lt,ut,Wt,Et,vt,At,mt);if(Bt){Bt=Et.fallback,Wt=ut.mode,vt=(At=lt.child).sibling;var tr={mode:"hidden",children:Et.children};return!(1&Wt)&&ut.child!==At?((Et=ut.child).childLanes=0,Et.pendingProps=tr,ut.deletions=null):(Et=Fa(At,tr)).subtreeFlags=14680064&At.subtreeFlags,vt!==null?Bt=Fa(vt,Bt):(Bt=ao(Bt,Wt,mt,null)).flags|=2,Bt.return=ut,Et.return=ut,Et.sibling=Bt,ut.child=Et,Et=Bt,Bt=ut.child,Wt=(Wt=lt.child.memoizedState)===null?eo(mt):{baseLanes:Wt.baseLanes|mt,cachePool:null,transitions:Wt.transitions},Bt.memoizedState=Wt,Bt.childLanes=lt.childLanes&~mt,ut.memoizedState=Ra,Et}return lt=(Bt=lt.child).sibling,Et=Fa(Bt,{mode:"visible",children:Et.children}),!(1&ut.mode)&&(Et.lanes=mt),Et.return=ut,Et.sibling=null,lt!==null&&((mt=ut.deletions)===null?(ut.deletions=[lt],ut.flags|=16):mt.push(lt)),ut.child=Et,ut.memoizedState=null,Et}function ml(lt,ut){return(ut=yc({mode:"visible",children:ut},lt.mode,0,null)).return=lt,lt.child=ut}function hu(lt,ut,mt,vt){return vt!==null&&Yl(vt),il(ut,lt.child,null,mt),(lt=ml(ut,ut.pendingProps.children)).flags|=2,ut.memoizedState=null,lt}function sh(lt,ut,mt){lt.lanes|=ut;var vt=lt.alternate;vt!==null&&(vt.lanes|=ut),Lc(lt.return,ut,mt)}function gl(lt,ut,mt,vt,Et){var At=lt.memoizedState;At===null?lt.memoizedState={isBackwards:ut,rendering:null,renderingStartTime:0,last:vt,tail:mt,tailMode:Et}:(At.isBackwards=ut,At.rendering=null,At.renderingStartTime=0,At.last=vt,At.tail=mt,At.tailMode=Et)}function ah(lt,ut,mt){var vt=ut.pendingProps,Et=vt.revealOrder,At=vt.tail;if(Ui(lt,ut,vt.children,mt),(2&(vt=li.current))!=0)vt=1&vt|2,ut.flags|=128;else{if(lt!==null&&128&lt.flags)e:for(lt=ut.child;lt!==null;){if(lt.tag===13)lt.memoizedState!==null&&sh(lt,mt,ut);else if(lt.tag===19)sh(lt,mt,ut);else if(lt.child!==null){lt.child.return=lt,lt=lt.child;continue}if(lt===ut)break e;for(;lt.sibling===null;){if(lt.return===null||lt.return===ut)break e;lt=lt.return}lt.sibling.return=lt.return,lt=lt.sibling}vt&=1}if(Kn(li,vt),(1&ut.mode)==0)ut.memoizedState=null;else switch(Et){case"forwards":for(mt=ut.child,Et=null;mt!==null;)(lt=mt.alternate)!==null&&qu(lt)===null&&(Et=mt),mt=mt.sibling;(mt=Et)===null?(Et=ut.child,ut.child=null):(Et=mt.sibling,mt.sibling=null),gl(ut,!1,Et,mt,At);break;case"backwards":for(mt=null,Et=ut.child,ut.child=null;Et!==null;){if((lt=Et.alternate)!==null&&qu(lt)===null){ut.child=Et;break}lt=Et.sibling,Et.sibling=mt,mt=Et,Et=lt}gl(ut,!0,mt,null,At);break;case"together":gl(ut,!1,null,null,void 0);break;default:ut.memoizedState=null}return ut.child}function Ps(lt,ut){!(1&ut.mode)&&lt!==null&&(lt.alternate=null,ut.alternate=null,ut.flags|=2)}function Cs(lt,ut,mt){if(lt!==null&&(ut.dependencies=lt.dependencies),io|=ut.lanes,(mt&ut.childLanes)==0)return null;if(lt!==null&&ut.child!==lt.child)throw Error(ot(153));if(ut.child!==null){for(mt=Fa(lt=ut.child,lt.pendingProps),ut.child=mt,mt.return=ut;lt.sibling!==null;)lt=lt.sibling,(mt=mt.sibling=Fa(lt,lt.pendingProps)).return=ut;mt.sibling=null}return ut.child}function Is(lt){lt.flags|=4}function oh(lt,ut){if(lt!==null&&lt.child===ut.child)return!0;if(16&ut.flags)return!1;for(lt=ut.child;lt!==null;){if(12854&lt.flags||12854&lt.subtreeFlags)return!1;lt=lt.sibling}return!0}if(Ir)$n=function(lt,ut){for(var mt=ut.child;mt!==null;){if(mt.tag===5||mt.tag===6)Gt(lt,mt.stateNode);else if(mt.tag!==4&&mt.child!==null){mt.child.return=mt,mt=mt.child;continue}if(mt===ut)break;for(;mt.sibling===null;){if(mt.return===null||mt.return===ut)return;mt=mt.return}mt.sibling.return=mt.return,mt=mt.sibling}},Rs=function(){},Si=function(lt,ut,mt,vt,Et){if((lt=lt.memoizedProps)!==vt){var At=ut.stateNode,Bt=Ws(ps.current);mt=ir(At,mt,lt,vt,Et,Bt),(ut.updateQueue=mt)&&Is(ut)}},Mi=function(lt,ut,mt,vt){mt!==vt&&Is(ut)};else if(Nr){$n=function(lt,ut,mt,vt){for(var Et=ut.child;Et!==null;){if(Et.tag===5){var At=Et.stateNode;mt&&vt&&(At=fo(At,Et.type,Et.memoizedProps,Et)),Gt(lt,At)}else if(Et.tag===6)At=Et.stateNode,mt&&vt&&(At=jo(At,Et.memoizedProps,Et)),Gt(lt,At);else if(Et.tag!==4){if(Et.tag===22&&Et.memoizedState!==null)(At=Et.child)!==null&&(At.return=Et),$n(lt,Et,!0,!0);else if(Et.child!==null){Et.child.return=Et,Et=Et.child;continue}}if(Et===ut)break;for(;Et.sibling===null;){if(Et.return===null||Et.return===ut)return;Et=Et.return}Et.sibling.return=Et.return,Et=Et.sibling}};var Xh=function(lt,ut,mt,vt){for(var Et=ut.child;Et!==null;){if(Et.tag===5){var At=Et.stateNode;mt&&vt&&(At=fo(At,Et.type,Et.memoizedProps,Et)),ho(lt,At)}else if(Et.tag===6)At=Et.stateNode,mt&&vt&&(At=jo(At,Et.memoizedProps,Et)),ho(lt,At);else if(Et.tag!==4){if(Et.tag===22&&Et.memoizedState!==null)(At=Et.child)!==null&&(At.return=Et),Xh(lt,Et,!0,!0);else if(Et.child!==null){Et.child.return=Et,Et=Et.child;continue}}if(Et===ut)break;for(;Et.sibling===null;){if(Et.return===null||Et.return===ut)return;Et=Et.return}Et.sibling.return=Et.return,Et=Et.sibling}};Rs=function(lt,ut){var mt=ut.stateNode;if(!oh(lt,ut)){lt=mt.containerInfo;var vt=Es(lt);Xh(vt,ut,!1,!1),mt.pendingChildren=vt,Is(ut),pa(lt,vt)}},Si=function(lt,ut,mt,vt,Et){var At=lt.stateNode,Bt=lt.memoizedProps;if((lt=oh(lt,ut))&&Bt===vt)ut.stateNode=At;else{var Wt=ut.stateNode,tr=Ws(ps.current),hr=null;Bt!==vt&&(hr=ir(Wt,mt,Bt,vt,Et,tr)),lt&&hr===null?ut.stateNode=At:(At=Ni(At,hr,mt,Bt,vt,ut,lt,Wt),Xt(At,mt,vt,Et,tr)&&Is(ut),ut.stateNode=At,lt?Is(ut):$n(At,ut,!1,!1))}},Mi=function(lt,ut,mt,vt){mt!==vt?(lt=Ws(qa.current),mt=Ws(ps.current),ut.stateNode=gr(vt,lt,mt,ut),Is(ut)):ut.stateNode=lt.stateNode}}else Rs=function(){},Si=function(){},Mi=function(){};function Ms(lt,ut){if(!Qn)switch(lt.tailMode){case"hidden":ut=lt.tail;for(var mt=null;ut!==null;)ut.alternate!==null&&(mt=ut),ut=ut.sibling;mt===null?lt.tail=null:mt.sibling=null;break;case"collapsed":mt=lt.tail;for(var vt=null;mt!==null;)mt.alternate!==null&&(vt=mt),mt=mt.sibling;vt===null?ut||lt.tail===null?lt.tail=null:lt.tail.sibling=null:vt.sibling=null}}function gi(lt){var ut=lt.alternate!==null&&lt.alternate.child===lt.child,mt=0,vt=0;if(ut)for(var Et=lt.child;Et!==null;)mt|=Et.lanes|Et.childLanes,vt|=14680064&Et.subtreeFlags,vt|=14680064&Et.flags,Et.return=lt,Et=Et.sibling;else for(Et=lt.child;Et!==null;)mt|=Et.lanes|Et.childLanes,vt|=Et.subtreeFlags,vt|=Et.flags,Et.return=lt,Et=Et.sibling;return lt.subtreeFlags|=vt,lt.childLanes=mt,ut}function yl(lt,ut,mt){var vt=ut.pendingProps;switch(Gu(ut),ut.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gi(ut),null;case 1:case 17:return Bi(ut.type)&&vo(),gi(ut),null;case 3:return mt=ut.stateNode,Ao(),An(Qi),An(Li),ms(),mt.pendingContext&&(mt.context=mt.pendingContext,mt.pendingContext=null),lt!==null&&lt.child!==null||(ju(ut)?Is(ut):lt===null||lt.memoizedState.isDehydrated&&!(256&ut.flags)||(ut.flags|=1024,$s!==null&&(Eu($s),$s=null))),Rs(lt,ut),gi(ut),null;case 5:jc(ut),mt=Ws(qa.current);var Et=ut.type;if(lt!==null&&ut.stateNode!=null)Si(lt,ut,Et,vt,mt),lt.ref!==ut.ref&&(ut.flags|=512,ut.flags|=2097152);else{if(!vt){if(ut.stateNode===null)throw Error(ot(166));return gi(ut),null}if(lt=Ws(ps.current),ju(ut)){if(!Br)throw Error(ot(175));lt=ra(ut.stateNode,ut.type,ut.memoizedProps,mt,lt,ut,!Sa),ut.updateQueue=lt,lt!==null&&Is(ut)}else{var At=It(Et,vt,mt,lt,ut);$n(At,ut,!1,!1),ut.stateNode=At,Xt(At,Et,vt,mt,lt)&&Is(ut)}ut.ref!==null&&(ut.flags|=512,ut.flags|=2097152)}return gi(ut),null;case 6:if(lt&&ut.stateNode!=null)Mi(lt,ut,lt.memoizedProps,vt);else{if(typeof vt!="string"&&ut.stateNode===null)throw Error(ot(166));if(lt=Ws(qa.current),mt=Ws(ps.current),ju(ut)){if(!Br)throw Error(ot(176));if(lt=ut.stateNode,mt=ut.memoizedProps,(vt=Du(lt,mt,ut,!Sa))&&(Et=ri)!==null)switch(Et.tag){case 3:bd(Et.stateNode.containerInfo,lt,mt,(1&Et.mode)!=0);break;case 5:hi(Et.type,Et.memoizedProps,Et.stateNode,lt,mt,(1&Et.mode)!=0)}vt&&Is(ut)}else ut.stateNode=gr(vt,lt,mt,ut)}return gi(ut),null;case 13:if(An(li),vt=ut.memoizedState,lt===null||lt.memoizedState!==null&&lt.memoizedState.dehydrated!==null){if(Qn&&Ii!==null&&1&ut.mode&&!(128&ut.flags))kh(),Zo(),ut.flags|=98560,Et=!1;else if(Et=ju(ut),vt!==null&&vt.dehydrated!==null){if(lt===null){if(!Et)throw Error(ot(318));if(!Br)throw Error(ot(344));if(!(Et=(Et=ut.memoizedState)!==null?Et.dehydrated:null))throw Error(ot(317));$o(Et,ut)}else Zo(),!(128&ut.flags)&&(ut.memoizedState=null),ut.flags|=4;gi(ut),Et=!1}else $s!==null&&(Eu($s),$s=null),Et=!0;if(!Et)return 65536&ut.flags?ut:null}return 128&ut.flags?(ut.lanes=mt,ut):((mt=vt!==null)!=(lt!==null&&lt.memoizedState!==null)&&mt&&(ut.child.flags|=8192,1&ut.mode&&(lt===null||1&li.current?vi===0&&(vi=3):mc())),ut.updateQueue!==null&&(ut.flags|=4),gi(ut),null);case 4:return Ao(),Rs(lt,ut),lt===null&&Ur(ut.stateNode.containerInfo),gi(ut),null;case 10:return Ql(ut.type._context),gi(ut),null;case 19:if(An(li),(Et=ut.memoizedState)===null)return gi(ut),null;if(vt=(128&ut.flags)!=0,(At=Et.rendering)===null)if(vt)Ms(Et,!1);else{if(vi!==0||lt!==null&&128&lt.flags)for(lt=ut.child;lt!==null;){if((At=qu(lt))!==null){for(ut.flags|=128,Ms(Et,!1),(lt=At.updateQueue)!==null&&(ut.updateQueue=lt,ut.flags|=4),ut.subtreeFlags=0,lt=mt,mt=ut.child;mt!==null;)Et=lt,(vt=mt).flags&=14680066,(At=vt.alternate)===null?(vt.childLanes=0,vt.lanes=Et,vt.child=null,vt.subtreeFlags=0,vt.memoizedProps=null,vt.memoizedState=null,vt.updateQueue=null,vt.dependencies=null,vt.stateNode=null):(vt.childLanes=At.childLanes,vt.lanes=At.lanes,vt.child=At.child,vt.subtreeFlags=0,vt.deletions=null,vt.memoizedProps=At.memoizedProps,vt.memoizedState=At.memoizedState,vt.updateQueue=At.updateQueue,vt.type=At.type,Et=At.dependencies,vt.dependencies=Et===null?null:{lanes:Et.lanes,firstContext:Et.firstContext}),mt=mt.sibling;return Kn(li,1&li.current|2),ut.child}lt=lt.sibling}Et.tail!==null&&ti()>vu&&(ut.flags|=128,vt=!0,Ms(Et,!1),ut.lanes=4194304)}else{if(!vt)if((lt=qu(At))!==null){if(ut.flags|=128,vt=!0,(lt=lt.updateQueue)!==null&&(ut.updateQueue=lt,ut.flags|=4),Ms(Et,!0),Et.tail===null&&Et.tailMode==="hidden"&&!At.alternate&&!Qn)return gi(ut),null}else 2*ti()-Et.renderingStartTime>vu&&mt!==1073741824&&(ut.flags|=128,vt=!0,Ms(Et,!1),ut.lanes=4194304);Et.isBackwards?(At.sibling=ut.child,ut.child=At):((lt=Et.last)!==null?lt.sibling=At:ut.child=At,Et.last=At)}return Et.tail!==null?(ut=Et.tail,Et.rendering=ut,Et.tail=ut.sibling,Et.renderingStartTime=ti(),ut.sibling=null,lt=li.current,Kn(li,vt?1&lt|2:1&lt),ut):(gi(ut),null);case 22:case 23:return Lo(),mt=ut.memoizedState!==null,lt!==null&&lt.memoizedState!==null!==mt&&(ut.flags|=8192),mt&&1&ut.mode?1073741824&_i&&(gi(ut),Ir&&6&ut.subtreeFlags&&(ut.flags|=8192)):gi(ut),null;case 24:case 25:return null}throw Error(ot(156,ut.tag))}function uc(lt,ut){switch(Gu(ut),ut.tag){case 1:return Bi(ut.type)&&vo(),65536&(lt=ut.flags)?(ut.flags=-65537&lt|128,ut):null;case 3:return Ao(),An(Qi),An(Li),ms(),65536&(lt=ut.flags)&&!(128&lt)?(ut.flags=-65537&lt|128,ut):null;case 5:return jc(ut),null;case 13:if(An(li),(lt=ut.memoizedState)!==null&&lt.dehydrated!==null){if(ut.alternate===null)throw Error(ot(340));Zo()}return 65536&(lt=ut.flags)?(ut.flags=-65537&lt|128,ut):null;case 19:return An(li),null;case 4:return Ao(),null;case 10:return Ql(ut.type._context),null;case 22:case 23:return Lo(),null;default:return null}}var Co=!1,qn=!1,Os=typeof WeakSet=="function"?WeakSet:Set,Mr=null;function rs(lt,ut){var mt=lt.ref;if(mt!==null)if(typeof mt=="function")try{mt(null)}catch(vt){Yn(lt,ut,vt)}else mt.current=null}function oa(lt,ut,mt){try{mt()}catch(vt){Yn(lt,ut,vt)}}var ro=!1;function _l(lt,ut,mt){var vt=ut.updateQueue;if((vt=vt!==null?vt.lastEffect:null)!==null){var Et=vt=vt.next;do{if((Et.tag&lt)===lt){var At=Et.destroy;Et.destroy=void 0,At!==void 0&&oa(ut,mt,At)}Et=Et.next}while(Et!==vt)}}function vl(lt,ut){if((ut=(ut=ut.updateQueue)!==null?ut.lastEffect:null)!==null){var mt=ut=ut.next;do{if((mt.tag&lt)===lt){var vt=mt.create;mt.destroy=vt()}mt=mt.next}while(mt!==ut)}}function du(lt){var ut=lt.ref;if(ut!==null){var mt=lt.stateNode;lt.tag===5?lt=Ut(mt):lt=mt,typeof ut=="function"?ut(lt):ut.current=lt}}function ns(lt){var ut=lt.alternate;ut!==null&&(lt.alternate=null,ns(ut)),lt.child=null,lt.deletions=null,lt.sibling=null,lt.tag===5&&(ut=lt.stateNode)!==null&&ai(ut),lt.stateNode=null,lt.return=null,lt.dependencies=null,lt.memoizedProps=null,lt.memoizedState=null,lt.pendingProps=null,lt.stateNode=null,lt.updateQueue=null}function ss(lt){return lt.tag===5||lt.tag===3||lt.tag===4}function ni(lt){e:for(;;){for(;lt.sibling===null;){if(lt.return===null||ss(lt.return))return null;lt=lt.return}for(lt.sibling.return=lt.return,lt=lt.sibling;lt.tag!==5&&lt.tag!==6&&lt.tag!==18;){if(2&lt.flags||lt.child===null||lt.tag===4)continue e;lt.child.return=lt,lt=lt.child}if(!(2&lt.flags))return lt.stateNode}}function gs(lt,ut,mt){var vt=lt.tag;if(vt===5||vt===6)lt=lt.stateNode,ut?co(mt,lt,ut):zo(mt,lt);else if(vt!==4&&(lt=lt.child)!==null)for(gs(lt,ut,mt),lt=lt.sibling;lt!==null;)gs(lt,ut,mt),lt=lt.sibling}function cc(lt,ut,mt){var vt=lt.tag;if(vt===5||vt===6)lt=lt.stateNode,ut?Ho(mt,lt,ut):ta(mt,lt);else if(vt!==4&&(lt=lt.child)!==null)for(cc(lt,ut,mt),lt=lt.sibling;lt!==null;)cc(lt,ut,mt),lt=lt.sibling}var Gi=null,Ds=!1;function Fs(lt,ut,mt){for(mt=mt.child;mt!==null;)hc(lt,ut,mt),mt=mt.sibling}function hc(lt,ut,mt){if(hs&&typeof hs.onCommitFiberUnmount=="function")try{hs.onCommitFiberUnmount(Xl,mt)}catch{}switch(mt.tag){case 5:qn||rs(mt,ut);case 6:if(Ir){var vt=Gi,Et=Ds;Gi=null,Fs(lt,ut,mt),Ds=Et,(Gi=vt)!==null&&(Ds?sr(Gi,mt.stateNode):rr(Gi,mt.stateNode))}else Fs(lt,ut,mt);break;case 18:Ir&&Gi!==null&&(Ds?Oh(Gi,mt.stateNode):kl(Gi,mt.stateNode));break;case 4:Ir?(vt=Gi,Et=Ds,Gi=mt.stateNode.containerInfo,Ds=!0,Fs(lt,ut,mt),Gi=vt,Ds=Et):(Nr&&(vt=mt.stateNode.containerInfo,Et=Es(vt),ki(vt,Et)),Fs(lt,ut,mt));break;case 0:case 11:case 14:case 15:if(!qn&&(vt=mt.updateQueue)!==null&&(vt=vt.lastEffect)!==null){Et=vt=vt.next;do{var At=Et,Bt=At.destroy;At=At.tag,Bt!==void 0&&(2&At||4&At)&&oa(mt,ut,Bt),Et=Et.next}while(Et!==vt)}Fs(lt,ut,mt);break;case 1:if(!qn&&(rs(mt,ut),typeof(vt=mt.stateNode).componentWillUnmount=="function"))try{vt.props=mt.memoizedProps,vt.state=mt.memoizedState,vt.componentWillUnmount()}catch(Wt){Yn(mt,ut,Wt)}Fs(lt,ut,mt);break;case 21:Fs(lt,ut,mt);break;case 22:1&mt.mode?(qn=(vt=qn)||mt.memoizedState!==null,Fs(lt,ut,mt),qn=vt):Fs(lt,ut,mt);break;default:Fs(lt,ut,mt)}}function fu(lt){var ut=lt.updateQueue;if(ut!==null){lt.updateQueue=null;var mt=lt.stateNode;mt===null&&(mt=lt.stateNode=new Os),ut.forEach(function(vt){var Et=Kh.bind(null,lt,vt);mt.has(vt)||(mt.add(vt),vt.then(Et,Et))})}}function Ns(lt,ut){var mt=ut.deletions;if(mt!==null)for(var vt=0;vt<mt.length;vt++){var Et=mt[vt];try{var At=lt,Bt=ut;if(Ir){var Wt=Bt;e:for(;Wt!==null;){switch(Wt.tag){case 5:Gi=Wt.stateNode,Ds=!1;break e;case 3:case 4:Gi=Wt.stateNode.containerInfo,Ds=!0;break e}Wt=Wt.return}if(Gi===null)throw Error(ot(160));hc(At,Bt,Et),Gi=null,Ds=!1}else hc(At,Bt,Et);var tr=Et.alternate;tr!==null&&(tr.return=null),Et.return=null}catch(hr){Yn(Et,ut,hr)}}if(12854&ut.subtreeFlags)for(ut=ut.child;ut!==null;)Io(ut,lt),ut=ut.sibling}function Io(lt,ut){var mt=lt.alternate,vt=lt.flags;switch(lt.tag){case 0:case 11:case 14:case 15:if(Ns(ut,lt),ks(lt),4&vt){try{_l(3,lt,lt.return),vl(3,lt)}catch(fr){Yn(lt,lt.return,fr)}try{_l(5,lt,lt.return)}catch(fr){Yn(lt,lt.return,fr)}}break;case 1:Ns(ut,lt),ks(lt),512&vt&&mt!==null&&rs(mt,mt.return);break;case 5:if(Ns(ut,lt),ks(lt),512&vt&&mt!==null&&rs(mt,mt.return),Ir){if(32&lt.flags){var Et=lt.stateNode;try{Zr(Et)}catch(fr){Yn(lt,lt.return,fr)}}if(4&vt&&(Et=lt.stateNode)!=null){var At=lt.memoizedProps;if(mt=mt!==null?mt.memoizedProps:At,vt=lt.type,ut=lt.updateQueue,lt.updateQueue=null,ut!==null)try{Pc(Et,ut,vt,mt,At,lt)}catch(fr){Yn(lt,lt.return,fr)}}}break;case 6:if(Ns(ut,lt),ks(lt),4&vt&&Ir){if(lt.stateNode===null)throw Error(ot(162));Et=lt.stateNode,At=lt.memoizedProps,mt=mt!==null?mt.memoizedProps:At;try{Ua(Et,mt,At)}catch(fr){Yn(lt,lt.return,fr)}}break;case 3:if(Ns(ut,lt),ks(lt),4&vt){if(Ir&&Br&&mt!==null&&mt.memoizedState.isDehydrated)try{go(ut.containerInfo)}catch(fr){Yn(lt,lt.return,fr)}if(Nr){Et=ut.containerInfo,At=ut.pendingChildren;try{ki(Et,At)}catch(fr){Yn(lt,lt.return,fr)}}}break;case 4:if(Ns(ut,lt),ks(lt),4&vt&&Nr){Et=(At=lt.stateNode).containerInfo,At=At.pendingChildren;try{ki(Et,At)}catch(fr){Yn(lt,lt.return,fr)}}break;case 13:Ns(ut,lt),ks(lt),8192&(Et=lt.child).flags&&(At=Et.memoizedState!==null,Et.stateNode.isHidden=At,!At||Et.alternate!==null&&Et.alternate.memoizedState!==null||(Oa=ti())),4&vt&&fu(lt);break;case 22:var Bt=mt!==null&&mt.memoizedState!==null;if(1&lt.mode?(qn=(mt=qn)||Bt,Ns(ut,lt),qn=mt):Ns(ut,lt),ks(lt),8192&vt){if(mt=lt.memoizedState!==null,(lt.stateNode.isHidden=mt)&&!Bt&&(1&lt.mode)!=0)for(Mr=lt,vt=lt.child;vt!==null;){for(ut=Mr=vt;Mr!==null;){var Wt=(Bt=Mr).child;switch(Bt.tag){case 0:case 11:case 14:case 15:_l(4,Bt,Bt.return);break;case 1:rs(Bt,Bt.return);var tr=Bt.stateNode;if(typeof tr.componentWillUnmount=="function"){var hr=Bt,pr=Bt.return;try{var Cr=hr;tr.props=Cr.memoizedProps,tr.state=Cr.memoizedState,tr.componentWillUnmount()}catch(fr){Yn(hr,pr,fr)}}break;case 5:rs(Bt,Bt.return);break;case 22:if(Bt.memoizedState!==null){lh(ut);continue}}Wt!==null?(Wt.return=Bt,Mr=Wt):lh(ut)}vt=vt.sibling}if(Ir){e:if(vt=null,Ir)for(ut=lt;;){if(ut.tag===5){if(vt===null){vt=ut;try{Et=ut.stateNode,mt?Hn(Et):qr(ut.stateNode,ut.memoizedProps)}catch(fr){Yn(lt,lt.return,fr)}}}else if(ut.tag===6){if(vt===null)try{At=ut.stateNode,mt?Wn(At):Vi(At,ut.memoizedProps)}catch(fr){Yn(lt,lt.return,fr)}}else if((ut.tag!==22&&ut.tag!==23||ut.memoizedState===null||ut===lt)&&ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===lt)break e;for(;ut.sibling===null;){if(ut.return===null||ut.return===lt)break e;vt===ut&&(vt=null),ut=ut.return}vt===ut&&(vt=null),ut.sibling.return=ut.return,ut=ut.sibling}}}break;case 19:Ns(ut,lt),ks(lt),4&vt&&fu(lt);break;case 21:break;default:Ns(ut,lt),ks(lt)}}function ks(lt){var ut=lt.flags;if(2&ut){try{if(Ir){e:{for(var mt=lt.return;mt!==null;){if(ss(mt)){var vt=mt;break e}mt=mt.return}throw Error(ot(160))}switch(vt.tag){case 5:var Et=vt.stateNode;32&vt.flags&&(Zr(Et),vt.flags&=-33),cc(lt,ni(lt),Et);break;case 3:case 4:var At=vt.stateNode.containerInfo;gs(lt,ni(lt),At);break;default:throw Error(ot(161))}}}catch(Bt){Yn(lt,lt.return,Bt)}lt.flags&=-3}4096&ut&&(lt.flags&=-4097)}function Od(lt,ut,mt){Mr=lt,xl(lt)}function xl(lt,ut,mt){for(var vt=(1&lt.mode)!=0;Mr!==null;){var Et=Mr,At=Et.child;if(Et.tag===22&&vt){var Bt=Et.memoizedState!==null||Co;if(!Bt){var Wt=Et.alternate,tr=Wt!==null&&Wt.memoizedState!==null||qn;Wt=Co;var hr=qn;if(Co=Bt,(qn=tr)&&!hr)for(Mr=Et;Mr!==null;)tr=(Bt=Mr).child,Bt.tag===22&&Bt.memoizedState!==null?uh(Et):tr!==null?(tr.return=Bt,Mr=tr):uh(Et);for(;At!==null;)Mr=At,xl(At),At=At.sibling;Mr=Et,Co=Wt,qn=hr}pu(lt)}else 8772&Et.subtreeFlags&&At!==null?(At.return=Et,Mr=At):pu(lt)}}function pu(lt){for(;Mr!==null;){var ut=Mr;if(8772&ut.flags){var mt=ut.alternate;try{if(8772&ut.flags)switch(ut.tag){case 0:case 11:case 15:qn||vl(5,ut);break;case 1:var vt=ut.stateNode;if(4&ut.flags&&!qn)if(mt===null)vt.componentDidMount();else{var Et=ut.elementType===ut.type?mt.memoizedProps:Vs(ut.type,mt.memoizedProps);vt.componentDidUpdate(Et,mt.memoizedState,vt.__reactInternalSnapshotBeforeUpdate)}var At=ut.updateQueue;At!==null&&Gc(ut,At,vt);break;case 3:var Bt=ut.updateQueue;if(Bt!==null){if(mt=null,ut.child!==null)switch(ut.child.tag){case 5:mt=Ut(ut.child.stateNode);break;case 1:mt=ut.child.stateNode}Gc(ut,Bt,mt)}break;case 5:var Wt=ut.stateNode;mt===null&&4&ut.flags&&uo(Wt,ut.type,ut.memoizedProps,ut);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(Br&&ut.memoizedState===null){var tr=ut.alternate;if(tr!==null){var hr=tr.memoizedState;if(hr!==null){var pr=hr.dehydrated;pr!==null&&Fu(pr)}}}break;default:throw Error(ot(163))}qn||512&ut.flags&&du(ut)}catch(Cr){Yn(ut,ut.return,Cr)}}if(ut===lt){Mr=null;break}if((mt=ut.sibling)!==null){mt.return=ut.return,Mr=mt;break}Mr=ut.return}}function lh(lt){for(;Mr!==null;){var ut=Mr;if(ut===lt){Mr=null;break}var mt=ut.sibling;if(mt!==null){mt.return=ut.return,Mr=mt;break}Mr=ut.return}}function uh(lt){for(;Mr!==null;){var ut=Mr;try{switch(ut.tag){case 0:case 11:case 15:var mt=ut.return;try{vl(4,ut)}catch(tr){Yn(ut,mt,tr)}break;case 1:var vt=ut.stateNode;if(typeof vt.componentDidMount=="function"){var Et=ut.return;try{vt.componentDidMount()}catch(tr){Yn(ut,Et,tr)}}var At=ut.return;try{du(ut)}catch(tr){Yn(ut,At,tr)}break;case 5:var Bt=ut.return;try{du(ut)}catch(tr){Yn(ut,Bt,tr)}}}catch(tr){Yn(ut,ut.return,tr)}if(ut===lt){Mr=null;break}var Wt=ut.sibling;if(Wt!==null){Wt.return=ut.return,Mr=Wt;break}Mr=ut.return}}var Pa=0,mu=1,Mo=2,Oo=3,Ca=4;if(typeof Symbol=="function"&&Symbol.for){var Do=Symbol.for;Pa=Do("selector.component"),mu=Do("selector.has_pseudo_class"),Mo=Do("selector.role"),Oo=Do("selector.test_id"),Ca=Do("selector.text")}function gu(lt){var ut=Qr(lt);if(ut!=null){if(typeof ut.memoizedProps["data-testname"]!="string")throw Error(ot(364));return ut}if((lt=Ai(lt))===null)throw Error(ot(362));return lt.stateNode.current}function yu(lt,ut){switch(ut.$$typeof){case Pa:if(lt.type===ut.value)return!0;break;case mu:e:{ut=ut.value,lt=[lt,0];for(var mt=0;mt<lt.length;){var vt=lt[mt++],Et=lt[mt++],At=ut[Et];if(vt.tag!==5||!cs(vt)){for(;At!=null&&yu(vt,At);)At=ut[++Et];if(Et===ut.length){ut=!0;break e}for(vt=vt.child;vt!==null;)lt.push(vt,Et),vt=vt.sibling}}ut=!1}return ut;case Mo:if(lt.tag===5&&Mu(lt.stateNode,ut.value))return!0;break;case Ca:if((lt.tag===5||lt.tag===6)&&(lt=fa(lt))!==null&&0<=lt.indexOf(ut.value))return!0;break;case Oo:if(lt.tag===5&&typeof(lt=lt.memoizedProps["data-testname"])=="string"&&lt.toLowerCase()===ut.value.toLowerCase())return!0;break;default:throw Error(ot(365))}return!1}function _u(lt){switch(lt.$$typeof){case Pa:return"<"+(Yt(lt.value)||"Unknown")+">";case mu:return":has("+(_u(lt)||"")+")";case Mo:return'[role="'+lt.value+'"]';case Ca:return'"'+lt.value+'"';case Oo:return'[data-testname="'+lt.value+'"]';default:throw Error(ot(365))}}function Fo(lt,ut){var mt=[];lt=[lt,0];for(var vt=0;vt<lt.length;){var Et=lt[vt++],At=lt[vt++],Bt=ut[At];if(Et.tag!==5||!cs(Et)){for(;Bt!=null&&yu(Et,Bt);)Bt=ut[++At];if(At===ut.length)mt.push(Et);else for(Et=Et.child;Et!==null;)lt.push(Et,At),Et=Et.sibling}}return mt}function as(lt,ut){if(!Ci)throw Error(ot(363));lt=Fo(lt=gu(lt),ut),ut=[],lt=Array.from(lt);for(var mt=0;mt<lt.length;){var vt=lt[mt++];if(vt.tag===5)cs(vt)||ut.push(vt.stateNode);else for(vt=vt.child;vt!==null;)lt.push(vt),vt=vt.sibling}return ut}var No=Math.ceil,El=ct.ReactCurrentDispatcher,dc=ct.ReactCurrentOwner,Xn=ct.ReactCurrentBatchConfig,Yr=0,yi=null,di=null,ii=0,_i=0,Ia=js(0),vi=0,no=null,io=0,so=0,Ls=0,Ma=null,Oi=null,Oa=0,vu=1/0,ys=null;function ko(){vu=ti()+500}var fc,ei=!1,Sl=null,la=null,Tl=!1,qs=null,wl=0,Ys=0,si=null,ci=-1,fi=0;function Ti(){return 6&Yr?ti():ci!==-1?ci:ci=ti()}function Bs(lt){return 1&lt.mode?2&Yr&&ii!==0?ii&-ii:Rd.transition!==null?(fi===0&&(fi=Oc()),fi):(lt=Jr)!==0?lt:Or():1}function zi(lt,ut,mt,vt){if(50<Ys)throw Ys=0,si=null,Error(ot(185));Vo(lt,mt,vt),2&Yr&&lt===yi||(lt===yi&&(!(2&Yr)&&(so|=mt),vi===4&&ua(lt,ii)),os(lt,vt),mt===1&&Yr===0&&!(1&ut.mode)&&(ko(),ja&&ds()))}function os(lt,ut){var mt=lt.callbackNode;(function(Et,At){for(var Bt=Et.suspendedLanes,Wt=Et.pingedLanes,tr=Et.expirationTimes,hr=Et.pendingLanes;0<hr;){var pr=31-Ss(hr),Cr=1<<pr,fr=tr[pr];fr===-1?Cr&Bt&&!(Cr&Wt)||(tr[pr]=Fh(Cr,At)):fr<=At&&(Et.expiredLanes|=Cr),hr&=~Cr}})(lt,ut);var vt=Hl(lt,lt===yi?ii:0);if(vt===0)mt!==null&&xa(mt),lt.callbackNode=null,lt.callbackPriority=0;else if(ut=vt&-vt,lt.callbackPriority!==ut){if(mt!=null&&xa(mt),ut===1)lt.tag===0?function(Et){ja=!0,Eo(Et)}(Ks.bind(null,lt)):Eo(Ks.bind(null,lt)),$i?zs(function(){!(6&Yr)&&ds()}):na(Dc,ds),mt=null;else{switch(va(vt)){case 1:mt=Dc;break;case 4:mt=Nh;break;case 16:default:mt=Wo;break;case 536870912:mt=Ad}mt=gh(mt,Di.bind(null,lt))}lt.callbackPriority=ut,lt.callbackNode=mt}}function Di(lt,ut){if(ci=-1,fi=0,(6&Yr)!=0)throw Error(ot(327));var mt=lt.callbackNode;if(Qs()&&lt.callbackNode!==mt)return null;var vt=Hl(lt,lt===yi?ii:0);if(vt===0)return null;if(30&vt||vt&lt.expiredLanes||ut)ut=Su(lt,vt);else{ut=vt;var Et=Yr;Yr|=2;var At=ch();for(yi===lt&&ii===ut||(ys=null,ko(),Da(lt,ut));;)try{Yh();break}catch(Wt){pc(lt,Wt)}kc(),El.current=At,Yr=Et,di!==null?ut=0:(yi=null,ii=0,ut=vi)}if(ut!==0){if(ut===2&&(Et=jl(lt))!==0&&(vt=Et,ut=xu(lt,Et)),ut===1)throw mt=no,Da(lt,0),ua(lt,vt),os(lt,ti()),mt;if(ut===6)ua(lt,vt);else{if(Et=lt.current.alternate,(30&vt)==0&&!function(Wt){for(var tr=Wt;;){if(16384&tr.flags){var hr=tr.updateQueue;if(hr!==null&&(hr=hr.stores)!==null)for(var pr=0;pr<hr.length;pr++){var Cr=hr[pr],fr=Cr.getSnapshot;Cr=Cr.value;try{if(!Ts(fr(),Cr))return!1}catch{return!1}}}if(hr=tr.child,16384&tr.subtreeFlags&&hr!==null)hr.return=tr,tr=hr;else{if(tr===Wt)break;for(;tr.sibling===null;){if(tr.return===null||tr.return===Wt)return!0;tr=tr.return}tr.sibling.return=tr.return,tr=tr.sibling}}return!0}(Et)&&((ut=Su(lt,vt))===2&&(At=jl(lt))!==0&&(vt=At,ut=xu(lt,At)),ut===1))throw mt=no,Da(lt,0),ua(lt,vt),os(lt,ti()),mt;switch(lt.finishedWork=Et,lt.finishedLanes=vt,ut){case 0:case 1:throw Error(ot(345));case 2:case 5:Bo(lt,Oi,ys);break;case 3:if(ua(lt,vt),(130023424&vt)===vt&&10<(ut=Oa+500-ti())){if(Hl(lt,0)!==0)break;if(((Et=lt.suspendedLanes)&vt)!==vt){Ti(),lt.pingedLanes|=lt.suspendedLanes&Et;break}lt.timeoutHandle=Sr(Bo.bind(null,lt,Oi,ys),ut);break}Bo(lt,Oi,ys);break;case 4:if(ua(lt,vt),(4194240&vt)===vt)break;for(ut=lt.eventTimes,Et=-1;0<vt;){var Bt=31-Ss(vt);At=1<<Bt,(Bt=ut[Bt])>Et&&(Et=Bt),vt&=~At}if(vt=Et,10<(vt=(120>(vt=ti()-vt)?120:480>vt?480:1080>vt?1080:1920>vt?1920:3e3>vt?3e3:4320>vt?4320:1960*No(vt/1960))-vt)){lt.timeoutHandle=Sr(Bo.bind(null,lt,Oi,ys),vt);break}Bo(lt,Oi,ys);break;default:throw Error(ot(329))}}}return os(lt,ti()),lt.callbackNode===mt?Di.bind(null,lt):null}function xu(lt,ut){var mt=Ma;return lt.current.memoizedState.isDehydrated&&(Da(lt,ut).flags|=256),(lt=Su(lt,ut))!==2&&(ut=Oi,Oi=mt,ut!==null&&Eu(ut)),lt}function Eu(lt){Oi===null?Oi=lt:Oi.push.apply(Oi,lt)}function ua(lt,ut){for(ut&=~Ls,ut&=~so,lt.suspendedLanes|=ut,lt.pingedLanes&=~ut,lt=lt.expirationTimes;0<ut;){var mt=31-Ss(ut),vt=1<<mt;lt[mt]=-1,ut&=~vt}}function Ks(lt){if(6&Yr)throw Error(ot(327));Qs();var ut=Hl(lt,0);if(!(1&ut))return os(lt,ti()),null;var mt=Su(lt,ut);if(lt.tag!==0&&mt===2){var vt=jl(lt);vt!==0&&(ut=vt,mt=xu(lt,vt))}if(mt===1)throw mt=no,Da(lt,0),ua(lt,ut),os(lt,ti()),mt;if(mt===6)throw Error(ot(345));return lt.finishedWork=lt.current.alternate,lt.finishedLanes=ut,Bo(lt,Oi,ys),os(lt,ti()),null}function _s(lt){qs!==null&&qs.tag===0&&!(6&Yr)&&Qs();var ut=Yr;Yr|=1;var mt=Xn.transition,vt=Jr;try{if(Xn.transition=null,Jr=1,lt)return lt()}finally{Jr=vt,Xn.transition=mt,!(6&(Yr=ut))&&ds()}}function Lo(){_i=Ia.current,An(Ia)}function Da(lt,ut){lt.finishedWork=null,lt.finishedLanes=0;var mt=lt.timeoutHandle;if(mt!==Pr&&(lt.timeoutHandle=Pr,br(mt)),di!==null)for(mt=di.return;mt!==null;){var vt=mt;switch(Gu(vt),vt.tag){case 1:(vt=vt.type.childContextTypes)!=null&&vo();break;case 3:Ao(),An(Qi),An(Li),ms();break;case 5:jc(vt);break;case 4:Ao();break;case 13:case 19:An(li);break;case 10:Ql(vt.type._context);break;case 22:case 23:Lo()}mt=mt.return}if(yi=lt,di=lt=Fa(lt.current,null),ii=_i=ut,vi=0,no=null,Ls=so=io=0,Oi=Ma=null,Va!==null){for(ut=0;ut<Va.length;ut++)if((vt=(mt=Va[ut]).interleaved)!==null){mt.interleaved=null;var Et=vt.next,At=mt.pending;if(At!==null){var Bt=At.next;At.next=Et,vt.next=Bt}mt.pending=vt}Va=null}return lt}function pc(lt,ut){for(;;){var mt=di;try{if(kc(),Ya.current=hl,Ku){for(var vt=oi.memoizedState;vt!==null;){var Et=vt.queue;Et!==null&&(Et.pending=null),vt=vt.next}Ku=!1}if(Ka=0,pi=Ei=oi=null,nu=!1,aa=0,dc.current=null,mt===null||mt.return===null){vi=1,no=ut,di=null;break}e:{var At=lt,Bt=mt.return,Wt=mt,tr=ut;if(ut=ii,Wt.flags|=32768,tr!==null&&typeof tr=="object"&&typeof tr.then=="function"){var hr=tr,pr=Wt,Cr=pr.tag;if(!(1&pr.mode)&&(Cr===0||Cr===11||Cr===15)){var fr=pr.alternate;fr?(pr.updateQueue=fr.updateQueue,pr.memoizedState=fr.memoizedState,pr.lanes=fr.lanes):(pr.updateQueue=null,pr.memoizedState=null)}var Ar=Ro(Bt);if(Ar!==null){Ar.flags&=-257,Xs(Ar,Bt,Wt,0,ut),1&Ar.mode&&ih(At,hr,ut),tr=hr;var kr=(ut=Ar).updateQueue;if(kr===null){var Kr=new Set;Kr.add(tr),ut.updateQueue=Kr}else kr.add(tr);break e}if(!(1&ut)){ih(At,hr,ut),mc();break e}tr=Error(ot(426))}else if(Qn&&1&Wt.mode){var mr=Ro(Bt);if(mr!==null){!(65536&mr.flags)&&(mr.flags|=256),Xs(mr,Bt,Wt,0,ut),Yl(dl(tr,Wt));break e}}At=tr=dl(tr,Wt),vi!==4&&(vi=2),Ma===null?Ma=[At]:Ma.push(At),At=Bt;do{switch(At.tag){case 3:At.flags|=65536,ut&=-ut,At.lanes|=ut,Gh(At,oc(0,tr,ut));break e;case 1:Wt=tr;var Qt=At.type,or=At.stateNode;if(!(128&At.flags)&&(typeof Qt.getDerivedStateFromError=="function"||or!==null&&typeof or.componentDidCatch=="function"&&(la===null||!la.has(or)))){At.flags|=65536,ut&=-ut,At.lanes|=ut,Gh(At,ba(At,Wt,ut));break e}}At=At.return}while(At!==null)}dh(mt)}catch(Er){ut=Er,di===mt&&mt!==null&&(di=mt=mt.return);continue}break}}function ch(){var lt=El.current;return El.current=hl,lt===null?hl:lt}function mc(){vi!==0&&vi!==3&&vi!==2||(vi=4),yi===null||!(268435455&io)&&!(268435455&so)||ua(yi,ii)}function Su(lt,ut){var mt=Yr;Yr|=2;var vt=ch();for(yi===lt&&ii===ut||(ys=null,Da(lt,ut));;)try{qh();break}catch(Et){pc(lt,Et)}if(kc(),Yr=mt,El.current=vt,di!==null)throw Error(ot(261));return yi=null,ii=0,vi}function qh(){for(;di!==null;)hh(di)}function Yh(){for(;di!==null&&!Vl();)hh(di)}function hh(lt){var ut=fc(lt.alternate,lt,_i);lt.memoizedProps=lt.pendingProps,ut===null?dh(lt):di=ut,dc.current=null}function dh(lt){var ut=lt;do{var mt=ut.alternate;if(lt=ut.return,(32768&ut.flags)==0){if((mt=yl(mt,ut,_i))!==null)return void(di=mt)}else{if((mt=uc(mt,ut))!==null)return mt.flags&=32767,void(di=mt);if(lt===null)return vi=6,void(di=null);lt.flags|=32768,lt.subtreeFlags=0,lt.deletions=null}if((ut=ut.sibling)!==null)return void(di=ut);di=ut=lt}while(ut!==null);vi===0&&(vi=5)}function Bo(lt,ut,mt){var vt=Jr,Et=Xn.transition;try{Xn.transition=null,Jr=1,function(At,Bt,Wt,tr){do Qs();while(qs!==null);if(6&Yr)throw Error(ot(327));Wt=At.finishedWork;var hr=At.finishedLanes;if(Wt===null)return null;if(At.finishedWork=null,At.finishedLanes=0,Wt===At.current)throw Error(ot(177));At.callbackNode=null,At.callbackPriority=0;var pr=Wt.lanes|Wt.childLanes;if(function(Ar,kr){var Kr=Ar.pendingLanes&~kr;Ar.pendingLanes=kr,Ar.suspendedLanes=0,Ar.pingedLanes=0,Ar.expiredLanes&=kr,Ar.mutableReadLanes&=kr,Ar.entangledLanes&=kr,kr=Ar.entanglements;var mr=Ar.eventTimes;for(Ar=Ar.expirationTimes;0<Kr;){var Qt=31-Ss(Kr),or=1<<Qt;kr[Qt]=0,mr[Qt]=-1,Ar[Qt]=-1,Kr&=~or}}(At,pr),At===yi&&(di=yi=null,ii=0),!(2064&Wt.subtreeFlags)&&!(2064&Wt.flags)||Tl||(Tl=!0,gh(Wo,function(){return Qs(),null})),pr=(15990&Wt.flags)!=0,(15990&Wt.subtreeFlags)!=0||pr){pr=Xn.transition,Xn.transition=null;var Cr=Jr;Jr=1;var fr=Yr;Yr|=4,dc.current=null,function(Ar,kr){for(jt(Ar.containerInfo),Mr=kr;Mr!==null;)if(kr=(Ar=Mr).child,(1028&Ar.subtreeFlags)!=0&&kr!==null)kr.return=Ar,Mr=kr;else for(;Mr!==null;){Ar=Mr;try{var Kr=Ar.alternate;if(1024&Ar.flags)switch(Ar.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(Kr!==null){var mr=Kr.memoizedProps,Qt=Kr.memoizedState,or=Ar.stateNode,Er=or.getSnapshotBeforeUpdate(Ar.elementType===Ar.type?mr:Vs(Ar.type,mr),Qt);or.__reactInternalSnapshotBeforeUpdate=Er}break;case 3:Ir&&Ki(Ar.stateNode.containerInfo);break;default:throw Error(ot(163))}}catch($r){Yn(Ar,Ar.return,$r)}if((kr=Ar.sibling)!==null){kr.return=Ar.return,Mr=kr;break}Mr=Ar.return}Kr=ro,ro=!1}(At,Wt),Io(Wt,At),Ft(At.containerInfo),At.current=Wt,Od(Wt),Wl(),Yr=fr,Jr=Cr,Xn.transition=pr}else At.current=Wt;if(Tl&&(Tl=!1,qs=At,wl=hr),pr=At.pendingLanes,pr===0&&(la=null),function(Ar){if(hs&&typeof hs.onCommitFiberRoot=="function")try{hs.onCommitFiberRoot(Xl,Ar,void 0,(128&Ar.current.flags)==128)}catch{}}(Wt.stateNode),os(At,ti()),Bt!==null)for(tr=At.onRecoverableError,Wt=0;Wt<Bt.length;Wt++)hr=Bt[Wt],tr(hr.value,{componentStack:hr.stack,digest:hr.digest});if(ei)throw ei=!1,At=Sl,Sl=null,At;1&wl&&At.tag!==0&&Qs(),pr=At.pendingLanes,1&pr?At===si?Ys++:(Ys=0,si=At):Ys=0,ds()}(lt,ut,mt,vt)}finally{Xn.transition=Et,Jr=vt}return null}function Qs(){if(qs!==null){var lt=va(wl),ut=Xn.transition,mt=Jr;try{if(Xn.transition=null,Jr=16>lt?16:lt,qs===null)var vt=!1;else{if(lt=qs,qs=null,wl=0,(6&Yr)!=0)throw Error(ot(331));var Et=Yr;for(Yr|=4,Mr=lt.current;Mr!==null;){var At=Mr,Bt=At.child;if(16&Mr.flags){var Wt=At.deletions;if(Wt!==null){for(var tr=0;tr<Wt.length;tr++){var hr=Wt[tr];for(Mr=hr;Mr!==null;){var pr=Mr;switch(pr.tag){case 0:case 11:case 15:_l(8,pr,At)}var Cr=pr.child;if(Cr!==null)Cr.return=pr,Mr=Cr;else for(;Mr!==null;){var fr=(pr=Mr).sibling,Ar=pr.return;if(ns(pr),pr===hr){Mr=null;break}if(fr!==null){fr.return=Ar,Mr=fr;break}Mr=Ar}}}var kr=At.alternate;if(kr!==null){var Kr=kr.child;if(Kr!==null){kr.child=null;do{var mr=Kr.sibling;Kr.sibling=null,Kr=mr}while(Kr!==null)}}Mr=At}}if(2064&At.subtreeFlags&&Bt!==null)Bt.return=At,Mr=Bt;else e:for(;Mr!==null;){if(2048&(At=Mr).flags)switch(At.tag){case 0:case 11:case 15:_l(9,At,At.return)}var Qt=At.sibling;if(Qt!==null){Qt.return=At.return,Mr=Qt;break e}Mr=At.return}}var or=lt.current;for(Mr=or;Mr!==null;){var Er=(Bt=Mr).child;if(2064&Bt.subtreeFlags&&Er!==null)Er.return=Bt,Mr=Er;else e:for(Bt=or;Mr!==null;){if(2048&(Wt=Mr).flags)try{switch(Wt.tag){case 0:case 11:case 15:vl(9,Wt)}}catch(Bn){Yn(Wt,Wt.return,Bn)}if(Wt===Bt){Mr=null;break e}var $r=Wt.sibling;if($r!==null){$r.return=Wt.return,Mr=$r;break e}Mr=Wt.return}}if(Yr=Et,ds(),hs&&typeof hs.onPostCommitFiberRoot=="function")try{hs.onPostCommitFiberRoot(Xl,lt)}catch{}vt=!0}return vt}finally{Jr=mt,Xn.transition=ut}}return!1}function fh(lt,ut,mt){lt=sa(lt,ut=oc(0,ut=dl(mt,ut),1),1),ut=Ti(),lt!==null&&(Vo(lt,1,ut),os(lt,ut))}function Yn(lt,ut,mt){if(lt.tag===3)fh(lt,lt,mt);else for(;ut!==null;){if(ut.tag===3){fh(ut,lt,mt);break}if(ut.tag===1){var vt=ut.stateNode;if(typeof ut.type.getDerivedStateFromError=="function"||typeof vt.componentDidCatch=="function"&&(la===null||!la.has(vt))){ut=sa(ut,lt=ba(ut,lt=dl(mt,lt),1),1),lt=Ti(),ut!==null&&(Vo(ut,1,lt),os(ut,lt));break}}ut=ut.return}}function gc(lt,ut,mt){var vt=lt.pingCache;vt!==null&&vt.delete(ut),ut=Ti(),lt.pingedLanes|=lt.suspendedLanes&mt,yi===lt&&(ii&mt)===mt&&(vi===4||vi===3&&(130023424&ii)===ii&&500>ti()-Oa?Da(lt,0):Ls|=mt),os(lt,ut)}function ph(lt,ut){ut===0&&(1&lt.mode?(ut=zl,!(130023424&(zl<<=1))&&(zl=4194304)):ut=1);var mt=Ti();(lt=ia(lt,ut))!==null&&(Vo(lt,ut,mt),os(lt,mt))}function mh(lt){var ut=lt.memoizedState,mt=0;ut!==null&&(mt=ut.retryLane),ph(lt,mt)}function Kh(lt,ut){var mt=0;switch(lt.tag){case 13:var vt=lt.stateNode,Et=lt.memoizedState;Et!==null&&(mt=Et.retryLane);break;case 19:vt=lt.stateNode;break;default:throw Error(ot(314))}vt!==null&&vt.delete(ut),ph(lt,mt)}function gh(lt,ut){return na(lt,ut)}function Qh(lt,ut,mt,vt){this.tag=lt,this.key=mt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=ut,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=vt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(lt,ut,mt,vt){return new Qh(lt,ut,mt,vt)}function Tu(lt){return!(!(lt=lt.prototype)||!lt.isReactComponent)}function Fa(lt,ut){var mt=lt.alternate;return mt===null?((mt=vs(lt.tag,ut,lt.key,lt.mode)).elementType=lt.elementType,mt.type=lt.type,mt.stateNode=lt.stateNode,mt.alternate=lt,lt.alternate=mt):(mt.pendingProps=ut,mt.type=lt.type,mt.flags=0,mt.subtreeFlags=0,mt.deletions=null),mt.flags=14680064&lt.flags,mt.childLanes=lt.childLanes,mt.lanes=lt.lanes,mt.child=lt.child,mt.memoizedProps=lt.memoizedProps,mt.memoizedState=lt.memoizedState,mt.updateQueue=lt.updateQueue,ut=lt.dependencies,mt.dependencies=ut===null?null:{lanes:ut.lanes,firstContext:ut.firstContext},mt.sibling=lt.sibling,mt.index=lt.index,mt.ref=lt.ref,mt}function wu(lt,ut,mt,vt,Et,At){var Bt=2;if(vt=lt,typeof lt=="function")Tu(lt)&&(Bt=1);else if(typeof lt=="string")Bt=5;else e:switch(lt){case gt:return ao(mt.children,Et,At,ut);case yt:Bt=8,Et|=8;break;case xt:return(lt=vs(12,mt,ut,2|Et)).elementType=xt,lt.lanes=At,lt;case Pt:return(lt=vs(13,mt,ut,Et)).elementType=Pt,lt.lanes=At,lt;case Rt:return(lt=vs(19,mt,ut,Et)).elementType=Rt,lt.lanes=At,lt;case Dt:return yc(mt,Et,At,ut);default:if(typeof lt=="object"&&lt!==null)switch(lt.$$typeof){case St:Bt=10;break e;case wt:Bt=9;break e;case bt:Bt=11;break e;case Mt:Bt=14;break e;case kt:Bt=16,vt=null;break e}throw Error(ot(130,lt==null?lt:typeof lt,""))}return(ut=vs(Bt,mt,ut,Et)).elementType=lt,ut.type=vt,ut.lanes=At,ut}function ao(lt,ut,mt,vt){return(lt=vs(7,lt,vt,ut)).lanes=mt,lt}function yc(lt,ut,mt,vt){return(lt=vs(22,lt,vt,ut)).elementType=Dt,lt.lanes=mt,lt.stateNode={isHidden:!1},lt}function _c(lt,ut,mt){return(lt=vs(6,lt,null,ut)).lanes=mt,lt}function yh(lt,ut,mt){return(ut=vs(4,lt.children!==null?lt.children:[],lt.key,ut)).lanes=mt,ut.stateNode={containerInfo:lt.containerInfo,pendingChildren:null,implementation:lt.implementation},ut}function Dd(lt,ut,mt,vt,Et){this.tag=ut,this.containerInfo=lt,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Pr,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uu(0),this.expirationTimes=Uu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uu(0),this.identifierPrefix=vt,this.onRecoverableError=Et,Br&&(this.mutableSourceEagerHydrationData=null)}function _h(lt,ut,mt,vt,Et,At,Bt,Wt,tr){return lt=new Dd(lt,ut,mt,Wt,tr),ut===1?(ut=1,At===!0&&(ut|=8)):ut=0,At=vs(3,null,null,ut),lt.current=At,At.stateNode=lt,At.memoizedState={element:vt,isDehydrated:mt,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uc(At),lt}function vh(lt){if(!lt)return Ri;e:{if(Jt(lt=lt._reactInternals)!==lt||lt.tag!==1)throw Error(ot(170));var ut=lt;do{switch(ut.tag){case 3:ut=ut.stateNode.context;break e;case 1:if(Bi(ut.type)){ut=ut.stateNode.__reactInternalMemoizedMergedChildContext;break e}}ut=ut.return}while(ut!==null);throw Error(ot(171))}if(lt.tag===1){var mt=lt.type;if(Bi(mt))return Dh(lt,mt,ut)}return ut}function xh(lt){var ut=lt._reactInternals;if(ut===void 0)throw typeof lt.render=="function"?Error(ot(188)):(lt=Object.keys(lt).join(","),Error(ot(268,lt)));return(lt=Tr(ut))===null?null:lt.stateNode}function bu(lt,ut){if((lt=lt.memoizedState)!==null&&lt.dehydrated!==null){var mt=lt.retryLane;lt.retryLane=mt!==0&&mt<ut?mt:ut}}function vc(lt,ut){bu(lt,ut),(lt=lt.alternate)&&bu(lt,ut)}function Fd(lt){return(lt=Tr(lt))===null?null:lt.stateNode}function Nd(){return null}return fc=function(lt,ut,mt){if(lt!==null)if(lt.memoizedProps!==ut.pendingProps||Qi.current)ui=!0;else{if(!(lt.lanes&mt)&&!(128&ut.flags))return ui=!1,function(Cr,fr,Ar){switch(fr.tag){case 3:Aa(fr),Zo();break;case 5:jh(fr);break;case 1:Bi(fr.type)&&Lu(fr);break;case 4:Xu(fr,fr.stateNode.containerInfo);break;case 10:Lh(0,fr.type._context,fr.memoizedProps.value);break;case 13:var kr=fr.memoizedState;if(kr!==null)return kr.dehydrated!==null?(Kn(li,1&li.current),fr.flags|=128,null):Ar&fr.child.childLanes?Xi(Cr,fr,Ar):(Kn(li,1&li.current),(Cr=Cs(Cr,fr,Ar))!==null?Cr.sibling:null);Kn(li,1&li.current);break;case 19:if(kr=(Ar&fr.childLanes)!=0,(128&Cr.flags)!=0){if(kr)return ah(Cr,fr,Ar);fr.flags|=128}var Kr=fr.memoizedState;if(Kr!==null&&(Kr.rendering=null,Kr.tail=null,Kr.lastEffect=null),Kn(li,li.current),kr)break;return null;case 22:case 23:return fr.lanes=0,fl(Cr,fr,Ar)}return Cs(Cr,fr,Ar)}(lt,ut,mt);ui=(131072&lt.flags)!=0}else ui=!1,Qn&&1048576&ut.flags&&ql(ut,So,ut.index);switch(ut.lanes=0,ut.tag){case 2:var vt=ut.type;Ps(lt,ut),lt=ut.pendingProps;var Et=_a(ut,Li.current);el(ut,mt),Et=Qu(null,ut,vt,lt,Et,mt);var At=sl();return ut.flags|=1,typeof Et=="object"&&Et!==null&&typeof Et.render=="function"&&Et.$$typeof===void 0?(ut.tag=1,ut.memoizedState=null,ut.updateQueue=null,Bi(vt)?(At=!0,Lu(ut)):At=!1,ut.memoizedState=Et.state!==null&&Et.state!==void 0?Et.state:null,Uc(ut),Et.updater=Jl,ut.stateNode=Et,Et._reactInternals=ut,Hc(ut,vt,lt,mt),ut=Ja(null,ut,vt,!0,At,mt)):(ut.tag=0,Qn&&At&&Ko(ut),Ui(null,ut,Et,mt),ut=ut.child),ut;case 16:vt=ut.elementType;e:{switch(Ps(lt,ut),lt=ut.pendingProps,vt=(Et=vt._init)(vt._payload),ut.type=vt,Et=ut.tag=function(Cr){if(typeof Cr=="function")return Tu(Cr)?1:0;if(Cr!=null){if((Cr=Cr.$$typeof)===bt)return 11;if(Cr===Mt)return 14}return 2}(vt),lt=Vs(vt,lt),Et){case 0:ut=pl(null,ut,vt,lt,mt);break e;case 1:ut=lc(null,ut,vt,lt,mt);break e;case 11:ut=Vh(null,ut,vt,lt,mt);break e;case 14:ut=Wh(null,ut,vt,Vs(vt.type,lt),mt);break e}throw Error(ot(306,vt,""))}return ut;case 0:return vt=ut.type,Et=ut.pendingProps,pl(lt,ut,vt,Et=ut.elementType===vt?Et:Vs(vt,Et),mt);case 1:return vt=ut.type,Et=ut.pendingProps,lc(lt,ut,vt,Et=ut.elementType===vt?Et:Vs(vt,Et),mt);case 3:e:{if(Aa(ut),lt===null)throw Error(ot(387));vt=ut.pendingProps,Et=(At=ut.memoizedState).element,Uh(lt,ut),Zl(ut,vt,null,mt);var Bt=ut.memoizedState;if(vt=Bt.element,Br&&At.isDehydrated){if(At={element:vt,isDehydrated:!1,cache:Bt.cache,pendingSuspenseBoundaries:Bt.pendingSuspenseBoundaries,transitions:Bt.transitions},ut.updateQueue.baseState=At,ut.memoizedState=At,256&ut.flags){ut=Jn(lt,ut,vt,mt,Et=dl(Error(ot(423)),ut));break e}if(vt!==Et){ut=Jn(lt,ut,vt,mt,Et=dl(Error(ot(424)),ut));break e}for(Br&&(Ii=Ou(ut.stateNode.containerInfo),ri=ut,Qn=!0,$s=null,Sa=!1),mt=tu(ut,null,vt,mt),ut.child=mt;mt;)mt.flags=-3&mt.flags|4096,mt=mt.sibling}else{if(Zo(),vt===Et){ut=Cs(lt,ut,mt);break e}Ui(lt,ut,vt,mt)}ut=ut.child}return ut;case 5:return jh(ut),lt===null&&Qo(ut),vt=ut.type,Et=ut.pendingProps,At=lt!==null?lt.memoizedProps:null,Bt=Et.children,cr(vt,Et)?Bt=null:At!==null&&cr(vt,At)&&(ut.flags|=32),Po(lt,ut),Ui(lt,ut,Bt,mt),ut.child;case 6:return lt===null&&Qo(ut),null;case 13:return Xi(lt,ut,mt);case 4:return Xu(ut,ut.stateNode.containerInfo),vt=ut.pendingProps,lt===null?ut.child=il(ut,null,vt,mt):Ui(lt,ut,vt,mt),ut.child;case 11:return vt=ut.type,Et=ut.pendingProps,Vh(lt,ut,vt,Et=ut.elementType===vt?Et:Vs(vt,Et),mt);case 7:return Ui(lt,ut,ut.pendingProps,mt),ut.child;case 8:case 12:return Ui(lt,ut,ut.pendingProps.children,mt),ut.child;case 10:e:{if(vt=ut.type._context,Et=ut.pendingProps,At=ut.memoizedProps,Lh(0,vt,Bt=Et.value),At!==null)if(Ts(At.value,Bt)){if(At.children===Et.children&&!Qi.current){ut=Cs(lt,ut,mt);break e}}else for((At=ut.child)!==null&&(At.return=ut);At!==null;){var Wt=At.dependencies;if(Wt!==null){Bt=At.child;for(var tr=Wt.firstContext;tr!==null;){if(tr.context===vt){if(At.tag===1){(tr=Ta(-1,mt&-mt)).tag=2;var hr=At.updateQueue;if(hr!==null){var pr=(hr=hr.shared).pending;pr===null?tr.next=tr:(tr.next=pr.next,pr.next=tr),hr.pending=tr}}At.lanes|=mt,(tr=At.alternate)!==null&&(tr.lanes|=mt),Lc(At.return,mt,ut),Wt.lanes|=mt;break}tr=tr.next}}else if(At.tag===10)Bt=At.type===ut.type?null:At.child;else if(At.tag===18){if((Bt=At.return)===null)throw Error(ot(341));Bt.lanes|=mt,(Wt=Bt.alternate)!==null&&(Wt.lanes|=mt),Lc(Bt,mt,ut),Bt=At.sibling}else Bt=At.child;if(Bt!==null)Bt.return=At;else for(Bt=At;Bt!==null;){if(Bt===ut){Bt=null;break}if((At=Bt.sibling)!==null){At.return=Bt.return,Bt=At;break}Bt=Bt.return}At=Bt}Ui(lt,ut,Et.children,mt),ut=ut.child}return ut;case 9:return Et=ut.type,vt=ut.pendingProps.children,el(ut,mt),vt=vt(Et=As(Et)),ut.flags|=1,Ui(lt,ut,vt,mt),ut.child;case 14:return Et=Vs(vt=ut.type,ut.pendingProps),Wh(lt,ut,vt,Et=Vs(vt.type,Et),mt);case 15:return Za(lt,ut,ut.type,ut.pendingProps,mt);case 17:return vt=ut.type,Et=ut.pendingProps,Et=ut.elementType===vt?Et:Vs(vt,Et),Ps(lt,ut),ut.tag=1,Bi(vt)?(lt=!0,Lu(ut)):lt=!1,el(ut,mt),zh(ut,vt,Et),Hc(ut,vt,Et,mt),Ja(null,ut,vt,!0,lt,mt);case 19:return ah(lt,ut,mt);case 22:return fl(lt,ut,mt)}throw Error(ot(156,ut.tag))},et.attemptContinuousHydration=function(lt){if(lt.tag===13){var ut=ia(lt,134217728);ut!==null&&zi(ut,lt,134217728,Ti()),vc(lt,134217728)}},et.attemptDiscreteHydration=function(lt){if(lt.tag===13){var ut=ia(lt,1);ut!==null&&zi(ut,lt,1,Ti()),vc(lt,1)}},et.attemptHydrationAtCurrentPriority=function(lt){if(lt.tag===13){var ut=Bs(lt),mt=ia(lt,ut);mt!==null&&zi(mt,lt,ut,Ti()),vc(lt,ut)}},et.attemptSynchronousHydration=function(lt){switch(lt.tag){case 3:var ut=lt.stateNode;if(ut.current.memoizedState.isDehydrated){var mt=Mn(ut.pendingLanes);mt!==0&&($l(ut,1|mt),os(ut,ti()),!(6&Yr)&&(ko(),ds()))}break;case 13:_s(function(){var vt=ia(lt,1);if(vt!==null){var Et=Ti();zi(vt,lt,1,Et)}}),vc(lt,1)}},et.batchedUpdates=function(lt,ut){var mt=Yr;Yr|=1;try{return lt(ut)}finally{(Yr=mt)===0&&(ko(),ja&&ds())}},et.createComponentSelector=function(lt){return{$$typeof:Pa,value:lt}},et.createContainer=function(lt,ut,mt,vt,Et,At,Bt){return _h(lt,ut,!1,null,0,vt,0,At,Bt)},et.createHasPseudoClassSelector=function(lt){return{$$typeof:mu,value:lt}},et.createHydrationContainer=function(lt,ut,mt,vt,Et,At,Bt,Wt,tr){return(lt=_h(mt,vt,!0,lt,0,At,0,Wt,tr)).context=vh(null),mt=lt.current,(At=Ta(vt=Ti(),Et=Bs(mt))).callback=ut??null,sa(mt,At,Et),lt.current.lanes=Et,Vo(lt,Et,vt),os(lt,vt),lt},et.createPortal=function(lt,ut,mt){var vt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ft,key:vt==null?null:""+vt,children:lt,containerInfo:ut,implementation:mt}},et.createRoleSelector=function(lt){return{$$typeof:Mo,value:lt}},et.createTestNameSelector=function(lt){return{$$typeof:Oo,value:lt}},et.createTextSelector=function(lt){return{$$typeof:Ca,value:lt}},et.deferredUpdates=function(lt){var ut=Jr,mt=Xn.transition;try{return Xn.transition=null,Jr=16,lt()}finally{Jr=ut,Xn.transition=mt}},et.discreteUpdates=function(lt,ut,mt,vt,Et){var At=Jr,Bt=Xn.transition;try{return Xn.transition=null,Jr=1,lt(ut,mt,vt,Et)}finally{Jr=At,Xn.transition=Bt,Yr===0&&ko()}},et.findAllNodes=as,et.findBoundingRects=function(lt,ut){if(!Ci)throw Error(ot(363));ut=as(lt,ut),lt=[];for(var mt=0;mt<ut.length;mt++)lt.push(ea(ut[mt]));for(ut=lt.length-1;0<ut;ut--)for(var vt=(mt=lt[ut]).x,Et=vt+mt.width,At=mt.y,Bt=At+mt.height,Wt=ut-1;0<=Wt;Wt--)if(ut!==Wt){var tr=lt[Wt],hr=tr.x,pr=hr+tr.width,Cr=tr.y,fr=Cr+tr.height;if(vt>=hr&&At>=Cr&&Et<=pr&&Bt<=fr){lt.splice(ut,1);break}if(!(vt!==hr||mt.width!==tr.width||fr<At||Cr>Bt)){Cr>At&&(tr.height+=Cr-At,tr.y=At),fr<Bt&&(tr.height=Bt-Cr),lt.splice(ut,1);break}if(!(At!==Cr||mt.height!==tr.height||pr<vt||hr>Et)){hr>vt&&(tr.width+=hr-vt,tr.x=vt),pr<Et&&(tr.width=Et-hr),lt.splice(ut,1);break}}return lt},et.findHostInstance=xh,et.findHostInstanceWithNoPortals=function(lt){return(lt=(lt=dr(lt))!==null?Zt(lt):null)===null?null:lt.stateNode},et.findHostInstanceWithWarning=function(lt){return xh(lt)},et.flushControlled=function(lt){var ut=Yr;Yr|=1;var mt=Xn.transition,vt=Jr;try{Xn.transition=null,Jr=1,lt()}finally{Jr=vt,Xn.transition=mt,(Yr=ut)===0&&(ko(),ds())}},et.flushPassiveEffects=Qs,et.flushSync=_s,et.focusWithin=function(lt,ut){if(!Ci)throw Error(ot(363));for(ut=Fo(lt=gu(lt),ut),ut=Array.from(ut),lt=0;lt<ut.length;){var mt=ut[lt++];if(!cs(mt)){if(mt.tag===5&&Ol(mt.stateNode))return!0;for(mt=mt.child;mt!==null;)ut.push(mt),mt=mt.sibling}}return!1},et.getCurrentUpdatePriority=function(){return Jr},et.getFindAllNodesFailureDescription=function(lt,ut){if(!Ci)throw Error(ot(363));var mt=0,vt=[];lt=[gu(lt),0];for(var Et=0;Et<lt.length;){var At=lt[Et++],Bt=lt[Et++],Wt=ut[Bt];if((At.tag!==5||!cs(At))&&(yu(At,Wt)&&(vt.push(_u(Wt)),++Bt>mt&&(mt=Bt)),Bt<ut.length))for(At=At.child;At!==null;)lt.push(At,Bt),At=At.sibling}if(mt<ut.length){for(lt=[];mt<ut.length;mt++)lt.push(_u(ut[mt]));return`findAllNodes was able to match part of the selector:
  `+vt.join(" > ")+`

No matching component was found for:
  `+lt.join(" > ")}return null},et.getPublicRootInstance=function(lt){return(lt=lt.current).child?lt.child.tag===5?Ut(lt.child.stateNode):lt.child.stateNode:null},et.injectIntoDevTools=function(lt){if(lt={bundleType:lt.bundleType,version:lt.version,rendererPackageName:lt.rendererPackageName,rendererConfig:lt.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ct.ReactCurrentDispatcher,findHostInstanceByFiber:Fd,findFiberByHostInstance:lt.findFiberByHostInstance||Nd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")lt=!1;else{var ut=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(ut.isDisabled||!ut.supportsFiber)lt=!0;else{try{Xl=ut.inject(lt),hs=ut}catch{}lt=!!ut.checkDCE}}return lt},et.isAlreadyRendering=function(){return!1},et.observeVisibleRects=function(lt,ut,mt,vt){if(!Ci)throw Error(ot(363));lt=as(lt,ut);var Et=Dl(lt,mt,vt).disconnect;return{disconnect:function(){Et()}}},et.registerMutableSourceForHydration=function(lt,ut){var mt=ut._getVersion;mt=mt(ut._source),lt.mutableSourceEagerHydrationData==null?lt.mutableSourceEagerHydrationData=[ut,mt]:lt.mutableSourceEagerHydrationData.push(ut,mt)},et.runWithPriority=function(lt,ut){var mt=Jr;try{return Jr=lt,ut()}finally{Jr=mt}},et.shouldError=function(){return null},et.shouldSuspend=function(){return!1},et.updateContainer=function(lt,ut,mt,vt){var Et=ut.current,At=Ti(),Bt=Bs(Et);return mt=vh(mt),ut.context===null?ut.context=mt:ut.pendingContext=mt,(ut=Ta(At,Bt)).payload={element:lt},(vt=vt===void 0?null:vt)!==null&&(ut.callback=vt),(lt=sa(Et,ut,Bt))!==null&&(zi(lt,Et,Bt,At),Xa(lt,Et,Bt)),Bt},et}),ke}({get exports(){return Ee},set exports(rt){Ee=rt}}).exports=Te();var Ie=I(Ee),Re={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},Oe={},je={get exports(){return Oe},set exports(rt){Oe=rt}};(function(){var rt,et,tt,nt,st,ot;typeof performance<"u"&&performance!==null&&performance.now?je.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(je.exports=function(){return(rt()-st)/1e6},et=process.hrtime,nt=(rt=function(){var ct;return 1e9*(ct=et())[0]+ct[1]})(),ot=1e9*process.uptime(),st=nt-ot):Date.now?(je.exports=function(){return Date.now()-tt},tt=Date.now()):(je.exports=function(){return new Date().getTime()-tt},tt=new Date().getTime())}).call(T);var Le,De={},Me={};({get exports(){return De},set exports(rt){De=rt}}).exports=(Le||(Le=1,Me.ConcurrentRoot=1,Me.ContinuousEventPriority=4,Me.DefaultEventPriority=16,Me.DiscreteEventPriority=1,Me.IdleEventPriority=536870912,Me.LegacyRoot=0),Me);var Ue={};function Fe(rt,et){rt.addChild&&(rt.addChild(et),typeof et.didMount=="function"&&et.didMount(et,rt))}function Ae(rt,et){var tt,nt,st;(tt=rt.willUnmount)===null||tt===void 0||tt.call(rt,rt,et),((nt=rt.config)===null||nt===void 0?void 0:nt.destroyChildren)!==!1&&(st=rt.children)!==null&&st!==void 0&&st.length&&z(rt.children).forEach(function(ot){Ae(ot,rt)})}function Qe(rt,et){var tt;Ae(et,rt),rt.removeChild(et);var nt=(tt=et.config)!==null&&tt!==void 0?tt:{},st=nt.destroy,ot=st===void 0||st,ct=nt.destroyChildren,dt=ct===void 0||ct,ft=nt.destroyTexture,gt=ft!==void 0&&ft,yt=nt.destroyBaseTexture,xt=yt!==void 0&&yt;ot&&et.destroy({children:dt,texture:gt,baseTexture:xt})}function He(rt,et,tt){var nt,st;N(et!==tt,"Cannot insert node before itself"),rt.children.indexOf(et)!==-1&&rt.removeChild(et);var ot=rt.getChildIndex(tt);rt.addChildAt(et,ot),(nt=rt.__reactpixi)===null||nt===void 0||(st=nt.root)===null||st===void 0||st.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertBefore"})}var Be=null,We=Ie({getRootHostContext:function(){return Ue},getChildHostContext:function(rt){return rt},getChildHostContextForEventComponent:function(rt){return rt},getPublicInstance:function(rt){return rt},getCurrentEventPriority:function(){return function(){var rt,et;if(typeof window>"u")return De.DefaultEventPriority;switch((rt=window)===null||rt===void 0||(et=rt.event)===null||et===void 0?void 0:et.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return De.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return De.ContinuousEventPriority;default:return De.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(rt){var et,tt,nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},st=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,ot=ye[rt];if(typeof ot=="function"&&(et=ot(st,nt)),!et){var ct=be[rt];ct&&((et=ct.create(nt,{root:st})).didMount=ct.didMount?ct.didMount.bind(et):void 0,et.willUnmount=ct.willUnmount?ct.willUnmount.bind(et):void 0,et.applyProps=ct.applyProps?ct.applyProps.bind(et):void 0,et.config=ct.config)}return et&&(et.__reactpixi={root:st},(typeof((tt=et)===null||tt===void 0?void 0:tt.applyProps)=="function"?et.applyProps:V)(et,{},nt)),et},hideInstance:function(rt){rt.visible=!1},unhideInstance:function(rt,et){var tt=et==null||!et.hasOwnProperty("visible")||et.visible;rt.visible=tt},finalizeInitialChildren:function(rt,et,tt){return!1},prepareUpdate:function(rt,et,tt,nt,st,ot){return Be=function(ct,dt,ft,gt){var yt=null;for(var xt in ft)!gt.hasOwnProperty(xt)&&ft.hasOwnProperty(xt)&&ft[xt]!==null&&(xt===Q||(yt||(yt=[]),yt.push(xt,null)));for(var St in gt){var wt=gt[St],bt=ft!==null?ft[St]:void 0;!gt.hasOwnProperty(St)||wt===bt||wt===null&&bt===null||St===Q||(yt||(yt=[]),yt.push(St,wt))}return yt}(0,0,tt,nt)},shouldSetTextContent:function(rt,et){return!1},shouldDeprioritizeSubtree:function(rt,et){var tt=et.alpha===void 0||et.alpha>0,nt=et.renderable===void 0||et.renderable===!0,st=et.visible===void 0||et.visible===!0;return!(tt&&nt&&st)},createTextInstance:function(rt,et,tt){N(!1,'Error trying to add text node "'.concat(rt,'"'),"text strings as children of a Pixi component is not supported. To add some text, use &lt;Text text={string} /&gt;")},unhideTextInstance:function(rt,et){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:Oe,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var rt,et,tt=arguments.length,nt=new Array(tt),st=0;st<tt;st++)nt[st]=arguments[st];var ot=Fe.apply(null,nt);return(rt=nt[0].__reactpixi)===null||rt===void 0||(et=rt.root)===null||et===void 0||et.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),ot},appendChild:function(){for(var rt,et,tt=arguments.length,nt=new Array(tt),st=0;st<tt;st++)nt[st]=arguments[st];var ot=Fe.apply(null,nt);return(rt=nt[0].__reactpixi)===null||rt===void 0||(et=rt.root)===null||et===void 0||et.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),ot},appendChildToContainer:function(){for(var rt,et,tt=arguments.length,nt=new Array(tt),st=0;st<tt;st++)nt[st]=arguments[st];var ot=Fe.apply(null,nt);return(rt=nt[0].__reactpixi)===null||rt===void 0||(et=rt.root)===null||et===void 0||et.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),ot},removeChild:function(){for(var rt,et,tt=arguments.length,nt=new Array(tt),st=0;st<tt;st++)nt[st]=arguments[st];var ot=Qe.apply(null,nt);return(rt=nt[0].__reactpixi)===null||rt===void 0||(et=rt.root)===null||et===void 0||et.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),ot},removeChildFromContainer:function(){for(var rt,et,tt=arguments.length,nt=new Array(tt),st=0;st<tt;st++)nt[st]=arguments[st];var ot=Qe.apply(null,nt);return(rt=nt[0].__reactpixi)===null||rt===void 0||(et=rt.root)===null||et===void 0||et.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),ot},insertBefore:He,insertInContainerBefore:function(){for(var rt,et,tt=arguments.length,nt=new Array(tt),st=0;st<tt;st++)nt[st]=arguments[st];var ot=He.apply(null,nt);return(rt=nt[0].__reactpixi)===null||rt===void 0||(et=rt.root)===null||et===void 0||et.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),ot},commitUpdate:function(rt,et,tt,nt,st){var ot,ct,dt=rt&&rt.applyProps;typeof dt!="function"&&(dt=V),(dt(rt,nt,st)||Be)&&((ot=rt.__reactpixi)===null||ot===void 0||(ct=ot.root)===null||ct===void 0||ct.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(rt,et,tt,nt,st){},commitTextUpdate:function(rt,et,tt){},resetTextContent:function(rt){},clearContainer:function(rt){},getFundamentalComponentInstance:function(rt){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(rt){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(rt){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(rt){throw new Error("Not yet implemented.")},getInstanceFromNode:function(rt){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(rt){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(rt){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(rt){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(rt){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(rt){}}),$e=Re.dependencies["react-dom"].replace(/[^0-9.]/g,""),Ve=Re.name;We.injectIntoDevTools({bundleType:0,version:$e,rendererPackageName:Ve,findHostInstanceByFiber:We.findHostInstance});var qe=new Map;function Xe(rt){if(N(Container.prototype.isPrototypeOf(rt),"Invalid argument `container`, expected instance of `Container`."),qe.has(rt)){var et=qe.get(rt).pixiFiberContainer;We.updateContainer(null,et,void 0,function(){qe.delete(rt)})}}function Ge(rt){N(Container.prototype.isPrototypeOf(rt),"Invalid argument `container`, expected instance of `Container`.");var et=qe.get(rt);if(N(!et,"createRoot should only be called once"),!et){var tt=We.createContainer(rt);et={pixiFiberContainer:tt,reactRoot:{render:function(nt){return We.updateContainer(nt,tt,void 0),We.getPublicRootInstance(tt)},unmount:function(){Xe(rt),qe.delete(rt)}}},qe.set(rt,et)}return et.reactRoot}function Ye(rt,et,tt){var nt;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),tt!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),qe.has(et)?nt=qe.get(et).reactRoot:nt=Ge(et),nt.render(rt)}function Ke(rt){Xe(rt)}function Je(){return Je=Object.assign?Object.assign.bind():function(rt){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&(rt[nt]=tt[nt])}return rt},Je.apply(this,arguments)}function Ze(rt,et){if(!(rt instanceof et))throw new TypeError("Cannot call a class as a function")}function en(rt,et){for(var tt=0;tt<et.length;tt++){var nt=et[tt];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(rt,E(nt.key),nt)}}function nn(rt){if(rt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rt}function tn(rt,et){return tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(tt,nt){return tt.__proto__=nt,tt},tn(rt,et)}function rn(rt,et){if(et&&(P(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nn(rt)}function ln(rt){return ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(et){return et.__proto__||Object.getPrototypeOf(et)},ln(rt)}var an=g$1.createContext(null),on=an.Provider,un=an.Consumer,sn=function(rt){var et=g$1.forwardRef(function(tt,nt){return g$1.createElement(un,null,function(st){return g$1.createElement(rt,Je({},tt,{ref:nt,app:st}))})});return et.displayName="withPIXIApp(".concat(rt.displayName||rt.name,")"),et};function cn(rt){var et=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var tt,nt=ln(rt);if(et){var st=ln(this).constructor;tt=Reflect.construct(nt,arguments,st)}else tt=nt.apply(this,arguments);return rn(this,tt)}}function fn(rt,et){var tt=Object.keys(rt);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(rt);et&&(nt=nt.filter(function(st){return Object.getOwnPropertyDescriptor(rt,st).enumerable})),tt.push.apply(tt,nt)}return tt}function dn(rt){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?fn(Object(tt),!0).forEach(function(nt){_(rt,nt,tt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(rt,Object.getOwnPropertyDescriptors(tt)):fn(Object(tt)).forEach(function(nt){Object.defineProperty(rt,nt,Object.getOwnPropertyDescriptor(tt,nt))})}return rt}var pn=function(){},mn={width:k.number,height:k.number,onMount:k.func,onUnmount:k.func,raf:k.bool,renderOnComponentChange:k.bool,children:k.node,options:k.shape({autoStart:k.bool,width:k.number,height:k.number,useContextAlpha:k.bool,backgroundAlpha:k.number,autoDensity:k.bool,antialias:k.bool,preserveDrawingBuffer:k.bool,resolution:k.number,forceCanvas:k.bool,backgroundColor:k.number,clearBeforeRender:k.bool,powerPreference:k.string,sharedTicker:k.bool,sharedLoader:k.bool,resizeTo:function(rt,et){var tt=rt[et];tt&&N(tt===window||tt instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(P(tt),", expect `window` or an `HTMLElement`."))},view:function(rt,et,tt){var nt=rt[et];nt&&N(nt instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(P(nt),", supplied to ").concat(tt,", expected `<canvas> Element`"))}})},hn={width:800,height:600,onMount:pn,onUnmount:pn,raf:!0,renderOnComponentChange:!0},gn=function(rt){(function(ot,ct){if(typeof ct!="function"&&ct!==null)throw new TypeError("Super expression must either be null or a function");ot.prototype=Object.create(ct&&ct.prototype,{constructor:{value:ot,writable:!0,configurable:!0}}),Object.defineProperty(ot,"prototype",{writable:!1}),ct&&tn(ot,ct)})(st,g$1.Component);var et,tt,nt=cn(st);function st(){var ot;Ze(this,st);for(var ct=arguments.length,dt=new Array(ct),ft=0;ft<ct;ft++)dt[ft]=arguments[ft];return _(nn(ot=nt.call.apply(nt,[this].concat(dt))),"_canvas",null),_(nn(ot),"_mediaQuery",null),_(nn(ot),"_ticker",null),_(nn(ot),"_needsUpdate",!0),_(nn(ot),"app",null),_(nn(ot),"updateSize",function(){var gt=ot.props,yt=gt.width,xt=gt.height,St=gt.options;St!=null&&St.resolution||(ot.app.renderer.resolution=window.devicePixelRatio,ot.resetInteractionManager()),ot.app.renderer.resize(yt,xt)}),_(nn(ot),"needsRenderUpdate",function(){ot._needsUpdate=!0}),_(nn(ot),"renderStage",function(){var gt=ot.props,yt=gt.renderOnComponentChange;!gt.raf&&yt&&ot._needsUpdate&&(ot._needsUpdate=!1,ot.app.renderer.render(ot.app.stage))}),ot}return et=st,(tt=[{key:"componentDidMount",value:function(){var ot=this.props,ct=ot.onMount,dt=ot.width,ft=ot.height,gt=ot.options,yt=ot.raf,xt=ot.renderOnComponentChange;this.app=new Application(dn(dn({width:dt,height:ft,view:this._canvas},gt),{},{autoDensity:(gt==null?void 0:gt.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[yt?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=We.createContainer(this.app.stage),We.updateContainer(this.getChildren(),this.mountNode,this),ct(this.app),gt!=null&&gt.autoDensity&&window.matchMedia&&(gt==null?void 0:gt.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),xt&&!yt&&(this._ticker=new Ticker,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(ot,ct,dt){var ft,gt=this.props,yt=gt.width,xt=gt.height,St=gt.raf,wt=gt.renderOnComponentChange,bt=gt.options;(bt==null?void 0:bt.resolution)!==void 0&&(ot==null?void 0:ot.options.resolution)!==(bt==null?void 0:bt.resolution)&&(this.app.renderer.resolution=bt.resolution,this.resetInteractionManager()),ot.height===xt&&ot.width===yt&&((ft=ot.options)===null||ft===void 0?void 0:ft.resolution)===(bt==null?void 0:bt.resolution)||this.updateSize(),ot.raf!==St&&this.app.ticker[St?"start":"stop"](),We.updateContainer(this.getChildren(),this.mountNode,this),ot.width===yt&&ot.height===xt&&ot.raf===St&&ot.renderOnComponentChange===wt&&ot.options===bt||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var ot=this.app.renderer.plugins.interaction;ot!=null&&ot.resolution&&(ot.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var ot=this.props.children;return g$1.createElement(on,{value:this.app},ot)}},{key:"componentDidCatch",value:function(ot,ct){console.error("Error occurred in `Stage`."),console.error(ot),console.error(ct)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),We.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var ot,ct,dt=this,ft=this.props.options;return ft&&ft.view?(N(ft.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):g$1.createElement("canvas",Je({},(ot=this.props,ct=[].concat(z(Object.keys(mn)),z(Object.keys(B))),Object.keys(ot).filter(function(gt){return!ct.includes(gt)}).reduce(function(gt,yt){return dn(dn({},gt),{},_({},yt,ot[yt]))},{})),{ref:function(gt){return dt._canvas=gt}}))}}])&&en(et.prototype,tt),Object.defineProperty(et,"prototype",{writable:!1}),st}();gn.propTypes=mn,gn.defaultProps=hn;var vn=gn;function yn(){var rt=reactExports.useContext(an);return N(rt instanceof Application,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),rt}function bn(rt){var et=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],tt=yn();N(typeof rt=="function","`useTick` needs a callback function."),N(tt instanceof Application,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider");var nt=reactExports.useRef(null);reactExports.useEffect(function(){nt.current=rt},[rt]),reactExports.useEffect(function(){if(et){var st=function(ot){return nt.current.apply(tt.ticker,[ot,tt.ticker])};return tt.ticker.add(st),function(){tt.ticker&&tt.ticker.remove(st)}}},[et])}function Sn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xn(rt,et,tt){return xn=Sn()?Reflect.construct.bind():function(nt,st,ot){var ct=[null];ct.push.apply(ct,st);var dt=new(Function.bind.apply(nt,ct));return ot&&tn(dt,ot.prototype),dt},xn.apply(null,arguments)}var wn=["children","apply"];function kn(rt,et){var tt=Object.keys(rt);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(rt);et&&(nt=nt.filter(function(st){return Object.getOwnPropertyDescriptor(rt,st).enumerable})),tt.push.apply(tt,nt)}return tt}function Pn(rt){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?kn(Object(tt),!0).forEach(function(nt){_(rt,nt,tt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(rt,Object.getOwnPropertyDescriptors(tt)):kn(Object(tt)).forEach(function(nt){Object.defineProperty(rt,nt,Object.getOwnPropertyDescriptor(tt,nt))})}return rt}var En=function(rt,et){N(P(et)==="object","Second argument needs to be an indexed object with { prop: Filter }");var tt=Object.keys(et),nt=function(st){var ot=st.children,ct=st.apply,dt=G(st,wn),ft=reactExports.useRef(reactExports.useMemo(function(){return tt.map(function(xt){var St,wt=(dt==null||(St=dt[xt])===null||St===void 0?void 0:St.construct)||[];return xn(et[xt],z(wt))})},[tt])),gt=reactExports.useMemo(function(){return tt.reduce(function(xt,St,wt){return Pn(Pn({},xt),{},_({},St,ft.current[wt]))},{})},[tt]),yt=reactExports.useMemo(function(){return Object.keys(dt).filter(A(F(tt))).reduce(function(xt,St){return Pn(Pn({},xt),{},_({},St,dt[St]))},{})},[dt,tt]);return tt.forEach(function(xt,St){return Object.assign(ft.current[St],dt[xt])}),ct&&function(){for(var xt=arguments.length,St=new Array(xt),wt=0;wt<xt;wt++)St[wt]=arguments[wt];return St.every(function(bt){return typeof bt=="function"})}(ct)&&ct.call(rt,gt),g$1.createElement(rt,Je({},yt,{filters:ft.current}),ot)};return nt.displayName="FilterWrapper",nt.propTypes={children:k.node,apply:k.func},nt},_n=ve.BitmapText,Cn=ve.Container,zn=ve.Graphics,Nn=ve.NineSlicePlane,Tn=ve.ParticleContainer,In=ve.Sprite,Rn=ve.AnimatedSprite,On=ve.Text,jn=ve.TilingSprite,Ln=ve.SimpleMesh,Dn=ve.SimpleRope;const index_es=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:Rn,AppConsumer:un,AppContext:an,AppProvider:on,BitmapText:_n,Container:Cn,Graphics:zn,NineSlicePlane:Nn,ParticleContainer:Tn,PixiComponent:Se,PixiFiber:We,SimpleMesh:Ln,SimpleRope:Dn,Sprite:In,Stage:vn,TYPES:ve,Text:On,TilingSprite:jn,applyDefaultProps:V,createRoot:Ge,eventHandlers:D,render:Ye,unmountComponentAtNode:Ke,useApp:yn,useTick:bn,withFilters:En,withPixiApp:sn},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(index_es);var hasRequiredModule;function requireModule(){return hasRequiredModule||(hasRequiredModule=1,module.exports=require$$0),module.exports}var moduleExports=requireModule();const _tempMatrix=new Matrix;DisplayObject.prototype._cacheAsBitmap=!1;DisplayObject.prototype._cacheData=null;DisplayObject.prototype._cacheAsBitmapResolution=null;DisplayObject.prototype._cacheAsBitmapMultisample=null;class CacheData{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(DisplayObject.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(rt){rt!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=rt,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(rt){rt!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=rt,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(rt){if(this._cacheAsBitmap===rt)return;this._cacheAsBitmap=rt;let et;rt?(this._cacheData||(this._cacheData=new CacheData),et=this._cacheData,et.originalRender=this.render,et.originalRenderCanvas=this.renderCanvas,et.originalUpdateTransform=this.updateTransform,et.originalCalculateBounds=this.calculateBounds,et.originalGetLocalBounds=this.getLocalBounds,et.originalDestroy=this.destroy,et.originalContainsPoint=this.containsPoint,et.originalMask=this._mask,et.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(et=this._cacheData,et.sprite&&this._destroyCachedDisplayObject(),this.render=et.originalRender,this.renderCanvas=et.originalRenderCanvas,this.calculateBounds=et.originalCalculateBounds,this.getLocalBounds=et.originalGetLocalBounds,this.destroy=et.originalDestroy,this.updateTransform=et.originalUpdateTransform,this.containsPoint=et.originalContainsPoint,this._mask=et.originalMask,this.filterArea=et.originalFilterArea)}}});DisplayObject.prototype._renderCached=function(rt){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(rt),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(rt))};DisplayObject.prototype._initCachedDisplayObject=function(rt){var St,wt;if((St=this._cacheData)!=null&&St.sprite)return;const et=this.alpha;this.alpha=1,rt.batch.flush();const tt=this.getLocalBounds(new Rectangle,!0);if((wt=this.filters)!=null&&wt.length){const bt=this.filters[0].padding;tt.pad(bt)}const nt=this.cacheAsBitmapResolution||rt.resolution;tt.ceil(nt),tt.width=Math.max(tt.width,1/nt),tt.height=Math.max(tt.height,1/nt);const st=rt.renderTexture.current,ot=rt.renderTexture.sourceFrame.clone(),ct=rt.renderTexture.destinationFrame.clone(),dt=rt.projection.transform,ft=RenderTexture.create({width:tt.width,height:tt.height,resolution:nt,multisample:this.cacheAsBitmapMultisample??rt.multisample}),gt=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=gt,BaseTexture.addToCache(ft.baseTexture,gt),Texture.addToCache(ft,gt);const yt=this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-tt.x,-tt.y);this.render=this._cacheData.originalRender,rt.render(this,{renderTexture:ft,clear:!0,transform:yt,skipUpdateTransform:!1}),rt.framebuffer.blit(),rt.projection.transform=dt,rt.renderTexture.bind(st,ot,ct),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=et;const xt=new Sprite(ft);xt.transform.worldTransform=this.transform.worldTransform,xt.anchor.x=-(tt.x/tt.width),xt.anchor.y=-(tt.y/tt.height),xt.alpha=et,xt._bounds=this._bounds,this._cacheData.sprite=xt,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=xt.containsPoint.bind(xt)};DisplayObject.prototype._renderCachedCanvas=function(rt){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(rt),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(rt))};DisplayObject.prototype._initCachedDisplayObjectCanvas=function(rt){var yt;if((yt=this._cacheData)!=null&&yt.sprite)return;const et=this.getLocalBounds(new Rectangle,!0),tt=this.alpha;this.alpha=1;const nt=rt.canvasContext.activeContext,st=rt._projTransform,ot=this.cacheAsBitmapResolution||rt.resolution;et.ceil(ot),et.width=Math.max(et.width,1/ot),et.height=Math.max(et.height,1/ot);const ct=RenderTexture.create({width:et.width,height:et.height,resolution:ot}),dt=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=dt,BaseTexture.addToCache(ct.baseTexture,dt),Texture.addToCache(ct,dt);const ft=_tempMatrix;this.transform.localTransform.copyTo(ft),ft.invert(),ft.tx-=et.x,ft.ty-=et.y,this.renderCanvas=this._cacheData.originalRenderCanvas,rt.render(this,{renderTexture:ct,clear:!0,transform:ft,skipUpdateTransform:!1}),rt.canvasContext.activeContext=nt,rt._projTransform=st,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=tt;const gt=new Sprite(ct);gt.transform.worldTransform=this.transform.worldTransform,gt.anchor.x=-(et.x/et.width),gt.anchor.y=-(et.y/et.height),gt.alpha=tt,gt._bounds=this._bounds,this._cacheData.sprite=gt,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=rt._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=gt.containsPoint.bind(gt)};DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,BaseTexture.removeFromCache(this._cacheData.textureCacheId),Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};DisplayObject.prototype._cacheAsBitmapDestroy=function(rt){this.cacheAsBitmap=!1,this.destroy(rt)};DisplayObject.prototype.name=null;Container.prototype.getChildByName=function(rt,et){for(let tt=0,nt=this.children.length;tt<nt;tt++)if(this.children[tt].name===rt)return this.children[tt];if(et)for(let tt=0,nt=this.children.length;tt<nt;tt++){const st=this.children[tt];if(!st.getChildByName)continue;const ot=st.getChildByName(rt,!0);if(ot)return ot}return null};DisplayObject.prototype.getGlobalPosition=function(rt=new Point,et=!1){return this.parent?this.parent.toGlobal(this.position,rt,et):(rt.x=this.position.x,rt.y=this.position.y),rt};var fragment$4=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class AlphaFilter extends Filter{constructor(et=1){super(defaultVertex,fragment$4,{uAlpha:1}),this.alpha=et}get alpha(){return this.uniforms.uAlpha}set alpha(et){this.uniforms.uAlpha=et}}const GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function generateBlurFragSource(rt){const et=GAUSSIAN_VALUES[rt],tt=et.length;let nt=fragTemplate,st="";const ot="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let ct;for(let dt=0;dt<rt;dt++){let ft=ot.replace("%index%",dt.toString());ct=dt,dt>=tt&&(ct=rt-dt-1),ft=ft.replace("%value%",et[ct].toString()),st+=ft,st+=`
`}return nt=nt.replace("%blur%",st),nt=nt.replace("%size%",rt.toString()),nt}const vertTemplate=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function generateBlurVertSource(rt,et){const tt=Math.ceil(rt/2);let nt=vertTemplate,st="",ot;et?ot="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":ot="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let ct=0;ct<rt;ct++){let dt=ot.replace("%index%",ct.toString());dt=dt.replace("%sampleIndex%",`${ct-(tt-1)}.0`),st+=dt,st+=`
`}return nt=nt.replace("%blur%",st),nt=nt.replace("%size%",rt.toString()),nt}class BlurFilterPass extends Filter{constructor(et,tt=8,nt=4,st=Filter.defaultResolution,ot=5){const ct=generateBlurVertSource(ot,et),dt=generateBlurFragSource(ot);super(ct,dt),this.horizontal=et,this.resolution=st,this._quality=0,this.quality=nt,this.blur=tt}apply(et,tt,nt,st){if(nt?this.horizontal?this.uniforms.strength=1/nt.width*(nt.width/tt.width):this.uniforms.strength=1/nt.height*(nt.height/tt.height):this.horizontal?this.uniforms.strength=1/et.renderer.width*(et.renderer.width/tt.width):this.uniforms.strength=1/et.renderer.height*(et.renderer.height/tt.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)et.applyFilter(this,tt,nt,st);else{const ot=et.getFilterTexture(),ct=et.renderer;let dt=tt,ft=ot;this.state.blend=!1,et.applyFilter(this,dt,ft,CLEAR_MODES.CLEAR);for(let gt=1;gt<this.passes-1;gt++){et.bindAndClear(dt,CLEAR_MODES.BLIT),this.uniforms.uSampler=ft;const yt=ft;ft=dt,dt=yt,ct.shader.bind(this),ct.geometry.draw(5)}this.state.blend=!0,et.applyFilter(this,ft,nt,st),et.returnFilterTexture(ot)}}get blur(){return this.strength}set blur(et){this.padding=1+Math.abs(et)*2,this.strength=et}get quality(){return this._quality}set quality(et){this._quality=et,this.passes=et}}class BlurFilter extends Filter{constructor(et=8,tt=4,nt=Filter.defaultResolution,st=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new BlurFilterPass(!0,et,tt,nt,st),this.blurYFilter=new BlurFilterPass(!1,et,tt,nt,st),this.resolution=nt,this.quality=tt,this.blur=et,this.repeatEdgePixels=!1}apply(et,tt,nt,st){const ot=Math.abs(this.blurXFilter.strength),ct=Math.abs(this.blurYFilter.strength);if(ot&&ct){const dt=et.getFilterTexture();this.blurXFilter.apply(et,tt,dt,CLEAR_MODES.CLEAR),this.blurYFilter.apply(et,dt,nt,st),et.returnFilterTexture(dt)}else ct?this.blurYFilter.apply(et,tt,nt,st):this.blurXFilter.apply(et,tt,nt,st)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(et){this.blurXFilter.blur=this.blurYFilter.blur=et,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(et){this.blurXFilter.quality=this.blurYFilter.quality=et}get blurX(){return this.blurXFilter.blur}set blurX(et){this.blurXFilter.blur=et,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(et){this.blurYFilter.blur=et,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(et){this.blurYFilter.blendMode=et}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(et){this._repeatEdgePixels=et,this.updatePadding()}}var fragment$3=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class ColorMatrixFilter extends Filter{constructor(){const et={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(defaultFilterVertex,fragment$3,et),this.alpha=1}_loadMatrix(et,tt=!1){let nt=et;tt&&(this._multiply(nt,this.uniforms.m,et),nt=this._colorMatrix(nt)),this.uniforms.m=nt}_multiply(et,tt,nt){return et[0]=tt[0]*nt[0]+tt[1]*nt[5]+tt[2]*nt[10]+tt[3]*nt[15],et[1]=tt[0]*nt[1]+tt[1]*nt[6]+tt[2]*nt[11]+tt[3]*nt[16],et[2]=tt[0]*nt[2]+tt[1]*nt[7]+tt[2]*nt[12]+tt[3]*nt[17],et[3]=tt[0]*nt[3]+tt[1]*nt[8]+tt[2]*nt[13]+tt[3]*nt[18],et[4]=tt[0]*nt[4]+tt[1]*nt[9]+tt[2]*nt[14]+tt[3]*nt[19]+tt[4],et[5]=tt[5]*nt[0]+tt[6]*nt[5]+tt[7]*nt[10]+tt[8]*nt[15],et[6]=tt[5]*nt[1]+tt[6]*nt[6]+tt[7]*nt[11]+tt[8]*nt[16],et[7]=tt[5]*nt[2]+tt[6]*nt[7]+tt[7]*nt[12]+tt[8]*nt[17],et[8]=tt[5]*nt[3]+tt[6]*nt[8]+tt[7]*nt[13]+tt[8]*nt[18],et[9]=tt[5]*nt[4]+tt[6]*nt[9]+tt[7]*nt[14]+tt[8]*nt[19]+tt[9],et[10]=tt[10]*nt[0]+tt[11]*nt[5]+tt[12]*nt[10]+tt[13]*nt[15],et[11]=tt[10]*nt[1]+tt[11]*nt[6]+tt[12]*nt[11]+tt[13]*nt[16],et[12]=tt[10]*nt[2]+tt[11]*nt[7]+tt[12]*nt[12]+tt[13]*nt[17],et[13]=tt[10]*nt[3]+tt[11]*nt[8]+tt[12]*nt[13]+tt[13]*nt[18],et[14]=tt[10]*nt[4]+tt[11]*nt[9]+tt[12]*nt[14]+tt[13]*nt[19]+tt[14],et[15]=tt[15]*nt[0]+tt[16]*nt[5]+tt[17]*nt[10]+tt[18]*nt[15],et[16]=tt[15]*nt[1]+tt[16]*nt[6]+tt[17]*nt[11]+tt[18]*nt[16],et[17]=tt[15]*nt[2]+tt[16]*nt[7]+tt[17]*nt[12]+tt[18]*nt[17],et[18]=tt[15]*nt[3]+tt[16]*nt[8]+tt[17]*nt[13]+tt[18]*nt[18],et[19]=tt[15]*nt[4]+tt[16]*nt[9]+tt[17]*nt[14]+tt[18]*nt[19]+tt[19],et}_colorMatrix(et){const tt=new Float32Array(et);return tt[4]/=255,tt[9]/=255,tt[14]/=255,tt[19]/=255,tt}brightness(et,tt){const nt=[et,0,0,0,0,0,et,0,0,0,0,0,et,0,0,0,0,0,1,0];this._loadMatrix(nt,tt)}tint(et,tt){const[nt,st,ot]=Color.shared.setValue(et).toArray(),ct=[nt,0,0,0,0,0,st,0,0,0,0,0,ot,0,0,0,0,0,1,0];this._loadMatrix(ct,tt)}greyscale(et,tt){const nt=[et,et,et,0,0,et,et,et,0,0,et,et,et,0,0,0,0,0,1,0];this._loadMatrix(nt,tt)}blackAndWhite(et){const tt=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(tt,et)}hue(et,tt){et=(et||0)/180*Math.PI;const nt=Math.cos(et),st=Math.sin(et),ot=Math.sqrt,ct=1/3,dt=ot(ct),ft=nt+(1-nt)*ct,gt=ct*(1-nt)-dt*st,yt=ct*(1-nt)+dt*st,xt=ct*(1-nt)+dt*st,St=nt+ct*(1-nt),wt=ct*(1-nt)-dt*st,bt=ct*(1-nt)-dt*st,Pt=ct*(1-nt)+dt*st,Rt=nt+ct*(1-nt),Mt=[ft,gt,yt,0,0,xt,St,wt,0,0,bt,Pt,Rt,0,0,0,0,0,1,0];this._loadMatrix(Mt,tt)}contrast(et,tt){const nt=(et||0)+1,st=-.5*(nt-1),ot=[nt,0,0,0,st,0,nt,0,0,st,0,0,nt,0,st,0,0,0,1,0];this._loadMatrix(ot,tt)}saturate(et=0,tt){const nt=et*2/3+1,st=(nt-1)*-.5,ot=[nt,st,st,0,0,st,nt,st,0,0,st,st,nt,0,0,0,0,0,1,0];this._loadMatrix(ot,tt)}desaturate(){this.saturate(-1)}negative(et){const tt=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(tt,et)}sepia(et){const tt=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(tt,et)}technicolor(et){const tt=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(tt,et)}polaroid(et){const tt=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(tt,et)}toBGR(et){const tt=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(tt,et)}kodachrome(et){const tt=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(tt,et)}browni(et){const tt=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(tt,et)}vintage(et){const tt=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(tt,et)}colorTone(et,tt,nt,st,ot){et=et||.2,tt=tt||.15,nt=nt||16770432,st=st||3375104;const ct=Color.shared,[dt,ft,gt]=ct.setValue(nt).toArray(),[yt,xt,St]=ct.setValue(st).toArray(),wt=[.3,.59,.11,0,0,dt,ft,gt,et,0,yt,xt,St,tt,0,dt-yt,ft-xt,gt-St,0,0];this._loadMatrix(wt,ot)}night(et,tt){et=et||.1;const nt=[et*-2,-et,0,0,0,-et,0,et,0,0,0,et,et*2,0,0,0,0,0,1,0];this._loadMatrix(nt,tt)}predator(et,tt){const nt=[11.224130630493164*et,-4.794486999511719*et,-2.8746118545532227*et,0*et,.40342438220977783*et,-3.6330697536468506*et,9.193157196044922*et,-2.951810836791992*et,0*et,-1.316135048866272*et,-3.2184197902679443*et,-4.2375030517578125*et,7.476448059082031*et,0*et,.8044459223747253*et,0,0,0,1,0];this._loadMatrix(nt,tt)}lsd(et){const tt=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(tt,et)}reset(){const et=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(et,!1)}get matrix(){return this.uniforms.m}set matrix(et){this.uniforms.m=et}get alpha(){return this.uniforms.uAlpha}set alpha(et){this.uniforms.uAlpha=et}}ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;var fragment$2=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,vertex$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class DisplacementFilter extends Filter{constructor(et,tt){const nt=new Matrix;et.renderable=!1,super(vertex$1,fragment$2,{mapSampler:et._texture,filterMatrix:nt,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=et,this.maskMatrix=nt,tt==null&&(tt=20),this.scale=new Point(tt,tt)}apply(et,tt,nt,st){this.uniforms.filterMatrix=et.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const ot=this.maskSprite.worldTransform,ct=Math.sqrt(ot.a*ot.a+ot.b*ot.b),dt=Math.sqrt(ot.c*ot.c+ot.d*ot.d);ct!==0&&dt!==0&&(this.uniforms.rotation[0]=ot.a/ct,this.uniforms.rotation[1]=ot.b/ct,this.uniforms.rotation[2]=ot.c/dt,this.uniforms.rotation[3]=ot.d/dt),et.applyFilter(this,tt,nt,st)}get map(){return this.uniforms.mapSampler}set map(et){this.uniforms.mapSampler=et}}var fragment$1=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,vertex=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class FXAAFilter extends Filter{constructor(){super(vertex,fragment$1)}}var fragment=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class NoiseFilter extends Filter{constructor(et=.5,tt=Math.random()){super(defaultFilterVertex,fragment,{uNoise:0,uSeed:0}),this.noise=et,this.seed=tt}get noise(){return this.uniforms.uNoise}set noise(et){this.uniforms.uNoise=et}get seed(){return this.uniforms.uSeed}set seed(et){this.uniforms.uSeed=et}}const filters={AlphaFilter,BlurFilter,BlurFilterPass,ColorMatrixFilter,DisplacementFilter,FXAAFilter,NoiseFilter};Object.entries(filters).forEach(([rt,et])=>{Object.defineProperty(filters,rt,{get(){return deprecation("7.1.0",`filters.${rt} has moved to ${rt}`),et}})});class EventsTickerClass{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(et){this.removeTickerListener(),this.events=et,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(et){this._pauseUpdate=et}addTickerListener(){this.tickerAdded||!this.domElement||(Ticker.system.add(this.tickerUpdate,this,UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const et=this.events.rootPointerEvent;this.events.supportsTouchEvents&&et.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:et.clientX,clientY:et.clientY}))}tickerUpdate(et){this._deltaTime+=et,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const EventsTicker=new EventsTickerClass;class FederatedEvent{constructor(et){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=FederatedEvent.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Point,this.page=new Point,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=et}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(et,tt,nt){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(et,tt,nt,st,ot){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class FederatedMouseEvent extends FederatedEvent{constructor(){super(...arguments),this.client=new Point,this.movement=new Point,this.offset=new Point,this.global=new Point,this.screen=new Point}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(et,tt,nt){return et.worldTransform.applyInverse(nt||this.global,tt)}getModifierState(et){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(et)}initMouseEvent(et,tt,nt,st,ot,ct,dt,ft,gt,yt,xt,St,wt,bt,Pt){throw new Error("Method not implemented.")}}class FederatedPointerEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class FederatedWheelEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}FederatedWheelEvent.DOM_DELTA_PIXEL=0,FederatedWheelEvent.DOM_DELTA_LINE=1,FederatedWheelEvent.DOM_DELTA_PAGE=2;const PROPAGATION_LIMIT=2048,tempHitLocation=new Point,tempLocalMapping=new Point;class EventBoundary{constructor(et){this.dispatch=new EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=et,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(et,tt){this.mappingTable[et]||(this.mappingTable[et]=[]),this.mappingTable[et].push({fn:tt,priority:0}),this.mappingTable[et].sort((nt,st)=>nt.priority-st.priority)}dispatchEvent(et,tt){et.propagationStopped=!1,et.propagationImmediatelyStopped=!1,this.propagate(et,tt),this.dispatch.emit(tt||et.type,et)}mapEvent(et){if(!this.rootTarget)return;const tt=this.mappingTable[et.type];if(tt)for(let nt=0,st=tt.length;nt<st;nt++)tt[nt].fn(et);else console.warn(`[EventBoundary]: Event mapping not defined for ${et.type}`)}hitTest(et,tt){EventsTicker.pauseUpdate=!0;const nt=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",st=this[nt](this.rootTarget,this.rootTarget.eventMode,tempHitLocation.set(et,tt),this.hitTestFn,this.hitPruneFn);return st&&st[0]}propagate(et,tt){if(!et.target)return;const nt=et.composedPath();et.eventPhase=et.CAPTURING_PHASE;for(let st=0,ot=nt.length-1;st<ot;st++)if(et.currentTarget=nt[st],this.notifyTarget(et,tt),et.propagationStopped||et.propagationImmediatelyStopped)return;if(et.eventPhase=et.AT_TARGET,et.currentTarget=et.target,this.notifyTarget(et,tt),!(et.propagationStopped||et.propagationImmediatelyStopped)){et.eventPhase=et.BUBBLING_PHASE;for(let st=nt.length-2;st>=0;st--)if(et.currentTarget=nt[st],this.notifyTarget(et,tt),et.propagationStopped||et.propagationImmediatelyStopped)return}}all(et,tt,nt=this._allInteractiveElements){if(nt.length===0)return;et.eventPhase=et.BUBBLING_PHASE;const st=Array.isArray(tt)?tt:[tt];for(let ot=nt.length-1;ot>=0;ot--)st.forEach(ct=>{et.currentTarget=nt[ot],this.notifyTarget(et,ct)})}propagationPath(et){const tt=[et];for(let nt=0;nt<PROPAGATION_LIMIT&&et!==this.rootTarget;nt++){if(!et.parent)throw new Error("Cannot find propagation path to disconnected target");tt.push(et.parent),et=et.parent}return tt.reverse(),tt}hitTestMoveRecursive(et,tt,nt,st,ot,ct=!1){let dt=!1;if(this._interactivePrune(et))return null;if((et.eventMode==="dynamic"||tt==="dynamic")&&(EventsTicker.pauseUpdate=!1),et.interactiveChildren&&et.children){const yt=et.children;for(let xt=yt.length-1;xt>=0;xt--){const St=yt[xt],wt=this.hitTestMoveRecursive(St,this._isInteractive(tt)?tt:St.eventMode,nt,st,ot,ct||ot(et,nt));if(wt){if(wt.length>0&&!wt[wt.length-1].parent)continue;const bt=et.isInteractive();(wt.length>0||bt)&&(bt&&this._allInteractiveElements.push(et),wt.push(et)),this._hitElements.length===0&&(this._hitElements=wt),dt=!0}}}const ft=this._isInteractive(tt),gt=et.isInteractive();return ft&&gt&&this._allInteractiveElements.push(et),ct||this._hitElements.length>0?null:dt?this._hitElements:ft&&!ot(et,nt)&&st(et,nt)?gt?[et]:[]:null}hitTestRecursive(et,tt,nt,st,ot){if(this._interactivePrune(et)||ot(et,nt))return null;if((et.eventMode==="dynamic"||tt==="dynamic")&&(EventsTicker.pauseUpdate=!1),et.interactiveChildren&&et.children){const ft=et.children;for(let gt=ft.length-1;gt>=0;gt--){const yt=ft[gt],xt=this.hitTestRecursive(yt,this._isInteractive(tt)?tt:yt.eventMode,nt,st,ot);if(xt){if(xt.length>0&&!xt[xt.length-1].parent)continue;const St=et.isInteractive();return(xt.length>0||St)&&xt.push(et),xt}}}const ct=this._isInteractive(tt),dt=et.isInteractive();return ct&&st(et,nt)?dt?[et]:[]:null}_isInteractive(et){return et==="static"||et==="dynamic"}_interactivePrune(et){return!!(!et||et.isMask||!et.visible||!et.renderable||et.eventMode==="none"||et.eventMode==="passive"&&!et.interactiveChildren||et.isMask)}hitPruneFn(et,tt){var nt;if(et.hitArea&&(et.worldTransform.applyInverse(tt,tempLocalMapping),!et.hitArea.contains(tempLocalMapping.x,tempLocalMapping.y)))return!0;if(et._mask){const st=et._mask.isMaskData?et._mask.maskObject:et._mask;if(st&&!((nt=st.containsPoint)!=null&&nt.call(st,tt)))return!0}return!1}hitTestFn(et,tt){return et.eventMode==="passive"?!1:et.hitArea?!0:et.containsPoint?et.containsPoint(tt):!1}notifyTarget(et,tt){var ot,ct;tt=tt??et.type;const nt=`on${tt}`;(ct=(ot=et.currentTarget)[nt])==null||ct.call(ot,et);const st=et.eventPhase===et.CAPTURING_PHASE||et.eventPhase===et.AT_TARGET?`${tt}capture`:tt;this.notifyListeners(et,st),et.eventPhase===et.AT_TARGET&&this.notifyListeners(et,tt)}mapPointerDown(et){if(!(et instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const tt=this.createPointerEvent(et);if(this.dispatchEvent(tt,"pointerdown"),tt.pointerType==="touch")this.dispatchEvent(tt,"touchstart");else if(tt.pointerType==="mouse"||tt.pointerType==="pen"){const st=tt.button===2;this.dispatchEvent(tt,st?"rightdown":"mousedown")}const nt=this.trackingData(et.pointerId);nt.pressTargetsByButton[et.button]=tt.composedPath(),this.freeEvent(tt)}mapPointerMove(et){var ft,gt;if(!(et instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const tt=this.createPointerEvent(et);this._isPointerMoveEvent=!1;const nt=tt.pointerType==="mouse"||tt.pointerType==="pen",st=this.trackingData(et.pointerId),ot=this.findMountedTarget(st.overTargets);if(((ft=st.overTargets)==null?void 0:ft.length)>0&&ot!==tt.target){const yt=et.type==="mousemove"?"mouseout":"pointerout",xt=this.createPointerEvent(et,yt,ot);if(this.dispatchEvent(xt,"pointerout"),nt&&this.dispatchEvent(xt,"mouseout"),!tt.composedPath().includes(ot)){const St=this.createPointerEvent(et,"pointerleave",ot);for(St.eventPhase=St.AT_TARGET;St.target&&!tt.composedPath().includes(St.target);)St.currentTarget=St.target,this.notifyTarget(St),nt&&this.notifyTarget(St,"mouseleave"),St.target=St.target.parent;this.freeEvent(St)}this.freeEvent(xt)}if(ot!==tt.target){const yt=et.type==="mousemove"?"mouseover":"pointerover",xt=this.clonePointerEvent(tt,yt);this.dispatchEvent(xt,"pointerover"),nt&&this.dispatchEvent(xt,"mouseover");let St=ot==null?void 0:ot.parent;for(;St&&St!==this.rootTarget.parent&&St!==tt.target;)St=St.parent;if(!St||St===this.rootTarget.parent){const wt=this.clonePointerEvent(tt,"pointerenter");for(wt.eventPhase=wt.AT_TARGET;wt.target&&wt.target!==ot&&wt.target!==this.rootTarget.parent;)wt.currentTarget=wt.target,this.notifyTarget(wt),nt&&this.notifyTarget(wt,"mouseenter"),wt.target=wt.target.parent;this.freeEvent(wt)}this.freeEvent(xt)}const ct=[],dt=this.enableGlobalMoveEvents??!0;this.moveOnAll?ct.push("pointermove"):this.dispatchEvent(tt,"pointermove"),dt&&ct.push("globalpointermove"),tt.pointerType==="touch"&&(this.moveOnAll?ct.splice(1,0,"touchmove"):this.dispatchEvent(tt,"touchmove"),dt&&ct.push("globaltouchmove")),nt&&(this.moveOnAll?ct.splice(1,0,"mousemove"):this.dispatchEvent(tt,"mousemove"),dt&&ct.push("globalmousemove"),this.cursor=(gt=tt.target)==null?void 0:gt.cursor),ct.length>0&&this.all(tt,ct),this._allInteractiveElements.length=0,this._hitElements.length=0,st.overTargets=tt.composedPath(),this.freeEvent(tt)}mapPointerOver(et){var ct;if(!(et instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const tt=this.trackingData(et.pointerId),nt=this.createPointerEvent(et),st=nt.pointerType==="mouse"||nt.pointerType==="pen";this.dispatchEvent(nt,"pointerover"),st&&this.dispatchEvent(nt,"mouseover"),nt.pointerType==="mouse"&&(this.cursor=(ct=nt.target)==null?void 0:ct.cursor);const ot=this.clonePointerEvent(nt,"pointerenter");for(ot.eventPhase=ot.AT_TARGET;ot.target&&ot.target!==this.rootTarget.parent;)ot.currentTarget=ot.target,this.notifyTarget(ot),st&&this.notifyTarget(ot,"mouseenter"),ot.target=ot.target.parent;tt.overTargets=nt.composedPath(),this.freeEvent(nt),this.freeEvent(ot)}mapPointerOut(et){if(!(et instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const tt=this.trackingData(et.pointerId);if(tt.overTargets){const nt=et.pointerType==="mouse"||et.pointerType==="pen",st=this.findMountedTarget(tt.overTargets),ot=this.createPointerEvent(et,"pointerout",st);this.dispatchEvent(ot),nt&&this.dispatchEvent(ot,"mouseout");const ct=this.createPointerEvent(et,"pointerleave",st);for(ct.eventPhase=ct.AT_TARGET;ct.target&&ct.target!==this.rootTarget.parent;)ct.currentTarget=ct.target,this.notifyTarget(ct),nt&&this.notifyTarget(ct,"mouseleave"),ct.target=ct.target.parent;tt.overTargets=null,this.freeEvent(ot),this.freeEvent(ct)}this.cursor=null}mapPointerUp(et){if(!(et instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const tt=performance.now(),nt=this.createPointerEvent(et);if(this.dispatchEvent(nt,"pointerup"),nt.pointerType==="touch")this.dispatchEvent(nt,"touchend");else if(nt.pointerType==="mouse"||nt.pointerType==="pen"){const dt=nt.button===2;this.dispatchEvent(nt,dt?"rightup":"mouseup")}const st=this.trackingData(et.pointerId),ot=this.findMountedTarget(st.pressTargetsByButton[et.button]);let ct=ot;if(ot&&!nt.composedPath().includes(ot)){let dt=ot;for(;dt&&!nt.composedPath().includes(dt);){if(nt.currentTarget=dt,this.notifyTarget(nt,"pointerupoutside"),nt.pointerType==="touch")this.notifyTarget(nt,"touchendoutside");else if(nt.pointerType==="mouse"||nt.pointerType==="pen"){const ft=nt.button===2;this.notifyTarget(nt,ft?"rightupoutside":"mouseupoutside")}dt=dt.parent}delete st.pressTargetsByButton[et.button],ct=dt}if(ct){const dt=this.clonePointerEvent(nt,"click");dt.target=ct,dt.path=null,st.clicksByButton[et.button]||(st.clicksByButton[et.button]={clickCount:0,target:dt.target,timeStamp:tt});const ft=st.clicksByButton[et.button];if(ft.target===dt.target&&tt-ft.timeStamp<200?++ft.clickCount:ft.clickCount=1,ft.target=dt.target,ft.timeStamp=tt,dt.detail=ft.clickCount,dt.pointerType==="mouse"){const gt=dt.button===2;this.dispatchEvent(dt,gt?"rightclick":"click")}else dt.pointerType==="touch"&&this.dispatchEvent(dt,"tap");this.dispatchEvent(dt,"pointertap"),this.freeEvent(dt)}this.freeEvent(nt)}mapPointerUpOutside(et){if(!(et instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const tt=this.trackingData(et.pointerId),nt=this.findMountedTarget(tt.pressTargetsByButton[et.button]),st=this.createPointerEvent(et);if(nt){let ot=nt;for(;ot;)st.currentTarget=ot,this.notifyTarget(st,"pointerupoutside"),st.pointerType==="touch"?this.notifyTarget(st,"touchendoutside"):(st.pointerType==="mouse"||st.pointerType==="pen")&&this.notifyTarget(st,st.button===2?"rightupoutside":"mouseupoutside"),ot=ot.parent;delete tt.pressTargetsByButton[et.button]}this.freeEvent(st)}mapWheel(et){if(!(et instanceof FederatedWheelEvent)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const tt=this.createWheelEvent(et);this.dispatchEvent(tt),this.freeEvent(tt)}findMountedTarget(et){if(!et)return null;let tt=et[0];for(let nt=1;nt<et.length&&et[nt].parent===tt;nt++)tt=et[nt];return tt}createPointerEvent(et,tt,nt){const st=this.allocateEvent(FederatedPointerEvent);return this.copyPointerData(et,st),this.copyMouseData(et,st),this.copyData(et,st),st.nativeEvent=et.nativeEvent,st.originalEvent=et,st.target=nt??this.hitTest(st.global.x,st.global.y)??this._hitElements[0],typeof tt=="string"&&(st.type=tt),st}createWheelEvent(et){const tt=this.allocateEvent(FederatedWheelEvent);return this.copyWheelData(et,tt),this.copyMouseData(et,tt),this.copyData(et,tt),tt.nativeEvent=et.nativeEvent,tt.originalEvent=et,tt.target=this.hitTest(tt.global.x,tt.global.y),tt}clonePointerEvent(et,tt){const nt=this.allocateEvent(FederatedPointerEvent);return nt.nativeEvent=et.nativeEvent,nt.originalEvent=et.originalEvent,this.copyPointerData(et,nt),this.copyMouseData(et,nt),this.copyData(et,nt),nt.target=et.target,nt.path=et.composedPath().slice(),nt.type=tt??nt.type,nt}copyWheelData(et,tt){tt.deltaMode=et.deltaMode,tt.deltaX=et.deltaX,tt.deltaY=et.deltaY,tt.deltaZ=et.deltaZ}copyPointerData(et,tt){et instanceof FederatedPointerEvent&&tt instanceof FederatedPointerEvent&&(tt.pointerId=et.pointerId,tt.width=et.width,tt.height=et.height,tt.isPrimary=et.isPrimary,tt.pointerType=et.pointerType,tt.pressure=et.pressure,tt.tangentialPressure=et.tangentialPressure,tt.tiltX=et.tiltX,tt.tiltY=et.tiltY,tt.twist=et.twist)}copyMouseData(et,tt){et instanceof FederatedMouseEvent&&tt instanceof FederatedMouseEvent&&(tt.altKey=et.altKey,tt.button=et.button,tt.buttons=et.buttons,tt.client.copyFrom(et.client),tt.ctrlKey=et.ctrlKey,tt.metaKey=et.metaKey,tt.movement.copyFrom(et.movement),tt.screen.copyFrom(et.screen),tt.shiftKey=et.shiftKey,tt.global.copyFrom(et.global))}copyData(et,tt){tt.isTrusted=et.isTrusted,tt.srcElement=et.srcElement,tt.timeStamp=performance.now(),tt.type=et.type,tt.detail=et.detail,tt.view=et.view,tt.which=et.which,tt.layer.copyFrom(et.layer),tt.page.copyFrom(et.page)}trackingData(et){return this.mappingState.trackingData[et]||(this.mappingState.trackingData[et]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[et]}allocateEvent(et){this.eventPool.has(et)||this.eventPool.set(et,[]);const tt=this.eventPool.get(et).pop()||new et(this);return tt.eventPhase=tt.NONE,tt.currentTarget=null,tt.path=null,tt.target=null,tt}freeEvent(et){if(et.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const tt=et.constructor;this.eventPool.has(tt)||this.eventPool.set(tt,[]),this.eventPool.get(tt).push(et)}notifyListeners(et,tt){const nt=et.currentTarget._events[tt];if(nt&&et.currentTarget.isInteractive())if("fn"in nt)nt.once&&et.currentTarget.removeListener(tt,nt.fn,void 0,!0),nt.fn.call(nt.context,et);else for(let st=0,ot=nt.length;st<ot&&!et.propagationImmediatelyStopped;st++)nt[st].once&&et.currentTarget.removeListener(tt,nt[st].fn,void 0,!0),nt[st].fn.call(nt[st].context,et)}}const MOUSE_POINTER_ID=1,TOUCH_TO_POINTER={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},_EventSystem=class mf{constructor(et){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=et,this.rootBoundary=new EventBoundary(null),EventsTicker.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new FederatedPointerEvent(null),this.rootWheelEvent=new FederatedWheelEvent(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...mf.defaultEventFeatures},{set:(tt,nt,st)=>(nt==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=st),tt[nt]=st,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(et){const{view:tt,resolution:nt}=this.renderer;this.setTargetElement(tt),this.resolution=nt,mf._defaultEventMode=et.eventMode??"auto",Object.assign(this.features,et.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(et){this.resolution=et}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(et){et=et||"default";let tt=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(tt=!1),this.currentCursor===et)return;this.currentCursor=et;const nt=this.cursorStyles[et];if(nt)switch(typeof nt){case"string":tt&&(this.domElement.style.cursor=nt);break;case"function":nt(et);break;case"object":tt&&Object.assign(this.domElement.style,nt);break}else tt&&typeof et=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,et)&&(this.domElement.style.cursor=et)}get pointer(){return this.rootPointerEvent}onPointerDown(et){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const tt=this.normalizeToPointerData(et);this.autoPreventDefault&&tt[0].isNormalized&&(et.cancelable||!("cancelable"in et))&&et.preventDefault();for(let nt=0,st=tt.length;nt<st;nt++){const ot=tt[nt],ct=this.bootstrapEvent(this.rootPointerEvent,ot);this.rootBoundary.mapEvent(ct)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(et){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,EventsTicker.pointerMoved();const tt=this.normalizeToPointerData(et);for(let nt=0,st=tt.length;nt<st;nt++){const ot=this.bootstrapEvent(this.rootPointerEvent,tt[nt]);this.rootBoundary.mapEvent(ot)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(et){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let tt=et.target;et.composedPath&&et.composedPath().length>0&&(tt=et.composedPath()[0]);const nt=tt!==this.domElement?"outside":"",st=this.normalizeToPointerData(et);for(let ot=0,ct=st.length;ot<ct;ot++){const dt=this.bootstrapEvent(this.rootPointerEvent,st[ot]);dt.type+=nt,this.rootBoundary.mapEvent(dt)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(et){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const tt=this.normalizeToPointerData(et);for(let nt=0,st=tt.length;nt<st;nt++){const ot=this.bootstrapEvent(this.rootPointerEvent,tt[nt]);this.rootBoundary.mapEvent(ot)}this.setCursor(this.rootBoundary.cursor)}onWheel(et){if(!this.features.wheel)return;const tt=this.normalizeWheelEvent(et);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(tt)}setTargetElement(et){this.removeEvents(),this.domElement=et,EventsTicker.domElement=et,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;EventsTicker.addTickerListener();const et=this.domElement.style;et&&(globalThis.navigator.msPointerEnabled?(et.msContentZooming="none",et.msTouchAction="none"):this.supportsPointerEvents&&(et.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;EventsTicker.removeTickerListener();const et=this.domElement.style;globalThis.navigator.msPointerEnabled?(et.msContentZooming="",et.msTouchAction=""):this.supportsPointerEvents&&(et.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(et,tt,nt){const st=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},ot=1/this.resolution;et.x=(tt-st.left)*(this.domElement.width/st.width)*ot,et.y=(nt-st.top)*(this.domElement.height/st.height)*ot}normalizeToPointerData(et){const tt=[];if(this.supportsTouchEvents&&et instanceof TouchEvent)for(let nt=0,st=et.changedTouches.length;nt<st;nt++){const ot=et.changedTouches[nt];typeof ot.button>"u"&&(ot.button=0),typeof ot.buttons>"u"&&(ot.buttons=1),typeof ot.isPrimary>"u"&&(ot.isPrimary=et.touches.length===1&&et.type==="touchstart"),typeof ot.width>"u"&&(ot.width=ot.radiusX||1),typeof ot.height>"u"&&(ot.height=ot.radiusY||1),typeof ot.tiltX>"u"&&(ot.tiltX=0),typeof ot.tiltY>"u"&&(ot.tiltY=0),typeof ot.pointerType>"u"&&(ot.pointerType="touch"),typeof ot.pointerId>"u"&&(ot.pointerId=ot.identifier||0),typeof ot.pressure>"u"&&(ot.pressure=ot.force||.5),typeof ot.twist>"u"&&(ot.twist=0),typeof ot.tangentialPressure>"u"&&(ot.tangentialPressure=0),typeof ot.layerX>"u"&&(ot.layerX=ot.offsetX=ot.clientX),typeof ot.layerY>"u"&&(ot.layerY=ot.offsetY=ot.clientY),ot.isNormalized=!0,ot.type=et.type,tt.push(ot)}else if(!globalThis.MouseEvent||et instanceof MouseEvent&&(!this.supportsPointerEvents||!(et instanceof globalThis.PointerEvent))){const nt=et;typeof nt.isPrimary>"u"&&(nt.isPrimary=!0),typeof nt.width>"u"&&(nt.width=1),typeof nt.height>"u"&&(nt.height=1),typeof nt.tiltX>"u"&&(nt.tiltX=0),typeof nt.tiltY>"u"&&(nt.tiltY=0),typeof nt.pointerType>"u"&&(nt.pointerType="mouse"),typeof nt.pointerId>"u"&&(nt.pointerId=MOUSE_POINTER_ID),typeof nt.pressure>"u"&&(nt.pressure=.5),typeof nt.twist>"u"&&(nt.twist=0),typeof nt.tangentialPressure>"u"&&(nt.tangentialPressure=0),nt.isNormalized=!0,tt.push(nt)}else tt.push(et);return tt}normalizeWheelEvent(et){const tt=this.rootWheelEvent;return this.transferMouseData(tt,et),tt.deltaX=et.deltaX,tt.deltaY=et.deltaY,tt.deltaZ=et.deltaZ,tt.deltaMode=et.deltaMode,this.mapPositionToPoint(tt.screen,et.clientX,et.clientY),tt.global.copyFrom(tt.screen),tt.offset.copyFrom(tt.screen),tt.nativeEvent=et,tt.type=et.type,tt}bootstrapEvent(et,tt){return et.originalEvent=null,et.nativeEvent=tt,et.pointerId=tt.pointerId,et.width=tt.width,et.height=tt.height,et.isPrimary=tt.isPrimary,et.pointerType=tt.pointerType,et.pressure=tt.pressure,et.tangentialPressure=tt.tangentialPressure,et.tiltX=tt.tiltX,et.tiltY=tt.tiltY,et.twist=tt.twist,this.transferMouseData(et,tt),this.mapPositionToPoint(et.screen,tt.clientX,tt.clientY),et.global.copyFrom(et.screen),et.offset.copyFrom(et.screen),et.isTrusted=tt.isTrusted,et.type==="pointerleave"&&(et.type="pointerout"),et.type.startsWith("mouse")&&(et.type=et.type.replace("mouse","pointer")),et.type.startsWith("touch")&&(et.type=TOUCH_TO_POINTER[et.type]||et.type),et}transferMouseData(et,tt){et.isTrusted=tt.isTrusted,et.srcElement=tt.srcElement,et.timeStamp=performance.now(),et.type=tt.type,et.altKey=tt.altKey,et.button=tt.button,et.buttons=tt.buttons,et.client.x=tt.clientX,et.client.y=tt.clientY,et.ctrlKey=tt.ctrlKey,et.metaKey=tt.metaKey,et.movement.x=tt.movementX,et.movement.y=tt.movementY,et.page.x=tt.pageX,et.page.y=tt.pageY,et.relatedTarget=null,et.shiftKey=tt.shiftKey}};_EventSystem.extension={name:"events",type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem]},_EventSystem.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let EventSystem=_EventSystem;extensions$1.add(EventSystem);function convertEventModeToInteractiveMode(rt){return rt==="dynamic"||rt==="static"}const FederatedDisplayObject={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??convertEventModeToInteractiveMode(EventSystem.defaultEventMode)},set interactive(rt){deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=rt,this.eventMode=rt?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??EventSystem.defaultEventMode},set eventMode(rt){this._internalInteractive=convertEventModeToInteractiveMode(rt),this._internalEventMode=rt},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(rt,et,tt){const nt=typeof tt=="boolean"&&tt||typeof tt=="object"&&tt.capture,st=typeof tt=="object"?tt.signal:void 0,ot=typeof tt=="object"?tt.once===!0:!1,ct=typeof et=="function"?void 0:et;rt=nt?`${rt}capture`:rt;const dt=typeof et=="function"?et:et.handleEvent,ft=this;st&&st.addEventListener("abort",()=>{ft.off(rt,dt,ct)}),ot?ft.once(rt,dt,ct):ft.on(rt,dt,ct)},removeEventListener(rt,et,tt){const nt=typeof tt=="boolean"&&tt||typeof tt=="object"&&tt.capture,st=typeof et=="function"?void 0:et;rt=nt?`${rt}capture`:rt,et=typeof et=="function"?et:et.handleEvent,this.off(rt,et,st)},dispatchEvent(rt){if(!(rt instanceof FederatedEvent))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return rt.defaultPrevented=!1,rt.path=null,rt.target=this,rt.manager.dispatchEvent(rt),!rt.defaultPrevented}};DisplayObject.mixin(FederatedDisplayObject);const accessibleTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};DisplayObject.mixin(accessibleTarget);const KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2;class AccessibilityManager{constructor(et){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(isMobile.tablet||isMobile.phone)&&this.createTouchHook();const tt=document.createElement("div");tt.style.width=`${DIV_TOUCH_SIZE}px`,tt.style.height=`${DIV_TOUCH_SIZE}px`,tt.style.position="absolute",tt.style.top=`${DIV_TOUCH_POS_X}px`,tt.style.left=`${DIV_TOUCH_POS_Y}px`,tt.style.zIndex=DIV_TOUCH_ZINDEX.toString(),this.div=tt,this.renderer=et,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const et=document.createElement("button");et.style.width=`${DIV_HOOK_SIZE}px`,et.style.height=`${DIV_HOOK_SIZE}px`,et.style.position="absolute",et.style.top=`${DIV_HOOK_POS_X}px`,et.style.left=`${DIV_HOOK_POS_Y}px`,et.style.zIndex=DIV_HOOK_ZINDEX.toString(),et.style.backgroundColor="#FF0000",et.title="select to enable accessibility for this content",et.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(et),this._hookDiv=et}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var et;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(et=this.renderer.view.parentNode)==null||et.appendChild(this.div))}deactivate(){var et;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(et=this.div.parentNode)==null||et.removeChild(this.div))}updateAccessibleObjects(et){if(!et.visible||!et.accessibleChildren)return;et.accessible&&et.isInteractive()&&(et._accessibleActive||this.addChild(et),et.renderId=this.renderId);const tt=et.children;if(tt)for(let nt=0;nt<tt.length;nt++)this.updateAccessibleObjects(tt[nt])}update(){const et=performance.now();if(isMobile.android.device&&et<this.androidUpdateCount||(this.androidUpdateCount=et+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:tt,y:nt,width:st,height:ot}=this.renderer.view.getBoundingClientRect(),{width:ct,height:dt,resolution:ft}=this.renderer,gt=st/ct*ft,yt=ot/dt*ft;let xt=this.div;xt.style.left=`${tt}px`,xt.style.top=`${nt}px`,xt.style.width=`${ct}px`,xt.style.height=`${dt}px`;for(let St=0;St<this.children.length;St++){const wt=this.children[St];if(wt.renderId!==this.renderId)wt._accessibleActive=!1,removeItems(this.children,St,1),this.div.removeChild(wt._accessibleDiv),this.pool.push(wt._accessibleDiv),wt._accessibleDiv=null,St--;else{xt=wt._accessibleDiv;let bt=wt.hitArea;const Pt=wt.worldTransform;wt.hitArea?(xt.style.left=`${(Pt.tx+bt.x*Pt.a)*gt}px`,xt.style.top=`${(Pt.ty+bt.y*Pt.d)*yt}px`,xt.style.width=`${bt.width*Pt.a*gt}px`,xt.style.height=`${bt.height*Pt.d*yt}px`):(bt=wt.getBounds(),this.capHitArea(bt),xt.style.left=`${bt.x*gt}px`,xt.style.top=`${bt.y*yt}px`,xt.style.width=`${bt.width*gt}px`,xt.style.height=`${bt.height*yt}px`,xt.title!==wt.accessibleTitle&&wt.accessibleTitle!==null&&(xt.title=wt.accessibleTitle),xt.getAttribute("aria-label")!==wt.accessibleHint&&wt.accessibleHint!==null&&xt.setAttribute("aria-label",wt.accessibleHint)),(wt.accessibleTitle!==xt.title||wt.tabIndex!==xt.tabIndex)&&(xt.title=wt.accessibleTitle,xt.tabIndex=wt.tabIndex,this.debug&&this.updateDebugHTML(xt))}}this.renderId++}updateDebugHTML(et){et.innerHTML=`type: ${et.type}</br> title : ${et.title}</br> tabIndex: ${et.tabIndex}`}capHitArea(et){et.x<0&&(et.width+=et.x,et.x=0),et.y<0&&(et.height+=et.y,et.y=0);const{width:tt,height:nt}=this.renderer;et.x+et.width>tt&&(et.width=tt-et.x),et.y+et.height>nt&&(et.height=nt-et.y)}addChild(et){let tt=this.pool.pop();tt||(tt=document.createElement("button"),tt.style.width=`${DIV_TOUCH_SIZE}px`,tt.style.height=`${DIV_TOUCH_SIZE}px`,tt.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",tt.style.position="absolute",tt.style.zIndex=DIV_TOUCH_ZINDEX.toString(),tt.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?tt.setAttribute("aria-live","off"):tt.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?tt.setAttribute("aria-relevant","additions"):tt.setAttribute("aria-relevant","text"),tt.addEventListener("click",this._onClick.bind(this)),tt.addEventListener("focus",this._onFocus.bind(this)),tt.addEventListener("focusout",this._onFocusOut.bind(this))),tt.style.pointerEvents=et.accessiblePointerEvents,tt.type=et.accessibleType,et.accessibleTitle&&et.accessibleTitle!==null?tt.title=et.accessibleTitle:(!et.accessibleHint||et.accessibleHint===null)&&(tt.title=`displayObject ${et.tabIndex}`),et.accessibleHint&&et.accessibleHint!==null&&tt.setAttribute("aria-label",et.accessibleHint),this.debug&&this.updateDebugHTML(tt),et._accessibleActive=!0,et._accessibleDiv=tt,tt.displayObject=et,this.children.push(et),this.div.appendChild(et._accessibleDiv),et._accessibleDiv.tabIndex=et.tabIndex}_dispatchEvent(et,tt){const{displayObject:nt}=et.target,st=this.renderer.events.rootBoundary,ot=Object.assign(new FederatedEvent(st),{target:nt});st.rootTarget=this.renderer.lastObjectRendered,tt.forEach(ct=>st.dispatchEvent(ot,ct))}_onClick(et){this._dispatchEvent(et,["click","pointertap","tap"])}_onFocus(et){et.target.getAttribute("aria-live")||et.target.setAttribute("aria-live","assertive"),this._dispatchEvent(et,["mouseover"])}_onFocusOut(et){et.target.getAttribute("aria-live")||et.target.setAttribute("aria-live","polite"),this._dispatchEvent(et,["mouseout"])}_onKeyDown(et){et.keyCode===KEY_CODE_TAB&&this.activate()}_onMouseMove(et){et.movementX===0&&et.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}AccessibilityManager.extension={name:"accessibility",type:[ExtensionType.RendererPlugin,ExtensionType.CanvasRendererPlugin]};extensions$1.add(AccessibilityManager);var INTERNAL_FORMATS=(rt=>(rt[rt.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",rt[rt.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",rt[rt.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",rt[rt.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",rt[rt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",rt[rt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",rt[rt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",rt[rt.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",rt[rt.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",rt[rt.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",rt[rt.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",rt[rt.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",rt[rt.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",rt[rt.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",rt[rt.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",rt[rt.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",rt[rt.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",rt[rt.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",rt[rt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",rt[rt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",rt[rt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",rt[rt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",rt[rt.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",rt[rt.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",rt[rt.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",rt[rt.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",rt[rt.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",rt[rt.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",rt[rt.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",rt[rt.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",rt[rt.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",rt))(INTERNAL_FORMATS||{});const INTERNAL_FORMAT_TO_BYTES_PER_PIXEL={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let storedGl,extensions;function getCompressedTextureExtensions(){extensions={bptc:storedGl.getExtension("EXT_texture_compression_bptc"),astc:storedGl.getExtension("WEBGL_compressed_texture_astc"),etc:storedGl.getExtension("WEBGL_compressed_texture_etc"),s3tc:storedGl.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:storedGl.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:storedGl.getExtension("WEBGL_compressed_texture_pvrtc")||storedGl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:storedGl.getExtension("WEBGL_compressed_texture_etc1"),atc:storedGl.getExtension("WEBGL_compressed_texture_atc")}}const detectCompressedTextures={extension:{type:ExtensionType.DetectionParser,priority:2},test:async()=>{const rt=settings.ADAPTER.createCanvas().getContext("webgl");return rt?(storedGl=rt,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async rt=>{extensions||getCompressedTextureExtensions();const et=[];for(const tt in extensions)extensions[tt]&&et.push(tt);return[...et,...rt]},remove:async rt=>(extensions||getCompressedTextureExtensions(),rt.filter(et=>!(et in extensions)))};extensions$1.add(detectCompressedTextures);class BlobResource extends BufferResource{constructor(et,tt={width:1,height:1,autoLoad:!0}){let nt,st;typeof et=="string"?(nt=et,st=new Uint8Array):(nt=null,st=et),super(st,tt),this.origin=nt,this.buffer=st?new ViewableBuffer(st):null,this._load=null,this.loaded=!1,this.origin!==null&&tt.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(et){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(et=>et.blob()).then(et=>et.arrayBuffer()).then(et=>(this.data=new Uint32Array(et),this.buffer=new ViewableBuffer(et),this.loaded=!0,this.onBlobLoaded(et),this.update(),this)),this._load)}}class CompressedTextureResource extends BlobResource{constructor(et,tt){super(et,tt),this.format=tt.format,this.levels=tt.levels||1,this._width=tt.width,this._height=tt.height,this._extension=CompressedTextureResource._formatToExtension(this.format),(tt.levelBuffers||this.buffer)&&(this._levelBuffers=tt.levelBuffers||CompressedTextureResource._createLevelBuffers(et instanceof Uint8Array?et:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(et,tt,nt){const st=et.gl;if(!et.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;st.pixelStorei(st.UNPACK_ALIGNMENT,4);for(let ot=0,ct=this.levels;ot<ct;ot++){const{levelID:dt,levelWidth:ft,levelHeight:gt,levelBuffer:yt}=this._levelBuffers[ot];st.compressedTexImage2D(st.TEXTURE_2D,dt,this.format,ft,gt,0,yt)}return!0}onBlobLoaded(){this._levelBuffers=CompressedTextureResource._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(et){if(et>=33776&&et<=33779)return"s3tc";if(et>=35916&&et<=35919)return"s3tc_sRGB";if(et>=37488&&et<=37497)return"etc";if(et>=35840&&et<=35843)return"pvrtc";if(et===36196)return"etc1";if(et===35986||et===35987||et===34798)return"atc";if(et>=36492&&et<=36495)return"bptc";if(et===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${et}`)}static _createLevelBuffers(et,tt,nt,st,ot,ct,dt){const ft=new Array(nt);let gt=et.byteOffset,yt=ct,xt=dt,St=yt+st-1&~(st-1),wt=xt+ot-1&~(ot-1),bt=St*wt*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[tt];for(let Pt=0;Pt<nt;Pt++)ft[Pt]={levelID:Pt,levelWidth:nt>1?yt:St,levelHeight:nt>1?xt:wt,levelBuffer:new Uint8Array(et.buffer,gt,bt)},gt+=bt,yt=yt>>1||1,xt=xt>>1||1,St=yt+st-1&~(st-1),wt=xt+ot-1&~(ot-1),bt=St*wt*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[tt];return ft}}const DDS_MAGIC_SIZE=4,DDS_HEADER_SIZE=124,DDS_HEADER_PF_SIZE=32,DDS_HEADER_DX10_SIZE=20,DDS_MAGIC=542327876,DDS_FIELDS={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},DDS_PF_FIELDS={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},DDS_DX10_FIELDS={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},PF_FLAGS=1,DDPF_ALPHA=2,DDPF_FOURCC=4,DDPF_RGB=64,DDPF_YUV=512,DDPF_LUMINANCE=131072,FOURCC_DXT1=827611204,FOURCC_DXT3=861165636,FOURCC_DXT5=894720068,FOURCC_DX10=808540228,DDS_RESOURCE_MISC_TEXTURECUBE=4,FOURCC_TO_FORMAT={[FOURCC_DXT1]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,[FOURCC_DXT3]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,[FOURCC_DXT5]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT},DXGI_TO_FORMAT={70:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:INTERNAL_FORMATS.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:INTERNAL_FORMATS.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:INTERNAL_FORMATS.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function parseDDS(rt){const et=new Uint32Array(rt);if(et[0]!==DDS_MAGIC)throw new Error("Invalid DDS file magic word");const tt=new Uint32Array(rt,0,DDS_HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT),nt=tt[DDS_FIELDS.HEIGHT],st=tt[DDS_FIELDS.WIDTH],ot=tt[DDS_FIELDS.MIPMAP_COUNT],ct=new Uint32Array(rt,DDS_FIELDS.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DDS_HEADER_PF_SIZE/Uint32Array.BYTES_PER_ELEMENT),dt=ct[PF_FLAGS];if(dt&DDPF_FOURCC){const ft=ct[DDS_PF_FIELDS.FOURCC];if(ft!==FOURCC_DX10){const kt=FOURCC_TO_FORMAT[ft],Dt=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,zt=new Uint8Array(rt,Dt);return[new CompressedTextureResource(zt,{format:kt,width:st,height:nt,levels:ot})]}const gt=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,yt=new Uint32Array(et.buffer,gt,DDS_HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT),xt=yt[DDS_DX10_FIELDS.DXGI_FORMAT],St=yt[DDS_DX10_FIELDS.RESOURCE_DIMENSION],wt=yt[DDS_DX10_FIELDS.MISC_FLAG],bt=yt[DDS_DX10_FIELDS.ARRAY_SIZE],Pt=DXGI_TO_FORMAT[xt];if(Pt===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${xt}`);if(wt===DDS_RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(St===6)throw new Error("DDSParser does not supported 3D texture data");const Rt=new Array,Mt=DDS_MAGIC_SIZE+DDS_HEADER_SIZE+DDS_HEADER_DX10_SIZE;if(bt===1)Rt.push(new Uint8Array(rt,Mt));else{const kt=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[Pt];let Dt=0,zt=st,Lt=nt;for(let Nt=0;Nt<ot;Nt++){const Jt=Math.max(1,zt+3&-4),ur=Math.max(1,Lt+3&-4),dr=Jt*ur*kt;Dt+=dr,zt=zt>>>1,Lt=Lt>>>1}let Yt=Mt;for(let Nt=0;Nt<bt;Nt++)Rt.push(new Uint8Array(rt,Yt,Dt)),Yt+=Dt}return Rt.map(kt=>new CompressedTextureResource(kt,{format:Pt,width:st,height:nt,levels:ot}))}throw dt&DDPF_RGB?new Error("DDSParser does not support uncompressed texture data."):dt&DDPF_YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):dt&DDPF_LUMINANCE?new Error("DDSParser does not support single-channel (lumninance) texture data!"):dt&DDPF_ALPHA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const FILE_IDENTIFIER=[171,75,84,88,32,49,49,187,13,10,26,10],ENDIANNESS=67305985,KTX_FIELDS={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},FILE_HEADER_SIZE=64,TYPES_TO_BYTES_PER_COMPONENT={[TYPES.UNSIGNED_BYTE]:1,[TYPES.UNSIGNED_SHORT]:2,[TYPES.INT]:4,[TYPES.UNSIGNED_INT]:4,[TYPES.FLOAT]:4,[TYPES.HALF_FLOAT]:8},FORMATS_TO_COMPONENTS={[FORMATS.RGBA]:4,[FORMATS.RGB]:3,[FORMATS.RG]:2,[FORMATS.RED]:1,[FORMATS.LUMINANCE]:1,[FORMATS.LUMINANCE_ALPHA]:2,[FORMATS.ALPHA]:1},TYPES_TO_BYTES_PER_PIXEL={[TYPES.UNSIGNED_SHORT_4_4_4_4]:2,[TYPES.UNSIGNED_SHORT_5_5_5_1]:2,[TYPES.UNSIGNED_SHORT_5_6_5]:2};function parseKTX(rt,et,tt=!1){const nt=new DataView(et);if(!validate(rt,nt))return null;const st=nt.getUint32(KTX_FIELDS.ENDIANNESS,!0)===ENDIANNESS,ot=nt.getUint32(KTX_FIELDS.GL_TYPE,st),ct=nt.getUint32(KTX_FIELDS.GL_FORMAT,st),dt=nt.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT,st),ft=nt.getUint32(KTX_FIELDS.PIXEL_WIDTH,st),gt=nt.getUint32(KTX_FIELDS.PIXEL_HEIGHT,st)||1,yt=nt.getUint32(KTX_FIELDS.PIXEL_DEPTH,st)||1,xt=nt.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS,st)||1,St=nt.getUint32(KTX_FIELDS.NUMBER_OF_FACES,st),wt=nt.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS,st),bt=nt.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA,st);if(gt===0||yt!==1)throw new Error("Only 2D textures are supported");if(St!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(xt!==1)throw new Error("WebGL does not support array textures");const Pt=4,Rt=4,Mt=ft+3&-4,kt=gt+3&-4,Dt=new Array(xt);let zt=ft*gt;ot===0&&(zt=Mt*kt);let Lt;if(ot!==0?TYPES_TO_BYTES_PER_COMPONENT[ot]?Lt=TYPES_TO_BYTES_PER_COMPONENT[ot]*FORMATS_TO_COMPONENTS[ct]:Lt=TYPES_TO_BYTES_PER_PIXEL[ot]:Lt=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[dt],Lt===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const Yt=tt?parseKvData(nt,bt,st):null;let Nt=zt*Lt,Jt=ft,ur=gt,dr=Mt,Tr=kt,Kt=FILE_HEADER_SIZE+bt;for(let Zt=0;Zt<wt;Zt++){const lr=nt.getUint32(Kt,st);let vr=Kt+4;for(let Ut=0;Ut<xt;Ut++){let Ht=Dt[Ut];Ht||(Ht=Dt[Ut]=new Array(wt)),Ht[Zt]={levelID:Zt,levelWidth:wt>1||ot!==0?Jt:dr,levelHeight:wt>1||ot!==0?ur:Tr,levelBuffer:new Uint8Array(et,vr,Nt)},vr+=Nt}Kt+=lr+4,Kt=Kt%4!==0?Kt+4-Kt%4:Kt,Jt=Jt>>1||1,ur=ur>>1||1,dr=Jt+Pt-1&-4,Tr=ur+Rt-1&-4,Nt=dr*Tr*Lt}return ot!==0?{uncompressed:Dt.map(Zt=>{let lr=Zt[0].levelBuffer,vr=!1;return ot===TYPES.FLOAT?lr=new Float32Array(Zt[0].levelBuffer.buffer,Zt[0].levelBuffer.byteOffset,Zt[0].levelBuffer.byteLength/4):ot===TYPES.UNSIGNED_INT?(vr=!0,lr=new Uint32Array(Zt[0].levelBuffer.buffer,Zt[0].levelBuffer.byteOffset,Zt[0].levelBuffer.byteLength/4)):ot===TYPES.INT&&(vr=!0,lr=new Int32Array(Zt[0].levelBuffer.buffer,Zt[0].levelBuffer.byteOffset,Zt[0].levelBuffer.byteLength/4)),{resource:new BufferResource(lr,{width:Zt[0].levelWidth,height:Zt[0].levelHeight}),type:ot,format:vr?convertFormatToInteger(ct):ct}}),kvData:Yt}:{compressed:Dt.map(Zt=>new CompressedTextureResource(null,{format:dt,width:ft,height:gt,levels:wt,levelBuffers:Zt})),kvData:Yt}}function validate(rt,et){for(let tt=0;tt<FILE_IDENTIFIER.length;tt++)if(et.getUint8(tt)!==FILE_IDENTIFIER[tt])return console.error(`${rt} is not a valid *.ktx file!`),!1;return!0}function convertFormatToInteger(rt){switch(rt){case FORMATS.RGBA:return FORMATS.RGBA_INTEGER;case FORMATS.RGB:return FORMATS.RGB_INTEGER;case FORMATS.RG:return FORMATS.RG_INTEGER;case FORMATS.RED:return FORMATS.RED_INTEGER;default:return rt}}function parseKvData(rt,et,tt){const nt=new Map;let st=0;for(;st<et;){const ot=rt.getUint32(FILE_HEADER_SIZE+st,tt),ct=FILE_HEADER_SIZE+st+4,dt=3-(ot+3)%4;if(ot===0||ot>et-st){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let ft=0;for(;ft<ot&&rt.getUint8(ct+ft)!==0;ft++);if(ft===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const gt=new TextDecoder().decode(new Uint8Array(rt.buffer,ct,ft)),yt=new DataView(rt.buffer,ct+ft+1,ot-ft-1);nt.set(gt,yt),st+=4+ot+dt}return nt}const loadDDS={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadDDS",test(rt){return checkExtension(rt,".dds")},async load(rt,et,tt){const nt=await(await settings.ADAPTER.fetch(rt)).arrayBuffer(),st=parseDDS(nt).map(ot=>{const ct=new BaseTexture(ot,{mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(rt),...et.data});return createTexture(ct,tt,rt)});return st.length===1?st[0]:st},unload(rt){Array.isArray(rt)?rt.forEach(et=>et.destroy(!0)):rt.destroy(!0)}};extensions$1.add(loadDDS);const loadKTX={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadKTX",test(rt){return checkExtension(rt,".ktx")},async load(rt,et,tt){const nt=await(await settings.ADAPTER.fetch(rt)).arrayBuffer(),{compressed:st,uncompressed:ot,kvData:ct}=parseKTX(rt,nt),dt=st??ot,ft={mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(rt),...et.data},gt=dt.map(yt=>{dt===ot&&Object.assign(ft,{type:yt.type,format:yt.format});const xt=yt.resource??yt,St=new BaseTexture(xt,ft);return St.ktxKeyValueData=ct,createTexture(St,tt,rt)});return gt.length===1?gt[0]:gt},unload(rt){Array.isArray(rt)?rt.forEach(et=>et.destroy(!0)):rt.destroy(!0)}};extensions$1.add(loadKTX);const knownFormats=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],resolveCompressedTextureUrl={extension:ExtensionType.ResolveParser,test:rt=>{const et=path.extname(rt).slice(1);return["basis","ktx","dds"].includes(et)},parse:rt=>{var nt,st;const et=rt.split("."),tt=et.pop();if(["ktx","dds"].includes(tt)){const ot=et.pop();if(knownFormats.includes(ot))return{resolution:parseFloat(((nt=settings.RETINA_PREFIX.exec(rt))==null?void 0:nt[1])??"1"),format:ot,src:rt}}return{resolution:parseFloat(((st=settings.RETINA_PREFIX.exec(rt))==null?void 0:st[1])??"1"),format:tt,src:rt}}};extensions$1.add(resolveCompressedTextureUrl);const TEMP_RECT=new Rectangle,BYTES_PER_PIXEL=4,_Extract=class Ih{constructor(et){this.renderer=et,this._rendererPremultipliedAlpha=!1}contextChange(){var tt;const et=(tt=this.renderer)==null?void 0:tt.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(et&&et.alpha&&et.premultipliedAlpha)}async image(et,tt,nt,st){const ot=new Image;return ot.src=await this.base64(et,tt,nt,st),ot}async base64(et,tt,nt,st){const ot=this.canvas(et,st);if(ot.toBlob!==void 0)return new Promise((ct,dt)=>{ot.toBlob(ft=>{if(!ft){dt(new Error("ICanvas.toBlob failed!"));return}const gt=new FileReader;gt.onload=()=>ct(gt.result),gt.onerror=dt,gt.readAsDataURL(ft)},tt,nt)});if(ot.toDataURL!==void 0)return ot.toDataURL(tt,nt);if(ot.convertToBlob!==void 0){const ct=await ot.convertToBlob({type:tt,quality:nt});return new Promise((dt,ft)=>{const gt=new FileReader;gt.onload=()=>dt(gt.result),gt.onerror=ft,gt.readAsDataURL(ct)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(et,tt){const{pixels:nt,width:st,height:ot,flipY:ct,premultipliedAlpha:dt}=this._rawPixels(et,tt);ct&&Ih._flipY(nt,st,ot),dt&&Ih._unpremultiplyAlpha(nt);const ft=new CanvasRenderTarget(st,ot,1),gt=new ImageData(new Uint8ClampedArray(nt.buffer),st,ot);return ft.context.putImageData(gt,0,0),ft.canvas}pixels(et,tt){const{pixels:nt,width:st,height:ot,flipY:ct,premultipliedAlpha:dt}=this._rawPixels(et,tt);return ct&&Ih._flipY(nt,st,ot),dt&&Ih._unpremultiplyAlpha(nt),nt}_rawPixels(et,tt){const nt=this.renderer;if(!nt)throw new Error("The Extract has already been destroyed");let st,ot=!1,ct=!1,dt,ft=!1;et&&(et instanceof RenderTexture?dt=et:(dt=nt.generateTexture(et,{region:tt,resolution:nt.resolution,multisample:nt.multisample}),ft=!0,tt&&(TEMP_RECT.width=tt.width,TEMP_RECT.height=tt.height,tt=TEMP_RECT)));const gt=nt.gl;if(dt){if(st=dt.baseTexture.resolution,tt=tt??dt.frame,ot=!1,ct=dt.baseTexture.alphaMode>0&&dt.baseTexture.format===FORMATS.RGBA,!ft){nt.renderTexture.bind(dt);const wt=dt.framebuffer.glFramebuffers[nt.CONTEXT_UID];wt.blitFramebuffer&&nt.framebuffer.bind(wt.blitFramebuffer)}}else st=nt.resolution,tt||(tt=TEMP_RECT,tt.width=nt.width/st,tt.height=nt.height/st),ot=!0,ct=this._rendererPremultipliedAlpha,nt.renderTexture.bind();const yt=Math.max(Math.round(tt.width*st),1),xt=Math.max(Math.round(tt.height*st),1),St=new Uint8Array(BYTES_PER_PIXEL*yt*xt);return gt.readPixels(Math.round(tt.x*st),Math.round(tt.y*st),yt,xt,gt.RGBA,gt.UNSIGNED_BYTE,St),ft&&(dt==null||dt.destroy(!0)),{pixels:St,width:yt,height:xt,flipY:ot,premultipliedAlpha:ct}}destroy(){this.renderer=null}static _flipY(et,tt,nt){const st=tt<<2,ot=nt>>1,ct=new Uint8Array(st);for(let dt=0;dt<ot;dt++){const ft=dt*st,gt=(nt-dt-1)*st;ct.set(et.subarray(ft,ft+st)),et.copyWithin(ft,gt,gt+st),et.set(ct,gt)}}static _unpremultiplyAlpha(et){et instanceof Uint8ClampedArray&&(et=new Uint8Array(et.buffer));const tt=et.length;for(let nt=0;nt<tt;nt+=4){const st=et[nt+3];if(st!==0){const ot=255.001/st;et[nt]=et[nt]*ot+.5,et[nt+1]=et[nt+1]*ot+.5,et[nt+2]=et[nt+2]*ot+.5}}}};_Extract.extension={name:"extract",type:ExtensionType.RendererSystem};let Extract=_Extract;extensions$1.add(Extract);class CountLimiter{constructor(et){this.maxItemsPerFrame=et,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function findMultipleBaseTextures(rt,et){var nt;let tt=!1;if((nt=rt==null?void 0:rt._textures)!=null&&nt.length){for(let st=0;st<rt._textures.length;st++)if(rt._textures[st]instanceof Texture){const ot=rt._textures[st].baseTexture;et.includes(ot)||(et.push(ot),tt=!0)}}return tt}function findBaseTexture(rt,et){if(rt.baseTexture instanceof BaseTexture){const tt=rt.baseTexture;return et.includes(tt)||et.push(tt),!0}return!1}function findTexture(rt,et){if(rt._texture&&rt._texture instanceof Texture){const tt=rt._texture.baseTexture;return et.includes(tt)||et.push(tt),!0}return!1}function drawText(rt,et){return et instanceof Text?(et.updateText(!0),!0):!1}function calculateTextStyle(rt,et){if(et instanceof TextStyle){const tt=et.toFontString();return TextMetrics.measureFont(tt),!0}return!1}function findText(rt,et){if(rt instanceof Text){et.includes(rt.style)||et.push(rt.style),et.includes(rt)||et.push(rt);const tt=rt._texture.baseTexture;return et.includes(tt)||et.push(tt),!0}return!1}function findTextStyle(rt,et){return rt instanceof TextStyle?(et.includes(rt)||et.push(rt),!0):!1}const _BasePrepare=class Zf{constructor(et){this.limiter=new CountLimiter(Zf.uploadsPerFrame),this.renderer=et,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}upload(et){return new Promise(tt=>{et&&this.add(et),this.queue.length?(this.completes.push(tt),this.ticking||(this.ticking=!0,Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY))):tt()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const et=this.queue[0];let tt=!1;if(et&&!et._destroyed){for(let nt=0,st=this.uploadHooks.length;nt<st;nt++)if(this.uploadHooks[nt](this.uploadHookHelper,et)){this.queue.shift(),tt=!0;break}}tt||this.queue.shift()}if(this.queue.length)Ticker.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;const et=this.completes.slice(0);this.completes.length=0;for(let tt=0,nt=et.length;tt<nt;tt++)et[tt]()}}registerFindHook(et){return et&&this.addHooks.push(et),this}registerUploadHook(et){return et&&this.uploadHooks.push(et),this}add(et){for(let tt=0,nt=this.addHooks.length;tt<nt&&!this.addHooks[tt](et,this.queue);tt++);if(et instanceof Container)for(let tt=et.children.length-1;tt>=0;tt--)this.add(et.children[tt]);return this}destroy(){this.ticking&&Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};_BasePrepare.uploadsPerFrame=4;let BasePrepare=_BasePrepare;Object.defineProperties(settings,{UPLOADS_PER_FRAME:{get(){return BasePrepare.uploadsPerFrame},set(rt){deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),BasePrepare.uploadsPerFrame=rt}}});function uploadBaseTextures(rt,et){return et instanceof BaseTexture?(et._glTextures[rt.CONTEXT_UID]||rt.texture.bind(et),!0):!1}function uploadGraphics(rt,et){if(!(et instanceof Graphics))return!1;const{geometry:tt}=et;et.finishPoly(),tt.updateBatches();const{batches:nt}=tt;for(let st=0;st<nt.length;st++){const{texture:ot}=nt[st].style;ot&&uploadBaseTextures(rt,ot.baseTexture)}return tt.batchable||rt.geometry.bind(tt,et._resolveDirectShader(rt)),!0}function findGraphics(rt,et){return rt instanceof Graphics?(et.push(rt),!0):!1}class Prepare extends BasePrepare{constructor(et){super(et),this.uploadHookHelper=this.renderer,this.registerFindHook(findGraphics),this.registerUploadHook(uploadBaseTextures),this.registerUploadHook(uploadGraphics)}}Prepare.extension={name:"prepare",type:ExtensionType.RendererSystem};extensions$1.add(Prepare);const _Spritesheet=class Mh{constructor(et,tt,nt){this.linkedSheets=[],(et instanceof BaseTexture||et instanceof Texture)&&(et={texture:et,data:tt,resolutionFilename:nt});const{texture:st,data:ot,resolutionFilename:ct=null,cachePrefix:dt=""}=et;this.cachePrefix=dt,this._texture=st instanceof Texture?st:null,this.baseTexture=st instanceof BaseTexture?st:this._texture.baseTexture,this.textures={},this.animations={},this.data=ot;const ft=this.baseTexture.resource;this.resolution=this._updateResolution(ct||(ft?ft.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(et=null){const{scale:tt}=this.data.meta;let nt=getResolutionOfUrl(et,null);return nt===null&&(nt=typeof tt=="number"?tt:parseFloat(tt??"1")),nt!==1&&this.baseTexture.setResolution(nt),nt}parse(){return new Promise(et=>{this._callback=et,this._batchIndex=0,this._frameKeys.length<=Mh.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(et){let tt=et;const nt=Mh.BATCH_SIZE;for(;tt-et<nt&&tt<this._frameKeys.length;){const st=this._frameKeys[tt],ot=this._frames[st],ct=ot.frame;if(ct){let dt=null,ft=null;const gt=ot.trimmed!==!1&&ot.sourceSize?ot.sourceSize:ot.frame,yt=new Rectangle(0,0,Math.floor(gt.w)/this.resolution,Math.floor(gt.h)/this.resolution);ot.rotated?dt=new Rectangle(Math.floor(ct.x)/this.resolution,Math.floor(ct.y)/this.resolution,Math.floor(ct.h)/this.resolution,Math.floor(ct.w)/this.resolution):dt=new Rectangle(Math.floor(ct.x)/this.resolution,Math.floor(ct.y)/this.resolution,Math.floor(ct.w)/this.resolution,Math.floor(ct.h)/this.resolution),ot.trimmed!==!1&&ot.spriteSourceSize&&(ft=new Rectangle(Math.floor(ot.spriteSourceSize.x)/this.resolution,Math.floor(ot.spriteSourceSize.y)/this.resolution,Math.floor(ct.w)/this.resolution,Math.floor(ct.h)/this.resolution)),this.textures[st]=new Texture(this.baseTexture,dt,yt,ft,ot.rotated?2:0,ot.anchor,ot.borders),Texture.addToCache(this.textures[st],this.cachePrefix+st.toString())}tt++}}_processAnimations(){const et=this.data.animations||{};for(const tt in et){this.animations[tt]=[];for(let nt=0;nt<et[tt].length;nt++){const st=et[tt][nt];this.animations[tt].push(this.textures[st])}}}_parseComplete(){const et=this._callback;this._callback=null,this._batchIndex=0,et.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Mh.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Mh.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(et=!1){var tt;for(const nt in this.textures)this.textures[nt].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,et&&((tt=this._texture)==null||tt.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};_Spritesheet.BATCH_SIZE=1e3;let Spritesheet=_Spritesheet;const validImages=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function getCacheableAssets(rt,et,tt){const nt={};if(rt.forEach(st=>{nt[st]=et}),Object.keys(et.textures).forEach(st=>{nt[`${et.cachePrefix}${st}`]=et.textures[st]}),!tt){const st=path.dirname(rt[0]);et.linkedSheets.forEach((ot,ct)=>{Object.assign(nt,getCacheableAssets([`${st}/${et.data.meta.related_multi_packs[ct]}`],ot,!0))})}return nt}const spritesheetAsset={extension:ExtensionType.Asset,cache:{test:rt=>rt instanceof Spritesheet,getCacheableAssets:(rt,et)=>getCacheableAssets(rt,et,!1)},resolver:{test:rt=>{const et=rt.split("?")[0].split("."),tt=et.pop(),nt=et.pop();return tt==="json"&&validImages.includes(nt)},parse:rt=>{var tt;const et=rt.split(".");return{resolution:parseFloat(((tt=settings.RETINA_PREFIX.exec(rt))==null?void 0:tt[1])??"1"),format:et[et.length-2],src:rt}}},loader:{name:"spritesheetLoader",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},async testParse(rt,et){return path.extname(et.src).toLowerCase()===".json"&&!!rt.frames},async parse(rt,et,tt){var yt,xt;const{texture:nt,imageFilename:st,cachePrefix:ot}=(et==null?void 0:et.data)??{};let ct=path.dirname(et.src);ct&&ct.lastIndexOf("/")!==ct.length-1&&(ct+="/");let dt;if(nt&&nt.baseTexture)dt=nt;else{const St=copySearchParams(ct+(st??rt.meta.image),et.src);dt=(await tt.load([St]))[St]}const ft=new Spritesheet({texture:dt.baseTexture,data:rt,resolutionFilename:et.src,cachePrefix:ot});await ft.parse();const gt=(yt=rt==null?void 0:rt.meta)==null?void 0:yt.related_multi_packs;if(Array.isArray(gt)){const St=[];for(const bt of gt){if(typeof bt!="string")continue;let Pt=ct+bt;(xt=et.data)!=null&&xt.ignoreMultiPack||(Pt=copySearchParams(Pt,et.src),St.push(tt.load({src:Pt,data:{ignoreMultiPack:!0}})))}const wt=await Promise.all(St);ft.linkedSheets=wt,wt.forEach(bt=>{bt.linkedSheets=[ft].concat(ft.linkedSheets.filter(Pt=>Pt!==bt))})}return ft},unload(rt){rt.destroy(!0)}}};extensions$1.add(spritesheetAsset);const _HTMLTextStyle=class Ac extends TextStyle{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(et){return new Ac(Object.keys(Ac.defaultOptions).reduce((tt,nt)=>({...tt,[nt]:et[nt]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(et=>{URL.revokeObjectURL(et.src),et.refs--,et.refs===0&&(et.fontFace&&document.fonts.delete(et.fontFace),delete Ac.availableFonts[et.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(et,tt={}){const{availableFonts:nt}=Ac;if(nt[et]){const st=nt[et];return this._fonts.push(st),st.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return settings.ADAPTER.fetch(et).then(st=>st.blob()).then(async st=>new Promise((ot,ct)=>{const dt=URL.createObjectURL(st),ft=new FileReader;ft.onload=()=>ot([dt,ft.result]),ft.onerror=ct,ft.readAsDataURL(st)})).then(async([st,ot])=>{const ct=Object.assign({family:path.basename(et,path.extname(et)),weight:"normal",style:"normal",display:"auto",src:st,dataSrc:ot,refs:1,originalUrl:et,fontFace:null},tt);nt[et]=ct,this._fonts.push(ct),this.styleID++;const dt=new FontFace(ct.family,`url(${ct.src})`,{weight:ct.weight,style:ct.style,display:ct.display});ct.fontFace=dt,await dt.load(),document.fonts.add(dt),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...et){const tt=et.filter(nt=>!this._overrides.includes(nt));tt.length>0&&(this._overrides.push(...tt),this.styleID++)}removeOverride(...et){const tt=et.filter(nt=>this._overrides.includes(nt));tt.length>0&&(this._overrides=this._overrides.filter(nt=>!tt.includes(nt)),this.styleID++)}toCSS(et){return[`transform: scale(${et})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((et,tt)=>`${et}
            @font-face {
                font-family: "${tt.family}";
                src: url('${tt.dataSrc}');
                font-weight: ${tt.weight};
                font-style: ${tt.style};
                font-display: ${tt.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(et){this._stylesheet!==et&&(this._stylesheet=et,this.styleID++)}normalizeColor(et){return Array.isArray(et)&&(et=rgb2hex(et)),typeof et=="number"?hex2string(et):et}dropShadowToCSS(){let et=this.normalizeColor(this.dropShadowColor);const tt=this.dropShadowAlpha,nt=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),st=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);et.startsWith("#")&&tt<1&&(et+=(tt*255|0).toString(16).padStart(2,"0"));const ot=`${nt}px ${st}px`;return this.dropShadowBlur>0?`text-shadow: ${ot} ${this.dropShadowBlur}px ${et}`:`text-shadow: ${ot} ${et}`}reset(){Object.assign(this,Ac.defaultOptions)}onBeforeDraw(){const{fontsDirty:et}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&et?new Promise(tt=>setTimeout(tt,100)):Promise.resolve()}get isSafari(){const{userAgent:et}=settings.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(et)}set fillGradientStops(et){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(et){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(et){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(et){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(et){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(et){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(et){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};_HTMLTextStyle.availableFonts={},_HTMLTextStyle.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let HTMLTextStyle=_HTMLTextStyle;const _HTMLText=class Rc extends Sprite{constructor(et="",tt={}){super(Texture.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const nt=new Image,st=Texture.from(nt,{scaleMode:settings.SCALE_MODE,resourceOptions:{autoLoad:!1}});st.orig=new Rectangle,st.trim=new Rectangle,this.texture=st;const ot="http://www.w3.org/2000/svg",ct="http://www.w3.org/1999/xhtml",dt=document.createElementNS(ot,"svg"),ft=document.createElementNS(ot,"foreignObject"),gt=document.createElementNS(ct,"div"),yt=document.createElementNS(ct,"style");ft.setAttribute("width","10000"),ft.setAttribute("height","10000"),ft.style.overflow="hidden",dt.appendChild(ft),this.maxWidth=Rc.defaultMaxWidth,this.maxHeight=Rc.defaultMaxHeight,this._domElement=gt,this._styleElement=yt,this._svgRoot=dt,this._foreignObject=ft,this._foreignObject.appendChild(yt),this._foreignObject.appendChild(gt),this._image=nt,this._loadImage=new Image,this._autoResolution=Rc.defaultAutoResolution,this._resolution=Rc.defaultResolution??settings.RESOLUTION,this.text=et,this.style=tt}measureText(et){var yt,xt;const{text:tt,style:nt,resolution:st}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},et);Object.assign(this._domElement,{innerHTML:tt,style:nt.toCSS(st)}),this._styleElement.textContent=nt.toGlobalCSS(),document.body.appendChild(this._svgRoot);const ot=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:ct,height:dt}=ot;(ct>this.maxWidth||dt>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const ft=Math.min(this.maxWidth,Math.ceil(ct)),gt=Math.min(this.maxHeight,Math.ceil(dt));return this._svgRoot.setAttribute("width",ft.toString()),this._svgRoot.setAttribute("height",gt.toString()),tt!==this._text&&(this._domElement.innerHTML=this._text),nt!==this._style&&(Object.assign(this._domElement,{style:(yt=this._style)==null?void 0:yt.toCSS(st)}),this._styleElement.textContent=(xt=this._style)==null?void 0:xt.toGlobalCSS()),{width:ft+nt.padding*2,height:gt+nt.padding*2}}async updateText(et=!0){const{style:tt,_image:nt,_loadImage:st}=this;if(this.localStyleID!==tt.styleID&&(this.dirty=!0,this.localStyleID=tt.styleID),!this.dirty&&et)return;const{width:ot,height:ct}=this.measureText();nt.width=st.width=Math.ceil(Math.max(1,ot)),nt.height=st.height=Math.ceil(Math.max(1,ct)),this._updateID++;const dt=this._updateID;await new Promise(ft=>{st.onload=async()=>{if(dt<this._updateID){ft();return}await tt.onBeforeDraw(),nt.src=st.src,st.onload=null,st.src="",this.updateTexture(),ft()};const gt=new XMLSerializer().serializeToString(this._svgRoot);st.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(gt)}`})}get source(){return this._image}updateTexture(){const{style:et,texture:tt,_image:nt,resolution:st}=this,{padding:ot}=et,{baseTexture:ct}=tt;tt.trim.width=tt._frame.width=nt.width/st,tt.trim.height=tt._frame.height=nt.height/st,tt.trim.x=-ot,tt.trim.y=-ot,tt.orig.width=tt._frame.width-ot*2,tt.orig.height=tt._frame.height-ot*2,this._onTextureUpdate(),ct.setRealSize(nt.width,nt.height,st),this.dirty=!1}_render(et){this._autoResolution&&this._resolution!==et.resolution&&(this._resolution=et.resolution,this.dirty=!0),this.updateText(!0),super._render(et)}_renderCanvas(et){this._autoResolution&&this._resolution!==et.resolution&&(this._resolution=et.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(et)}getLocalBounds(et){return this.updateText(!0),super.getLocalBounds(et)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(et){var nt,st,ot,ct,dt;typeof et=="boolean"&&(et={children:et}),et=Object.assign({},Rc.defaultDestroyOptions,et),super.destroy(et);const tt=null;this.ownsStyle&&((nt=this._style)==null||nt.cleanFonts()),this._style=tt,(st=this._svgRoot)==null||st.remove(),this._svgRoot=tt,(ot=this._domElement)==null||ot.remove(),this._domElement=tt,(ct=this._foreignObject)==null||ct.remove(),this._foreignObject=tt,(dt=this._styleElement)==null||dt.remove(),this._styleElement=tt,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=tt,this._image.src="",this._image=tt}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(et){this.updateText(!0);const tt=sign(this.scale.x)||1;this.scale.x=tt*et/this._image.width/this.resolution,this._width=et}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(et){this.updateText(!0);const tt=sign(this.scale.y)||1;this.scale.y=tt*et/this._image.height/this.resolution,this._height=et}get style(){return this._style}set style(et){this._style!==et&&(et=et||{},et instanceof HTMLTextStyle?(this.ownsStyle=!1,this._style=et):et instanceof TextStyle?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=HTMLTextStyle.from(et)):(this.ownsStyle=!0,this._style=new HTMLTextStyle(et)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(et){et=String(et===""||et===null||et===void 0?" ":et),et=this.sanitiseText(et),this._text!==et&&(this._text=et,this.dirty=!0)}get resolution(){return this._resolution}set resolution(et){this._autoResolution=!1,this._resolution!==et&&(this._resolution=et,this.dirty=!0)}sanitiseText(et){return et.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};_HTMLText.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_HTMLText.defaultMaxWidth=2024,_HTMLText.defaultMaxHeight=2024,_HTMLText.defaultAutoResolution=!0;const stageOptions={background:"hsl(0,0%,95%)",resolution:window.devicePixelRatio||1,antialias:!0,autoDensity:!0,powerPreference:"high-performance"};Graphics.curves.adaptive=!1;const Stage=({children:rt})=>jsxRuntimeExports.jsx(moduleExports.Stage,{width:window.innerWidth,height:window.innerHeight,options:stageOptions,children:rt}),lineStyle$1={width:.5,color:new Color("hsl(0,0%,80%)").toNumber()},Grid=({size:rt,numSteps:et})=>{const{width:tt,height:nt}=rt,st=reactExports.useCallback(ot=>{ot.clear(),ot.lineStyle(lineStyle$1);for(let ct=1;ct<et;ct++){const dt=nt/et*ct;ot.moveTo(0,dt),ot.lineTo(tt,dt)}},[tt,nt,et]);return jsxRuntimeExports.jsx(moduleExports.Graphics,{draw:st})};typeof window.__JUCE__<"u"&&typeof window.__JUCE__.getAndroidUserScripts<"u"&&typeof window.inAndroidUserScriptEval>"u"&&(window.inAndroidUserScriptEval=!0,eval(window.__JUCE__.getAndroidUserScripts()),delete window.inAndroidUserScriptEval);{typeof window.__JUCE__>"u"&&(console.warn("The 'window.__JUCE__' object is undefined. Native integration features will not work. Defining a placeholder 'window.__JUCE__' object."),window.__JUCE__={postMessage:function(){}}),typeof window.__JUCE__.initialisationData>"u"&&(window.__JUCE__.initialisationData={__juce__platform:[],__juce__functions:[],__juce__registeredGlobalEventIds:[],__juce__sliders:[],__juce__toggles:[],__juce__comboBoxes:[]});class rt{constructor(){this.listeners=new Map,this.listenerId=0}addListener(st){const ot=this.listenerId++;return this.listeners.set(ot,st),ot}removeListener(st){this.listeners.has(st)&&this.listeners.delete(st)}callListeners(st){for(const[,ot]of this.listeners)ot(st)}}class et{constructor(){this.eventListeners=new Map}addEventListener(st,ot){this.eventListeners.has(st)||this.eventListeners.set(st,new rt);const ct=this.eventListeners.get(st).addListener(ot);return[st,ct]}removeEventListener([st,ot]){this.eventListeners.has(st)&&this.eventListeners.get(st).removeListener(ot)}emitEvent(st,ot){this.eventListeners.has(st)&&this.eventListeners.get(st).callListeners(ot)}}class tt{constructor(){this.listeners=new et}addEventListener(st,ot){return this.listeners.addEventListener(st,ot)}removeEventListener([st,ot]){this.listeners.removeEventListener(st,ot)}emitEvent(st,ot){window.__JUCE__.postMessage(JSON.stringify({eventId:st,payload:ot}))}emitByBackend(st,ot){this.listeners.emitEvent(st,JSON.parse(ot))}}typeof window.__JUCE__.backend>"u"&&(window.__JUCE__.backend=new tt)}class PromiseHandler{constructor(){this.lastPromiseId=0,this.promises=new Map,window.__JUCE__.backend.addEventListener("__juce__complete",({promiseId:et,result:tt})=>{this.promises.has(et)&&(this.promises.get(et).resolve(tt),this.promises.delete(et))})}createPromise(){const et=this.lastPromiseId++,tt=new Promise((nt,st)=>{this.promises.set(et,{resolve:nt,reject:st})});return[et,tt]}}new PromiseHandler;class ListenerList{constructor(){this.listeners=new Map,this.listenerId=0}addListener(et){const tt=this.listenerId++;return this.listeners.set(tt,et),tt}removeListener(et){this.listeners.has(et)&&this.listeners.delete(et)}callListeners(et){for(const[,tt]of this.listeners)tt(et)}}const BasicControl_valueChangedEventId="valueChanged",BasicControl_propertiesChangedId="propertiesChanged",SliderControl_sliderDragStartedEventId="sliderDragStarted",SliderControl_sliderDragEndedEventId="sliderDragEnded";class SliderState{constructor(et){window.__JUCE__.initialisationData.__juce__sliders.includes(et)||console.warn("Creating SliderState for '"+et+"', which is unknown to the backend"),this.name=et,this.identifier="__juce__slider"+this.name,this.scaledValue=0,this.properties={start:0,end:1,skew:1,name:"",label:"",numSteps:100,interval:0,parameterIndex:-1},this.valueChangedEvent=new ListenerList,this.propertiesChangedEvent=new ListenerList,window.__JUCE__.backend.addEventListener(this.identifier,tt=>this.handleEvent(tt)),window.__JUCE__.backend.emitEvent(this.identifier,{eventType:"requestInitialUpdate"})}setNormalisedValue(et){this.scaledValue=this.snapToLegalValue(this.normalisedToScaledValue(et)),window.__JUCE__.backend.emitEvent(this.identifier,{eventType:BasicControl_valueChangedEventId,value:this.scaledValue})}sliderDragStarted(){window.__JUCE__.backend.emitEvent(this.identifier,{eventType:SliderControl_sliderDragStartedEventId})}sliderDragEnded(){window.__JUCE__.backend.emitEvent(this.identifier,{eventType:SliderControl_sliderDragEndedEventId})}handleEvent(et){if(et.eventType==BasicControl_valueChangedEventId&&(this.scaledValue=et.value,this.valueChangedEvent.callListeners()),et.eventType==BasicControl_propertiesChangedId){let{eventType:tt,...nt}=et;this.properties=nt,this.propertiesChangedEvent.callListeners()}}getScaledValue(){return this.scaledValue}getNormalisedValue(){return Math.pow((this.scaledValue-this.properties.start)/(this.properties.end-this.properties.start),this.properties.skew)}normalisedToScaledValue(et){return Math.pow(et,1/this.properties.skew)*(this.properties.end-this.properties.start)+this.properties.start}snapToLegalValue(et){const tt=this.properties.interval;if(tt==0)return et;const nt=this.properties.start;return((ot,ct=0,dt=1)=>Math.max(ct,Math.min(dt,ot)))(nt+tt*Math.floor((et-nt)/tt+.5),this.properties.start,this.properties.end)}}const sliderStates=new Map;for(const rt of window.__JUCE__.initialisationData.__juce__sliders)sliderStates.set(rt,new SliderState(rt));function getSliderState(rt){return sliderStates.has(rt)||sliderStates.set(rt,new SliderState(rt)),sliderStates.get(rt)}class ToggleState{constructor(et){window.__JUCE__.initialisationData.__juce__toggles.includes(et)||console.warn("Creating ToggleState for '"+et+"', which is unknown to the backend"),this.name=et,this.identifier="__juce__toggle"+this.name,this.value=!1,this.properties={name:"",parameterIndex:-1},this.valueChangedEvent=new ListenerList,this.propertiesChangedEvent=new ListenerList,window.__JUCE__.backend.addEventListener(this.identifier,tt=>this.handleEvent(tt)),window.__JUCE__.backend.emitEvent(this.identifier,{eventType:"requestInitialUpdate"})}getValue(){return this.value}setValue(et){this.value=et,window.__JUCE__.backend.emitEvent(this.identifier,{eventType:BasicControl_valueChangedEventId,value:this.value})}handleEvent(et){if(et.eventType==BasicControl_valueChangedEventId&&(this.value=et.value,this.valueChangedEvent.callListeners()),et.eventType==BasicControl_propertiesChangedId){let{eventType:tt,...nt}=et;this.properties=nt,this.propertiesChangedEvent.callListeners()}}}const toggleStates=new Map;for(const rt of window.__JUCE__.initialisationData.__juce__toggles)toggleStates.set(rt,new ToggleState(rt));class ComboBoxState{constructor(et){window.__JUCE__.initialisationData.__juce__comboBoxes.includes(et)||console.warn("Creating ComboBoxState for '"+et+"', which is unknown to the backend"),this.name=et,this.identifier="__juce__comboBox"+this.name,this.value=0,this.properties={name:"",parameterIndex:-1,choices:[]},this.valueChangedEvent=new ListenerList,this.propertiesChangedEvent=new ListenerList,window.__JUCE__.backend.addEventListener(this.identifier,tt=>this.handleEvent(tt)),window.__JUCE__.backend.emitEvent(this.identifier,{eventType:"requestInitialUpdate"})}getChoiceIndex(){return Math.round(this.value*(this.properties.choices.length-1))}setChoiceIndex(et){const tt=this.properties.choices.length;this.value=tt>1?et/(tt-1):0,window.__JUCE__.backend.emitEvent(this.identifier,{eventType:BasicControl_valueChangedEventId,value:this.value})}handleEvent(et){if(et.eventType==BasicControl_valueChangedEventId&&(this.value=et.value,this.valueChangedEvent.callListeners()),et.eventType==BasicControl_propertiesChangedId){let{eventType:tt,...nt}=et;this.properties=nt,this.propertiesChangedEvent.callListeners()}}}const comboBoxStates=new Map;for(const rt of window.__JUCE__.initialisationData.__juce__comboBoxes)comboBoxStates.set(rt,new ComboBoxState(rt));function getBackendResourceAddress(rt){const et=window.__JUCE__.initialisationData.__juce__platform.length>0?window.__JUCE__.initialisationData.__juce__platform[0]:"";return et=="windows"||et=="android"?"https://juce.backend/"+rt:et=="macos"||et=="ios"||et=="linux"?"juce://juce.backend/"+rt:(console.warn("getBackendResourceAddress() called, but no JUCE native backend is detected."),rt)}const peakHistoryUrl=getBackendResourceAddress("peakHistory"),vuHistoryUrl=getBackendResourceAddress("vuHistory"),grHistoryUrl=getBackendResourceAddress("grHistory"),fetchLevels=async()=>{const rt=await Promise.all([fetch(peakHistoryUrl),fetch(vuHistoryUrl),fetch(grHistoryUrl)]),et=await Promise.all(rt.map(nt=>nt.arrayBuffer()));return{peakHistory:new Float32Array(et[0]),vuHistory:new Float32Array(et[1]),grHistory:new Float32Array(et[2])}},lineStyles={peak:{width:1,color:new Color("hsl(0,0%,70%)").toNumber()},vu:{width:1.5,color:new Color("hsl(0,0%,45%)").toNumber()},gr:{width:1,color:new Color("hsl(0,0%,45%)").toNumber()}},PLOT_CONFIG={FETCH_INTERVAL:30,DEFAULT_Y_OFFSET:0},calculatePoints=(rt,et,tt,nt)=>{const{width:st,height:ot}=et;nt=nt||PLOT_CONFIG.DEFAULT_Y_OFFSET;const ct=[{x:-1,y:ot+1}];for(let dt=0;dt<rt.length;dt++){const ft=-rt[dt]*tt,gt=dt/rt.length*st,yt=ft*ot+nt;dt===0&&ct.push({x:gt-1,y:yt}),ct.push({x:gt,y:yt}),dt===rt.length-1&&(ct.push({x:st+1,y:yt}),ct.push({x:st+1,y:ot+1}))}return ct},drawLevel=(rt,et,tt)=>{rt.lineStyle(tt),rt.drawPolygon(et)},Plot=({size:rt,zeroDbY:et,plotScale:tt})=>{const nt=reactExports.useRef(null),st=reactExports.useCallback(ot=>{const ct=nt.current;if(!ct)return;const dt=calculatePoints(ot.peakHistory,rt,tt,et),ft=calculatePoints(ot.vuHistory,rt,tt,et),gt=ot.grHistory.map(xt=>-xt),yt=calculatePoints(gt,rt,tt);ct.clear(),drawLevel(ct,dt,lineStyles.peak),drawLevel(ct,ft,lineStyles.vu),drawLevel(ct,yt,lineStyles.gr)},[rt,tt,et]);return reactExports.useEffect(()=>{const ot=setInterval(async()=>{try{const ct=await fetchLevels();st(ct)}catch(ct){console.error("Failed to fetch levels:",ct)}},PLOT_CONFIG.FETCH_INTERVAL);return()=>clearInterval(ot)},[st]),jsxRuntimeExports.jsx(moduleExports.Graphics,{ref:nt})},labelPadding=4,labelStyle$1=new TextStyle({fontSize:10,fill:"hsl(0,0%,70%)"}),createLabels=(rt,et,tt,nt,st,ot,ct)=>{const dt=[],ft={left:labelPadding,right:rt-labelPadding},gt={left:0,right:1};for(let yt=0;yt<tt;yt++){const xt=et/tt*yt+labelPadding,St=`${yt*st+nt}`;dt.push(jsxRuntimeExports.jsx(moduleExports.Text,{anchor:[gt[ot],0],text:St,style:ct,x:ft[ot],y:xt},yt))}return dt},Labels=({size:rt,numSteps:et,maxDb:tt,stepDb:nt})=>{const{width:st,height:ot}=rt,ct=reactExports.useMemo(()=>createLabels(st,ot,et,0,nt,"left",labelStyle$1),[st,ot,et,nt]),dt=reactExports.useMemo(()=>createLabels(st,ot,et,tt,-nt,"right",labelStyle$1),[st,ot,et,tt,nt]);return jsxRuntimeExports.jsxs(moduleExports.Container,{children:[jsxRuntimeExports.jsx(moduleExports.Graphics,{draw:ft=>{ft.beginFill(new Color("hsl(0,0%,95%)")),ft.drawRect(0,0,24,ot),ft.drawRect(st-24,0,24,ot),ft.endFill()}}),ct,dt]})},MIN_DB_FROM_BACKEND=-100,numSteps=10,maxDb=12,stepDb=6,minDb=maxDb-stepDb*numSteps,dbRange=maxDb-minDb,plotScale=MIN_DB_FROM_BACKEND/dbRange/MIN_DB_FROM_BACKEND,Visualiser=({size:rt})=>{const et=rt.height/numSteps*(maxDb/stepDb);return jsxRuntimeExports.jsxs(moduleExports.Container,{children:[jsxRuntimeExports.jsx(Grid,{size:rt,numSteps,maxDb,stepDb}),jsxRuntimeExports.jsx(Plot,{size:rt,zeroDbY:et,plotScale}),jsxRuntimeExports.jsx(Labels,{size:rt,numSteps,maxDb,stepDb})]})},useJuceSlider=rt=>{const et=reactExports.useRef(getSliderState(rt)),[tt,nt]=reactExports.useState(et.current.getNormalisedValue());reactExports.useEffect(()=>{const yt=et.current,xt=yt.valueChangedEvent.addListener(()=>{nt(yt.getNormalisedValue())});return()=>{yt.valueChangedEvent.removeListener(xt)}},[et]);const st=et.current.properties,{name:ot,label:ct}=st;return{name:ot,label:ct,value:tt,setNormalisedValue:yt=>{et.current.setNormalisedValue(yt)},getNormalisedValue:()=>et.current.getNormalisedValue(),getScaledValue:()=>et.current.getScaledValue()}},useDrag=(rt={})=>{const{onDrag:et,onDragStart:tt,onDragEnd:nt}=rt,[st,ot]=reactExports.useState(!1),ct=reactExports.useCallback(gt=>{et&&et(gt)},[et]),dt=reactExports.useCallback(()=>{ot(!1),window.removeEventListener("pointermove",ct),window.removeEventListener("pointerup",dt),nt&&nt()},[ct,nt]),ft=reactExports.useCallback(()=>{ot(!0),window.addEventListener("pointermove",ct),window.addEventListener("pointerup",dt),tt&&tt()},[ct,dt,tt]);return{isDragging:st,handleDragStart:ft,handleDrag:ct,handleDragEnd:dt}},SLIDER_CONFIG={LINE_WIDTH:2,LABEL_WIDTH:64,LABEL_HEIGHT:16,LABEL_BORDER_RADIUS:2,LABEL_FONT_SIZE:12,LABEL_FONT_COLOR:"#fff",COLOR:new Color("hsl(0, 0%, 65%)")},lineStyle={width:SLIDER_CONFIG.LINE_WIDTH,color:SLIDER_CONFIG.COLOR.toNumber()},labelStyle=new TextStyle({fontSize:12,fill:SLIDER_CONFIG.LABEL_FONT_COLOR}),drawSlider=(rt,et,tt,nt)=>{const st=tt/2-SLIDER_CONFIG.LABEL_WIDTH/2,ot=et-SLIDER_CONFIG.LABEL_HEIGHT/2;rt.clear(),rt.lineStyle(lineStyle),rt.moveTo(0,et),rt.lineTo(tt,et),rt.beginFill(nt),rt.drawRoundedRect(st,ot,SLIDER_CONFIG.LABEL_WIDTH,SLIDER_CONFIG.LABEL_HEIGHT,SLIDER_CONFIG.LABEL_BORDER_RADIUS),rt.endFill()},Slider=({id:rt,color:et,parentSize:tt})=>{const{name:nt,value:st,getNormalisedValue:ot,setNormalisedValue:ct}=useJuceSlider(rt),dt=reactExports.useCallback(Rt=>{if(Rt.movementY===0)return;const kt=ot()-Rt.movementY/tt.height;ct(kt)},[ot,tt.height,ct]),{isDragging:ft,handleDragStart:gt}=useDrag({onDrag:dt}),yt=(1-st)*tt.height,xt=tt.width/2,wt=(et||SLIDER_CONFIG.COLOR).toNumber(),bt=ft?"grabbing":"grab",Pt=reactExports.useCallback(Rt=>drawSlider(Rt,yt,tt.width,wt),[tt,yt,wt]);return reactExports.useEffect(()=>{document.body.style.cursor=ft?"grabbing":"auto"},[ft]),jsxRuntimeExports.jsxs(moduleExports.Container,{eventMode:"dynamic",cursor:bt,onpointerdown:gt,children:[jsxRuntimeExports.jsx(moduleExports.Graphics,{draw:Pt}),jsxRuntimeExports.jsx(moduleExports.Text,{text:nt.toUpperCase(),anchor:.5,x:xt,y:yt,style:labelStyle})]})},Controls=({size:rt})=>jsxRuntimeExports.jsxs(moduleExports.Container,{children:[jsxRuntimeExports.jsx(Slider,{id:"clipThresholdSlider",parentSize:rt}),jsxRuntimeExports.jsx(Slider,{id:"saturationThresholdSlider",parentSize:rt})]}),Dynamics=({size:rt})=>jsxRuntimeExports.jsxs(moduleExports.Container,{children:[jsxRuntimeExports.jsx(Visualiser,{size:rt}),jsxRuntimeExports.jsx(Controls,{size:rt})]}),KNOB_CONFIG={ARC_ANGLE:270,SIZE:{BORDER:10,GAP:0,LABEL_FONT:11},COLOR:{BORDER:"hsl(0, 0%, 75%)",BG:"hsl(0, 0%, 85%)",LABEL:"hsl(0, 0%, 40%)",ARC_BG:"hsl(0, 0%, 85%)",ARC_VALUE:"hsl(0, 0%, 65%)",STROKE_OUTER:"hsl(0, 0%, 95%)",STROKE_INNER:"hsl(0, 0%, 65%)"},getHeight(rt){return rt*2+KNOB_CONFIG.SIZE.BORDER*2+KNOB_CONFIG.SIZE.GAP+KNOB_CONFIG.SIZE.LABEL_FONT}},KNOB_IDS=["saturationThresholdSlider","clipThresholdSlider","inGainSlider","outGainSlider","mixSlider"],SETTINGS_CONFIG={BORDER_RADIUS:8,MARGIN_BOTTOM:16,PADDING:16,GAP:12,BORDER_WIDTH:.5,COLOR:{BACKGROUND:new Color("hsl(0, 0%, 95%)"),BORDER:new Color("hsl(0, 0%, 70%)")},KNOB_RADIUS:32,getWidth:()=>KNOB_IDS.length*SETTINGS_CONFIG.KNOB_RADIUS*2+SETTINGS_CONFIG.PADDING*2+(KNOB_IDS.length-1)*SETTINGS_CONFIG.GAP,getHeight:()=>KNOB_CONFIG.getHeight(SETTINGS_CONFIG.KNOB_RADIUS)+SETTINGS_CONFIG.PADDING},borderStyle={width:SETTINGS_CONFIG.BORDER_WIDTH,color:SETTINGS_CONFIG.COLOR.BORDER.toNumber()},drawBg=rt=>{rt.clear(),rt.beginFill(SETTINGS_CONFIG.COLOR.BACKGROUND),rt.lineStyle(borderStyle),rt.drawRoundedRect(0,0,SETTINGS_CONFIG.getWidth(),SETTINGS_CONFIG.getHeight(),SETTINGS_CONFIG.BORDER_RADIUS),rt.endFill()},Background=()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(moduleExports.Graphics,{draw:drawBg})}),drawArcBg=(rt,et)=>{rt.lineStyle({width:KNOB_CONFIG.SIZE.BORDER,color:KNOB_CONFIG.COLOR.ARC_BG,cap:LINE_CAP.ROUND,alignment:0}),rt.arc(et,et,et,0,KNOB_CONFIG.ARC_ANGLE*DEG_TO_RAD),rt.endFill()},drawArcValue=(rt,et,tt)=>{const nt=.5+tt*(KNOB_CONFIG.ARC_ANGLE-.5);rt.lineStyle({width:KNOB_CONFIG.SIZE.BORDER,color:KNOB_CONFIG.COLOR.ARC_VALUE,cap:LINE_CAP.ROUND,alignment:0}),rt.arc(et,et,et,0,nt*DEG_TO_RAD),rt.endFill()},drawHandleOuter=(rt,et)=>{rt.lineStyle({width:.75,color:KNOB_CONFIG.COLOR.STROKE_OUTER,alignment:1}),rt.beginFill(KNOB_CONFIG.COLOR.BORDER),rt.drawCircle(et,et,et-KNOB_CONFIG.SIZE.BORDER/2),rt.endFill()},drawHandleInner=(rt,et)=>{rt.lineStyle({width:.75,color:KNOB_CONFIG.COLOR.STROKE_INNER,alignment:1}),rt.beginFill(KNOB_CONFIG.COLOR.BG),rt.drawCircle(et,et,et-KNOB_CONFIG.SIZE.BORDER),rt.endFill()},KnobGraphics=({radius:rt,value:et})=>{const tt=reactExports.useCallback(st=>{st.clear(),drawArcBg(st,rt),drawArcValue(st,rt,et),drawHandleOuter(st,rt),drawHandleInner(st,rt)},[et,rt]),nt=reactExports.useCallback(st=>{st.clear(),st.beginFill(KNOB_CONFIG.COLOR.STROKE_INNER),st.drawCircle(rt,16,1.5),st.endFill()},[rt]);return jsxRuntimeExports.jsxs(moduleExports.Container,{children:[jsxRuntimeExports.jsx(moduleExports.Graphics,{draw:tt,x:rt,y:rt,pivot:rt,angle:KNOB_CONFIG.ARC_ANGLE/2}),jsxRuntimeExports.jsx(moduleExports.Container,{pivot:rt,x:rt,y:rt,angle:-270/2+et*KNOB_CONFIG.ARC_ANGLE,children:jsxRuntimeExports.jsx(moduleExports.Graphics,{draw:nt})})]})};var updateQueue=makeQueue(),raf=rt=>schedule(rt,updateQueue),writeQueue=makeQueue();raf.write=rt=>schedule(rt,writeQueue);var onStartQueue=makeQueue();raf.onStart=rt=>schedule(rt,onStartQueue);var onFrameQueue=makeQueue();raf.onFrame=rt=>schedule(rt,onFrameQueue);var onFinishQueue=makeQueue();raf.onFinish=rt=>schedule(rt,onFinishQueue);var timeouts=[];raf.setTimeout=(rt,et)=>{const tt=raf.now()+et,nt=()=>{const ot=timeouts.findIndex(ct=>ct.cancel==nt);~ot&&timeouts.splice(ot,1),pendingCount-=~ot?1:0},st={time:tt,handler:rt,cancel:nt};return timeouts.splice(findTimeout(tt),0,st),pendingCount+=1,start(),st};var findTimeout=rt=>~(~timeouts.findIndex(et=>et.time>rt)||~timeouts.length);raf.cancel=rt=>{onStartQueue.delete(rt),onFrameQueue.delete(rt),onFinishQueue.delete(rt),updateQueue.delete(rt),writeQueue.delete(rt)};raf.sync=rt=>{sync=!0,raf.batchedUpdates(rt),sync=!1};raf.throttle=rt=>{let et;function tt(){try{rt(...et)}finally{et=null}}function nt(...st){et=st,raf.onStart(tt)}return nt.handler=rt,nt.cancel=()=>{onStartQueue.delete(tt),et=null},nt};var nativeRaf=typeof window<"u"?window.requestAnimationFrame:()=>{};raf.use=rt=>nativeRaf=rt;raf.now=typeof performance<"u"?()=>performance.now():Date.now;raf.batchedUpdates=rt=>rt();raf.catch=console.error;raf.frameLoop="always";raf.advance=()=>{raf.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update()};var ts=-1,pendingCount=0,sync=!1;function schedule(rt,et){sync?(et.delete(rt),rt(0)):(et.add(rt),start())}function start(){ts<0&&(ts=0,raf.frameLoop!=="demand"&&nativeRaf(loop))}function stop(){ts=-1}function loop(){~ts&&(nativeRaf(loop),raf.batchedUpdates(update))}function update(){const rt=ts;ts=raf.now();const et=findTimeout(ts);if(et&&(eachSafely(timeouts.splice(0,et),tt=>tt.handler()),pendingCount-=et),!pendingCount){stop();return}onStartQueue.flush(),updateQueue.flush(rt?Math.min(64,ts-rt):16.667),onFrameQueue.flush(),writeQueue.flush(),onFinishQueue.flush()}function makeQueue(){let rt=new Set,et=rt;return{add(tt){pendingCount+=et==rt&&!rt.has(tt)?1:0,rt.add(tt)},delete(tt){return pendingCount-=et==rt&&rt.has(tt)?1:0,rt.delete(tt)},flush(tt){et.size&&(rt=new Set,pendingCount-=et.size,eachSafely(et,nt=>nt(tt)&&rt.add(nt)),pendingCount+=rt.size,et=rt)}}}function eachSafely(rt,et){rt.forEach(tt=>{try{et(tt)}catch(nt){raf.catch(nt)}})}var __defProp=Object.defineProperty,__export=(rt,et)=>{for(var tt in et)__defProp(rt,tt,{get:et[tt],enumerable:!0})},globals_exports={};__export(globals_exports,{assign:()=>assign,colors:()=>colors,createStringInterpolator:()=>createStringInterpolator,skipAnimation:()=>skipAnimation,to:()=>to,willAdvance:()=>willAdvance});function noop(){}var defineHidden=(rt,et,tt)=>Object.defineProperty(rt,et,{value:tt,writable:!0,configurable:!0}),is={arr:Array.isArray,obj:rt=>!!rt&&rt.constructor.name==="Object",fun:rt=>typeof rt=="function",str:rt=>typeof rt=="string",num:rt=>typeof rt=="number",und:rt=>rt===void 0};function isEqual(rt,et){if(is.arr(rt)){if(!is.arr(et)||rt.length!==et.length)return!1;for(let tt=0;tt<rt.length;tt++)if(rt[tt]!==et[tt])return!1;return!0}return rt===et}var each=(rt,et)=>rt.forEach(et);function eachProp(rt,et,tt){if(is.arr(rt)){for(let nt=0;nt<rt.length;nt++)et.call(tt,rt[nt],`${nt}`);return}for(const nt in rt)rt.hasOwnProperty(nt)&&et.call(tt,rt[nt],nt)}var toArray=rt=>is.und(rt)?[]:is.arr(rt)?rt:[rt];function flush(rt,et){if(rt.size){const tt=Array.from(rt);rt.clear(),each(tt,et)}}var flushCalls=(rt,...et)=>flush(rt,tt=>tt(...et)),isSSR=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator,to,colors=null,skipAnimation=!1,willAdvance=noop,assign=rt=>{rt.to&&(to=rt.to),rt.now&&(raf.now=rt.now),rt.colors!==void 0&&(colors=rt.colors),rt.skipAnimation!=null&&(skipAnimation=rt.skipAnimation),rt.createStringInterpolator&&(createStringInterpolator=rt.createStringInterpolator),rt.requestAnimationFrame&&raf.use(rt.requestAnimationFrame),rt.batchedUpdates&&(raf.batchedUpdates=rt.batchedUpdates),rt.willAdvance&&(willAdvance=rt.willAdvance),rt.frameLoop&&(raf.frameLoop=rt.frameLoop)},startQueue=new Set,currentFrame=[],prevFrame=[],priority=0,frameLoop={get idle(){return!startQueue.size&&!currentFrame.length},start(rt){priority>rt.priority?(startQueue.add(rt),raf.onStart(flushStartQueue)):(startSafely(rt),raf(advance))},advance,sort(rt){if(priority)raf.onFrame(()=>frameLoop.sort(rt));else{const et=currentFrame.indexOf(rt);~et&&(currentFrame.splice(et,1),startUnsafely(rt))}},clear(){currentFrame=[],startQueue.clear()}};function flushStartQueue(){startQueue.forEach(startSafely),startQueue.clear(),raf(advance)}function startSafely(rt){currentFrame.includes(rt)||startUnsafely(rt)}function startUnsafely(rt){currentFrame.splice(findIndex(currentFrame,et=>et.priority>rt.priority),0,rt)}function advance(rt){const et=prevFrame;for(let tt=0;tt<currentFrame.length;tt++){const nt=currentFrame[tt];priority=nt.priority,nt.idle||(willAdvance(nt),nt.advance(rt),nt.idle||et.push(nt))}return priority=0,prevFrame=currentFrame,prevFrame.length=0,currentFrame=et,currentFrame.length>0}function findIndex(rt,et){const tt=rt.findIndex(et);return tt<0?rt.length:tt}var clamp=(rt,et,tt)=>Math.min(Math.max(tt,rt),et),colors2={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER="[-+]?\\d*\\.?\\d+",PERCENTAGE=NUMBER+"%";function call(...rt){return"\\(\\s*("+rt.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb=new RegExp("rgb"+call(NUMBER,NUMBER,NUMBER)),rgba=new RegExp("rgba"+call(NUMBER,NUMBER,NUMBER,NUMBER)),hsl=new RegExp("hsl"+call(NUMBER,PERCENTAGE,PERCENTAGE)),hsla=new RegExp("hsla"+call(NUMBER,PERCENTAGE,PERCENTAGE,NUMBER)),hex3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6=/^#([0-9a-fA-F]{6})$/,hex8=/^#([0-9a-fA-F]{8})$/;function normalizeColor(rt){let et;return typeof rt=="number"?rt>>>0===rt&&rt>=0&&rt<=4294967295?rt:null:(et=hex6.exec(rt))?parseInt(et[1]+"ff",16)>>>0:colors&&colors[rt]!==void 0?colors[rt]:(et=rgb.exec(rt))?(parse255(et[1])<<24|parse255(et[2])<<16|parse255(et[3])<<8|255)>>>0:(et=rgba.exec(rt))?(parse255(et[1])<<24|parse255(et[2])<<16|parse255(et[3])<<8|parse1(et[4]))>>>0:(et=hex3.exec(rt))?parseInt(et[1]+et[1]+et[2]+et[2]+et[3]+et[3]+"ff",16)>>>0:(et=hex8.exec(rt))?parseInt(et[1],16)>>>0:(et=hex4.exec(rt))?parseInt(et[1]+et[1]+et[2]+et[2]+et[3]+et[3]+et[4]+et[4],16)>>>0:(et=hsl.exec(rt))?(hslToRgb(parse360(et[1]),parsePercentage(et[2]),parsePercentage(et[3]))|255)>>>0:(et=hsla.exec(rt))?(hslToRgb(parse360(et[1]),parsePercentage(et[2]),parsePercentage(et[3]))|parse1(et[4]))>>>0:null}function hue2rgb(rt,et,tt){return tt<0&&(tt+=1),tt>1&&(tt-=1),tt<1/6?rt+(et-rt)*6*tt:tt<1/2?et:tt<2/3?rt+(et-rt)*(2/3-tt)*6:rt}function hslToRgb(rt,et,tt){const nt=tt<.5?tt*(1+et):tt+et-tt*et,st=2*tt-nt,ot=hue2rgb(st,nt,rt+1/3),ct=hue2rgb(st,nt,rt),dt=hue2rgb(st,nt,rt-1/3);return Math.round(ot*255)<<24|Math.round(ct*255)<<16|Math.round(dt*255)<<8}function parse255(rt){const et=parseInt(rt,10);return et<0?0:et>255?255:et}function parse360(rt){return(parseFloat(rt)%360+360)%360/360}function parse1(rt){const et=parseFloat(rt);return et<0?0:et>1?255:Math.round(et*255)}function parsePercentage(rt){const et=parseFloat(rt);return et<0?0:et>100?1:et/100}function colorToRgba(rt){let et=normalizeColor(rt);if(et===null)return rt;et=et||0;const tt=(et&4278190080)>>>24,nt=(et&16711680)>>>16,st=(et&65280)>>>8,ot=(et&255)/255;return`rgba(${tt}, ${nt}, ${st}, ${ot})`}var createInterpolator=(rt,et,tt)=>{if(is.fun(rt))return rt;if(is.arr(rt))return createInterpolator({range:rt,output:et,extrapolate:tt});if(is.str(rt.output[0]))return createStringInterpolator(rt);const nt=rt,st=nt.output,ot=nt.range||[0,1],ct=nt.extrapolateLeft||nt.extrapolate||"extend",dt=nt.extrapolateRight||nt.extrapolate||"extend",ft=nt.easing||(gt=>gt);return gt=>{const yt=findRange(gt,ot);return interpolate(gt,ot[yt],ot[yt+1],st[yt],st[yt+1],ft,ct,dt,nt.map)}};function interpolate(rt,et,tt,nt,st,ot,ct,dt,ft){let gt=ft?ft(rt):rt;if(gt<et){if(ct==="identity")return gt;ct==="clamp"&&(gt=et)}if(gt>tt){if(dt==="identity")return gt;dt==="clamp"&&(gt=tt)}return nt===st?nt:et===tt?rt<=et?nt:st:(et===-1/0?gt=-gt:tt===1/0?gt=gt-et:gt=(gt-et)/(tt-et),gt=ot(gt),nt===-1/0?gt=-gt:st===1/0?gt=gt+nt:gt=gt*(st-nt)+nt,gt)}function findRange(rt,et){for(var tt=1;tt<et.length-1&&!(et[tt]>=rt);++tt);return tt-1}var steps=(rt,et="end")=>tt=>{tt=et==="end"?Math.min(tt,.999):Math.max(tt,.001);const nt=tt*rt,st=et==="end"?Math.floor(nt):Math.ceil(nt);return clamp(0,1,st/rt)},c1=1.70158,c2=c1*1.525,c3=c1+1,c4=2*Math.PI/3,c5=2*Math.PI/4.5,bounceOut=rt=>rt<1/2.75?7.5625*rt*rt:rt<2/2.75?7.5625*(rt-=1.5/2.75)*rt+.75:rt<2.5/2.75?7.5625*(rt-=2.25/2.75)*rt+.9375:7.5625*(rt-=2.625/2.75)*rt+.984375,easings={linear:rt=>rt,easeInQuad:rt=>rt*rt,easeOutQuad:rt=>1-(1-rt)*(1-rt),easeInOutQuad:rt=>rt<.5?2*rt*rt:1-Math.pow(-2*rt+2,2)/2,easeInCubic:rt=>rt*rt*rt,easeOutCubic:rt=>1-Math.pow(1-rt,3),easeInOutCubic:rt=>rt<.5?4*rt*rt*rt:1-Math.pow(-2*rt+2,3)/2,easeInQuart:rt=>rt*rt*rt*rt,easeOutQuart:rt=>1-Math.pow(1-rt,4),easeInOutQuart:rt=>rt<.5?8*rt*rt*rt*rt:1-Math.pow(-2*rt+2,4)/2,easeInQuint:rt=>rt*rt*rt*rt*rt,easeOutQuint:rt=>1-Math.pow(1-rt,5),easeInOutQuint:rt=>rt<.5?16*rt*rt*rt*rt*rt:1-Math.pow(-2*rt+2,5)/2,easeInSine:rt=>1-Math.cos(rt*Math.PI/2),easeOutSine:rt=>Math.sin(rt*Math.PI/2),easeInOutSine:rt=>-(Math.cos(Math.PI*rt)-1)/2,easeInExpo:rt=>rt===0?0:Math.pow(2,10*rt-10),easeOutExpo:rt=>rt===1?1:1-Math.pow(2,-10*rt),easeInOutExpo:rt=>rt===0?0:rt===1?1:rt<.5?Math.pow(2,20*rt-10)/2:(2-Math.pow(2,-20*rt+10))/2,easeInCirc:rt=>1-Math.sqrt(1-Math.pow(rt,2)),easeOutCirc:rt=>Math.sqrt(1-Math.pow(rt-1,2)),easeInOutCirc:rt=>rt<.5?(1-Math.sqrt(1-Math.pow(2*rt,2)))/2:(Math.sqrt(1-Math.pow(-2*rt+2,2))+1)/2,easeInBack:rt=>c3*rt*rt*rt-c1*rt*rt,easeOutBack:rt=>1+c3*Math.pow(rt-1,3)+c1*Math.pow(rt-1,2),easeInOutBack:rt=>rt<.5?Math.pow(2*rt,2)*((c2+1)*2*rt-c2)/2:(Math.pow(2*rt-2,2)*((c2+1)*(rt*2-2)+c2)+2)/2,easeInElastic:rt=>rt===0?0:rt===1?1:-Math.pow(2,10*rt-10)*Math.sin((rt*10-10.75)*c4),easeOutElastic:rt=>rt===0?0:rt===1?1:Math.pow(2,-10*rt)*Math.sin((rt*10-.75)*c4)+1,easeInOutElastic:rt=>rt===0?0:rt===1?1:rt<.5?-(Math.pow(2,20*rt-10)*Math.sin((20*rt-11.125)*c5))/2:Math.pow(2,-20*rt+10)*Math.sin((20*rt-11.125)*c5)/2+1,easeInBounce:rt=>1-bounceOut(1-rt),easeOutBounce:bounceOut,easeInOutBounce:rt=>rt<.5?(1-bounceOut(1-2*rt))/2:(1+bounceOut(2*rt-1))/2,steps},$get=Symbol.for("FluidValue.get"),$observers=Symbol.for("FluidValue.observers"),hasFluidValue=rt=>!!(rt&&rt[$get]),getFluidValue=rt=>rt&&rt[$get]?rt[$get]():rt,getFluidObservers=rt=>rt[$observers]||null;function callFluidObserver(rt,et){rt.eventObserved?rt.eventObserved(et):rt(et)}function callFluidObservers(rt,et){const tt=rt[$observers];tt&&tt.forEach(nt=>{callFluidObserver(nt,et)})}var FluidValue=class{constructor(rt){if(!rt&&!(rt=this.get))throw Error("Unknown getter");setFluidGetter(this,rt)}},setFluidGetter=(rt,et)=>setHidden(rt,$get,et);function addFluidObserver(rt,et){if(rt[$get]){let tt=rt[$observers];tt||setHidden(rt,$observers,tt=new Set),tt.has(et)||(tt.add(et),rt.observerAdded&&rt.observerAdded(tt.size,et))}return et}function removeFluidObserver(rt,et){const tt=rt[$observers];if(tt&&tt.has(et)){const nt=tt.size-1;nt?tt.delete(et):rt[$observers]=null,rt.observerRemoved&&rt.observerRemoved(nt,et)}}var setHidden=(rt,et,tt)=>Object.defineProperty(rt,et,{value:tt,writable:!0,configurable:!0}),numberRegex=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex=new RegExp(`(${numberRegex.source})(%|[a-z]+)`,"i"),rgbaRegex=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba=rt=>{const[et,tt]=parseCSSVariable(rt);if(!et||isSSR())return rt;const nt=window.getComputedStyle(document.documentElement).getPropertyValue(et);if(nt)return nt.trim();if(tt&&tt.startsWith("--")){const st=window.getComputedStyle(document.documentElement).getPropertyValue(tt);return st||rt}else{if(tt&&cssVariableRegex.test(tt))return variableToRgba(tt);if(tt)return tt}return rt},parseCSSVariable=rt=>{const et=cssVariableRegex.exec(rt);if(!et)return[,];const[,tt,nt]=et;return[tt,nt]},namedColorRegex,rgbaRound=(rt,et,tt,nt,st)=>`rgba(${Math.round(et)}, ${Math.round(tt)}, ${Math.round(nt)}, ${st})`,createStringInterpolator2=rt=>{namedColorRegex||(namedColorRegex=colors?new RegExp(`(${Object.keys(colors).join("|")})(?!\\w)`,"g"):/^\b$/);const et=rt.output.map(ot=>getFluidValue(ot).replace(cssVariableRegex,variableToRgba).replace(colorRegex,colorToRgba).replace(namedColorRegex,colorToRgba)),tt=et.map(ot=>ot.match(numberRegex).map(Number)),st=tt[0].map((ot,ct)=>tt.map(dt=>{if(!(ct in dt))throw Error('The arity of each "output" value must be equal');return dt[ct]})).map(ot=>createInterpolator({...rt,output:ot}));return ot=>{var ft;const ct=!unitRegex.test(et[0])&&((ft=et.find(gt=>unitRegex.test(gt)))==null?void 0:ft.replace(numberRegex,""));let dt=0;return et[0].replace(numberRegex,()=>`${st[dt++](ot)}${ct||""}`).replace(rgbaRegex,rgbaRound)}},prefix="react-spring: ",once=rt=>{const et=rt;let tt=!1;if(typeof et!="function")throw new TypeError(`${prefix}once requires a function parameter`);return(...nt)=>{tt||(et(...nt),tt=!0)}},warnInterpolate=once(console.warn);function deprecateInterpolate(){warnInterpolate(`${prefix}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var warnDirectCall=once(console.warn);function deprecateDirectCall(){warnDirectCall(`${prefix}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString(rt){return is.str(rt)&&(rt[0]=="#"||/\d/.test(rt)||!isSSR()&&cssVariableRegex.test(rt)||rt in(colors||{}))}var useIsomorphicLayoutEffect=isSSR()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted=()=>{const rt=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>(rt.current=!0,()=>{rt.current=!1}),[]),rt};function useForceUpdate(){const rt=reactExports.useState()[1],et=useIsMounted();return()=>{et.current&&rt(Math.random())}}function useMemoOne(rt,et){const[tt]=reactExports.useState(()=>({inputs:et,result:rt()})),nt=reactExports.useRef(),st=nt.current;let ot=st;return ot?ot.inputs&&areInputsEqual(et,ot.inputs)||(ot={inputs:et,result:rt()}):ot=tt,reactExports.useEffect(()=>{nt.current=ot,st==tt&&(tt.inputs=tt.result=void 0)},[ot]),ot.result}function areInputsEqual(rt,et){if(rt.length!==et.length)return!1;for(let tt=0;tt<rt.length;tt++)if(rt[tt]!==et[tt])return!1;return!0}var useOnce=rt=>reactExports.useEffect(rt,emptyDeps),emptyDeps=[];function usePrev(rt){const et=reactExports.useRef();return reactExports.useEffect(()=>{et.current=rt}),et.current}var $node=Symbol.for("Animated:node"),isAnimated=rt=>!!rt&&rt[$node]===rt,getAnimated=rt=>rt&&rt[$node],setAnimated=(rt,et)=>defineHidden(rt,$node,et),getPayload=rt=>rt&&rt[$node]&&rt[$node].getPayload(),Animated=class{constructor(){setAnimated(this,this)}getPayload(){return this.payload||[]}},AnimatedValue=class extends Animated{constructor(rt){super(),this._value=rt,this.done=!0,this.durationProgress=0,is.num(this._value)&&(this.lastPosition=this._value)}static create(rt){return new AnimatedValue(rt)}getPayload(){return[this]}getValue(){return this._value}setValue(rt,et){return is.num(rt)&&(this.lastPosition=rt,et&&(rt=Math.round(rt/et)*et,this.done&&(this.lastPosition=rt))),this._value===rt?!1:(this._value=rt,!0)}reset(){const{done:rt}=this;this.done=!1,is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,rt&&(this.lastVelocity=null),this.v0=null)}},AnimatedString=class extends AnimatedValue{constructor(rt){super(0),this._string=null,this._toString=createInterpolator({output:[rt,rt]})}static create(rt){return new AnimatedString(rt)}getValue(){const rt=this._string;return rt??(this._string=this._toString(this._value))}setValue(rt){if(is.str(rt)){if(rt==this._string)return!1;this._string=rt,this._value=1}else if(super.setValue(rt))this._string=null;else return!1;return!0}reset(rt){rt&&(this._toString=createInterpolator({output:[this.getValue(),rt]})),this._value=0,super.reset()}},TreeContext={dependencies:null},AnimatedObject=class extends Animated{constructor(rt){super(),this.source=rt,this.setValue(rt)}getValue(rt){const et={};return eachProp(this.source,(tt,nt)=>{isAnimated(tt)?et[nt]=tt.getValue(rt):hasFluidValue(tt)?et[nt]=getFluidValue(tt):rt||(et[nt]=tt)}),et}setValue(rt){this.source=rt,this.payload=this._makePayload(rt)}reset(){this.payload&&each(this.payload,rt=>rt.reset())}_makePayload(rt){if(rt){const et=new Set;return eachProp(rt,this._addToPayload,et),Array.from(et)}}_addToPayload(rt){TreeContext.dependencies&&hasFluidValue(rt)&&TreeContext.dependencies.add(rt);const et=getPayload(rt);et&&each(et,tt=>this.add(tt))}},AnimatedArray=class extends AnimatedObject{constructor(rt){super(rt)}static create(rt){return new AnimatedArray(rt)}getValue(){return this.source.map(rt=>rt.getValue())}setValue(rt){const et=this.getPayload();return rt.length==et.length?et.map((tt,nt)=>tt.setValue(rt[nt])).some(Boolean):(super.setValue(rt.map(makeAnimated)),!0)}};function makeAnimated(rt){return(isAnimatedString(rt)?AnimatedString:AnimatedValue).create(rt)}function getAnimatedType(rt){const et=getAnimated(rt);return et?et.constructor:is.arr(rt)?AnimatedArray:isAnimatedString(rt)?AnimatedString:AnimatedValue}var withAnimated=(rt,et)=>{const tt=!is.fun(rt)||rt.prototype&&rt.prototype.isReactComponent;return reactExports.forwardRef((nt,st)=>{const ot=reactExports.useRef(null),ct=tt&&reactExports.useCallback(bt=>{ot.current=updateRef(st,bt)},[st]),[dt,ft]=getAnimatedState(nt,et),gt=useForceUpdate(),yt=()=>{const bt=ot.current;if(tt&&!bt)return;(bt?et.applyAnimatedValues(bt,dt.getValue(!0)):!1)===!1&&gt()},xt=new PropsObserver(yt,ft),St=reactExports.useRef();useIsomorphicLayoutEffect(()=>(St.current=xt,each(ft,bt=>addFluidObserver(bt,xt)),()=>{St.current&&(each(St.current.deps,bt=>removeFluidObserver(bt,St.current)),raf.cancel(St.current.update))})),reactExports.useEffect(yt,[]),useOnce(()=>()=>{const bt=St.current;each(bt.deps,Pt=>removeFluidObserver(Pt,bt))});const wt=et.getComponentProps(dt.getValue());return reactExports.createElement(rt,{...wt,ref:ct})})},PropsObserver=class{constructor(rt,et){this.update=rt,this.deps=et}eventObserved(rt){rt.type=="change"&&raf.write(this.update)}};function getAnimatedState(rt,et){const tt=new Set;return TreeContext.dependencies=tt,rt.style&&(rt={...rt,style:et.createAnimatedStyle(rt.style)}),rt=new AnimatedObject(rt),TreeContext.dependencies=null,[rt,tt]}function updateRef(rt,et){return rt&&(is.fun(rt)?rt(et):rt.current=et),et}var cacheKey=Symbol.for("AnimatedComponent"),createHost=(rt,{applyAnimatedValues:et=()=>!1,createAnimatedStyle:tt=st=>new AnimatedObject(st),getComponentProps:nt=st=>st}={})=>{const st={applyAnimatedValues:et,createAnimatedStyle:tt,getComponentProps:nt},ot=ct=>{const dt=getDisplayName(ct)||"Anonymous";return is.str(ct)?ct=ot[ct]||(ot[ct]=withAnimated(ct,st)):ct=ct[cacheKey]||(ct[cacheKey]=withAnimated(ct,st)),ct.displayName=`Animated(${dt})`,ct};return eachProp(rt,(ct,dt)=>{is.arr(rt)&&(dt=getDisplayName(ct)),ot[dt]=ot(ct)}),{animated:ot}},getDisplayName=rt=>is.str(rt)?rt:rt&&is.str(rt.displayName)?rt.displayName:is.fun(rt)&&rt.name||null;function callProp(rt,...et){return is.fun(rt)?rt(...et):rt}var matchProp=(rt,et)=>rt===!0||!!(et&&rt&&(is.fun(rt)?rt(et):toArray(rt).includes(et))),resolveProp=(rt,et)=>is.obj(rt)?et&&rt[et]:rt,getDefaultProp=(rt,et)=>rt.default===!0?rt[et]:rt.default?rt.default[et]:void 0,noopTransform=rt=>rt,getDefaultProps=(rt,et=noopTransform)=>{let tt=DEFAULT_PROPS;rt.default&&rt.default!==!0&&(rt=rt.default,tt=Object.keys(rt));const nt={};for(const st of tt){const ot=et(rt[st],st);is.und(ot)||(nt[st]=ot)}return nt},DEFAULT_PROPS=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps(rt){const et={};let tt=0;if(eachProp(rt,(nt,st)=>{RESERVED_PROPS[st]||(et[st]=nt,tt++)}),tt)return et}function inferTo(rt){const et=getForwardProps(rt);if(et){const tt={to:et};return eachProp(rt,(nt,st)=>st in et||(tt[st]=nt)),tt}return{...rt}}function computeGoal(rt){return rt=getFluidValue(rt),is.arr(rt)?rt.map(computeGoal):isAnimatedString(rt)?globals_exports.createStringInterpolator({range:[0,1],output:[rt,rt]})(1):rt}function hasProps(rt){for(const et in rt)return!0;return!1}function isAsyncTo(rt){return is.fun(rt)||is.arr(rt)&&is.obj(rt[0])}function detachRefs(rt,et){var tt;(tt=rt.ref)==null||tt.delete(rt),et==null||et.delete(rt)}function replaceRef(rt,et){var tt;et&&rt.ref!==et&&((tt=rt.ref)==null||tt.delete(rt),et.add(rt),rt.ref=et)}var config={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},defaults={...config.default,mass:1,damping:1,easing:easings.linear,clamp:!1},AnimationConfig=class{constructor(){this.velocity=0,Object.assign(this,defaults)}};function mergeConfig(rt,et,tt){tt&&(tt={...tt},sanitizeConfig(tt,et),et={...tt,...et}),sanitizeConfig(rt,et),Object.assign(rt,et);for(const ct in defaults)rt[ct]==null&&(rt[ct]=defaults[ct]);let{frequency:nt,damping:st}=rt;const{mass:ot}=rt;return is.und(nt)||(nt<.01&&(nt=.01),st<0&&(st=0),rt.tension=Math.pow(2*Math.PI/nt,2)*ot,rt.friction=4*Math.PI*st*ot/nt),rt}function sanitizeConfig(rt,et){if(!is.und(et.decay))rt.duration=void 0;else{const tt=!is.und(et.tension)||!is.und(et.friction);(tt||!is.und(et.frequency)||!is.und(et.damping)||!is.und(et.mass))&&(rt.duration=void 0,rt.decay=void 0),tt&&(rt.frequency=void 0)}}var emptyArray=[],Animation=class{constructor(){this.changed=!1,this.values=emptyArray,this.toValues=null,this.fromValues=emptyArray,this.config=new AnimationConfig,this.immediate=!1}};function scheduleProps(rt,{key:et,props:tt,defaultProps:nt,state:st,actions:ot}){return new Promise((ct,dt)=>{let ft,gt,yt=matchProp(tt.cancel??(nt==null?void 0:nt.cancel),et);if(yt)wt();else{is.und(tt.pause)||(st.paused=matchProp(tt.pause,et));let bt=nt==null?void 0:nt.pause;bt!==!0&&(bt=st.paused||matchProp(bt,et)),ft=callProp(tt.delay||0,et),bt?(st.resumeQueue.add(St),ot.pause()):(ot.resume(),St())}function xt(){st.resumeQueue.add(St),st.timeouts.delete(gt),gt.cancel(),ft=gt.time-raf.now()}function St(){ft>0&&!globals_exports.skipAnimation?(st.delayed=!0,gt=raf.setTimeout(wt,ft),st.pauseQueue.add(xt),st.timeouts.add(gt)):wt()}function wt(){st.delayed&&(st.delayed=!1),st.pauseQueue.delete(xt),st.timeouts.delete(gt),rt<=(st.cancelId||0)&&(yt=!0);try{ot.start({...tt,callId:rt,cancel:yt},ct)}catch(bt){dt(bt)}}})}var getCombinedResult=(rt,et)=>et.length==1?et[0]:et.some(tt=>tt.cancelled)?getCancelledResult(rt.get()):et.every(tt=>tt.noop)?getNoopResult(rt.get()):getFinishedResult(rt.get(),et.every(tt=>tt.finished)),getNoopResult=rt=>({value:rt,noop:!0,finished:!0,cancelled:!1}),getFinishedResult=(rt,et,tt=!1)=>({value:rt,finished:et,cancelled:tt}),getCancelledResult=rt=>({value:rt,cancelled:!0,finished:!1});function runAsync(rt,et,tt,nt){const{callId:st,parentId:ot,onRest:ct}=et,{asyncTo:dt,promise:ft}=tt;return!ot&&rt===dt&&!et.reset?ft:tt.promise=(async()=>{tt.asyncId=st,tt.asyncTo=rt;const gt=getDefaultProps(et,(Rt,Mt)=>Mt==="onRest"?void 0:Rt);let yt,xt;const St=new Promise((Rt,Mt)=>(yt=Rt,xt=Mt)),wt=Rt=>{const Mt=st<=(tt.cancelId||0)&&getCancelledResult(nt)||st!==tt.asyncId&&getFinishedResult(nt,!1);if(Mt)throw Rt.result=Mt,xt(Rt),Rt},bt=(Rt,Mt)=>{const kt=new BailSignal,Dt=new SkipAnimationSignal;return(async()=>{if(globals_exports.skipAnimation)throw stopAsync(tt),Dt.result=getFinishedResult(nt,!1),xt(Dt),Dt;wt(kt);const zt=is.obj(Rt)?{...Rt}:{...Mt,to:Rt};zt.parentId=st,eachProp(gt,(Yt,Nt)=>{is.und(zt[Nt])&&(zt[Nt]=Yt)});const Lt=await nt.start(zt);return wt(kt),tt.paused&&await new Promise(Yt=>{tt.resumeQueue.add(Yt)}),Lt})()};let Pt;if(globals_exports.skipAnimation)return stopAsync(tt),getFinishedResult(nt,!1);try{let Rt;is.arr(rt)?Rt=(async Mt=>{for(const kt of Mt)await bt(kt)})(rt):Rt=Promise.resolve(rt(bt,nt.stop.bind(nt))),await Promise.all([Rt.then(yt),St]),Pt=getFinishedResult(nt.get(),!0,!1)}catch(Rt){if(Rt instanceof BailSignal)Pt=Rt.result;else if(Rt instanceof SkipAnimationSignal)Pt=Rt.result;else throw Rt}finally{st==tt.asyncId&&(tt.asyncId=ot,tt.asyncTo=ot?dt:void 0,tt.promise=ot?ft:void 0)}return is.fun(ct)&&raf.batchedUpdates(()=>{ct(Pt,nt,nt.item)}),Pt})()}function stopAsync(rt,et){flush(rt.timeouts,tt=>tt.cancel()),rt.pauseQueue.clear(),rt.resumeQueue.clear(),rt.asyncId=rt.asyncTo=rt.promise=void 0,et&&(rt.cancelId=et)}var BailSignal=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SkipAnimationSignal=class extends Error{constructor(){super("SkipAnimationSignal")}},isFrameValue=rt=>rt instanceof FrameValue,nextId=1,FrameValue=class extends FluidValue{constructor(){super(...arguments),this.id=nextId++,this._priority=0}get priority(){return this._priority}set priority(rt){this._priority!=rt&&(this._priority=rt,this._onPriorityChange(rt))}get(){const rt=getAnimated(this);return rt&&rt.getValue()}to(...rt){return globals_exports.to(this,rt)}interpolate(...rt){return deprecateInterpolate(),globals_exports.to(this,rt)}toJSON(){return this.get()}observerAdded(rt){rt==1&&this._attach()}observerRemoved(rt){rt==0&&this._detach()}_attach(){}_detach(){}_onChange(rt,et=!1){callFluidObservers(this,{type:"change",parent:this,value:rt,idle:et})}_onPriorityChange(rt){this.idle||frameLoop.sort(this),callFluidObservers(this,{type:"priority",parent:this,priority:rt})}},$P=Symbol.for("SpringPhase"),HAS_ANIMATED=1,IS_ANIMATING=2,IS_PAUSED=4,hasAnimated=rt=>(rt[$P]&HAS_ANIMATED)>0,isAnimating=rt=>(rt[$P]&IS_ANIMATING)>0,isPaused=rt=>(rt[$P]&IS_PAUSED)>0,setActiveBit=(rt,et)=>et?rt[$P]|=IS_ANIMATING|HAS_ANIMATED:rt[$P]&=-3,setPausedBit=(rt,et)=>et?rt[$P]|=IS_PAUSED:rt[$P]&=-5,SpringValue=class extends FrameValue{constructor(rt,et){if(super(),this.animation=new Animation,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is.und(rt)||!is.und(et)){const tt=is.obj(rt)?{...rt}:{...et,from:rt};is.und(tt.default)&&(tt.default=!0),this.start(tt)}}get idle(){return!(isAnimating(this)||this._state.asyncTo)||isPaused(this)}get goal(){return getFluidValue(this.animation.to)}get velocity(){const rt=getAnimated(this);return rt instanceof AnimatedValue?rt.lastVelocity||0:rt.getPayload().map(et=>et.lastVelocity||0)}get hasAnimated(){return hasAnimated(this)}get isAnimating(){return isAnimating(this)}get isPaused(){return isPaused(this)}get isDelayed(){return this._state.delayed}advance(rt){let et=!0,tt=!1;const nt=this.animation;let{toValues:st}=nt;const{config:ot}=nt,ct=getPayload(nt.to);!ct&&hasFluidValue(nt.to)&&(st=toArray(getFluidValue(nt.to))),nt.values.forEach((gt,yt)=>{if(gt.done)return;const xt=gt.constructor==AnimatedString?1:ct?ct[yt].lastPosition:st[yt];let St=nt.immediate,wt=xt;if(!St){if(wt=gt.lastPosition,ot.tension<=0){gt.done=!0;return}let bt=gt.elapsedTime+=rt;const Pt=nt.fromValues[yt],Rt=gt.v0!=null?gt.v0:gt.v0=is.arr(ot.velocity)?ot.velocity[yt]:ot.velocity;let Mt;const kt=ot.precision||(Pt==xt?.005:Math.min(1,Math.abs(xt-Pt)*.001));if(is.und(ot.duration))if(ot.decay){const Dt=ot.decay===!0?.998:ot.decay,zt=Math.exp(-(1-Dt)*bt);wt=Pt+Rt/(1-Dt)*(1-zt),St=Math.abs(gt.lastPosition-wt)<=kt,Mt=Rt*zt}else{Mt=gt.lastVelocity==null?Rt:gt.lastVelocity;const Dt=ot.restVelocity||kt/10,zt=ot.clamp?0:ot.bounce,Lt=!is.und(zt),Yt=Pt==xt?gt.v0>0:Pt<xt;let Nt,Jt=!1;const ur=1,dr=Math.ceil(rt/ur);for(let Tr=0;Tr<dr&&(Nt=Math.abs(Mt)>Dt,!(!Nt&&(St=Math.abs(xt-wt)<=kt,St)));++Tr){Lt&&(Jt=wt==xt||wt>xt==Yt,Jt&&(Mt=-Mt*zt,wt=xt));const Kt=-ot.tension*1e-6*(wt-xt),Zt=-ot.friction*.001*Mt,lr=(Kt+Zt)/ot.mass;Mt=Mt+lr*ur,wt=wt+Mt*ur}}else{let Dt=1;ot.duration>0&&(this._memoizedDuration!==ot.duration&&(this._memoizedDuration=ot.duration,gt.durationProgress>0&&(gt.elapsedTime=ot.duration*gt.durationProgress,bt=gt.elapsedTime+=rt)),Dt=(ot.progress||0)+bt/this._memoizedDuration,Dt=Dt>1?1:Dt<0?0:Dt,gt.durationProgress=Dt),wt=Pt+ot.easing(Dt)*(xt-Pt),Mt=(wt-gt.lastPosition)/rt,St=Dt==1}gt.lastVelocity=Mt,Number.isNaN(wt)&&(console.warn("Got NaN while animating:",this),St=!0)}ct&&!ct[yt].done&&(St=!1),St?gt.done=!0:et=!1,gt.setValue(wt,ot.round)&&(tt=!0)});const dt=getAnimated(this),ft=dt.getValue();if(et){const gt=getFluidValue(nt.to);(ft!==gt||tt)&&!ot.decay?(dt.setValue(gt),this._onChange(gt)):tt&&ot.decay&&this._onChange(ft),this._stop()}else tt&&this._onChange(ft)}set(rt){return raf.batchedUpdates(()=>{this._stop(),this._focus(rt),this._set(rt)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating(this)){const{to:rt,config:et}=this.animation;raf.batchedUpdates(()=>{this._onStart(),et.decay||this._set(rt,!1),this._stop()})}return this}update(rt){return(this.queue||(this.queue=[])).push(rt),this}start(rt,et){let tt;return is.und(rt)?(tt=this.queue||[],this.queue=[]):tt=[is.obj(rt)?rt:{...et,to:rt}],Promise.all(tt.map(nt=>this._update(nt))).then(nt=>getCombinedResult(this,nt))}stop(rt){const{to:et}=this.animation;return this._focus(this.get()),stopAsync(this._state,rt&&this._lastCallId),raf.batchedUpdates(()=>this._stop(et,rt)),this}reset(){this._update({reset:!0})}eventObserved(rt){rt.type=="change"?this._start():rt.type=="priority"&&(this.priority=rt.priority+1)}_prepareNode(rt){const et=this.key||"";let{to:tt,from:nt}=rt;tt=is.obj(tt)?tt[et]:tt,(tt==null||isAsyncTo(tt))&&(tt=void 0),nt=is.obj(nt)?nt[et]:nt,nt==null&&(nt=void 0);const st={to:tt,from:nt};return hasAnimated(this)||(rt.reverse&&([tt,nt]=[nt,tt]),nt=getFluidValue(nt),is.und(nt)?getAnimated(this)||this._set(tt):this._set(nt)),st}_update({...rt},et){const{key:tt,defaultProps:nt}=this;rt.default&&Object.assign(nt,getDefaultProps(rt,(ct,dt)=>/^on/.test(dt)?resolveProp(ct,tt):ct)),mergeActiveFn(this,rt,"onProps"),sendEvent(this,"onProps",rt,this);const st=this._prepareNode(rt);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const ot=this._state;return scheduleProps(++this._lastCallId,{key:tt,props:rt,defaultProps:nt,state:ot,actions:{pause:()=>{isPaused(this)||(setPausedBit(this,!0),flushCalls(ot.pauseQueue),sendEvent(this,"onPause",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},resume:()=>{isPaused(this)&&(setPausedBit(this,!1),isAnimating(this)&&this._resume(),flushCalls(ot.resumeQueue),sendEvent(this,"onResume",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},start:this._merge.bind(this,st)}}).then(ct=>{if(rt.loop&&ct.finished&&!(et&&ct.noop)){const dt=createLoopUpdate(rt);if(dt)return this._update(dt,!0)}return ct})}_merge(rt,et,tt){if(et.cancel)return this.stop(!0),tt(getCancelledResult(this));const nt=!is.und(rt.to),st=!is.und(rt.from);if(nt||st)if(et.callId>this._lastToId)this._lastToId=et.callId;else return tt(getCancelledResult(this));const{key:ot,defaultProps:ct,animation:dt}=this,{to:ft,from:gt}=dt;let{to:yt=ft,from:xt=gt}=rt;st&&!nt&&(!et.default||is.und(yt))&&(yt=xt),et.reverse&&([yt,xt]=[xt,yt]);const St=!isEqual(xt,gt);St&&(dt.from=xt),xt=getFluidValue(xt);const wt=!isEqual(yt,ft);wt&&this._focus(yt);const bt=isAsyncTo(et.to),{config:Pt}=dt,{decay:Rt,velocity:Mt}=Pt;(nt||st)&&(Pt.velocity=0),et.config&&!bt&&mergeConfig(Pt,callProp(et.config,ot),et.config!==ct.config?callProp(ct.config,ot):void 0);let kt=getAnimated(this);if(!kt||is.und(yt))return tt(getFinishedResult(this,!0));const Dt=is.und(et.reset)?st&&!et.default:!is.und(xt)&&matchProp(et.reset,ot),zt=Dt?xt:this.get(),Lt=computeGoal(yt),Yt=is.num(Lt)||is.arr(Lt)||isAnimatedString(Lt),Nt=!bt&&(!Yt||matchProp(ct.immediate||et.immediate,ot));if(wt){const Tr=getAnimatedType(yt);if(Tr!==kt.constructor)if(Nt)kt=this._set(Lt);else throw Error(`Cannot animate between ${kt.constructor.name} and ${Tr.name}, as the "to" prop suggests`)}const Jt=kt.constructor;let ur=hasFluidValue(yt),dr=!1;if(!ur){const Tr=Dt||!hasAnimated(this)&&St;(wt||Tr)&&(dr=isEqual(computeGoal(zt),Lt),ur=!dr),(!isEqual(dt.immediate,Nt)&&!Nt||!isEqual(Pt.decay,Rt)||!isEqual(Pt.velocity,Mt))&&(ur=!0)}if(dr&&isAnimating(this)&&(dt.changed&&!Dt?ur=!0:ur||this._stop(ft)),!bt&&((ur||hasFluidValue(ft))&&(dt.values=kt.getPayload(),dt.toValues=hasFluidValue(yt)?null:Jt==AnimatedString?[1]:toArray(Lt)),dt.immediate!=Nt&&(dt.immediate=Nt,!Nt&&!Dt&&this._set(ft)),ur)){const{onRest:Tr}=dt;each(ACTIVE_EVENTS,Zt=>mergeActiveFn(this,et,Zt));const Kt=getFinishedResult(this,checkFinished(this,ft));flushCalls(this._pendingCalls,Kt),this._pendingCalls.add(tt),dt.changed&&raf.batchedUpdates(()=>{var Zt;dt.changed=!Dt,Tr==null||Tr(Kt,this),Dt?callProp(ct.onRest,Kt):(Zt=dt.onStart)==null||Zt.call(dt,Kt,this)})}Dt&&this._set(zt),bt?tt(runAsync(et.to,et,this._state,this)):ur?this._start():isAnimating(this)&&!wt?this._pendingCalls.add(tt):tt(getNoopResult(zt))}_focus(rt){const et=this.animation;rt!==et.to&&(getFluidObservers(this)&&this._detach(),et.to=rt,getFluidObservers(this)&&this._attach())}_attach(){let rt=0;const{to:et}=this.animation;hasFluidValue(et)&&(addFluidObserver(et,this),isFrameValue(et)&&(rt=et.priority+1)),this.priority=rt}_detach(){const{to:rt}=this.animation;hasFluidValue(rt)&&removeFluidObserver(rt,this)}_set(rt,et=!0){const tt=getFluidValue(rt);if(!is.und(tt)){const nt=getAnimated(this);if(!nt||!isEqual(tt,nt.getValue())){const st=getAnimatedType(tt);!nt||nt.constructor!=st?setAnimated(this,st.create(tt)):nt.setValue(tt),nt&&raf.batchedUpdates(()=>{this._onChange(tt,et)})}}return getAnimated(this)}_onStart(){const rt=this.animation;rt.changed||(rt.changed=!0,sendEvent(this,"onStart",getFinishedResult(this,checkFinished(this,rt.to)),this))}_onChange(rt,et){et||(this._onStart(),callProp(this.animation.onChange,rt,this)),callProp(this.defaultProps.onChange,rt,this),super._onChange(rt,et)}_start(){const rt=this.animation;getAnimated(this).reset(getFluidValue(rt.to)),rt.immediate||(rt.fromValues=rt.values.map(et=>et.lastPosition)),isAnimating(this)||(setActiveBit(this,!0),isPaused(this)||this._resume())}_resume(){globals_exports.skipAnimation?this.finish():frameLoop.start(this)}_stop(rt,et){if(isAnimating(this)){setActiveBit(this,!1);const tt=this.animation;each(tt.values,st=>{st.done=!0}),tt.toValues&&(tt.onChange=tt.onPause=tt.onResume=void 0),callFluidObservers(this,{type:"idle",parent:this});const nt=et?getCancelledResult(this.get()):getFinishedResult(this.get(),checkFinished(this,rt??tt.to));flushCalls(this._pendingCalls,nt),tt.changed&&(tt.changed=!1,sendEvent(this,"onRest",nt,this))}}};function checkFinished(rt,et){const tt=computeGoal(et),nt=computeGoal(rt.get());return isEqual(nt,tt)}function createLoopUpdate(rt,et=rt.loop,tt=rt.to){const nt=callProp(et);if(nt){const st=nt!==!0&&inferTo(nt),ot=(st||rt).reverse,ct=!st||st.reset;return createUpdate({...rt,loop:et,default:!1,pause:void 0,to:!ot||isAsyncTo(tt)?tt:void 0,from:ct?rt.from:void 0,reset:ct,...st})}}function createUpdate(rt){const{to:et,from:tt}=rt=inferTo(rt),nt=new Set;return is.obj(et)&&findDefined(et,nt),is.obj(tt)&&findDefined(tt,nt),rt.keys=nt.size?Array.from(nt):null,rt}function declareUpdate(rt){const et=createUpdate(rt);return is.und(et.default)&&(et.default=getDefaultProps(et)),et}function findDefined(rt,et){eachProp(rt,(tt,nt)=>tt!=null&&et.add(nt))}var ACTIVE_EVENTS=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn(rt,et,tt){rt.animation[tt]=et[tt]!==getDefaultProp(et,tt)?resolveProp(et[tt],rt.key):void 0}function sendEvent(rt,et,...tt){var nt,st,ot,ct;(st=(nt=rt.animation)[et])==null||st.call(nt,...tt),(ct=(ot=rt.defaultProps)[et])==null||ct.call(ot,...tt)}var BATCHED_EVENTS=["onStart","onChange","onRest"],nextId2=1,Controller=class{constructor(rt,et){this.id=nextId2++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),et&&(this._flush=et),rt&&this.start({default:!0,...rt})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(rt=>rt.idle&&!rt.isDelayed&&!rt.isPaused)}get item(){return this._item}set item(rt){this._item=rt}get(){const rt={};return this.each((et,tt)=>rt[tt]=et.get()),rt}set(rt){for(const et in rt){const tt=rt[et];is.und(tt)||this.springs[et].set(tt)}}update(rt){return rt&&this.queue.push(createUpdate(rt)),this}start(rt){let{queue:et}=this;return rt?et=toArray(rt).map(createUpdate):this.queue=[],this._flush?this._flush(this,et):(prepareKeys(this,et),flushUpdateQueue(this,et))}stop(rt,et){if(rt!==!!rt&&(et=rt),et){const tt=this.springs;each(toArray(et),nt=>tt[nt].stop(!!rt))}else stopAsync(this._state,this._lastAsyncId),this.each(tt=>tt.stop(!!rt));return this}pause(rt){if(is.und(rt))this.start({pause:!0});else{const et=this.springs;each(toArray(rt),tt=>et[tt].pause())}return this}resume(rt){if(is.und(rt))this.start({pause:!1});else{const et=this.springs;each(toArray(rt),tt=>et[tt].resume())}return this}each(rt){eachProp(this.springs,rt)}_onFrame(){const{onStart:rt,onChange:et,onRest:tt}=this._events,nt=this._active.size>0,st=this._changed.size>0;(nt&&!this._started||st&&!this._started)&&(this._started=!0,flush(rt,([dt,ft])=>{ft.value=this.get(),dt(ft,this,this._item)}));const ot=!nt&&this._started,ct=st||ot&&tt.size?this.get():null;st&&et.size&&flush(et,([dt,ft])=>{ft.value=ct,dt(ft,this,this._item)}),ot&&(this._started=!1,flush(tt,([dt,ft])=>{ft.value=ct,dt(ft,this,this._item)}))}eventObserved(rt){if(rt.type=="change")this._changed.add(rt.parent),rt.idle||this._active.add(rt.parent);else if(rt.type=="idle")this._active.delete(rt.parent);else return;raf.onFrame(this._onFrame)}};function flushUpdateQueue(rt,et){return Promise.all(et.map(tt=>flushUpdate(rt,tt))).then(tt=>getCombinedResult(rt,tt))}async function flushUpdate(rt,et,tt){const{keys:nt,to:st,from:ot,loop:ct,onRest:dt,onResolve:ft}=et,gt=is.obj(et.default)&&et.default;ct&&(et.loop=!1),st===!1&&(et.to=null),ot===!1&&(et.from=null);const yt=is.arr(st)||is.fun(st)?st:void 0;yt?(et.to=void 0,et.onRest=void 0,gt&&(gt.onRest=void 0)):each(BATCHED_EVENTS,Pt=>{const Rt=et[Pt];if(is.fun(Rt)){const Mt=rt._events[Pt];et[Pt]=({finished:kt,cancelled:Dt})=>{const zt=Mt.get(Rt);zt?(kt||(zt.finished=!1),Dt&&(zt.cancelled=!0)):Mt.set(Rt,{value:null,finished:kt||!1,cancelled:Dt||!1})},gt&&(gt[Pt]=et[Pt])}});const xt=rt._state;et.pause===!xt.paused?(xt.paused=et.pause,flushCalls(et.pause?xt.pauseQueue:xt.resumeQueue)):xt.paused&&(et.pause=!0);const St=(nt||Object.keys(rt.springs)).map(Pt=>rt.springs[Pt].start(et)),wt=et.cancel===!0||getDefaultProp(et,"cancel")===!0;(yt||wt&&xt.asyncId)&&St.push(scheduleProps(++rt._lastAsyncId,{props:et,state:xt,actions:{pause:noop,resume:noop,start(Pt,Rt){wt?(stopAsync(xt,rt._lastAsyncId),Rt(getCancelledResult(rt))):(Pt.onRest=dt,Rt(runAsync(yt,Pt,xt,rt)))}}})),xt.paused&&await new Promise(Pt=>{xt.resumeQueue.add(Pt)});const bt=getCombinedResult(rt,await Promise.all(St));if(ct&&bt.finished&&!(tt&&bt.noop)){const Pt=createLoopUpdate(et,ct,st);if(Pt)return prepareKeys(rt,[Pt]),flushUpdate(rt,Pt,!0)}return ft&&raf.batchedUpdates(()=>ft(bt,rt,rt.item)),bt}function getSprings(rt,et){const tt={...rt.springs};return et&&each(toArray(et),nt=>{is.und(nt.keys)&&(nt=createUpdate(nt)),is.obj(nt.to)||(nt={...nt,to:void 0}),prepareSprings(tt,nt,st=>createSpring(st))}),setSprings(rt,tt),tt}function setSprings(rt,et){eachProp(et,(tt,nt)=>{rt.springs[nt]||(rt.springs[nt]=tt,addFluidObserver(tt,rt))})}function createSpring(rt,et){const tt=new SpringValue;return tt.key=rt,et&&addFluidObserver(tt,et),tt}function prepareSprings(rt,et,tt){et.keys&&each(et.keys,nt=>{(rt[nt]||(rt[nt]=tt(nt)))._prepareNode(et)})}function prepareKeys(rt,et){each(et,tt=>{prepareSprings(rt.springs,tt,nt=>createSpring(nt,rt))})}var SpringContext=({children:rt,...et})=>{const tt=reactExports.useContext(ctx),nt=et.pause||!!tt.pause,st=et.immediate||!!tt.immediate;et=useMemoOne(()=>({pause:nt,immediate:st}),[nt,st]);const{Provider:ot}=ctx;return reactExports.createElement(ot,{value:et},rt)},ctx=makeContext(SpringContext,{});SpringContext.Provider=ctx.Provider;SpringContext.Consumer=ctx.Consumer;function makeContext(rt,et){return Object.assign(rt,reactExports.createContext(et)),rt.Provider._context=rt,rt.Consumer._context=rt,rt}var SpringRef=()=>{const rt=[],et=function(nt){deprecateDirectCall();const st=[];return each(rt,(ot,ct)=>{if(is.und(nt))st.push(ot.start());else{const dt=tt(nt,ot,ct);dt&&st.push(ot.start(dt))}}),st};et.current=rt,et.add=function(nt){rt.includes(nt)||rt.push(nt)},et.delete=function(nt){const st=rt.indexOf(nt);~st&&rt.splice(st,1)},et.pause=function(){return each(rt,nt=>nt.pause(...arguments)),this},et.resume=function(){return each(rt,nt=>nt.resume(...arguments)),this},et.set=function(nt){each(rt,(st,ot)=>{const ct=is.fun(nt)?nt(ot,st):nt;ct&&st.set(ct)})},et.start=function(nt){const st=[];return each(rt,(ot,ct)=>{if(is.und(nt))st.push(ot.start());else{const dt=this._getProps(nt,ot,ct);dt&&st.push(ot.start(dt))}}),st},et.stop=function(){return each(rt,nt=>nt.stop(...arguments)),this},et.update=function(nt){return each(rt,(st,ot)=>st.update(this._getProps(nt,st,ot))),this};const tt=function(nt,st,ot){return is.fun(nt)?nt(ot,st):nt};return et._getProps=tt,et};function useSprings(rt,et,tt){const nt=is.fun(et)&&et;nt&&!tt&&(tt=[]);const st=reactExports.useMemo(()=>nt||arguments.length==3?SpringRef():void 0,[]),ot=reactExports.useRef(0),ct=useForceUpdate(),dt=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(Mt,kt){const Dt=getSprings(Mt,kt);return ot.current>0&&!dt.queue.length&&!Object.keys(Dt).some(Lt=>!Mt.springs[Lt])?flushUpdateQueue(Mt,kt):new Promise(Lt=>{setSprings(Mt,Dt),dt.queue.push(()=>{Lt(flushUpdateQueue(Mt,kt))}),ct()})}}),[]),ft=reactExports.useRef([...dt.ctrls]),gt=[],yt=usePrev(rt)||0;reactExports.useMemo(()=>{each(ft.current.slice(rt,yt),Mt=>{detachRefs(Mt,st),Mt.stop(!0)}),ft.current.length=rt,xt(yt,rt)},[rt]),reactExports.useMemo(()=>{xt(0,Math.min(yt,rt))},tt);function xt(Mt,kt){for(let Dt=Mt;Dt<kt;Dt++){const zt=ft.current[Dt]||(ft.current[Dt]=new Controller(null,dt.flush)),Lt=nt?nt(Dt,zt):et[Dt];Lt&&(gt[Dt]=declareUpdate(Lt))}}const St=ft.current.map((Mt,kt)=>getSprings(Mt,gt[kt])),wt=reactExports.useContext(SpringContext),bt=usePrev(wt),Pt=wt!==bt&&hasProps(wt);useIsomorphicLayoutEffect(()=>{ot.current++,dt.ctrls=ft.current;const{queue:Mt}=dt;Mt.length&&(dt.queue=[],each(Mt,kt=>kt())),each(ft.current,(kt,Dt)=>{st==null||st.add(kt),Pt&&kt.start({default:wt});const zt=gt[Dt];zt&&(replaceRef(kt,zt.ref),kt.ref?kt.queue.push(zt):kt.start(zt))})}),useOnce(()=>()=>{each(dt.ctrls,Mt=>Mt.stop(!0))});const Rt=St.map(Mt=>({...Mt}));return st?[Rt,st]:Rt}function useSpring(rt,et){const tt=is.fun(rt),[[nt],st]=useSprings(1,tt?rt:[rt],tt?[]:et);return tt||arguments.length==2?[nt,st]:nt}var Interpolation=class extends FrameValue{constructor(rt,et){super(),this.source=rt,this.idle=!0,this._active=new Set,this.calc=createInterpolator(...et);const tt=this._get(),nt=getAnimatedType(tt);setAnimated(this,nt.create(tt))}advance(rt){const et=this._get(),tt=this.get();isEqual(et,tt)||(getAnimated(this).setValue(et),this._onChange(et,this.idle)),!this.idle&&checkIdle(this._active)&&becomeIdle(this)}_get(){const rt=is.arr(this.source)?this.source.map(getFluidValue):toArray(getFluidValue(this.source));return this.calc(...rt)}_start(){this.idle&&!checkIdle(this._active)&&(this.idle=!1,each(getPayload(this),rt=>{rt.done=!1}),globals_exports.skipAnimation?(raf.batchedUpdates(()=>this.advance()),becomeIdle(this)):frameLoop.start(this))}_attach(){let rt=1;each(toArray(this.source),et=>{hasFluidValue(et)&&addFluidObserver(et,this),isFrameValue(et)&&(et.idle||this._active.add(et),rt=Math.max(rt,et.priority+1))}),this.priority=rt,this._start()}_detach(){each(toArray(this.source),rt=>{hasFluidValue(rt)&&removeFluidObserver(rt,this)}),this._active.clear(),becomeIdle(this)}eventObserved(rt){rt.type=="change"?rt.idle?this.advance():(this._active.add(rt.parent),this._start()):rt.type=="idle"?this._active.delete(rt.parent):rt.type=="priority"&&(this.priority=toArray(this.source).reduce((et,tt)=>Math.max(et,(isFrameValue(tt)?tt.priority:0)+1),0))}};function isIdle(rt){return rt.idle!==!1}function checkIdle(rt){return!rt.size||Array.from(rt).every(isIdle)}function becomeIdle(rt){rt.idle||(rt.idle=!0,each(getPayload(rt),et=>{et.done=!0}),callFluidObservers(rt,{type:"idle",parent:rt}))}globals_exports.assign({createStringInterpolator:createStringInterpolator2,to:(rt,et)=>new Interpolation(rt,et)});var reactDomExports=requireReactDom(),isCustomPropRE=/^--/;function dangerousStyleValue(rt,et){return et==null||typeof et=="boolean"||et===""?"":typeof et=="number"&&et!==0&&!isCustomPropRE.test(rt)&&!(isUnitlessNumber.hasOwnProperty(rt)&&isUnitlessNumber[rt])?et+"px":(""+et).trim()}var attributeCache={};function applyAnimatedValues(rt,et){if(!rt.nodeType||!rt.setAttribute)return!1;const tt=rt.nodeName==="filter"||rt.parentNode&&rt.parentNode.nodeName==="filter",{className:nt,style:st,children:ot,scrollTop:ct,scrollLeft:dt,viewBox:ft,...gt}=et,yt=Object.values(gt),xt=Object.keys(gt).map(St=>tt||rt.hasAttribute(St)?St:attributeCache[St]||(attributeCache[St]=St.replace(/([A-Z])/g,wt=>"-"+wt.toLowerCase())));ot!==void 0&&(rt.textContent=ot);for(const St in st)if(st.hasOwnProperty(St)){const wt=dangerousStyleValue(St,st[St]);isCustomPropRE.test(St)?rt.style.setProperty(St,wt):rt.style[St]=wt}xt.forEach((St,wt)=>{rt.setAttribute(St,yt[wt])}),nt!==void 0&&(rt.className=nt),ct!==void 0&&(rt.scrollTop=ct),dt!==void 0&&(rt.scrollLeft=dt),ft!==void 0&&rt.setAttribute("viewBox",ft)}var isUnitlessNumber={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixKey=(rt,et)=>rt+et.charAt(0).toUpperCase()+et.substring(1),prefixes=["Webkit","Ms","Moz","O"];isUnitlessNumber=Object.keys(isUnitlessNumber).reduce((rt,et)=>(prefixes.forEach(tt=>rt[prefixKey(tt,et)]=rt[et]),rt),isUnitlessNumber);var domTransforms=/^(matrix|translate|scale|rotate|skew)/,pxTransforms=/^(translate)/,degTransforms=/^(rotate|skew)/,addUnit=(rt,et)=>is.num(rt)&&rt!==0?rt+et:rt,isValueIdentity=(rt,et)=>is.arr(rt)?rt.every(tt=>isValueIdentity(tt,et)):is.num(rt)?rt===et:parseFloat(rt)===et,AnimatedStyle=class extends AnimatedObject{constructor({x:rt,y:et,z:tt,...nt}){const st=[],ot=[];(rt||et||tt)&&(st.push([rt||0,et||0,tt||0]),ot.push(ct=>[`translate3d(${ct.map(dt=>addUnit(dt,"px")).join(",")})`,isValueIdentity(ct,0)])),eachProp(nt,(ct,dt)=>{if(dt==="transform")st.push([ct||""]),ot.push(ft=>[ft,ft===""]);else if(domTransforms.test(dt)){if(delete nt[dt],is.und(ct))return;const ft=pxTransforms.test(dt)?"px":degTransforms.test(dt)?"deg":"";st.push(toArray(ct)),ot.push(dt==="rotate3d"?([gt,yt,xt,St])=>[`rotate3d(${gt},${yt},${xt},${addUnit(St,ft)})`,isValueIdentity(St,0)]:gt=>[`${dt}(${gt.map(yt=>addUnit(yt,ft)).join(",")})`,isValueIdentity(gt,dt.startsWith("scale")?1:0)])}}),st.length&&(nt.transform=new FluidTransform(st,ot)),super(nt)}},FluidTransform=class extends FluidValue{constructor(rt,et){super(),this.inputs=rt,this.transforms=et,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let rt="",et=!0;return each(this.inputs,(tt,nt)=>{const st=getFluidValue(tt[0]),[ot,ct]=this.transforms[nt](is.arr(st)?st:tt.map(getFluidValue));rt+=" "+ot,et=et&&ct}),et?"none":rt}observerAdded(rt){rt==1&&each(this.inputs,et=>each(et,tt=>hasFluidValue(tt)&&addFluidObserver(tt,this)))}observerRemoved(rt){rt==0&&each(this.inputs,et=>each(et,tt=>hasFluidValue(tt)&&removeFluidObserver(tt,this)))}eventObserved(rt){rt.type=="change"&&(this._value=null),callFluidObservers(this,rt)}},primitives=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];globals_exports.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:createStringInterpolator2,colors:colors2});var host=createHost(primitives,{applyAnimatedValues,createAnimatedStyle:rt=>new AnimatedStyle(rt),getComponentProps:({scrollTop:rt,scrollLeft:et,...tt})=>tt}),animated=host.animated;const AnimatedText=animated(moduleExports.Text),animatedTextStyle={fontSize:KNOB_CONFIG.SIZE.LABEL_FONT,fill:KNOB_CONFIG.COLOR.LABEL,textAlign:"center",padding:8},Label=({name:rt,scaledValue:et,label:tt,radius:nt,isUsed:st})=>{const ot=nt*2+KNOB_CONFIG.SIZE.GAP,ct=`${et.toFixed(1)}${tt}`,[dt,ft]=useSpring(()=>({topTextY:ot,topTextAlpha:1,bottomTextY:ot+16,bottomTextAlpha:0}));return reactExports.useEffect(()=>{ft({topTextY:st?ot-16:ot,topTextAlpha:st?0:1,bottomTextY:st?ot:ot+16,bottomTextAlpha:st?1:0})},[st,ft,nt,ot]),jsxRuntimeExports.jsxs(moduleExports.Container,{children:[jsxRuntimeExports.jsx(AnimatedText,{x:nt,y:dt.topTextY,text:rt,style:animatedTextStyle,anchor:[.5,0],alpha:dt.topTextAlpha}),jsxRuntimeExports.jsx(AnimatedText,{x:nt,y:dt.bottomTextY,text:ct,style:animatedTextStyle,anchor:[.5,0],alpha:dt.bottomTextAlpha})]})},Knob=({id:rt,radius:et,x:tt=0,y:nt=0})=>{const{name:st,label:ot,value:ct,getScaledValue:dt,getNormalisedValue:ft,setNormalisedValue:gt}=useJuceSlider(rt),yt=reactExports.useCallback(Mt=>{const{movementY:kt}=Mt;if(Mt.movementY===0)return;let Dt=1;Mt.shiftKey&&(Dt=.175);const zt=ft(),Lt=-kt*.08*Dt/et,Yt=Math.max(0,Math.min(1,zt+Lt));gt(Yt)},[et,ft,gt]),{isDragging:xt,handleDragStart:St}=useDrag({onDrag:yt}),[wt,bt]=reactExports.useState(!1),Pt=dt(),Rt=xt?"grabbing":"grab";return reactExports.useEffect(()=>{document.body.style.cursor=xt?"grabbing":"auto"},[xt]),jsxRuntimeExports.jsxs(moduleExports.Container,{x:tt,y:nt,eventMode:"dynamic",cursor:Rt,onpointerdown:St,onpointerenter:()=>bt(!0),onpointerleave:()=>bt(!1),children:[jsxRuntimeExports.jsx(Label,{radius:et,name:st,scaledValue:Pt,label:ot,isUsed:xt||wt}),jsxRuntimeExports.jsx(KnobGraphics,{value:ct,radius:et})]})},Knobs=()=>jsxRuntimeExports.jsx(moduleExports.Container,{x:SETTINGS_CONFIG.PADDING,y:SETTINGS_CONFIG.PADDING,children:KNOB_IDS.map((rt,et)=>{const tt=et*SETTINGS_CONFIG.KNOB_RADIUS*2+SETTINGS_CONFIG.GAP*et;return jsxRuntimeExports.jsx(Knob,{id:rt,x:tt,radius:SETTINGS_CONFIG.KNOB_RADIUS},rt)})}),Settings=({parentSize:rt})=>jsxRuntimeExports.jsxs(moduleExports.Container,{x:rt.width/2-SETTINGS_CONFIG.getWidth()/2,y:rt.height-SETTINGS_CONFIG.getHeight()-SETTINGS_CONFIG.MARGIN_BOTTOM,anchor:0,children:[jsxRuntimeExports.jsx(Background,{}),jsxRuntimeExports.jsx(Knobs,{})]}),size={width:window.innerWidth,height:window.innerHeight},App=()=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(Stage,{children:[jsxRuntimeExports.jsx(Dynamics,{size}),jsxRuntimeExports.jsx(Settings,{parentSize:size})]})});clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}))});export default Tp();
